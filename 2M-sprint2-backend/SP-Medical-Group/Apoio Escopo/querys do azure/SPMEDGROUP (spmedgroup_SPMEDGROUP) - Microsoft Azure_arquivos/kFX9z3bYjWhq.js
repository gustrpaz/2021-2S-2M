define("MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/ServiceContainer",["require","exports"],(function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ServiceContainer=void 0;var i=(function(){function n(){if(this._dependencyMap={},n._instance)throw new Error("Error: Instantiation failed: use ServiceContainer.Instance() instead of new.");}return n.Instance=function(){return n._instance||(n._instance=new n),n._instance},n._reset=function(){n._instance=null},n.prototype.register=function(n,t){this._dependencyMap[n]=t},n.prototype.registerIfUnset=function(n,t){return this._dependencyMap[n]?!1:(this._dependencyMap[n]=t,!0)},n.prototype.registerProperties=function(n){var t=this;Object.keys(n).forEach((function(i){t._dependencyMap[i]=n[i]}))},n.prototype.get=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(this._dependencyMap[n])return i=this._dependencyMap[n],typeof i=="function"?i.apply(void 0,r):i},n._instance=null,n})();t.ServiceContainer=i}));
define("MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/Utils/ArmConfigProvider",["require","exports","Fx/Ajax"],(function(n,t,i){"use strict";function r(){return MsPortalFx.trimEnd(i.getEndpoints().arm,"/")}function u(){return window.fx&&window.fx.environment&&window.fx.environment.insightsControllerEndpoint}function f(){var n=MsPortalFx.getFeatureValue("mistendpoint");if(["https://mist.monitor.azure.com","https://mist.aimon.monitor.azure.com","https://mist.int.monitor.azure.com","http://localhost:3000"].indexOf(n)!==-1)return n}Object.defineProperty(t,"__esModule",{value:!0});t.GetMISTEndpoint=t.GetLegacyEndpoint=t.GetArmEndpoint=void 0;t.GetArmEndpoint=r;t.GetLegacyEndpoint=u;t.GetMISTEndpoint=f}));
define("MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/Util",["require","exports","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/Utils/ArmConfigProvider","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/Utils/MappedUtils","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Constants","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/ServiceContainer","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/ResourceTypes"],(function(n,t,i,r,u,f,e){"use strict";function y(n){return n&&n.toLowerCase().indexOf(i.GetArmEndpoint().toLowerCase())!==-1}function p(n){return n&&n.toLowerCase().indexOf(i.GetLegacyEndpoint().toLowerCase())!==-1}function w(n){var t=i.GetMISTEndpoint();return n&&t&&n.toLowerCase().indexOf(t.toLowerCase())!==-1}function h(n){return n?[c(n.resourceDefinition),n.namespace&&n.namespace.name,n.name&&n.name.id,n.query&&n.query.id,n.query&&n.query.kustoQuery,].filter((function(n){return n})).join("-"):""}function c(n){return e.isResourceDefinition(n)?n.id:n?[n.subscription&&n.subscription.subscriptionId,n.resourceType,n.region,].filter((function(n){return n})).join("#"):void 0}function b(n){var t="";return n&&(t=h(n.id),n.metricAggregation&&(t+="#"+u.AggregationString[n.metricAggregation])),t}function k(){var r=s(),n=r.toString(),i=f.ServiceContainer.Instance().get(u.TypeNames.ResourceId),t;return i&&(t=e.getResourceProvider(i),t&&(n=n+": "+t)),n}function d(n){return l(n).then((function(n){return n.reduce((function(n,t){return t&&t[0]?n.concat(t):n}),[])}))}function l(n){return n&&n.length!==0?n.length===1?n[0].then((function(n){return[n]})):Q.allSettled(n).then((function(n){var i,t=[];if(n.forEach((function(n){n.state==="fulfilled"?t.push(n.value):i=n.reason})),t.length>0)return t;throw i;})):Q([])}function g(n,t){return v(n,t,(function(n,t){return e.isResourceDefinition(n)&&e.isResourceDefinition(t)?n.id.toLowerCase()===t.id.toLowerCase():!e.isResourceDefinition(n)&&!e.isResourceDefinition(t)?!!(n.subscription&&t.subscription)&&n.subscription.subscriptionId===t.subscription.subscriptionId&&n.resourceType===t.resourceType&&n.region===t.region:void 0}))}function s(){return o||(o=f.ServiceContainer.Instance().get(u.TypeNames.HostingEnvironment)||u.HostingEnvironment.Localhost),o}function nt(){return s()===u.HostingEnvironment.PortalShell}function tt(){return s()!==u.HostingEnvironment.Localhost}function it(){return r.newGuid()}function rt(n,t){return t===void 0&&(t=!0),r.clone(n,t)}function ut(n,t){return r.array_find(n,t)}function ft(n){var t=0,r,i;if(n.length===0)return t;for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r,t=t&t;return t}function et(n,t,i){return n.replace(new RegExp(ot(t),"g"),i)}function ot(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function st(n,t){if(!n||!t)return[];var i={};return n.forEach((function(n){return i[n]=!0})),t.filter((function(n){return i[n]}))}function ht(n){return a(n).sort()}function a(n){var t={};return n.filter((function(n){return(t[n]=(t[n]||0)+1)===1}))}function ct(n,t){var i={};return n.filter((function(n){var r=t(n);return!i[r]&&(i[r]=!0)}))}function lt(n,t){r.extend(n,t,!0);t&&t.axis&&t.axis.y&&(t.axis.y.min===undefined&&(n.axis.y.min=undefined),t.axis.y.max===undefined&&(n.axis.y.max=undefined))}function at(){var n=document.hidden;return n===undefined?u.VisibilityState.None:n?u.VisibilityState.Hidden:u.VisibilityState.Visible}function v(n,t,i){return!n&&!t?!0:!n&&t||!t&&n?!1:i(n,t)}Object.defineProperty(t,"__esModule",{value:!0});t.UtilDEV=t.isEqualWrapper=t.GetVisibilityState=t.extendVisualization=t.uniqueObjects=t.unique=t.uniqueAndSort=t.intersect=t.replaceAll=t.hashCode=t.find=t.cloneProperties=t.GUID=t.isHostedInsideIbiza=t.isHostedInShell=t.ResourceEquals=t.resolveIfAnySucceed=t.joinAggregatePromises=t.GetEntryPoint=t.GetUniqueId=t.getResourceDefinitionUniqueId=t.GetUniqueMetricId=t.isMISTEndpoint=t.isLegacyEndpoint=t.isArmEndpoint=void 0;t.isArmEndpoint=y;t.isLegacyEndpoint=p;t.isMISTEndpoint=w;t.GetUniqueMetricId=h;t.getResourceDefinitionUniqueId=c;t.GetUniqueId=b;t.GetEntryPoint=k;t.joinAggregatePromises=d;t.resolveIfAnySucceed=l;t.ResourceEquals=g;var o;t.isHostedInShell=nt;t.isHostedInsideIbiza=tt;t.GUID=it;t.cloneProperties=rt;t.find=ut;t.hashCode=ft;t.replaceAll=et;t.intersect=st;t.uniqueAndSort=ht;t.unique=a;t.uniqueObjects=ct;t.extendVisualization=lt;t.GetVisibilityState=at;t.isEqualWrapper=v}));
define("MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/Utils/TelemetryService",["require","exports"],(function(n,t){"use strict";function f(){return{}}function e(n,t,i,f){var e,o,h,s;try{e=i||{};MsPortalFx.extend(e,f);o=!1;(n===4||n===3||n===2)&&(h=n===2?0:1,s=i.ErrorMessage||t,s&&(u.writeEntry(h,s,0,[e]),o=!0));o||r.trace({source:"MonitorChartV2",action:t,actionModifier:"complete",duration:f&&f.Duration,data:e})}catch(c){}}Object.defineProperty(t,"__esModule",{value:!0});t.logTelemetry=t.getCommonTelemetryContext=void 0;var i=MsPortalFx.Base.Diagnostics,r=i.Telemetry,o=i.LogEntryLevel,u=i.createLog(n);t.getCommonTelemetryContext=f;t.logTelemetry=e}));
define("MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Telemetry",["require","exports","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/Utils/MappedUtils","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/Utils/TelemetryService","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Constants","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/ResourceTypes","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/Util"],(function(n,t,i,r,u,f,e){"use strict";function h(){return window.performance?window.performance.now():Date.now()}function y(n){return n&&(n["x-ms-correlation-request-id"]||n["x-ms-request-id"])||""}function d(n){var t={itemDataModelId:n&&n.id,itemDataModel:n,additionCustomProperties:{},customMetrics:{}};return i.extend(t,r.getCommonTelemetryContext()),t}function g(n,t,u,f,e,s){var c=o(t,s,f,e),h=c.properties;u&&i.extend(h,l(u));h.ErrorMessage||(h.ErrorMessage=n);h.ErrorObject||(h.ErrorObject=u);r.logTelemetry(4,"Error logging",h,c.metrics)}function nt(n,t,i,u,f,e){var s=o(t,e,i,u);r.logTelemetry(1,n,s.properties,s.metrics,f)}function tt(n,t,i,u,f){r.logTelemetry(2,n,o(t,f,i,u).properties)}function it(n,t,i,u,f){var e=o(t,f,i,u);e.properties.ErrorMessage||(e.properties.ErrorMessage=n);r.logTelemetry(3,"Warning logging",e.properties,e.metrics)}function rt(n,t,f,e,s,h,c,a){var p,y,w;if(a===undefined)switch(s&&s.userDataStatus){case 1:case 2:case 3:case 5:case 0:a=u.Result.Succeed;break;default:a=u.Result.Fail}(f!==2||a!==u.Result.Succeed)&&(p=o(n,e,h,c),y=p.properties,y.Result=u.Result[a],y.ContainerName=t,s&&(s.userDataStatus&&(y.IsConfigured=v[s.userDataStatus]),s.error&&i.extend(y,l(s.error))),w=f===2?" auto-refresh":" load",r.logTelemetry(1,"Part"+w,y,p.metrics))}function ut(n,t,f,e,s,h){var a=o(undefined,n,s,h),c=l(e);c.Result=u.Result[f];t&&(c.QueryName=t.queryName,c.ContainerName=t.containerName,c.ChartId=t.chartId||c.ChartId,c.ResourceId=t.resourceId||c.ResourceId);i.extend(a.properties,c);r.logTelemetry(1,"Ajax Query",a.properties,a.metrics)}function l(n){var r,i,u,t,f;if(!n)return{ErrorMessage:"extractProperty errorObj is falsy."};if(r=n,ot(r),i={},[s,"number","boolean"].indexOf(typeof n)!==-1)return i.ErrorMessage=n.toString(),i.Status="-1",i;for(u in r)if(r.hasOwnProperty(u)){t=r[u];switch(String(u).toLowerCase()){case"_errordata":t&&(i.Reason=t.reason,i.StatusText=t.statusText,i.Status=t.status);break;case"clientrequestid":i.ClientRequestId=t;break;case"content":f=t&&t.error;f&&(i.ResponseText=f.message,i.ErrorCode=f.code);break;case"headers":i.ClientRequestId=y(t);break;case"message":i.ErrorMessage=t;break;case"reason":t&&(i.Reason=t);break;case"responsetext":t&&(i.ResponseText=typeof t===s?t:JSON.stringify(t));break;case"status":case"httpstatuscode":i.Status=t;break;case"statustext":i.StatusText=t;break;case"timeout":i.Timeout=t;break;case"responsetype":i.ResponseType=t}}return i}function o(n,t,u,f){var s={},o={},e;try{e=n||t&&t.context||r.getCommonTelemetryContext();ft(e,t,s,o);u&&i.extend(s,u);f&&i.extend(o,f);e&&e.customMetrics&&i.extend(o,e.customMetrics)}catch(h){}return{properties:s,metrics:o}}function ft(n,t,r,u){if(r.MEVersion="MEV2",r.VisibilityState=e.GetVisibilityState(),t&&(t.clientRequestIds&&(r.ClientRequestId=t.clientRequestIds.toString()),t.originOperation&&(r.OriginOperation=t.originOperation),i.extend(u,t.getStats())),n){if(r.EntryPoint=n.entryPoint||e.GetEntryPoint(),i.extend(r,n.additionalTelemetryInfo),r.IbizaSessionId=n.sessionId,r.CustomerAlias=n.userAlias,r.PartInstance=n.partId,r.initialItems){var f=[];r.initialItems.forEach((function(n){var t={},i={};p(n,t,i);f.push({properties:t,metrics:i})}));r.initialItems=f}p(n.itemDataModel,r,u)}return r}function p(n,t,r){var b,o;if(n){if(r.MetricsCount=n.metrics&&n.metrics.length,n.metrics&&n.metrics.length>0){var s=[],a=[],v=[],y=[],h=[],p=[],w=[],l=!1;n.metrics.forEach((function(n){var t=i.clone(n,!0),e=t.id.namespace&&t.id.namespace.name,b=[],r=t.id.resourceDefinition,o,k,c;f.isResourceDefinition(r)?(o=r.id,s.push(f.getSubscriptionId(o)),a.push(st(o)),h.push(f.getResourceProvider(o)),b=f.getDefaultNamespaces(o)):r&&(s.push(r.subscription&&r.subscription.subscriptionId),k=r.resourceType,h.push(k),b=f.getDefaultNamespaces(null,k));e&&(c=b.some((function(n){return n.name===e})),e=c?e:"customNamespace",y.push(e),c||(t.id.name.id="customMetricId"),l=l||c);v.push(t.id.name.id);p.push(u.AggregationString[t.metricAggregation]);w.push(f.getMetricBackendProviderType(t.id))}));t.Version=n.version&&(""+n.version.major||"0."+n.version.minor||"0."+n.version.build);t.ChartId||(t.ChartId=n.id);b=n.visualization&&n.visualization.chartType?n.visualization.chartType:2;t.ChartType=c[b];o=n.grouping;o&&o.dimension&&(t.Grouping=l?"customDimensionId":o.dimension.dimensionName.id);t.SubscriptionIds=e.uniqueAndSort(s).toString();t.ResourceIds=e.uniqueAndSort(a).toString();t.Types=e.uniqueAndSort([]).toString();t.Metrics=e.uniqueAndSort(v).toString();t.Namespaces=e.uniqueAndSort(y).toString();t.ResourceProviders=e.uniqueAndSort(h).toString();t.Aggregations=e.uniqueAndSort(p).toString();t.BackendProviderTypes=e.uniqueAndSort(w).toString()}n.filters&&n.filters.OperandFilters&&n.filters.OperandFilters.length>0&&(r.TypeFacetsCount=n.filters.OperandFilters.length)}}function w(n,t){if(!t)throw new Error(n+" did not provide operationTelemetry");return{opTimer:t,opStop:t.createOperationTimer(n)}}function b(n,t){var i=new a(n,t);return{opTimer:i,opStop:i.createOperationTimer(n)}}function et(n,t,i){return t?w(n,t):b(n,i)}function ot(n){var t,i,r;n&&n.responsetext&&n.responsetext.error&&n.responsetext.error.message&&typeof n.responsetext.error.message===s&&n.responsetext.error.message.length>0&&(t=n.responsetext.error.message,i=t.match(/\b\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*\b/g),i&&i.length>0&&(i.forEach((function(n){n&&n.toLowerCase().indexOf("@microsoft.com")===-1&&(r=e.hashCode(n),t=e.replaceAll(t,n,r.toString()))})),n.responsetext.error.message=t))}function st(n){var t=n.toLowerCase();return t=k("password",t),k("pwd",t)}function k(n,t){var r=t.indexOf(n),i;return r!==-1&&(i=t.substring(r,t.length),t=e.replaceAll(t,i,e.hashCode(i).toString())),t}var s,v,c,a;Object.defineProperty(t,"__esModule",{value:!0});t.TelemDEV=t.OperationTelemetry=t.CreateOrAddOperation=t.CreateOperation=t.AddOperation=t.mergeAllProperties=t.logAjaxQuery=t.logContainerLoad=t.logWarning=t.traceMessage=t.logCustomEvent=t.logError=t.updateCommonTelemetryProperties=t.addPromiseToTelemetryContext=t.getOrCreateTelemetryContext=t.getClientRequestId=t.PerformanceNow=void 0;t.PerformanceNow=h;s="string";v=["None","HasData","NoData","VisualOnly","ErrorRetrievingData","NoMetrics","AuthorizationTokenFailed","Throttled"],(function(n){n[n.Bar=1]="Bar";n[n.Line=2]="Line";n[n.Area=3]="Area";n[n.Grid=4]="Grid";n[n.Scatter=7]="Scatter"})(c||(c={}));t.getClientRequestId=y;t.getOrCreateTelemetryContext=d;t.logError=g;t.logCustomEvent=nt;t.traceMessage=tt;t.logWarning=it;t.logContainerLoad=rt;t.logAjaxQuery=ut;t.mergeAllProperties=o;t.AddOperation=w;t.CreateOperation=b;t.CreateOrAddOperation=et;a=(function(){function n(n,t){this._stats={};this.originOperation=n;this.context=t;this.clientRequestIds=[]}return n.prototype.createOperationTimer=function(n){var t=this,i=h();return this._stats[n]=this._stats[n]||[],function(r){t._stats[n].push(h()-i);r&&(t.context=r)}},n.prototype.getStats=function(){return this._stats},n})();t.OperationTelemetry=a}))