define("MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/DataModels/TimeContext",["require","exports","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/ChartUtils","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/DateUtils","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/TimeUnits","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/TimeUtils","MsPortalImpl.Controls/Controls/Visualization/MonitorChartV2/AI/ME/Utilities/Util"],(function(n,t,i,r,u,f,e){"use strict";function c(n,t,i){var f=r.dateSpanToSeconds(t)*1e3,u=s(n,t),e=n.getTime()-u.getTime();return e>f/2?o(n,t):e===f/2?i?o(n,t):u:u}function l(n,t){var i={absolute:n,options:{grain:t}};return new h(i)}function o(n,t){var i=s(n,t);return r.compare(i,n)?r.addSeconds(i,r.dateSpanToSeconds(t)):i}function s(n,t){var i=r.getMidnightLastMonday(n),f=(n.getTime()-i.getTime())%u.convert(r.dateSpanToSeconds(t),1e3,1);return r.addMilliseconds(n,-f)}Object.defineProperty(t,"__esModule",{value:!0});t.TimeDEV=t.TimeContext=void 0;var h=(function(){function n(n){this.update(n)}return n.prototype.getDurationMs=function(){if(f.isRelativeDataObject(this._data))return this._data.relative.duration;var n=this._data.absolute;return r.compare(n.endTime,n.startTime)},n.prototype.getTimerange=function(n){var t,i;return f.isRelativeDataObject(this._data)?(t=n||new Date,{startTime:r.addMilliseconds(t,-this._data.relative.duration),endTime:t}):(i=this._data.absolute,{startTime:i.startTime,endTime:i.endTime})},n.prototype.getUseDashboardTimeRange=function(){return!!this._data.options.useDashboardTimeRange},n.prototype.getShowUTCTime=function(){return!!this._data.options.showUTCTime},n.prototype.getGrain=function(){return this._data.options.grain},n.prototype.setGrain=function(n){this._data.options.grain=n},n.prototype.getAppliedISOGrain=function(){return this._data.options.appliedISOGrain},n.prototype.setAppliedISOGrain=function(n){this._data.options.appliedISOGrain=n},n.prototype.update=function(n){this._data=n},n.prototype.isCustom=function(){return!this.getIsRelative()||this.getGrain()!==1},n.prototype.getJsonString=function(){return JSON.stringify(this._data,undefined,2)},n.prototype.toTimeContextOptionData=function(){return e.cloneProperties(this._data.options)},n.prototype.toDataObject=function(){return e.cloneProperties(this._data)},n.prototype.clone=function(){return new n(this.toDataObject())},n.prototype.cloneMetricTimespan=function(n){var t,r;return t=this._data.options.appliedISOGrain?this._data.options.appliedISOGrain:i.ConvertToISO8601Grain(i.getGrainDateSpanFromTimeContext(this),n),this.getIsRelative()?{relative:{durationMs:this.getDurationMs()},timeGrain:t}:(r=this.getTimerange(),{absolute:{startTime:r.startTime,endTime:r.endTime},timeGrain:t})},n.prototype.toString=function(){var n=this.getTimerange();return(this.isCustom()?"Custom":"Standard")+" TimeRange "+n.startTime.toISOString()+" - "+n.endTime.toISOString()},n.prototype.getIsRelative=function(){return f.isRelativeDataObject(this._data)},n.prototype.getHasAutoGrain=function(){var n=this.getGrain();return n===1||!n},n.prototype.getSnappedTimeContext=function(n,t,i){var r=this.getTimerange(i),f,u,e,h;return t?(f=c(r.startTime,n,!1),u=c(r.endTime,n,!0),f.getTime()===u.getTime()&&(e=o(r.endTime,n),h=s(r.endTime,n),e.getTime()-u.getTime()>u.getTime()-h.getTime()?u=e:f=h),l({startTime:f,endTime:u},this.getGrain())):l({startTime:r.startTime,endTime:r.endTime},this.getGrain())},n})();t.TimeContext=h}))