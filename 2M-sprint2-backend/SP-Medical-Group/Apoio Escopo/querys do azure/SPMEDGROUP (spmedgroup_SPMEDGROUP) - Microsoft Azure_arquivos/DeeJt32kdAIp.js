define("MsPortalImpl/Controls/Controls.Essentials.Component",["require","exports","Weave/DirectMode","Weave","MsPortalImpl/Resources/ImplScriptResources","_generated/MsPortalImpl/Svg/Library/Loading/EllipsisSquare.svg","MsPortalImpl/Base/Base.KnockoutExtensions.Copy","FxInternal/Weave/Util","MsPortalImpl/Weave/Util","Fx/Weave","MsPortalImpl/Weave/LazyControls","MsPortalImpl/Weave/Components"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";function p(n,u,f,e,s){var c=v(),l=v(),a=u.lines;return i(r.If,{condition:h.toComputation(u.visible,o.trueComputation),concealmentBehavior:"remove",trueFn:function(){var r;return i("div",{className:t.widgetItemClass,tabindex:"-1","aria-labelledby":c,"data-side":n},i("div",{className:[t.widgetLabelContainerClass,n==="left"?t.widgetLabelContainerLeftClass:t.widgetLabelContainerRightClass]},i("label",{className:[t.widgetLabelClass,"fxs-portal-subtext"],id:c,title:u.label},u.label),u.movableLabelExists?i("span",{role:"presentation",className:"fxc-essentials-move"},"(",i("button",{role:"link",className:[t.fxPrimaryTextClass,"fxc-essentials-move-button",{"fxc-disabled":f.disabled}],fxclick:u.movableOnClick,id:l,"aria-labelledby":[c,l].join(" "),"aria-disabled":f.disabled,tabindex:f.tabIndex},u.movableLabel),")"):null),i("div",{className:[t.widgetItemLabelSplitterClass,(r={},r[t.widgetInvisibleClass]=s,r)]},":"),i("div",{className:t.widgetItemValueWrapperClass},a?a.map((function(t){return w(e,t,f,n,c)})):w(e,u,f,n,c)))}})}function w(n,u,e,o,s){var c,l,v=h.toComputation(u.icon),a=r.composeComputation([v],(function(n){return n&&n.image})),y=r.composeComputation([v],(function(n){return n&&n.position})),p=h.toComputation(u.loading),w=h.toComputation(u.valueExists);return i("div",{className:[t.widgetItemItemValueContainerClass,o==="left"?t.widgetItemItemValueContainerLeftClass:t.widgetItemItemValueContainerRightClass,(c={},c[t.widgetItemValueContainerHasIconClass]=a,c),]},i(r.If,{condition:h.toComputation(u.loading),concealmentBehavior:"remove",trueFn:function(){return i("div",{className:[t.widgetItemLoadingClass,t.portalTextClass],image:f})}}),i(r.If,{condition:r.composeComputation([p,w],(function(n,t){return!n&&!t})),concealmentBehavior:"remove",trueFn:function(){return i("div",{className:[t.widgetItemEmptyClass,t.widgetItemValueClass,t.portalTextClass],tabindex:"0","aria-label":'"---"',"aria-describedby":n.descId},"---")}}),i("div",{className:[t.widgetItemValueContainerClass,(l={},l[t.widgetInvisibleClass]=r.composeComputation([p,w],(function(n,t){return n||!t})),l)]},b(y,a,0),g(u,n,e,s),b(y,a,1)))}function g(n,u,f,o){var c=v(),l=function(t,i){var u=i.createChildLifetime();r.subscribeAndRun(u,[h.toComputation(n.loading),h.toComputation(n.valueExists)],(function(r,f){if(!r&&f){var o=n.value;e.initializeCopyBinding(t.parentElement,o,{hideTextbox:!0},i);u.dispose()}}))},s=h.toComputation(n.value);switch(n.type){case 4:case 5:return i("a",{className:[y,{"fxc-disabled":f.disabled}],fxclick:n.onClick,id:c,"aria-labelledby":c,"aria-disabled":f.disabled,tabindex:f.tabIndex,"aria-describedby":o,title:s,afterMount:l},s);case 3:return i("button",{className:[y,{"fxc-disabled":f.disabled}],fxclick:n.onClick,id:c,"aria-labelledby":c,"aria-disabled":f.disabled,tabindex:f.tabIndex,"aria-describedby":o,title:s,afterMount:l},s);case 2:return i("a",{className:[y,{"fxc-disabled":f.disabled}],href:"#",fxclick:n.onClick,id:c,"aria-labelledby":c,"aria-disabled":f.disabled,tabindex:f.tabIndex,"aria-describedby":o,title:s,afterMount:l},s);case 1:return i("div",{className:[t.widgetItemValueClass,t.portalTextClass,{"fxc-disabled":f.disabled}],tabindex:r.composeComputation([s],(function(n){return(MsPortalFx.isNullOrUndefined(n)?"":n.toString().trim())?"0":"-1"})),"aria-label":s,"aria-describedby":o,title:s,afterMount:l},s);default:return null}}function b(n,u,f){var e=f===0||f===3,o=t.widgetItemValueIconClass+" "+t.widgetItemValueIconClass+"-"+(e?"left":"right");return i(r.If,{condition:r.composeComputation([n,u],(function(n,t){return t&&n===f})),concealmentBehavior:"remove",trueFn:function(){return i("span",{className:o,image:u})}})}function nt(n,u,e,s){var l,y,p=n.options,k=p.hiddenChangeLink&&~p.hiddenChangeLink.indexOf(6),w=v(),b=v();return i("div",{className:t.widgetItemClass,tabindex:"-1"},i("div",{className:[t.widgetLabelContainerClass,t.widgetLabelContainerLeftClass]},i("label",{className:[t.widgetLabelClass,"fxs-portal-subtext"],id:w},a.tags),k?null:i("span",{role:"presentation",className:"fxc-essentials-move"},"(",i("button",{role:"link",className:[t.fxPrimaryTextClass,t.widgetEditTagClass,{"fxc-disabled":e.disabled}],id:b,"aria-labelledby":[w,b].join(" "),"aria-disabled":e.disabled,tabindex:e.tabIndex},a.change),")")),i("div",{className:[t.widgetItemLabelSplitterClass,(l={},l[t.widgetInvisibleClass]=s,l)]},":"),i("div",{className:[t.widgetItemLoadingClass,t.portalTextClass,(y={},y[t.widgetInvisibleClass]=h.toComputation(u.fetchingResourceData).compose(o.negation),y)],image:f}),i(r.If,{condition:u.noTags,concealmentBehavior:"remove",trueFn:function(){var n;return i("button",{className:[t.fxPrimaryTextClass,"fxc-essentials-notags-button",t.widgetEditTagClass,(n={},n[t.widgetInvisibleClass]=h.toComputation(u.fetchingResourceData),n["fxc-disabled"]=e.disabled,n)],"aria-disabled":e.disabled,tabindex:e.tabIndex},a.noTagsLabel)},falseFn:function(){var n;return i(c.LazyPillCollection,{className:["fxc-essentials-tags-list",(n={},n[t.widgetInvisibleClass]=h.toComputation(u.fetchingResourceData),n)],vm:u.tagsPillList})}}))}var y;Object.defineProperty(t,"__esModule",{value:!0});t.EssentialsInner=t.widgetInvisibleClass=t.widgetEditTagClass=t.fxPrimaryTextClass=t.portalTextClass=t.widgetItemLabelSplitterClass=t.widgetViewAllButtonClass=t.widgetItemValueIconClass=t.widgetItemValueClass=t.widgetItemValueContainerHasIconClass=t.widgetItemValueContainerClass=t.widgetItemValueWrapperClass=t.widgetLabelClass=t.widgetItemItemValueContainerRightClass=t.widgetItemItemValueContainerLeftClass=t.widgetItemItemValueContainerClass=t.widgetLabelContainerRightClass=t.widgetLabelContainerLeftClass=t.widgetLabelContainerClass=t.widgetItemEmptyClass=t.widgetItemLoadingClass=t.widgetItemClass=t.widgetColumnContainerClass=t.widgetColumnClass=t.widgetCollapseButtonClass=t.widgetExpandButtonClass=t.widgetAccordionButtonClass=void 0;t.widgetAccordionButtonClass="fxc-essentials-accordion-toggle";t.widgetExpandButtonClass="fxc-essentials-expand-button";t.widgetCollapseButtonClass="fxc-essentials-collapse-button";t.widgetColumnClass="fxc-essentials-column";t.widgetColumnContainerClass="fxc-essentials-column-container";t.widgetItemClass="fxc-essentials-item";t.widgetItemLoadingClass="fxc-essentials-item-loading";t.widgetItemEmptyClass="fxc-essentials-item-empty";t.widgetLabelContainerClass="fxc-essentials-label-container";t.widgetLabelContainerLeftClass="fxc-essentials-label-container-left";t.widgetLabelContainerRightClass="fxc-essentials-label-container-right";t.widgetItemItemValueContainerClass="fxc-essentials-item-value-container";t.widgetItemItemValueContainerLeftClass="fxc-essentials-item-value-container-left";t.widgetItemItemValueContainerRightClass="fxc-essentials-item-value-container-right";t.widgetLabelClass="fxc-essentials-label";t.widgetItemValueWrapperClass="fxc-essentials-value-wrapper";t.widgetItemValueContainerClass="fxc-essentials-value-container";t.widgetItemValueContainerHasIconClass="fxc-essentials-value-container-has-icon";t.widgetItemValueClass="fxc-essentials-value";t.widgetItemValueIconClass="fxc-essentials-value-icon";t.widgetViewAllButtonClass="fxc-essentials-viewall-button";t.widgetItemLabelSplitterClass="fxc-essentials-item-label-splitter";t.portalTextClass="fxs-portal-text";t.fxPrimaryTextClass="msportalfx-text-primary";t.widgetEditTagClass="fxc-essentials-edittag";t.widgetInvisibleClass="fxs-display-none";var a=u.Controls.Essentials,k=0,v=function(){return"_essentials_"+k++},d=function(u){var c=u.vm,f=u.state,e=h.toComputation(c.expanded),v=e.compose(o.negation),y=f.spreadOutLayout.compose(o.negation);return i(r.GetContext,{fn:function(u){var w,b,k,o=s.aggregateContext(u,c,f),h=o.disabled,d=o.tabIndex;return i(r.SetContext,{disabled:h,tabIndex:d},i("div",{className:"fxc-essentials-container fxs-portal-border"},i("div",{className:["fxc-essentials-accordion","fxs-portal-hover"]},i("button",{title:a.Label.collapse,"aria-label":a.Label.collapse,"aria-controls":f.controlId,className:[t.widgetExpandButtonClass,"fxs-portal-hover",t.widgetAccordionButtonClass],"aria-disabled":h,disabled:h,tabindex:d,"aria-expanded":e},i("div",{className:["fxc-essentials-expand-icon","fxs-portal-svg",(w={},w["fxt-essentials-expand-svg"]=e,w["fxt-essentials-collapse-svg"]=v,w)]},i(l.ShellHtml,{content:f.collapseIcon.data,skipSanitization:!0,require:n})),i("div",{className:["fxs-portal-text","fxc-essentials-accordion-text"]},a.essentials)),i("div",{className:"fxc-essentials-cost-and-json"},MsPortalFx.isFeatureEnabled("essentialscostview")?i("a",{href:"#",className:["fxs-portal-border","fxc-essentials-costview-text"]},a.costInformation):null,MsPortalFx.isFeatureEnabled("essentialsjsonview")?i("a",{href:"#",className:["fxc-essentials-jsonview-text"]},a.resourceInformation):null)),i("div",{id:f.controlId,className:[t.widgetColumnContainerClass,(b={},b[t.widgetInvisibleClass]=v,b)],"aria-label":a.listProps},i("div",{id:f.descId,"aria-hidden":"true",className:"fxs-hide-accessible-label"},window.navigator.platform.indexOf("Mac")>=0?a.Copy.mac:a.Copy.win),i("div",{"aria-live":"polite","aria-atomic":"true",className:"fxs-hide-accessible-label"},f.copyTextAriaLive),i("div",{className:t.widgetColumnClass,"data-side":"left"},i(r.ForEach,{collection:f.leftItems,fn:function(n){var t=n.item;return p("left",t,o,f,y)}})),i("div",{className:t.widgetColumnClass,"data-side":"right"},i(r.ForEach,{collection:f.rightItems,fn:function(n){var t=n.item;return p("right",t,o,f,y)}}))),i(r.If,{condition:f.showTags,concealmentBehavior:"remove",trueFn:function(){var n;return i("div",{className:["fxc-essentials-tags-container",(n={},n[t.widgetInvisibleClass]=v,n)]},nt(c,f,o,y))}}),i("div",{className:["fxc-essentials-viewall-button-container",(k={},k[t.widgetInvisibleClass]=r.composeComputation([e,f.showViewAllButton],(function(n,t){return!n||!t})),k)]},i("button",{className:["msportalfx-text-primary",t.widgetViewAllButtonClass,{"fxc-disabled":h}],role:"button","aria-controls":f.controlId,"aria-disabled":h,"aria-expanded":f.viewAll,tabindex:d},f.viewAllSwitchText))))}})};t.EssentialsInner=d;y=[t.fxPrimaryTextClass,t.widgetItemValueClass,t.portalTextClass]}));
define("_generated/Less/MsPortalImpl/Controls/Controls.Essentials.css",["module"],(function(n){"use strict";return{css:'.fxc-essentials{flex:0 0 auto}.fxc-essentials .fxc-disabled{pointer-events:none;cursor:default}.fxc-essentials .msportalfx-text-primary{padding:0;border:0;cursor:pointer}.fxc-essentials-cost-and-json{display:flex;flex-direction:row}.fxc-essentials-jsonview-text,.fxc-essentials-costview-text{margin-left:auto;white-space:nowrap;padding-left:10px;cursor:pointer}.fxc-essentials-jsonview-text{padding-right:10px}.fxc-essentials-costview-text::after{content:"";height:16px;width:1px;padding-left:10px;border-right-style:solid;border-right-width:1px;border-right-color:inherit}.fxc-essentials-container{position:relative}.fxc-essentials-container::after{content:"";display:block;margin-left:20px;margin-right:20px;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:inherit}.fxc-essentials-border{padding-top:22px;border-bottom-width:1px;border-bottom-style:solid;margin:0 20px}.fxc-essentials-accordion{height:28px;line-height:28px;box-sizing:border-box;margin:0 20px;display:flex;flex-direction:row}.fxc-essentials-accordion-text{float:left;margin-left:5px;margin-right:auto}.fxc-essentials-expand-icon{display:grid;width:8px;height:8px;padding:5px}.fxt-essentials-expand-svg{transform:rotate(-90deg)}.fxt-essentials-collapse-svg{transform:rotate(90deg)}.fxc-essentials-expand-button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;width:100%;height:100%;background:transparent;border:0;padding:0;margin:0;display:flex;align-items:center;font-size:13px;font-weight:600}.fxc-essentials-collapse-button{cursor:pointer;width:calc(100% - 40px);height:28px;border:0;padding:0;margin:0 20px;display:block;position:absolute;bottom:1px;left:0;right:0}.fxc-essentials-column-container{padding-top:4px;width:100%}.fxc-essentials-column-container::after{content:" ";clear:both;display:block}.fxc-essentials-column{box-sizing:border-box;float:left;width:50%}.fxc-essentials-column[data-side="left"] .fxc-essentials-item,.fxc-essentials-column[data-side="right"] .fxc-essentials-item{clear:both}.fxc-essentials-item{box-sizing:border-box;padding:4px 10px;margin:0 10px}.fxc-essentials-item .msportalfx-text-primary:hover{text-decoration:underline}.fxc-essentials-item .fxc-copyablelabel-textbox .azc-input{font-size:13px;height:18px;line-height:18px}.fxc-essentials-item .fxs-copyfield-wrapper{height:100%}.fxc-essentials-item-loading{display:inline-block;width:18px;height:18px}.fxc-essentials-label-container .msportalfx-text-primary{display:inline;font-size:inherit;overflow:hidden;text-overflow:ellipsis}.fxc-essentials-label{font-size:13px;line-height:18px;text-overflow:ellipsis;overflow:hidden}.fxc-essentials-move{display:inline-block;margin-left:4px;font-size:13px;line-height:18px}.fxc-essentials-move-button{line-height:18px}.fxc-essentials-item-value-container{height:18px;padding-top:4px}.fxc-essentials-item-value-container:first-child{padding-top:0}.fxc-essentials-value-container{position:relative;height:18px;padding-right:25px;display:inline-flex;max-width:100%;box-sizing:border-box}.fxc-essentials-value-container.fxs-copyfield-container.fxs-copyfield-copied .fxs-copyfield{width:24px}.fxc-essentials-value{white-space:nowrap;overflow:hidden;font-size:13px;height:18px;line-height:18px;display:inline-block;text-overflow:ellipsis;text-align:left;max-width:100%}.fxc-essentials-value-icon{display:inline-block;width:18px;height:18px}.fxc-essentials-value-icon-left{margin-right:4px}.fxc-essentials-value-icon-right{margin-left:4px}.fxc-essentials-notags-button{height:18px;white-space:nowrap}.fxc-essentials-tags-container{padding-top:5px}.fxc-essentials-tags-list{margin-top:2px;margin-left:-5px;width:auto;flex:1 0 auto}.fxc-essentials-viewall-button-container{clear:both;float:none;height:20px;padding:10px 10px 0 10px;margin:0 10px}.fxc-essentials-viewall-button{font-size:13px}.fxc-essentials-viewall-button:hover{text-decoration:underline}.fxc-essentials-spread-out .fxc-essentials-item{display:flex;padding:5px 15px}.fxc-essentials-spread-out .fxc-essentials-label-container{flex:0 0 auto;white-space:nowrap;text-overflow:ellipsis;display:inline-flex;overflow:hidden}.fxc-essentials-spread-out .fxc-essentials-item-label-splitter{flex:0 0 15px;text-align:center}.fxc-essentials-spread-out .fxc-essentials-value-wrapper{flex:1 0 auto;max-width:100%}.fxc-essentials-spread-out .fxc-essentials-viewall-button-container{padding:10px 15px 0}.fxc-essentials-spread-out .fxc-essentials-tags-list{margin-top:0}.fxc-essentials-spread-out .fxc-essentials-tags-container .fxc-essentials-label-container,.fxc-essentials-spread-out .fxc-essentials-tags-container .fxc-essentials-item-label-splitter,.fxc-essentials-spread-out .fxc-essentials-tags-container .fxc-essentials-notags-button{margin-top:5px}.fxc-essentials-spread-out .fxc-essentials-tags-container .fxc-essentials-item{padding-top:0}',moduleId:n.id}}));
define("_generated/MsPortalImpl/Svg/Library/Controls/Chevron.svg",["require","exports"],(function(){"use strict";return{type:1,data:"<svg viewBox='0 0 11 17' class='msportalfx-svg-placeholder' role='presentation' focusable='false' xmlns:svg='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g><title><\/title><path d='M2.414 17L1 15.586l7.071-7.071L1 1.443 2.414.029l8.485 8.486z' class='msportalfx-svg-c05'/><\/g><\/svg>"}}));
define("MsPortalImpl/Controls/Controls.Essentials",["require","exports","Fx/Controls/Pill","Fx/Controls/PillCollection","Fx/ResourceManagement","MsPortalImpl.Controls/Controls/Base/ViewModelBase","MsPortalImpl.Controls/Controls/ResourceFilterHelper","FxInternal/Controls/Essentials","Viva.Controls/Util/Viva.Resize","MsPortalImpl/Base/Base.FeatureDetection","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.ArmIdHelpers","_generated/MsPortalImpl/Svg/Library/Controls/Chevron.svg","MsPortalImpl/UI/UI.AuthStateManager","MsPortalImpl/Services/Services.ProjectedDirectories","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl.Controls/Controls/Base/Base","MsPortalImpl/Controls/Controls.Essentials.Component","Weave/Core/Computation","FxInternal/Css","_generated/Less/MsPortalImpl/Controls/Controls.Essentials.css","MsPortalImpl/Base/Base.Selectable2","Fx/Weave","Weave","Fx/Composition/Selectable","MsPortalImpl/Base/Base.KnockoutExtensions.Copy"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt){"use strict";function gt(n){var t=(n||"").toLowerCase();return t.startsWith("hidden-")||t.startsWith("link:")}function et(n,t,i,r){ft.Diagnostics.Telemetry.trace({source:"Essentials",action:n,name:t,data:i,actionModifier:r})}var lt,pt,wt;Object.defineProperty(t,"__esModule",{value:!0});t.Widget=t.WidgetUIState=t.InnerTsxComponent=void 0;d.injectCss(g);var ft=MsPortalFx.Base,bt=ft.Diagnostics,at=bt.Telemetry.Context,kt=MsPortalFx.getUniqueId,ot=window,st={containerWidthBaseline:1007,labelMaxWidth:155,marginWidth:105},ht=5,vt="fxc-essentials",ct="fxc-essentials-spread-out",ut=c.Controls.Essentials,yt=c.ResourceFilter.Directory.unknownText,dt=new ft.Diagnostics.Log("MsPortalImpl/Controls/Controls.Essentials");lt=MsPortalFx.memoizeQ((function(n){return e.getLocations().then((function(t){var i=(n.location||"").toLowerCase();return(MsPortalFx.find(t,(function(n){return n.name.toLowerCase()===i}))||{}).displayName||n.location}))}));t.InnerTsxComponent=b.EssentialsInner;pt=(function(n){function t(t){var i=n.call(this)||this,u,f;return i.collapseIcon=ft.Images.CustomImageWithOptions(a,{}),i.viewAll=it.makeWritableComputation(!1),i.viewAllSwitchText=i.viewAll.compose((function(n){return n?ut.seeLess:ut.seeMore})),i.showTags=it.makeWritableComputation(!1),i.copyTextAriaLive=it.makeWritableComputation(""),i.showViewAllButton=it.makeWritableComputation(!1),i.leftItems=it.makeWritableComputation(),i.rightItems=it.makeWritableComputation(),i.noTags=it.makeWritableComputation(!0),i.fetchingResourceData=ko.observable(!1),i.spreadOutLayout=it.makeWritableComputation(!1),i.controlId=kt(),i.descId=i.controlId+"-desc",u=t.vm.options,u.resourceId&&(i.tagsPillList=r.create(i._ltm,{multipleRows:!1,theme:2,ariaLabel:ut.tags,items:[]}),f=u.hiddenBuiltInTypes&&u.hiddenBuiltInTypes.indexOf(6)>=0,i.showTags(u.includeTags&&!f)),i}return __extends(t,n),t})(w.WidgetUIState);t.WidgetUIState=pt;wt=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this,p,s,w,h,c;f._staticItems={left:[],right:[]};f._events=[];f._lastKnownContainerWidth=0;f._armData={resourceGroup:{value:ko.observable(null),movableOnClick:ko.observable(MsPortalFx.noop),onClick:{resourceId:ko.observable(null),onLinkOpened:function(){et("EssentialsClick","ResourceGroup",{bladeInstance:f._bladeInstanceId(),resourceId:f.vm.options.resourceId||""})}}},status:{value:ko.observable(null)},location:{value:ko.observable(null),movableOnClick:ko.observable(MsPortalFx.noop)},subscriptionName:{value:ko.observable(null),movableOnClick:ko.observable(MsPortalFx.noop),onClick:{resourceId:ko.observable(null),onLinkOpened:function(){et("EssentialsClick","Subscription",{bladeInstance:f._bladeInstanceId(),resourceId:f.vm.options.resourceId||""})}}},subscriptionId:{value:ko.observable(null)},directoryName:{value:ko.observable(null)},directoryId:{value:ko.observable(null)}};f._showTenantInfo=ko.observable(!1);f._bladeInstanceId=ko.observable("");u=f.state;var e=f.vm,b=e.options,l=MsPortalFx.isFeatureEnabled("essentialsjsonview")?f.element.findByClassName("fxc-essentials-jsonview-text").get(0):null,a=MsPortalFx.isFeatureEnabled("essentialscostview")?f.element.findByClassName("fxc-essentials-costview-text").get(0):null,o=b.resourceId;if(f._bladeInstanceId(at.getBladeContext()?at.getBladeContext().instanceId:null),o){if(f._processAndRender(),MsPortalFx.isFeatureEnabled("msptitle")&&(s=r.diContainer,p=ft.Promises.cancelOnDispose(f.ltm,Q.all([s.getAsync(y.ServicesProjectedDirectories).then((function(n){return n.getDirectoryByResourceId(o)})),s.getAsync(v.AuthStateManager).then((function(n){return n.getUserInfo()})),]).then((function(n){var t=n[0],i=n[1];if(!t||t.id!==i.directoryId)return f._showTenantInfo(!0),t?{directoryName:t.displayName,directoryId:t.id}:{directoryId:""}})))),e.resource.subscribeAndRun(f.ltm,(function(n){u.fetchingResourceData(!0);var t=(n?f._getResourceInfo(n):Q(null)).then((function(n){return!n&&!e.options.skipResourceFetching?e.getResourceInfo(u.showTags.value):n})),i=Q.all([t,p||Q(null),]).spread((function(n,t){return n&&t?MsPortalFx.extend(n,t):n})).then((function(n){f.resourceData=n;u.fetchingResourceData(!1);f._processItems();f._processTags()}));ft.Promises.cancelOnDispose(f.ltm,i)})),MsPortalFx.isFeatureEnabled("essentialsjsonview")){w=new rt.PdlBladeReference("EssentialsResourceBlade","HubsExtension",{parameters:{resourceId:o}});h=nt.getFxClickSelectable(r.diContainer,f.ltm,t,"fxClick","fxClickID");$(l).on("click",(function(n){n.preventDefault();n.stopPropagation();et("EssentialsClick","Json",{bladeInstance:f._bladeInstanceId(),resourceId:f.vm.options.resourceId||"",accordionState:f.vm.expanded()?"Expanded":"Collapsed"});h.openContextPane(w);h.invokeClick(f.vm,(function(){}),n)}))}if(MsPortalFx.isFeatureEnabled("essentialscostview")){c=new rt.PdlBladeReference("CostAnalysis","Microsoft_Azure_CostManagement",{parameters:{scope:o}});$(a).on("click",(function(n){if(n.preventDefault(),n.stopPropagation(),et("EssentialsClick","Cost",{bladeInstance:f._bladeInstanceId(),resourceId:f.vm.options.resourceId||"",accordionState:f.vm.expanded()?"Expanded":"Collapsed"}),e.containerHasMenu&&MsPortalFx.isFeatureEnabled("essentialscostinmenuview"))e.openBladeInMenuContext(c);else{var i=nt.getFxClickSelectable(r.diContainer,f.ltm,t,"fxClick","fxClickID");i.openBlade(c);i.invokeClick(f.vm,(function(){}),n)}}))}e.newTags.subscribe(f.ltm,(function(n){f._processTags(n)}))}else MsPortalFx.isFeatureEnabled("essentialsjsonview")&&(l.style.display="none"),MsPortalFx.isFeatureEnabled("essentialscostview")&&(a.style.display="none"),f._processAndRender();return f}return __extends(t,n),t.prototype.toggleColumnContainerVisibility=function(){this.element.findByClassName(b.widgetColumnContainerClass).toggleClass(b.widgetInvisibleClass)},t.prototype._getColumnLabelMaxWidth=function(n){var u=this.element.find("."+b.widgetColumnClass+"[data-side='"+n+"']"),i=!1,r,t;return this.element.findByClassName(b.widgetColumnContainerClass).hasClass(b.widgetInvisibleClass)&&(i=!0,this.toggleColumnContainerVisibility()),r=u.findByClassName(b.widgetLabelContainerClass),t=0,r.each((function(n,i){var u=$(i).children(),r=u[0].getBoundingClientRect().width;u.length>1&&(r+=u[1].getBoundingClientRect().width+4);r=Math.ceil(r);r>t&&(t=r)})),i&&this.toggleColumnContainerVisibility(),t>=st.labelMaxWidth?st.labelMaxWidth:t},t.prototype._spreadLayoutProcess=function(n){var t,i;t=n?n:this.element[0].getBoundingClientRect().width;i=this.state;t-=h.getScrollbarWidth();this._lastKnownContainerWidth=t;var s=t/2,f=this.element.findByClassName(b.widgetLabelContainerLeftClass),e=this.element.findByClassName(b.widgetLabelContainerRightClass),r=this.element.findByClassName(b.widgetItemItemValueContainerLeftClass),o=this.element.findByClassName(b.widgetItemItemValueContainerRightClass),u=this.element.findByClassName(b.widgetColumnContainerClass),c=this.element.findByClassName("fxc-essentials-column"),y=this.element.findByClassName("fxc-essentials-tags-container"),p=this.element.findByClassName("fxc-essentials-tags-list");if(c.css("width","50%"),t>=st.containerWidthBaseline){u.css("display","block");f.css("width","100%");e.css("width","100%");r.css("width","100%");o.css("width","100%");var l=this._getColumnLabelMaxWidth("left"),a=this._getColumnLabelMaxWidth("right"),v=st.marginWidth/2,w=Math.floor(s-l-v),k=Math.floor(s-a-v);this.element.addClass(ct);f.css("width",l+"px");e.css("width",a+"px");r.css("width",w+"px");o.css("width",k+"px");i.spreadOutLayout(!0)}else this.element.removeClass(ct),u.css("display","block"),f.css("width","100%"),e.css("width","100%"),r.css("width","100%"),o.css("width","100%"),i.spreadOutLayout(!1),t<623&&(u.css("display","flex"),u.css("flex-direction","column"),t>=463?(this.element.addClass(ct),i.spreadOutLayout(!0),y.css("width","50%")):c.css("width","100%"));p.width(r.width())},t.prototype.itemTypeDetector=function(n){var t=ko.unwrap(n.onClick),i=typeof t;if(i==="function")return 3;if(i==="object"){if(t.hasOwnProperty("uri"))return 2;if(t.hasOwnProperty("bladeReference"))return 4;if(t.hasOwnProperty("resourceId"))return 5}return 1},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement(vt),n.prototype.dispose.call(this))},t.prototype._getResourceInfo=function(n){var i=this,t=u.ArmId.parse(n.id,!0);return l.isResourceAtAnyLevel(t)?lt(n).then((function(r){var f=t.subscription?MsPortalFx.Azure.getSubscriptionInfo(t.subscription):Q(null);return f.then((function(f){return{resourceGroupName:t.resourceGroup,resourceGroupId:u.ArmId.stringify(t,4),subscriptionName:f&&f.displayName,subscriptionId:f&&t.subscription,location:r,tags:i._userModifiedTags?i._userModifiedTags:o.convertStringMapToTagInfoArray(n.tags),zones:n.zones,moveOptions:{resourceGroup:!0,subscription:!0,location:!0}}}))})):t.kind===4?lt(n).then((function(r){return MsPortalFx.Azure.getSubscriptionInfo(t.subscription).then((function(u){return{resourceGroupName:t.resourceGroup,resourceGroupId:n.id,subscriptionName:u.displayName,subscriptionId:t.subscription,location:r,tags:i._userModifiedTags?i._userModifiedTags:o.convertStringMapToTagInfoArray(n.tags),moveOptions:{resourceGroup:!1,subscription:!0,location:!1}}}))})):Q(null)},t.prototype._createTagPill=function(n,t,r){var u=this;return i.create(n,{showRemoveButton:!1,getKeyText:function(n){return n.key},getOperatorText:function(){return":"},getValueText:function(n){return n.value},ariaLabel:t+" : "+r,value:{key:t,value:r},infoBalloonContent:{htmlTemplate:"<span data-bind='text:tagKey'><\/span><span> : <\/span><span data-bind='text:tagValue'><\/span>",viewModel:{tagKey:t,tagValue:r}},createEditor:function(){return{onClick:function(){var n={resourceId:u.vm.options.resourceId,key:t,value:r};ft.Promises.cancelOnDispose(u.ltm,u.vm.openBlade(1,n))}}}})},t.prototype._getTagItems=function(){var n=this,t=[];return this.resourceData&&this.resourceData.tags&&this.resourceData.tags.forEach((function(i){gt(i.key)||t.push(n._createTagPill(n.ltm,i.key,i.value))})),t},t.prototype._processTags=function(n){if(n&&(this._userModifiedTags=n,this.resourceData.tags=n),this.state.showTags.value){var t=this._getTagItems();this.state.tagsPillList.items(t);this.state.noTags(!t.length)}},t.prototype._throttleSpreadLayoutProcess=function(n){var t=this;ot.requestAnimationFrame((function(){t._spreadLayoutProcess(n)}))},t.prototype._processAndRender=function(){var n=this;this._processItems();this._processTags();var t=this.state,i=this.vm,r=function(r,u){!i.options.showAllItems&&r.length>ht&&t.showViewAllButton(!0);i.options.showAllItems||u||r.length>ht&&(r=r.splice(0,ht));var f=r.map((function(t){var r=MsPortalFx.initObservable(t.value),i={value:r,icon:MsPortalFx.initObservable(t.icon),loading:MsPortalFx.initObservable(t.loading),valueExists:ko.computed(n.ltm,r,(function(n){return!MsPortalFx.isNullOrUndefined(n)})),movableLabelExists:t.movableLabelExists||!1};return t.lines?(i.type=n.itemTypeDetector(t),i.lines=t.lines.map((function(t){var i=MsPortalFx.initObservable(t.value);return __assign(__assign({},t),{type:n.itemTypeDetector(t),icon:MsPortalFx.initObservable(t.icon),value:i,loading:MsPortalFx.initObservable(t.loading),valueExists:ko.computed(n.ltm,i,(function(n){return!MsPortalFx.isNullOrUndefined(n)}))})}))):i.type=n.itemTypeDetector(t),__assign(__assign({},t),i)}));return r.length&&n._throttleSpreadLayoutProcess(),f};it.subscribeAndRun(this.ltm,[tt.toComputation(i.dynamicLeftArray),t.viewAll],(function(i,u){t.leftItems(r(n._staticItems.left.concat(i),u))}));it.subscribeAndRun(this.ltm,[tt.toComputation(i.dynamicRightArray),t.viewAll],(function(i,u){t.rightItems(r(n._staticItems.right.concat(i),u))}));this.element.addClass(vt);this._assignEvents();s.track(this.ltm,this.element,(function(t){n._lastKnownContainerWidth!==t&&n._spreadLayoutProcess(t);n._lastKnownContainerWidth=t}),{ignoreInitialState:!0})},t.prototype._getResourceGroup=function(){var n=this,t=this.vm.options,r=t.hiddenChangeLink&&~t.hiddenChangeLink.indexOf(1),i=this._armData.resourceGroup,u=i.value,f=i.movableOnClick,e=i.onClick,o;return this.resourceData&&(u(this.resourceData.resourceGroupName),o=function(){if(et("EssentialsClick","ChangeResourceGroup",{bladeInstance:n._bladeInstanceId(),resourceId:n.vm.options.resourceId||""}),n.resourceData.moveOptions&&n.resourceData.moveOptions.resourceGroup){var i={resourceId:t.resourceId,moveType:1};ft.Promises.cancelOnDispose(n.ltm,n.vm.openBlade(1,i))}},f(o),e.resourceId(this.resourceData.resourceGroupId)),{label:ut.resourceGroup,value:u,movableLabel:r?"":ut.change,movableLabelExists:!r,movableOnClick:f,onClick:e,loading:this.state.fetchingResourceData}},t.prototype._getStatus=function(){var n=this._armData.status.value;return this.vm.status.subscribeAndRun(this.ltm,n),{label:ut.status,value:n}},t.prototype._getLocation=function(){var n=this,t=this.vm.options,r=!MsPortalFx.isFeatureEnabled("enablelocationchange")||!t.enableLocationChange||t.hiddenChangeLink&&~t.hiddenChangeLink.indexOf(3),u=this._armData.location,f=u.value,e=u.movableOnClick,i,o,s;return this.resourceData&&(i=this.resourceData.location,this.resourceData.zones&&(o=ut.zoneFormatString.format(this.resourceData.zones.join(ut.zoneDelimiterString+" ")),i+=" ("+o+")"),f(i),s=function(){if(et("EssentialsClick","ChangeLocation",{bladeInstance:n._bladeInstanceId(),resourceId:n.vm.options.resourceId||""}),n.resourceData.moveOptions&&n.resourceData.moveOptions.location){var i={subscriptionId:n.resourceData.subscriptionId,resourceId:t.resourceId,sourceRegion:n.resourceData.location};ft.Promises.cancelOnDispose(n.ltm,n.vm.openBlade(3,i))}},e(s)),{label:ut.location,value:f,movableLabel:r?"":ut.change,movableLabelExists:!r,movableOnClick:e,loading:this.state.fetchingResourceData}},t.prototype._getSubscriptionName=function(){var n=this,t=this.vm.options,r=t.hiddenChangeLink&&~t.hiddenChangeLink.indexOf(4),i=this._armData.subscriptionName,u=i.value,f=i.movableOnClick,e=i.onClick,o;return this.resourceData&&(u(this.resourceData.subscriptionName),o=function(){if(et("EssentialsClick","ChangeSubscription",{bladeInstance:n._bladeInstanceId(),resourceId:n.vm.options.resourceId||""}),n.resourceData.moveOptions&&n.resourceData.moveOptions.subscription){var i={resourceId:t.resourceId,moveType:0};ft.Promises.cancelOnDispose(n.ltm,n.vm.openBlade(4,i))}},f(o),e.resourceId("/subscriptions/"+this.resourceData.subscriptionId)),{label:ut.subscription,value:u,movableLabel:r?"":ut.change,movableLabelExists:!r,movableOnClick:f,onClick:e,loading:this.state.fetchingResourceData}},t.prototype._getSubscriptionId=function(){var n=this._armData.subscriptionId.value;return this.resourceData&&n(this.resourceData.subscriptionId),{label:ut.subscriptionId,value:n,loading:this.state.fetchingResourceData}},t.prototype._getDirectoryName=function(){var t=this._armData.directoryName.value,n=this.resourceData;return n&&t(n.directoryName||n.directoryId||yt),{label:ut.directory,value:t,loading:this.state.fetchingResourceData,visible:this._showTenantInfo}},t.prototype._getDirectoryId=function(){var n=this._armData.directoryId.value,t=this.resourceData;return t&&n(t.directoryId||yt),{label:ut.directoryId,value:n,loading:this.state.fetchingResourceData,visible:this._showTenantInfo}},t.prototype._getItem=function(n){if(typeof n=="number")switch(n){case 1:return this._getResourceGroup();case 2:return this._getStatus();case 3:return this._getLocation();case 4:return this._getSubscriptionName();case 5:return this._getSubscriptionId();default:dt.error("Unknown BuiltInType is used (Illegal Access)")}return n},t.prototype._processItems=function(){var r=this,t=[],i=[],n=this.vm.options,f=MsPortalFx.isFeatureEnabled("msptitle"),u;switch(this.vm.optionType){case 1:u=[1,2,3,4,5,];n.hiddenBuiltInTypes&&n.hiddenBuiltInTypes.forEach((function(n){var t=u.indexOf(n);t>-1&&u.splice(t,1)}));u.forEach((function(n){t.push(r._getItem(n))}));n.additionalLeft&&(t=t.concat(n.additionalLeft));n.additionalRight&&(i=__spreadArray([],n.additionalRight));f&&(t.unshift(this._getDirectoryName()),i.unshift(this._getDirectoryId()));break;case 2:f&&(t.push(this._getDirectoryName()),i.push(this._getDirectoryId()));n.left&&n.left.forEach((function(n){t.push(r._getItem(n))}));n.right&&n.right.forEach((function(n){i.push(r._getItem(n))}));break;case 3:n.left&&n.left.forEach((function(n){t.push(r._getItem(n))}));n.right&&n.right.forEach((function(n){i.push(r._getItem(n))}))}this._staticItems.left=t;this._staticItems.right=i},t.prototype._assignEvents=function(){var n=this,t=function(){var i=n.vm.expanded,r=n.vm.options.onExpanderClick,t=!i();i(t);et("EssentialsClick","ToggleExpander",{bladeInstance:n._bladeInstanceId(),resourceId:n.vm.options.resourceId||""},t?"Expanded":"Collapsed");k.invokeAfterChangePropagation((function(){var t=n.element.findByClassName(n.vm.expanded()?b.widgetCollapseButtonClass:b.widgetExpandButtonClass);document.activeElement!==t[0]&&t.focus()}));r&&r(t)};this.ltm.registerForDispose(this.element.setEvents(["click","."+b.widgetCollapseButtonClass,t,],["click","."+b.widgetExpandButtonClass,t,],["click","."+b.widgetEditTagClass,function(t){et("EssentialsClick","ChangeTags",{bladeInstance:n._bladeInstanceId(),resourceId:n.vm.options.resourceId||""});t.stopPropagation();t.preventDefault();var i={resourceId:n.vm.options.resourceId,tag:undefined};n.vm.openBlade(6,i)},],["click","."+b.widgetViewAllButtonClass,function(t){t.stopPropagation();t.preventDefault();n.state.viewAll(!n.state.viewAll.value)},]));this.ltm.registerForDispose(this.element.setEvents(["keyup","."+b.widgetItemValueContainerClass+" > ."+b.widgetItemValueClass,function(t){var r,u,i;p.isCtrlOrCommandOnly(t)&&t.keyCode===67&&(r=t.target,u=ot.document.createRange(),u.selectNodeContents(r),i=ot.getSelection(),i.removeAllRanges(),i.addRange(u),ot.document.execCommand("copy"),r.focus(),n.state.copyTextAriaLive(i.toString()+" "+ut.copiedToClipboard))},]));this.ltm.registerForDispose((function(){n._events.forEach((function(n){n.element.off(n.event,n.handler)}))}))},t})(f.Widget);t.Widget=wt}))