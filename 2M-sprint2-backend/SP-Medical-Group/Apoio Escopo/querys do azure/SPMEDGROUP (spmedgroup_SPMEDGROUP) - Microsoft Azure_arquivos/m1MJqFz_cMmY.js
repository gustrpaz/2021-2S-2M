"use strict";var ko,FxImpl,MsPortalFx;(function(n){var t;(function(){var t=window,n;fx.bootstrapTelemetry.fxScriptsBegin=fx.getTimestamp();t.performance.mark("MsPortalFxStart");n=!!fx.internalEnv.noOptMsPortalFxUris;n||FxImpl.patchMsPortalFxNonAmd()})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){n.features=n.features||new n.Features})(FxImpl||(FxImpl={})),
(function(n){function r(n){t.push(n)}function u(){}function f(){n.onEnvironmentSet=i;t.forEach(i)}function e(t){return n.ensureAbsoluteUriCore(t,{origin:n.origin,protocol:n.protocol,appPath:MsPortalFx.getEnvironmentValue("applicationPath")})}var t,i;location.origin||(location.origin=location.protocol+"//"+location.host);n.origin=location.origin;n.protocol=n.origin.substr(0,n.origin.indexOf("/"));n.href=location.href;t=[];n.onEnvironmentSet=r;n.throwBeforeEnvironment=u;i=function(n){n(MsPortalFx.getEnvironmentValue)};n.setEnvironment=f;n.ensureAbsoluteUri=e})(FxImpl||(FxImpl={})),
(function(n){function e(n){return FxImpl.features.getValue(n)}function f(n){return FxImpl.features.isEnabled(n)}function o(n,i){var r=t[n];return r===undefined||r===null?i:r}var u=window,t=fx.environment,i=FxImpl.internalEnv=fx.internalEnv,r;FxImpl.bootEnv||(FxImpl.bootEnv={});FxImpl.postBootEnv||(FxImpl.postBootEnv={extensionRedirectMap:{},baseDomains:[]});i.isShell?FxImpl.setEnvironment():FxImpl.features=new FxImpl.Features(FxImpl.bootEnv.shellFeatures);FxImpl.onEnvironmentSet((function(){if(!i.isShell){t=fx.environment;var n=fx.extensionEnv||{};FxImpl.features=new FxImpl.Features(FxImpl.bootEnv.shellFeatures,t.extensionName,[n.features,t.featuresFromConfig||{},]);t.features=FxImpl.features.value;Object.keys(n).forEach((function(i){i!=="features"&&(t[i]=n[i])}))}}));r=u.parent;n.isIFrame=r&&u.window!==r.window;n.getFeatureValue=e;n.isFeatureEnabled=f;n.getEnvironmentValue=o;n.isDevelopmentMode=FxImpl.isDevelopmentMode=f("clientDevelopmentMode");n.isTestMode=FxImpl.isTestMode=i.isTestMode;n.isInWebWorker=FxImpl.inWebWorker=i.inWebWorker;n.sessionId=FxImpl.sessionId=i.sessionId;n.trace=FxImpl.trace=i.trace||{};n.portalUri=FxImpl.trustedParentOrigin=i.trustedParentOrigin;n.defineProperty=n.defineProperty||Object.defineProperty;t.javascriptObjectPropertiesAreEnumerable||(Object.defineProperty=function(t,i,r){return r&&r.get&&r.enumerable===!0&&(r.enumerable=!1),n.defineProperty(t,i,r)})})(MsPortalFx||(MsPortalFx={})),
(function(n){function u(n,t,i){var u=r[n]&t;r[n]=u|i}function s(){f.getRandomValues(r);u(8,15,64);u(11,63,128);for(var n=0;n<20;n++)t[n]=e[r[n]];return t[4]=t[7]=t[10]=t[13]="-",t.join("")}function h(n){for(var t,r=new Array(n),u;n;)for(t=4294967296*Math.random()|0,u=8;u--;){if(r[--n]=i[t&15],n<0)return r;t>>>=4}}function c(){var n=h(36);return n[8]=n[13]=n[18]=n[23]="-",n[14]="4",n[19]=i[8+(i.indexOf(n[19])&3)],n.join("")}function l(n,t){t===void 0&&(t=!1);var i=f?s():c();return i=t?i.split("-").join("").substring(0,32):i.substring(0,36),(n?n+"_":"")+i}var r=new Uint8Array(20),t=new Array(20),f=window.crypto||window.msCrypto,i="0123456789abcdef".split(""),e=new Array(256),o=0;i.forEach((function(n){i.forEach((function(t){e[o++]=n+t}))}));n.createGuid=l})(FxImpl||(FxImpl={})),
(function(n){function t(n){return function(){return a.apply(n,arguments)}}function pr(n){for(var t in n)return!1;return!0}function i(n,t){return typeof n===t}function ot(n){return n instanceof Date}function wr(n){var t=n&&n.dispose;return i(t,g)&&t}function st(n){return n?o(n).length:0}function br(n){return!st(n)}function kr(n){return!!wr(n)}function dr(n){return n===null}function ai(n){return n===undefined}function vi(t){return!n.isNullOrUndefined(t)}function gr(t){return n.isNullOrUndefined(t)||i(t,c)&&!li.test(t)}function nu(t){return!isNaN(t)&&!n.isNullOrUndefined(t)&&i(t,ft)}function iu(n,t,i){try{return t(n)}catch(r){return i(r)}}function ru(n){return y.error=n,y}function yi(n,t){t===void 0&&(t={});var e=t.cacheFactory,u=t.checkResult,i=t.cacheFactory?e():new ht,f=!u&&!t.noDebugCheck&&tu,r=function(r){var e,o,s;if(i.has(r))return i.get(r);if(e=iu(r,n,ru),e!==y){if(f&&f(e),!u||u(e,r,i))return i.set(r,e),e}else o=y.error,s=t.onError,s&&s(o,r,i)||Q.fcall((function(){return Q.reject(o)}))};return r.dispose=r.clear=function(){i.clear()},r.delete=function(n){return i.delete(n)},r.map=function(){return i},r}function uu(n){return function(t,i,r){return!!(t&&t.catch((function(t){return r.delete(i),(n&&n(t,i,r))?void 0:Q.reject(t)})))}}function fu(n,t){t===void 0&&(t={});var i={},r=i.onError=t.onError;return i.cacheFactory=t.cacheFactory,i.checkResult=uu(r,(function(){return'memoizeQ(callback: "'+n.toString()+'")'})),i.onError=r,yi(n,i)}function eu(n,t,i){function r(u){return t-->0?Q.delay(i).then(n).catch(r):Q.reject(u)}return Q.fcall(n).catch(r)}function ou(n,t){var r,u,i,f;n.data&&n.data.status===undefined&&n.data.failedModules&&n.data.failedModules.length&&n.data.failedModules[0].status===undefined&&n.data.failedModules[0].moduleUrl?(i=n.data.failedModules[0],f=i.moduleUrl,FxImpl.Diagnostics.getStatusCode(f,(function(r,u,f){n.data.status=i.status=r;n.data.statusText=i.statusText=f;r!==200&&(n.message=i.message="Couldn't load \""+i.name+'"; error code '+r);t(n)}))):((r=n.data)===null||r===void 0?void 0:r.status)===0&&((u=n.data.failedModules)===null||u===void 0?void 0:u.length)&&n.data.failedModules[0]&&n.data.failedModules[0].moduleUrl?(n.message=n.data.failedModules[0].message,t(n)):t(n)}function pi(n,t,i){fe(FxImpl.requireReady,(function(){ui.requirejs([n],t,(function(n){return ou(n,i)}))}),i)}function su(n){return Q.Promise((function(t,i){pi(n,t,i)}))}function hu(n,t,i){var r=t;if(!r||r.normalize)return r&&(n=r.normalize(n)),su(n);pi(n,t,i)}function cu(n){if(n)return n[0]}function lu(n){var t;if(n&&(t=n.length))return n[t-1]}function au(t,i){return t?r(n.merge,null,t.map(i)):[]}function vu(n,t){if(n.length<3){var i=n.slice();return n.length>1?i.sort(t):i}return n.map((function(n,t){return{i:t,v:n}})).sort((function(n,i){return t(n.v,i.v)||n.i-i.i})).map((function(n){return n.v}))}function yu(n){return n+""}function ct(n,t,i,r,u){var f,e,c,s,o,h;if(t)for(i=i||yu,f=[t,,,""],e=0,c=t.length;e<c;e++)s=t[e],f[1]=s,f[2]=e,f[3]=undefined,o=a.apply(i,f),u&&n[o]!==undefined||(f[3]=o,h=r?a.apply(r,f):s,h!==undefined&&(n[o]=h));return n}function pu(t,i,r,u){var f=[i,,];return n.forEachKey(i,(function(n,i){if(!u||t[n]===undefined){f[1]=i;f[2]=n;var e=r?a.apply(r,f):i||n;e!==undefined&&(t[n]=e)}})),t}function lt(n){return n=h(n)?oi(n):arguments,function(){var t={};return v(arguments,(function(i,r){var u=n[r];i!==undefined&&(t[u]=i)})),t}}function wu(n){return r(lt,undefined,n)}function bu(t,r){var u=[];return n.forEachKey(t,(function(t,r){i(t,c)&&i(r,ft)&&b(u,n.getNameValue(t,r))})),r?si(u,(function(n,t){return n.value-t.value})):u}function wi(n,t){return ot(n)&&ot(t)&&!(n>t||n<t)}function ku(n){return n.getTime()/1e3|0}function bi(n){return ko.isObservable(n)&&h(n())}function du(n){return h(n)||bi(n)}function ki(n){return at[n>>4]+nt[n&15]}function di(t){t=t?t+"-":"";var r="",i=p;return function(){return++i>p&&(i=0),i||(r=t+f(n.newGuid(),0,33)),r+ki(i)}}function gu(n){var i=-1,t=p,r="";return function(){return++t>p&&(t=0,i++,r=n+i.toString(16)+"-"),r+ki(t)}}function nf(n,t){return t=w.pow(10,t||0),w.round(Number(n)*t)/t}function tf(n){return n|0}function rf(n,t){return n?!t:t}function uf(n,t){if(n!==undefined&&t!==undefined&&!(n>t))return w.floor(w.random()*(t-n+1))+n}function ff(n,t,i){var r=hi(n,t)&&n[t];r&&ko.isObservable(r)?r(i):n[t]=ko.observable(i)}function ef(n,t){return n===t||wi(n,t)}function sf(n,t){if(n===t)return!0;if(n&&t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return!1}function tt(n){var t=typeof n;return t===e&&(n===null?t="null":h(n)?t="array":ot(n)&&(t="date")),t}function vt(n,t,i){var r,f,u;if(i&&(n=i(n),t=i(t)),n===t)return!0;if(!n||!t||(r=tt(n),r!==tt(t)))return!1;switch(r){case"array":return f=n,n.length===t.length&&f.every((function(n,r){return vt(n,t[r],i)}));case"date":return n.getTime()===t.getTime();case e:return u=o(n),u.length===st(t)&&u.every((function(r){return vt(n[r],t[r],i)}));default:return!1}}function hf(n,t,i){var r=i?gi.peekObservable:ko.unwrap;return vt(n,t,r)}function cf(n){return tt(n)===e}function lf(t,i,u){var f=[t,,,u],e=o(t).map((function(n){return f[1]=t[n],f[2]=n,a.apply(i,f)}));return r(n.merge,null,e)}function af(n,t,i){var r,u,f;for(i=i||o(t),r=0;r<i.length;r++)u=i[r],f=t[u],f!==undefined&&(n[u]=f)}function it(t,r,u){var f,e;return i(r,c)?(t=n.isNullOrUndefined(t)?"":String(t),f=t.length,(u===undefined||u>f)&&(u=f),u-=r.length,e=d(t,r,u),e!==-1&&e===u):!1}function vf(t,r,u,f){return n.isNullOrUndefined(t)?-1:i(r,c)?t.toLocaleLowerCase().localeCompare(r.toLocaleLowerCase(),u,f):1}function yf(n,t){var i="";for(t=t<0?0:t;t--;)i+=n;return i}function pf(n){for(var t="",i=n.length;i;)t+=n[--i];return t}function wf(n){return function(){return ei(arguments,n)}}function bf(n,t){return n=n||"",t=t||n,function(i){return n+i+t}}function kf(t,i,r){return t.replace(new RegExp(n.regexEscape(i),"g"),r)}function df(t,i){var r,u;return t&&i&&(r=o(i).map(n.regexEscape),r.length)?(u=new RegExp(ei(r,"|"),"g"),t.replace(u,(function(n){return i[n]}))):t}function gf(n,t,i){var r=[];if(n&&t&&i){var u=0,o=t.length,e=0;for(i--;;){if(r.length>=i||(e=d(n,t,u))<0){b(r,f(n,u));break}b(r,f(n,u,e));u=e+o}}return r}function nr(t,i){for(var h=i?it:n.startsWith,r=t[0]||"",u,e,s,o;r;){for(u=void 0,e=1,s=t.length;e<s;e++)if(o=t[e],o&&h(r,o)){u=o;break}if(!u)break;r=i?f(r,0,r.length-u.length):f(r,u.length)}return r}function ne(n,t){return n=n||"",it(n,t)||(n+=t),n}function tr(t,i){return t=t||"",n.startsWith(t,i)||(t=i+t),t}function te(t,i){h(i)||(i=oi(arguments,1));var r="";return v(i||[],(function(i){r?i&&(r=n.trimEnd(r,t)+tr(i,t)):r=i||""})),r}function ie(t,i){var r,u,e;return i===void 0&&(i=!0),t&&(r=0,n.startsWith(t,"//")?r=2:(u=d(t,"://"),u>-1&&(r=u+3)),t=f(t,r),e=t.search(i?/[?#/]/:/[?#/:]/),e>-1&&(t=f(t,0,e))),t}function re(n,t){if(!n||!t||n.length<t.length)return!1;var i=ut(n),r=ut(t);return i===r||it(i,"."+r)}function ue(t){return d(t,"://")!==-1||n.startsWith(t,"//")}function fe(n,t,i){if(n.isFulfilled())t(n.inspect().value);else if(n.isPending())n.then(t,i);else{var r=n.inspect().reason;if(i)i(r);else throw r;}}function ee(n,t){return n.isPending()?n.finally(t):(t(),n)}function oe(n){return function(){return n}}function ir(n){return n===null||typeof n in yt}function se(t,i,r){var u=t.prototype;n.forEachKey(i,(function(n,t){(r||!u[n])&&s.defineProperty(u,n,{value:t,configurable:!0,enumerable:!1,writable:!0})}))}function rr(n){if(n>pt)throw new Error("The requiredMaxInteger("+n+") should be less than "+pt);if(n<=0)throw new Error("The requiredMaxInteger("+n+") should be greater than zero.");}function he(n){return rr(n),wt}function ce(n){return rr(n),bt}function le(n){var t=s.create(s.getPrototypeOf(n)),u=function(u){var f=n[u];i(f,g)&&!ko.isObservable(f)?t[u]=function(){return r(f,n,arguments)}:hi(n,u)&&(t[u]=f)};for(var f in n)u(f);return t}function ae(n){return n&&ut(n)}function dt(t){if(t){var i=typeof t;if(i===c)return ae(t);if(h(t))return t.map((function(n){return dt(n)}));if(i===e)return n.forEachKey(t,(function(n,i){t[n]=dt(i)})),t}return t}function we(t,i,r){if(r&&ir(t))return t;var u=rt(t)?[]:{};return n.extend(u,t,i)}function no(t){return n.encodeHtml(t)}function to(n,t){var i=function(t,i){if(t===n&&!t.hasOwnProperty(i))throw new Error("Missing property '"+i+"' on root object '"+fr(t)+"'.");},r=function(r,u){var s=u===n,f,o;return u&&typeof u===e&&!rt(u)?(f=s&&t?t:gt(u),f.length===0?s?{}:u:(o=new sr,f.forEach((function(n){i(u,n);o.addProperty(n,u[n])})),o.toJSON())):u};return fr(n||{},r)}function io(n){if(!n||typeof n!==e||rt(n))throw new Error(ii+".");var t=gt(n);if(t.length!==1)throw new Error(ii+" with only one property.");return t[0]}function ro(n,t,i){return n[i]}function uo(n){var t=function(t,i){if(t===ur&&rt(i)){var r=this;ct(r,i,(function(t){try{return io(t)}catch(i){i.message=i.message+(" String: '"+n+"'.");throw i;}}),ro);return}return i};return pe(n,t)}function fo(t){if(t)try{n.disposeDisposable(ko.unwrap(t.content),t.container)}catch(i){}}function eo(t){return t!=="constructor"&&!n.startsWith(t,ye)}function oo(n,t,i){return ct({},n,t,i)}function so(n,t){var i=ko.observableArray(),r=n.createChildLifetime();return ko.computed(r,(function(){i(t())})),i.dispose=function(){r.dispose()},i}function hr(n,t,i){var r=n.charCodeAt(0);return or[n]||(or[n]="&#"+(t?0:i?(r-be)*1024+n.charCodeAt(1)-ke+de:r)+";")}function ho(t){for(var c=new n.Map,u=[[t]],f,s,r,l,i,h;u.length;)for(f=u.pop(),s=o(f),r=0,l=s.length;r<l;r++){if(i=f[s[r]],h=typeof i,h===g||i instanceof Error||i instanceof Node||i===document.all)return!1;i&&h===e&&!c.has(i)&&(c.set(i,!0),u.push(i))}return!0}function co(t,i){t=et(t);i=et(i);var u=!n.isNullOrUndefined(t),r=!n.isNullOrUndefined(i);if(u&&r){if(t.localeCompare)return t.localeCompare(i);t=+t;i=+i;u=!isNaN(t);r=!isNaN(i)}return u?r?t-i:-1:r?1:0}function ri(n,t){return ai(n)?t:n}function lo(n,t){return ko.isObservable(n)?n:ko.observable(ri(n,t))}function ao(n,t){return ko.isObservable(n)?n:ko.observableArray(ri(n,t))}var ui=window,fi=Function,w=Math,s=Object,a=fi.call,cr=fi.apply,r,o,et,li,ht,tu,y,nt,at,p,gi,yt,l,kt,ti,ii,sr;n.uncurryThis=t;r=t(cr);n.applyCall=r;n.applyUncurry=r;var u=Array.prototype,lr=u.concat,ar=u.push,vr=t(u.filter),v=t(u.forEach),ei=t(u.join),b=t(ar),oi=t(u.slice),si=t(u.sort),h=Array.isArray,k=String.prototype,yr=t(k.split),f=t(k.substring),d=t(k.indexOf),ut=t(k.toLowerCase),hi=t(s.prototype.hasOwnProperty),ci=s.freeze,g="function",c="string",ft="number",e="object";n.isEmptyObject=pr;o=s.keys;et=ko.utils.peekObservable;li=/\S/;n.keysLength=st;n.isEmpty=br;n.isDisposable=kr;n.isNull=dr;n.isUndefined=ai;n.notNullOrUndefined=vi;n.isNullOrWhiteSpace=gr;n.isNumeric=nu;ht=ui.Map;n.Map=ht;y={};n.memoize=yi;n.memoizeQ=fu;n.retryPromise=eu;FxImpl.unrequire=function(n){window.require.unrequire(n)};n.require=hu;n.first=cu;n.last=lu;n.merge=function(){var n=vr(arguments,vi);return lr.apply([],n)};n.mapMany=au;n.stableSort=vu;n.extendArrayIntoMap=ct;n.extendStringMapIntoMap=pu;n.getStringMapFunc=lt;n.applyStringMapFunc=wu;n.getNameValue=lt("name","value");n.getEnumArray=bu;n.areEqualDates=wi;n.toSeconds=ku;n.isObservableArray=bi;n.isArrayOrObservableArray=du;nt=yr("0123456789abcdef","");at=[];v(nt,(function(n){v(nt,(function(t){b(at,n+t)}))}));n.newGuid=FxImpl.createGuid;p=4095;n.getUniqueIdGenerator=di;n.getIdGenerator=gu;n.getUniqueId=di();n.round=nf;n.truncate=tf;n.xor=rf;n.random=uf;n.setObjPropAsObservable=ff;n.areEqual=ef;n.arrayEquals=sf;n.getTypeOf=tt;gi=ko.utils;n.deepEquals=hf;n.isObject=cf;n.map=lf;n.shallowCopyFromObject=af;n.endsWith=it;n.localeCompareIgnoreCase=vf;n.repeat=yf;n.reverse=pf;n.getJoinFunc=wf;n.getQuoteFunc=bf;n.replaceAll=kf;n.replaceMany=df;n.split=gf;n.trimEnd=function(){return nr(arguments,!0)};n.trimStart=function(){return nr(arguments)};n.ensureSuffix=ne;n.ensurePrefix=tr;n.pathJoin=te;n.getUriAuthority=ie;n.isSubdomain=re;n.isUriAbsolute=ue;n.tryImmediateFinally=ee;n.wrap=oe;yt={};v(["boolean","undefined",ft,c,"symbol"],(function(n){yt[n]=!0}));n.isPrimitive=ir;n.polyfill=se;var pt=50,wt=[],bt={};for(l=0;l<=pt;l++)kt=l+"",wt[l]=kt,bt[kt]=l;n.isDevelopmentMode&&(ci(wt),ci(bt));n.getIntToStringMap=he;n.getStringToIntMap=ce;n.cloneAndRebindFunctions=le;n.lowerCaseAllStrings=dt;var ve=function(){return(new Error).stack},ur="#",ye="###",rt=Array.isArray,gt=Object.keys,fr=JSON.stringify,pe=JSON.parse,ni=ve;ni()||(ni=n.noop,n.isDiagnosticsEnabled&&(ti=function(){try{throw new Error;}catch(n){return n.stack}},ti()&&(ni=ti)));n.clone=we;var er=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,or={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"},be=55296,ke=56320,de=65536,ge=/^[\w\s\d\.\-#]*$/;n.encodeHtml=n.isFeatureEnabled("fastencode")?function(t){return typeof t=="string"&&ge.test(t)?t:n.isNullOrUndefined(t)?"":(t+"").replace(er,hr)}:function(t){return n.isNullOrUndefined(t)?"":String(t).replace(er,hr)};n.encodeAttribute=no;n.toSortedString=to;ii="Invalid sorted string, property array must contain objects";n.parseSortedString=uo;n.disposeViewModelProperties=fo;n.isSerializableProperty=eo;sr=(function(){function n(){this._propertyMap={}}return n.prototype.addProperty=function(n,t){t!==undefined&&typeof t!==g&&(this._propertyMap[n]=t)},n.prototype.toJSON=function(){var n=this._propertyMap,i=gt(n),t;return i.length>1?(t={},t[ur]=si(i).map((function(t){var i={};return i[t]=n[t],i})),t):n},n})();n.convertArrayToMap=oo;n.thunkArray=so;n.canSendThroughPostMessage=ho;n.compare=co;n.initValue=ri;n.initObservable=lo;n.initObservableArray=ao;n.markIgnoreHighDependenciesCount=n.noop})(MsPortalFx||(MsPortalFx={})),
(function(n){function r(){var n=arguments,e=this,o=!1,u,h=n.length===1&&n[0]&&typeof n[0]=="object",s=n.length===2&&n[0]&&typeof n[0]=="object"&&(typeof n[1]=="function"||n[1]===null),r=s?n[1]:null,f;return(h||s)&&(f=n[0],u=e.replace(t,(function(n){var i=n.substring(1,n.length-1),t;return f.hasOwnProperty(i)?(o=!0,t=f[i],r?r(t):t):n}))),o||(u=e.replace(i,(function(t,i){if(i<n.length){var u=n[i];return r?r(u):u}return t}))),u}var t=/\{[a-zA-Z$_\d]*\}/g,i=/\{(\d+)\}/g;n.polyfill(String,{format:r,localeCompareIgnoreCase:function(t,i,r){return n.localeCompareIgnoreCase(this,t,i,r)},replaceAll:function(t,i){return n.replaceAll(this,t,i)},replaceMany:function(t){return n.replaceMany(this,t)},repeat:function(t){return n.repeat(this,t)},startsWith:function(t,i){return n.startsWith(this,t,i)},endsWith:function(t,i){return n.endsWith(this,t,i)}},!0);n.polyfill(String,{includes:function(n,t){return!!~this.indexOf(n,t)}})})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function o(n,t){throw new Error(n.format(t));}function r(n,t,i){return n.substr(t,i)}function a(){f=n.getEnvironmentValue("contentUriBasePath")||"/";e=n.getEnvironmentValue("contentVersionToken")||""}function b(n,t){return c(n,(function(n,i,r){typeof i=="string"&&(r[n]=t(i))}),{})}function k(n){return b(n,(function(n){return v(i("Content/Images",n))}))}function i(){for(var n,u,f=[],i=0;i<arguments.length;i++)f[i]=arguments[i];return n="",u=!1,f.forEach((function(t){if(t){n&&(t=l(t,"/"),n+="/");var i=t.length-1;u=t[i]==="/";u&&(t=r(t,0,i));n+=t}})),u&&(n+="/"),t.isUriAbsolute(n)||n[0]==="/"||(n="/"+n),n}function u(u,s,c){var a,v,y;return u=l(u,"/"),v=u.toLowerCase(),v.startsWith(h)&&(y=h.length,(v.length===y||v[y]==="/")&&(a=y)),s===1||s===2?(t.isUriAbsolute(u)&&o("The '{0}' URI is not a valid content URI because it is an absolute URI.",u),a||o("The '{0}' URI is an application relative URI. However a content URI was expected. Did you mean to call getAppRelativeUri?",u),e!==""&&(u=i(r(u,0,a),e,r(u,a))),u=i(f,u)):t.isUriAbsolute(u)||(a&&o("The '{0}' URI is a content URI. However an application relative URI was expected. Did you mean to call getContentUri?",u),u=i(n.getEnvironmentValue("applicationPath"),u)),c&&!t.isUriAbsolute(u)&&(u=i(FxImpl.origin,u)),u}function v(n,t){return t===void 0&&(t=!0),u(n,2,t)}function d(n){return u(n,1,!1)}function g(n){return u(n,0,!1)}function nt(n){return u(n,0,!0)}function y(n,r){return r===void 0&&(r=!0),n=n||"",t.isUriAbsolute(n)||(n=i(f,n),r&&!t.isUriAbsolute(n)&&(n=i(FxImpl.origin,n))),n}function tt(n){var t=n.lastIndexOf(".");return t!==-1?r(n,0,t):n}function w(n,t,i,r){var u=t[i];return u||(t[i]=u={}),n.forEach((function(n){if(typeof n=="string"){var i=tt(n);u[i]=p+r+"_"+n}else c(n,(function(n,i){w(i,t,n,r+"/"+n)}))})),t}function it(n,t){var i=s.get(n);return i||(i=w(n,{},"",""),s.set(n,i)),i[t]}var h="content",c=n.forEachKey,l=n.trimStart,f,e,p,s;t.initialize=a;t.getImages=k;t.isUriAbsolute=n.isUriAbsolute;t.getContentUri=v;t.getScriptUri=d;t.getAppRelativeUri=g;t.getAbsoluteUri=nt;t.getVersionlessContentUri=y;FxImpl.onEnvironmentSet((function(){a()}));p=y(i("Content/Static/"));s=new n.Map;t._getImageMap=it})(i=t.Resources||(t.Resources={}))})(t=n.Base||(n.Base={}));n.getImages=t.Resources._getImageMap})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function u(n,t,r,u){var o=t.getAttribute("crossorigin"),f=i(n,r,u,o),e=function(){t.removeEventListener("load",e);t.removeEventListener("error",f)};t.addEventListener("load",e);t.addEventListener("error",f)}function i(n,i,u,f){var o="###BOOT###",e=t.parent===t?function(n){var t=n&&n.data&&n.data.statusCode===0?1:2;MsPortalFx.Base.Diagnostics.Log.writeEntry(t,"ScriptError","Portal Load Error: Error loading a script for module '"+u+"'",JSON.stringify(n))}:function(n){t.parent.postMessage(n,MsPortalFx.portalUri)};return function(t){var c=t.message||t.filename||t.lineno||t.colno,s={error:MsPortalFx.getLogFriendlyMessage(t.error),url:i,crossOriginAttribute:f},h={signature:o,kind:n,data:s};u&&(s.moduleName=u);c?(s.details={fileName:t.filename,lineNumber:t.lineno,columnNumber:t.colno,message:t.message},e(h)):r(i,(function(n,t){s.statusCode=n;s.httpMessage=t;e(h)}))}}function r(n,t){try{var i=new XMLHttpRequest;i.onerror=function(){t(i.status,i.responseText,i.statusText)};i.onload=function(){t(i.status,i.status===200?"":i.responseText,i.statusText)};i.open("GET",n,!0);i.send()}catch(r){t(undefined,undefined)}}var t=window;n.addScriptErrorListener=u;n.getScriptErrorHandler=i;n.getStatusCode=r})(t=n.Diagnostics||(n.Diagnostics={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){function tt(t){var u="["+n.getEnvironmentValue("extensionName")+"] ",i=[],r=0;return u&&(i[r++]=u),t.level===-1&&(i[r++]="[DEBUG]"),i[r++]=new Date(t.timestamp).toString(g),t.area&&(i[r++]=t.area),typeof t.code=="number"&&(i[r++]=t.code),t.message&&(i[r++]=t.message),t.args&&i.push.apply(i,t.args),i}function v(n){if(n){if(typeof n=="string"||n instanceof String)return!n.trim();if(typeof n=="object"&&"message"in n)return v(n.message)}else return!0;return!1}function it(n,t,i){return{timestamp:l(),level:i===undefined?2:i,area:"MsPortalFx/Base/Base.Diagnostics",message:n,code:undefined,args:t}}function h(n){var t=n||"",i=t.lastIndexOf("/");return i>=0?t.substr(i+1):t}function p(n){return FxImpl.Base.Diagnostics.isError(n)||FxImpl.Base.Diagnostics.isXMLHttpRequestLike(n)}function rt(n){var t=i;return i=n||w,t}function e(n,t){var i=a.console||{},r=u;return[n,t].forEach((function(n){var t=n&&i[n];typeof t=="function"&&(r=function(n){try{var r=tt(n);t.apply(i,r)}catch(u){}})})),r}function ut(){var n={};return n[0]=e("log","debug"),n[1]=e("warn"),n[2]=e("error"),n[-1]=o.debuglog?e("debug","log"):u,n}function ft(n,t){var i=[2,1];[n,t,].forEach((function(n,t){var r=i[t],u=s[r];s[r]=function(t){u(t);n(t)}}))}function b(t,i){i===void 0&&(i=[]);var r=ut(),f=n.isNullOrUndefined(t)?-1:t;[-1,0,1,2,].forEach((function(n){s[n]=n>=f?i[n]||r[n]:u}))}function et(n,t,i,r,u){var f=!0;f=typeof t=="function"?t():!!t;f||(n.debugBreak,n.error(i,r,u))}var l=Date.now,a=window,o=n.trace,s=FxImpl.Base.Diagnostics.logFunctions,u=function(){},d=n.isFeatureEnabled("canmodifyextensions"),g={hour:"numeric",minute:"numeric",second:"numeric"},nt=n.isDevelopmentMode||!!o.diagnostics,r=FxImpl.Base.Diagnostics.logHelper,y=u,w=function(t,i,u,f,e,o){var s,h;v(f)&&(f=new n.Errors.Error({message:"unspecified message logged",innerErrors:f instanceof Error?f:undefined}));s=n.getLogFriendlyMessage(f)+"";t>=1&&u&&(s=[u,s].join(": "));f&&p(f)&&(o=[].concat(f,o));h={timestamp:l(),level:t,area:i,message:s,code:e,args:o&&o.map((function(n){return p(n)?{error:FxImpl.Base.Diagnostics.extractErrorDetails(n)}:n}))};r.log(h)},i=w,f,k,c;t.setWriter=rt;t.setupErrorDetection=ft;FxImpl.Diagnostics.setConsoleOutput=b;f=(function(){function t(n){this.debugBreak=!!o.assert;this._area=n;this._type=h(n)}return t.writeEntry=function(n,t,r){for(var e,f=[],u=3;u<arguments.length;u++)f[u-3]=arguments[u];e=n>=1?h(t):null;i(n,t,e,r,null,f)},t.writeEntry2=function(n,t,r,u,f){var e=n>=1?h(t):null;i(n,t,e,r,u,f)},t.initialize=function(t,i){var f=!n.isNullOrUndefined(t),e=!n.isNullOrUndefined(i),o=u;f||e?f&&!e?i=t:!f&&e&&(t=-1):(t=i=-1,o=et);r.init(i);b(t);y=o},t.disable=function(){t.initialize(3,3)},t.prototype.verbose=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];i(0,this._area,this._type,n,null,r)},t.prototype.warning=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(1,this._area,this._type,n,t,u)},t.prototype.error=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(2,this._area,this._type,n,t,u)},t.prototype.debug=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];i(-1,this._area,this._type,n,null,r)},t.prototype.custom=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(-2,this._area,this._type,n,t,u)},t.prototype.assert=function(n,t,i,r){y(this,n,t,i,r)},t.prototype.writeEntry=function(n,t,r,u){i(n,this._area,this._type,t,r,u)},t.getEntries=r.entries,t.clear=r.empty,t.flush=r.flush,t._setBufferFullCallback=r.setCallback,t})();t.Log=f;nt?f.initialize():d?f.initialize(1,1):f.initialize(2,1);n.isIFrame&&!n.isDevelopmentMode&&(k={alert:undefined,confirm:!1,prompt:null},c=0,n.forEachKey(k,(function(n,t){c++;a[n]=function(i){var u=it("This call to "+n+" is not allowed in an extension.",[c,i,]);return r.log(u),t}})))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t=MsPortalFx.Base.Diagnostics.Log;n.loggingDiValue={writeEntry:t.writeEntry2,flush:t.flush,disable:t.disable,createLog:function(n){var i=typeof n=="string"?n:n.normalize(undefined);return new t(i)}}})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(FxImpl||(FxImpl={})),
(function(n){function i(n,i){for(var r,f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];return i=i||{},r=t.createElement(n),MsPortalFx.forEachKey(i,(function(n,t){n==="class"?r.className=i.class:n==="trustedInnerHTML"?r.innerHTML=i.trustedInnerHTML:r.setAttribute(n,t)})),f&&f.forEach((function(n){typeof n=="string"?r.append?r.append(n):r.innerHTML+=n:r.appendChild(n)})),r}var t=window.document;n.createElement=i})(FxImpl||(FxImpl={})),
(function(n){function v(n){var t=c(n);return t[u]=!0,t}function y(n){return n&&n.hasOwnProperty(u)}function p(n){return i(n)}function c(n,i,r){var v=e(n),l=v?n.peek():n,u={},y=i||new WeakMap,w=v||Array.isArray(n)||t.isObject(n),p,a;if(w){if(p=y.get(n),p===o)return h("toSerializableObjectImpl detects a cycle. root: "+t.getObjectDescriptor(n,!1),n)||s;if(p!==undefined)return p;y.set(n,o)}return a=r||function(n){return c(n,y,a)},v&&(u.t=1),Array.isArray(l)?v?(n.splice&&(u.t=2),u.v=a(l)):u.v=l.map(a):e(l)?u.v=a(l):l instanceof Date?(u.d=!0,u.v=l.valueOf()):t.isObject(l)?v?u.v=a(l):(u.v={},f(l).forEach((function(n){t.isSerializableProperty(n)&&(u.v[n]=a(l[n]))}))):u.v=l,w&&y.set(n,u),u}function i(n){var u,r=n.v,o=n.t,h=!1,e;return r===s.v&&(r=undefined),o&&t.isObject(r)&&r.hasOwnProperty("v")&&(u=i(r),h=!0),h||(Array.isArray(r)?u=r.map(i):t.isObject(r)?(u={},f(r).forEach((function(n){t.isSerializableProperty(n)&&(u[n]=i(r[n]))}))):u=n.d?new Date(r):r),e=u,o===1?e=ko.observable(u):o===2&&(e=ko.observableArray(u)),e}function b(n){r.push(n);n.reset()}function k(){r.forEach((function(n){n.reset()}))}function d(n,t,i){var u="Code: '"+n+"'. ",r="";return t?r=t.format.apply(t,i):i&&i.length&&(r="\nParameters: "+[].join.call(i,",")+". "),u+r}function g(t,i){return Q.reject(n.createError(t,i))}function nt(i){return t.forEachKey(i,(function(t,i,r){r[t]=function(){var r=[].slice.call(arguments),u=d(t,i,r);throw n.createError(u,i?undefined:{data:{args:r}});}}),{})}function tt(n,i){var r=new t.Base.Diagnostics.Log(i);return r.error(new Error("Eval detected.  Trying to eval: "+n)),t.isFeatureEnabled("nojqueryeval")}function it(){return new l(function(n){return(n||"").toLowerCase()})}function rt(n,t){return MsPortalFx.forEachKey(n,(function(i,r,u){u[i]=t(r,i,n)}),{})}function ut(n,t){return(n||[]).reduce((function(n,i){return n[t(i)?0:1].push(i),n}),[[],[]])}var t=MsPortalFx,u="#fxSerialized#",a=new t.Base.Diagnostics.Log("FxImpl.Serialization"),f=Object.getOwnPropertyNames,e=ko.isObservable,r,l;n.toSerializableObject=v;n.isSerializedObject=y;n.fromSerializableObject=p;var o={},s={v:t.generateNonSerializableProperty("object_cycle_detected")},h=function(n){a.error(n+"at callstack:"+t.getCurrentCallStack(!0))},w;w=h;r=[];n.registerGlobalState=b;n.resetGlobalState=k;n.QReject=g;n.getErrorMap=nt;n.skipEval=tt;l=(function(){function n(n){this._map=new Map;this._key=n}return n.prototype.clear=function(){this._map.clear()},n.prototype.delete=function(n){return this._map.delete(this._key(n))},n.prototype.forEach=function(n,t){var i=this;this._map.forEach((function(r,u){n.call(t,r,u,i)}),t)},n.prototype.get=function(n){return this._map.get(this._key(n))},n.prototype.has=function(n){return this._map.has(this._key(n))},n.prototype.set=function(n,t){return this._map.set(this._key(n),t),this},n})();n.lowerCaseStringMap=it;n.mapValues=rt;n.partition=ut})(FxImpl||(FxImpl={})),
(function(n){function a(n,t,i){try{return new n(t,i)}catch(r){throw new Error("Intl.DateTimeFormat failed. format culture: {0}, options: {1}, Exception: {2}".format(t,JSON.stringify(i),r));}}function s(n,t){return new e(n,t,o.Intl)}function h(t,i){var r=n.knownCulturesMap[t];return(!r||r.neutralCulture)&&(t=n.knownCulturesMap[i].specificCulture||i),t}function t(n,t){return["en-"+n,"English ("+t+")","English ("+t+")‎"]}function u(n,t,i){return["de-"+n,"German ("+t+")","Deutsch ("+i+")‎"]}function r(n,t,i){return["es-"+n,"Spanish ("+t+")","Español ("+i+")‎"]}function i(n,t,i){return["fr-"+n,"French ("+t+")","Français ("+i+")‎"]}function c(n,t,i){return["pt-"+n,"Portuguese ("+t+")","Português ("+i+")‎"]}function y(){function f(t){var r=this,i=t[0];n[i]={locale:i,name:t[1],localizedName:t[2],neutralCulture:r,specificCulture:t[3]}}var e=[u("be","Belgium","Belgien"),u("de","Germany","Deutschland"),u("li","Liechtenstein","Liechtenstein"),u("lu","Luxembourg","Luxemburg"),u("ch","Switzerland","Schweiz"),u("at","Austria","Österreich"),t("as","American Samoa"),t("ai","Anguilla"),t("ag","Antigua and Barbuda"),t("au","Australia"),t("bs","Bahamas"),t("bb","Barbados"),t("be","Belgium"),t("bz","Belize"),t("bm","Bermuda"),t("bw","Botswana"),t("io","British Indian Ocean Territory"),t("vg","British Virgin Islands"),t("cm","Cameroon"),t("ca","Canada"),t("029","Caribbean"),t("ky","Cayman Islands"),t("cx","Christmas Island"),t("cc","Cocos (Keeling) Islands"),t("ck","Cook Islands"),t("dm","Dominica"),t("er","Eritrea"),t("150","Europe"),t("fk","Falkland Islands"),t("fj","Fiji"),t("gm","Gambia"),t("gh","Ghana"),t("gi","Gibraltar"),t("gd","Grenada"),t("gu","Guam"),t("gg","Guernsey"),t("gy","Guyana"),t("hk","Hong Kong SAR"),t("in","India"),t("ie","Ireland"),t("im","Isle of Man"),t("jm","Jamaica"),t("je","Jersey"),t("ke","Kenya"),t("ki","Kiribati"),t("ls","Lesotho"),t("lr","Liberia"),t("mo","Macao SAR"),t("mg","Madagascar"),t("mw","Malawi"),t("my","Malaysia"),t("mt","Malta"),t("mh","Marshall Islands"),t("mu","Mauritius"),t("fm","Micronesia"),t("ms","Montserrat"),t("na","Namibia"),t("nr","Nauru"),t("nz","New Zealand"),t("ng","Nigeria"),t("nu","Niue"),t("nf","Norfolk Island"),t("mp","Northern Mariana Islands"),t("pk","Pakistan"),t("pw","Palau"),t("pg","Papua New Guinea"),t("ph","Philippines"),t("pn","Pitcairn Islands"),t("pr","Puerto Rico"),t("rw","Rwanda"),t("kn","Saint Kitts and Nevis"),t("lc","Saint Lucia"),t("vc","Saint Vincent and the Grenadines"),t("ws","Samoa"),t("sc","Seychelles"),t("sl","Sierra Leone"),t("sg","Singapore"),t("sx","Sint Maarten"),t("sb","Solomon Islands"),t("za","South Africa"),t("ss","South Sudan"),t("sh","St Helena, Ascension, Tristan da Cunha"),t("sd","Sudan"),t("sz","Swaziland"),t("tz","Tanzania"),t("tk","Tokelau"),t("to","Tonga"),t("tt","Trinidad and Tobago"),t("tc","Turks and Caicos Islands"),t("tv","Tuvalu"),t("um","U.S. Outlying Islands"),t("vi","U.S. Virgin Islands"),t("ug","Uganda"),t("gb","United Kingdom"),t("us","United States"),t("vu","Vanuatu"),t("001","World"),t("zm","Zambia"),t("zw","Zimbabwe"),r("ar","Argentina","Argentina"),r("bo","Bolivia","Bolivia"),r("cl","Chile","Chile"),r("co","Colombia","Colombia"),r("cr","Costa Rica","Costa Rica"),r("cu","Cuba","Cuba"),r("ec","Ecuador","Ecuador"),r("sv","El Salvador","El Salvador"),r("es","Spain, International Sort","España, alfabetización internacional"),r("us","United States","Estados Unidos"),r("ph","Philippines","Filipinas"),r("gt","Guatemala","Guatemala"),r("gq","Equatorial Guinea","Guinea Ecuatorial"),r("hn","Honduras","Honduras"),r("419","Latin America","Latinoamérica"),r("mx","Mexico","México"),r("ni","Nicaragua","Nicaragua"),r("pa","Panama","Panamá"),r("py","Paraguay","Paraguay"),r("pe","Peru","Perú"),r("pr","Puerto Rico","Puerto Rico"),r("do","Dominican Republic","República Dominicana"),r("uy","Uruguay","Uruguay"),r("ve","Venezuela","Venezuela"),i("dz","Algeria","Algérie"),i("be","Belgium","Belgique"),i("bf","Burkina Faso","Burkina Faso"),i("bi","Burundi","Burundi"),i("bj","Benin","Bénin"),i("cm","Cameroon","Cameroun"),i("ca","Canada","Canada"),i("km","Comoros","Comores"),i("cg","Congo","Congo"),i("cd","French Congo (DRC)","Congo, République démocratique du"),i("ci","Côte d’Ivoire","Côte d’Ivoire"),i("dj","Djibouti","Djibouti"),i("fr","France","France"),i("ga","Gabon","Gabon"),i("gp","Guadeloupe","Guadeloupe"),i("gq","Equatorial Guinea","Guinée équatoriale"),i("gn","Guinea","Guinée"),i("gf","French Guiana","Guyane française"),i("ht","Haiti","Haïti"),i("re","Réunion","La Réunion"),i("lu","Luxembourg","Luxembourg"),i("mg","Madagascar","Madagascar"),i("ml","Mali","Mali"),i("ma","Morocco","Maroc"),i("mq","Martinique","Martinique"),i("mu","Mauritius","Maurice"),i("mr","Mauritania","Mauritanie"),i("yt","Mayotte","Mayotte"),i("mc","Monaco","Monaco"),i("ne","Niger","Niger"),i("nc","New Caledonia","Nouvelle-Calédonie"),i("pf","French Polynesia","Polynésie française"),i("rw","Rwanda","Rwanda"),i("cf","Central African Republic","République centrafricaine"),i("bl","Saint Barthélemy","Saint-Barthélemy"),i("mf","Saint Martin","Saint-Martin"),i("pm","Saint Pierre and Miquelon","Saint-Pierre-et-Miquelon"),i("sc","Seychelles","Seychelles"),i("ch","Switzerland","Suisse"),i("sy","Syria","Syrie"),i("sn","Senegal","Sénégal"),i("td","Chad","Tchad"),i("tg","Togo","Togo"),i("tn","Tunisia","Tunisie"),i("vu","Vanuatu","Vanuatu"),i("wf","Wallis and Futuna","Wallis-et-Futuna"),["id-id","Indonesian (Indonesia)","Indonesia (Indonesia)‎"],["it-it","Italian (Italy)","Italiano (Italia)‎"],["it-sm","Italian (San Marino)","Italiano (San Marino)‎"],["it-ch","Italian (Switzerland)","Italiano (Svizzera)‎"],["hu-hu","Hungarian (Hungary)","Magyar (Magyarország)‎"],["nl-aw","Dutch (Aruba)","Nederlands (Aruba)‎"],["nl-be","Dutch (Belgium)","Nederlands (België)‎"],["nl-bq","Dutch (Bonaire, Sint Eustatius and Saba)","Nederlands (Bonaire, Sint Eustatius en Saba)‎"],["nl-cw","Dutch (Curaçao)","Nederlands (Curaçao)‎"],["nl-nl","Dutch (Netherlands)","Nederlands (Nederland)‎"],["nl-sx","Dutch (Sint Maarten)","Nederlands (Sint-Maarten)‎"],["nl-sr","Dutch (Suriname)","Nederlands (Suriname)‎"],["pl-pl","Polish (Poland)","Polski (Polska)‎"],c("br","Brazil","Brasil"),c("pt","Portugal","Portugal"),["sv-fi","Swedish (Finland)","Svenska (Finland)‎"],["sv-se","Swedish (Sweden)","Svenska (Sverige)‎"],["sv-ax","Swedish (Åland Islands)","Svenska (Åland)‎"],["tr-cy","Turkish (Cyprus)","Türkçe (Kıbrıs)‎"],["tr-tr","Turkish (Turkey)","Türkçe (Türkiye)‎"],["cs-cz","Czech (Czechia)","Čeština (Česko)‎"],["ru-by","Russian (Belarus)","Русский (Беларусь)‎"],["ru-kz","Russian (Kazakhstan)","Русский (Казахстан)‎"],["ru-kg","Russian (Kyrgyzstan)","Русский (Киргизия)‎"],["ru-md","Russian (Moldova)","Русский (Молдова)‎"],["ru-ru","Russian (Russia)","Русский (Россия)‎"],["ru-ua","Russian (Ukraine)","Русский (Украина)‎"],["zh-cn","Chinese (Simplified, China)","中文(中国)‎"],["zh-tw","Chinese (Traditional, Taiwan)","中文(台灣)‎"],["zh-sg","Chinese (Simplified, Singapore)","中文(新加坡)‎"],["zh-mo","Chinese (Traditional, Macao SAR)","中文(澳門特別行政區)‎"],["zh-hk","Chinese (Traditional, Hong Kong SAR)","中文(香港特別行政區)‎"],["ja-jp","Japanese (Japan)","日本語 (日本)‎"],["ko-kp","Korean (North Korea)","한국어 (조선민주주의인민공화국)‎"],["ko-kr","Korean (Korea)","한국어(대한민국)‎"],],n={};return[["de","German","Deutsch‎","de-de"],["en","English","English‎","en-us"],["es","Spanish","Español‎","es-es"],["fr","French","Français‎","fr-fr"],["it","Italian","Italiano‎","it-it"],["id","Indonesian","Indonesia‎","id-id"],["hu","Hungarian","Magyar‎","hu-hu"],["nl","Dutch","Nederlands‎","nl-nl"],["pl","Polish","Polski‎","pl-pl"],["pt","Portuguese","Português‎","pt-br"],["sv","Swedish","Svenska‎","sv-se"],["tr","Turkish","Türkçe‎","tr-tr"],["cs","Czech","Čeština‎","cs-cz"],["ru","Russian","Русский‎","ru-ru"],["zh","Chinese","中文‎","zh-cn"],["zh-hans","Chinese (Simplified)","中文(简体)‎","zh-cn"],["zh-chs","Chinese (Simplified) Legacy","中文(简体) 旧版‎","zh-cn"],["zh-hant","Chinese (Traditional)","中文(繁體)‎","zh-tw"],["zh-cht","Chinese (Traditional) Legacy","中文(繁體) 舊版‎","zh-tw"],["ja","Japanese","日本語‎","ja-jp"],["ko","Korean","한국어‎","ko-kr"],["qps-ploc","Pseudo (Pseudo)","[Þšéųδô (Ρŝέũδθ) !!! !!]‎","qps-ploc"],].forEach(f,!0),e.forEach(f,!1),n}var l=MsPortalFx,o=window,f,e,v;n.knownCulturesMap=y();f=(function(){function n(n,t){var i={};this.getValue=function(r){var f="",u,e;return r&&Object.keys(r).sort().forEach((function(n,t){t&&(f+=",");f+=n+":"+r[n]})),u=i[f],u||(t?(e=l.clone(r),u=a(t,n,e)):u={format:function(n){return n+""}},i[f]=u),u}}return n})();e=(function(){function n(n,t,i){this.displayLanguage=n;this.formatCulture=t;this.numbers=new f(this.formatCulture,i&&i.NumberFormat);this.dateTimes=new f(this.formatCulture,i&&i.DateTimeFormat);this.supported=function(n){return i?(n=i.DateTimeFormat.supportedLocalesOf(n),i.NumberFormat.supportedLocalesOf(n)):["en-us"]}}return n})();n.IntlContext=e;n.createWithBrowserIntl=s,(function(t){var i,r,u,f;t.displayLanguage=n.internalEnv.displayLanguage;t.formatCulture=h(n.internalEnv.rawFormatCulture,t.displayLanguage);t.effectiveLocale=t.displayLanguage+"."+t.formatCulture;i=s(t.displayLanguage,t.formatCulture),(function(n){function t(n){return i.numbers.getValue(n)}function r(n){return t().format(n)}n.create=t;n.format=r})(r=t.NumberFormat||(t.NumberFormat={})),(function(n){function u(n){return i.dateTimes.getValue(n)}var t="numeric",r="long";n.shortDatePattern={day:t,month:t,year:t};n.longDatePattern={weekday:r,year:t,month:r,day:t};n.fullDateTimePattern={weekday:r,year:t,month:r,day:t,hour:t,minute:t,second:t};n.monthDayPattern={month:r,day:t};n.shortTimePattern={hour:t,minute:t};n.longTimePattern={hour:t,minute:t,second:t};n.yearMonthPattern={year:t,month:r};n.weekDayPattern={weekday:r};n.create=u})(u=t.DateTimeFormat||(t.DateTimeFormat={})),(function(n){function t(n){return i.supported(n)}n.supportedLocalesOf=t})(f=t.Internal||(t.Internal={}));o.define("MsPortalFx/Globalization",n.Intl)})(v=n.Intl||(n.Intl={}));n.sanitizeFormatCulture=h})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function i(){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getSharedSettings()}))}t.getSharedSettings=i})(t=n.Settings||(n.Settings={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function f(n){return n||""}function i(n,t,i){return f(n).substr(t,i)}function s(n,t,i){return e(n)?o(n,r,4).slice(t,i).join(r):""}var h="?",c="#",l="=",a="&",r="/",u=n.isUndefined,e=n.isUriAbsolute,o=n.split,v=n.ensurePrefix,y=decodeURIComponent,p=encodeURIComponent,k=window,d=k.location,w=(function(){function n(n,t){var e=this,r,f;this._qs=[];this._qsMap={};this._leadingSeparator=u(t)?h:t;n&&(r=n,r[0]===this._leadingSeparator&&(r=i(r,1)),f=r.split(a),f.forEach((function(n){if(n){var r=n.indexOf(l),f=r>=0,t=f?i(n,0,r):n,u=f?i(n,r+1):"";t&&(t=y(t),u=y(u),e.setParameter(t,u))}})))}return n.prototype.clear=function(){return this._qs=[],this._qsMap={},this},n.prototype.setParameters=function(n){for(var t in n)n.hasOwnProperty(t)&&this.setParameter(t,n[t]);return this},n.prototype._getParameterIndex=function(n){var t=n.toUpperCase();return this._qsMap[t]},n.prototype.setParameter=function(n,t){var f=n.toUpperCase(),r=this._qsMap[f],i=this._qs;return u(r)?(this._qsMap[f]=i.length,i.push(n),i.push(t)):(i[r]=n,i[r+1]=t),this},n.prototype.getParameter=function(n){var t=this._getParameterIndex(n),i;return u(t)||(i=this._qs[t+1]),i},n.prototype.getParameters=function(){for(var r,i={},t=this._qs,n=0,u=t.length;n<u;n+=2)r=t[n],r!==undefined&&(i[t[n]]=t[n+1]);return i},n.prototype.removeParameters=function(n){return n.forEach(this.removeParameter,this),this},n.prototype.removeParameter=function(n){var t=this._getParameterIndex(n),i;return u(t)||(i=this._qs,i[t]=i[t+1]=undefined),this},n.prototype.toString=function(n){var e,o;n===void 0&&(n=!0);for(var t="",r=this._qs,s=r.length,f=0;f<s;)e=r[f++],o=r[f++],u(e)||(t+=a,t+=p(e),t+=l,t+=p(o));return t&&(t=i(t,1),n&&(t=this._leadingSeparator+t)),t},n})(),b;t.QueryStringBuilder=w;b=(function(){function t(n){var t=f(n),u=t.indexOf(c),o=u>=0,r=o?i(t,0,u):t,l=o?i(t,u):"",e=r.indexOf(h),s=e>=0,a=s?i(r,0,e):r;this._oq=s?i(r,e):"";this.path=a;this.query=new w(this._oq);this.fragment=l}return t.prototype.getOriginalQuery=function(){return this._oq},t.prototype.toString=function(){var t=(this.query||"").toString(),n=f(this.fragment);return n&&(n=v(n,c)),f(this.path)+t+n},t.prototype.getScheme=function(){var n=s(this.path,0,2);return n&&(n+="/"),n},t.prototype.getAuthority=function(){return s(this.path,2,3)},t.prototype.getSchemeAndAuthority=function(t){var i=s(this.path,0,3);return t&&n.startsWith(i,"//")&&(i=d.protocol+i),i},t.prototype.getRelativePath=function(){var n=this.path;return e(n)&&(n=v(o(n,r,4)[3],r)),n},t.prototype.setRelativePath=function(t){var u=this.path,s;e(u)?(t=f(t),n.startsWith(t,r)&&(t=i(t,1)),s=o(u,r,4),s[3]=t,u=s.join(r)):u=t;this.path=u},t})();t.UriBuilder=b})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t,i,r,u,f,e,o,s,h;n.Shell="fx",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.ClassicResources="Microsoft_Azure_ClassicResources";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(t=n.ExtensionNames||(n.ExtensionNames={})),(function(n){n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseResourceBlade="BrowseResource";n.BrowseBlade="BrowseResource";n.BrowseAllResources="BrowseAllResources";n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.Gallery="Gallery";n.StoreGallery="StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource="BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(i=n.AssetNames||(n.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(r=n.ResourceTypes||(n.ResourceTypes={})),(function(n){var t;(function(n){n.BrowseResourcePinnedPart="BrowseResourcePinnedPart";n.BrowseResourceGroupPinnedPart="BrowseResourceGroupPinnedPart"})(t=n.Hubs||(n.Hubs={}))})(u=n.PartNames||(n.PartNames={})),(function(n){var t,i,r;(function(n){n.SubscriptionsBlade="SubscriptionsBlade"})(t=n.Billing||(n.Billing={})),(function(n){n.CreateHubBlade="PlusNewBlade";n.BrowseLinkBlade="BrowseLinkBlade";n.BrowseResourceBlade="BrowseResourceBlade";n.BrowseAllResourcesBlade="BrowseAllResourcesBlade";n.BrowseResourceGroupBlade="BrowseResourceGroupBlade";n.BrowseRecentResourcesBlade="BrowseRecentResourcesBlade";n.AssetMenuBlade="AssetMenuBlade";n.UnauthorizedAssetBlade="UnauthorizedAssetBlade";n.NotFoundAssetBlade="NotFoundAssetBlade";n.UnavailableAssetBlade="UnavailableAssetBlade";n.ResourceMenuBlade="ResourceMenuBlade";n.ResourceProperties="ResourceProperties";n.ResourceGroupMapBlade="ResourceGroupMapBlade"})(i=n.Hubs||(n.Hubs={})),(function(n){n.GalleryFeaturedMenuItemBlade="GalleryFeaturedMenuItemBlade";n.GalleryResultsListBlade="GalleryResultsListBlade";n.LegalTermsV2Blade="PCLegalTermsV2Blade"})(r=n.Marketplace||(n.Marketplace={}))})(f=n.BladeNames||(n.BladeNames={})),(function(n){n.FeatureAdoption="FeatureAdoption";n.FeatureObsolete="FeatureObsolete"})(e=n.Telemetry||(n.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(o=n.TelemetrySharing||(n.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(s=n.GalleryMenuItems||(n.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(h=n.BladeParameterNames||(n.BladeParameterNames={}))})(t=n.Constants||(n.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i="MsPortalFx.Errors.",f="Disposed",r=(function(n){function t(t,i){var r=n.call(this,{source:t,errorData:i})||this;return r.dataSetName=t,r}return __extends(t,n),t.TypeName=i+"DataError",t})(t.Error),e,o,s,u,h,c,l;t.DataError=r;e=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.TypeName=i+"FetchDataError",t})(r);t.FetchDataError=e;o=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.TypeName=i+"UnauthorizedDataError",t})(r);t.UnauthorizedDataError=o;s=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.TypeName=i+"NotFoundDataError",t})(r);t.NotFoundDataError=s;u=(function(n){function r(i){var u=this,r=t.getErrorOptions(i,{errorLevel:0});return n.call(this,r)||this}return __extends(r,n),r.TypeName=i+"CanceledError",r})(t.Error);t.CanceledError=u;h=(function(n){function t(){var t=this;return n.call(this,{message:f,stack:f})||this}return __extends(t,n),t})(u);t.DisposedCanceledError=h;c=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.TypeName=i+"DisposedError",t})(t.Error);t.DisposedError=c;l=(function(t){function r(i){var r=t.call(this,i)||this;return i&&n.isPlainObject(i)&&n.extend(r,i),r.jqXHR&&(r.jqXHR.status===401||r.jqXHR.status===403?r.errorLevel=1:r.jqXHR.status===0&&(r.errorLevel=0)),r}return __extends(r,t),r.TypeName=i+"AjaxError",r})(t.Error);t.AjaxError=l})(t=n.Errors||(n.Errors={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function e(n,t,i){i.enumerable=!1}var o=n.Base,i=Object,r=i.getOwnPropertyDescriptor,u=i.defineProperty,f=$.noop;t.NotProxied=e;t.ProxyCompatibilityMode=f;FxImpl.onEnvironmentSet((function(n){n("javascriptObjectPropertiesAreEnumerable",!0)&&(t.ProxyCompatibilityMode=function(n){var i=n.prototype,t;for(var f in i)t=r(i,f),t&&t.enumerable&&t.get&&(t.enumerable=!1,u(i,f,t))})}))})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function r(t){return t&&n.isObject(t)&&typeof t.readyState=="number"&&typeof t.status=="number"&&typeof t.statusText=="string"}function i(n){n["finally"]=n.always;n["catch"]=n.fail}function u(n){return t.Deferred().resolve(n).promise()}function f(n){return t.Deferred().reject(n).promise()}t.isXMLHttpRequestLike=r;t.ajax=$.ajax;t.ajax=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return $.ajax.apply($,t)};t.selector=$;t.Callbacks=$.Callbacks,(function(){var n=$.Deferred;$.Deferred=function(t){var r=n(t),u=r.promise;return i(r),r.promise=function(){var n=u.apply(this,arguments);return i(n),n},r}})();t.Deferred=$.Deferred;t.resolve=u;t.reject=f})(t=n.Helpers||(n.Helpers={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function r(n,t){return typeof t=="number"&&(t={palette:t}),i(n,t||null)}var i=n.getStringMapFunc("type","options");t.newImageData=r})(i=t.Image||(t.Image={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){function c(n,t,i){var r=3,u=!1;return(t.deleteCount>0||t.spliceArguments.length>r)&&(t.spliceArguments[1]=t.startIndex,t.spliceArguments[2]=t.deleteCount,e.apply(i,t.spliceArguments),u=!0),t.deleteCount=0,t.startIndex=t.currentIndex,t.spliceArguments.length=r,u}function l(n,t,u,e){var a,h,c,tt,w,v,d,l,g,p,nt;if(n[r])throw new Error("createArraySplices does not work against edits with indexes that have been adjusted by adjustArrayEdits.");if(a=n.length,u){for(w=0,v=new Array(a),c=0;c<a;c++)h=n[c],i(h.moved)&&h.status===f&&(v[w++]=h.value);v.length=w;tt=e(v)}var y=new Array(a),b=0,k=0,o,it=0;for(c=0;c<a;c++)h=n[c],d=h.status,l=!i(h.moved),d===f?(g=h.index,p=void 0,p=u?l?u[h.moved]:tt[it++]:h.value,o&&(!t||!!o.move===l)&&g===o.start+o.items.length?o.items.push(p):(o={start:g,deleteCount:0,items:[p]},t&&l&&(o.move=l),y[b++]=o),k++):d===s&&(nt=h.index+k,o&&(!t||!!o.move===l)&&nt===o.start+o.items.length?o.deleteCount++:(o={start:nt,deleteCount:1,items:[]},t&&l&&(o.move=l),y[b++]=o),k--);return y.length=b,y}function a(n,t,i,r){for(var u=t?t.split("."):[];n&&u.length;)n=i(n),n&&(n=n[u.shift()]);if(!u.length)return r&&(n=i(n)),n}function v(n,t,i,r){var u=t.subscribe(i,r,"arrayChange");return n&&n.registerForDispose(u),u}function y(n,t,i,r,u,f){u===void 0&&(u=MsPortalFx.noop);f===void 0&&(f=function(n,t){if(t)throw n;});var o=!0,e=n.subscribe(t,(function(n){var t=!r;if(r)try{t=r(n)}catch(s){f(s,!0)}t&&(o&&(o=!1,i&&i.call(e,n),u(n)),e.dispose())})),s=e.disposeCallback;return e.disposeCallback=function(){f(new MsPortalFx.Errors.CanceledError("fxawait promise disposed"));s.apply(this,arguments)},e.isDisposed&&f(new MsPortalFx.Errors.CanceledError("fxawait promise disposed")),e}var g=MsPortalFx.Base,t=ko.utils,p=MsPortalFx.uncurryThis,i=MsPortalFx.isUndefined,r="###knockoutArrayEditFixupTokenPropertyName###",e=Function.call,w=Array.prototype,o=p(w.push),b=undefined,f="added",s="deleted",k="retained",u="",d={fixedUp:u,fixedUpIndexes:u,createArraySplices:u,mapIntoChanges:u},h=n.getErrorMap(d);t.adjustArrayEdits=function(n,t,u){n[r]&&h.fixedUpIndexes();var e=0,o=n.map((function(n){var r=MsPortalFx.clone(n);switch(n.status){case f:t&&(r.value=i(n.moved)?u(n.value):t[n.moved]);e++;break;case s:r.index+=e;e--;case k:t&&(r.value=t[n.index])}return r}));return o[r]=r,o};n.quickApplyArrayEdits=function(n,t,i){for(var l=i&&i.spliceFunc||Array.prototype.splice,v=i&&i.inplaceFixup,r={startIndex:0,currentIndex:0,spliceArguments:[n,0,0],deleteCount:0},f=0,a=0,y={added:1,deleted:-1},e=0,p=t.length;e<p;e++){var s=t[e],u=y[s.status]||0,h=s.index;v&&(u<0&&(h+=a),a+=u);r.currentIndex!==h&&(c(n,r,l)&&f++,r.startIndex=r.currentIndex=h);u>0?(r.currentIndex++,o(r.spliceArguments,s.value)):u<0&&r.deleteCount++}return c(n,r,l)&&f++,f};n.createArraySplicesInternal=l;t.createArraySplices=function(n,t,i,r){return l(n,t,i,r?function(n){return n.map(r)}:b)};t.applyArraySplices=function(n,t,i){var u=[],r;return t.length&&(r=void 0,t.length>1&&ko.isObservable(n)&&(r=n,n=r.peek(),r.valueWillMutate()),t.forEach((function(t){var r,f,e;r=i?t.items.map(i):t.items;f=[t.start,t.deleteCount];e=n.splice.apply(n,f.concat(r));t.move||u.push.apply(u,e)})),r&&r.valueHasMutated()),u};t.twoWayBinding=function(n,t,r,u){var f;n.registerForDispose||(u=r,r=t,t=n,n=null);f=n&&n.createChildLifetime();u=u||function(n){return!i(n)};var s=t(),h=r(),o=!1,e=function(n){if(!o)try{o=!0;this(n)}finally{o=!1}};return u(s)?r(s):u(h)&&t(h),f?(t.subscribe(f,e,r),r.subscribe(f,e,t),f):[t.subscribe(e,r),r.subscribe(e,t),]};t.cleanDescendantNodes=function(n){$(n).contents().toArray().forEach((function(n){ko.cleanNode(n)}))};t.wrap=function(n){return ko.isObservable(n)?n:ko.observable(n)};t.wrapArray=function(n){return ko.isObservable(n)?n:ko.observableArray(n)};t.unwrapObservablePath=function(n,t,i){return i===void 0&&(i=!0),a(n,t,ko.unwrap,i)};t.peekObservablePath=function(n,i,r){return r===void 0&&(r=!0),a(n,i,t.peekObservable,r)};n.subscribeArrayEdits=v;ko.subscribable.fn.fxOnce=function(n,t,i){return y(this,n,t,i)};ko.subscribable.fn.fxAwait=function(n,t){var u=this,i,r=Q.promise((function(r,f){i=y(u,n,null,t,r,f)}));return r.subscription=i,r};ko.observableArray.fn.subscribeArrayEdits=function(n,t,i){return v(n,this,t,i)};ko.observableArray.fn.subscribeArrayChanges=function(n,t,r,u){u=u||this;var f=[u,null],o={added:t,deleted:r};return this.subscribeArrayEdits(n,(function(n){for(var r,u,t=0,s=n.length;t<s;t++)r=n[t],i(r.moved)&&(u=o[r.status],u&&(f[1]=r.value,e.apply(u,f)))}))};ko.observableArray.fn.subscribeArrayBulkChanges=function(n,t,r){return r=r||this,this.subscribeArrayEdits(n,(function(n){for(var u,e=[],s=[],h={added:e,deleted:s},f=0,c=n.length;f<c;f++)u=n[f],i(u.moved)&&o(h[u.status],u.value);t.call(r,e,s)}))};ko.observableArray.fn.subscribeArrayAdds=function(n,t,i){return this.subscribeArrayChanges(n,t,null,i)};ko.observableArray.fn.subscribeArrayDeletes=function(n,t,i){return this.subscribeArrayChanges(n,null,t,i)};ko.observableArray.fn.mapInto=function(n,i,r){var e,u;r||(r=ko.observableArray());var o=this,c=n.createChildLifetime(),s=function(n){return ko.ignoreDependencies((function(){var t=c.createChildLifetime(),r=i(t,n);return{item:r,lifetime:t}}))},f=o.peek().map(s);return r(f.map((function(n){return n.item}))),e=n.createChildLifetime(),u=!1,r.subscribe(e,(function(){u||h.mapIntoChanges()})),o.subscribeArrayEdits(e,(function(n){var i=t.createArraySplices(n,!0,f,s),e=t.applyArraySplices(f,i);try{u=!0;t.applyArraySplices(r,i,(function(n){return n.item}))}finally{u=!1;e.forEach((function(n){n.lifetime.dispose()}))}})),r}})(FxImpl||(FxImpl={})),
(function(n){var t;(function(){var t=MsPortalFx.Errors.isInstanceOfErrorType,n=Promise.prototype;n.catchError=function(n,i){return this.catch((function(r){return t(r,n)?i(r):Q.reject(r)}))};Q.QPromise.prototype.catchError=n.catchError})(t=n.QExtensions||(n.QExtensions={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){function s(n,t){return new e(n,t)}function r(t,u){var e=Q.defer(),f=e.promise,c=u.cancelation,l=c(),s,o,h;if(l)e.reject(l);else{if(s=new FxImpl.TriggerableLifetimeManager,c.subscribe(s,(function(n){n&&f.isPending()&&e.reject(n)})),f.finally((function(){s.dispose()})).catch(n.noop),o=void 0,Q.isPromiseAlike(t))o=Q(t);else try{o=Q(t())}catch(a){o=Q.reject(a)}o.then((function(n){f.isPending()&&e.resolve(n)}),(function(n){f.isPending()&&e.reject(n)}),(function(n){u.canceled||e.notify(n)}))}return h=f.then,f.then=function(n,t,e){if(t)return h.apply(f,arguments);var o=i(n,u),s=i(e,u);return o||s?r(h.call(f,o,t,s),u):f},f}function h(n,t,i){var o=new u,s=function(){o.cancel(new f(i||"cancelOnDisposed"))},c=!n||n.isDisposed&&n.isDisposed(),e=!c&&n.createChildLifetime(),h;return e?e.registerForDispose(s):s(),h=r(t,o),h.finally((function(){e&&e.dispose()}))}function i(n,t){return n&&function(i){if(!t.canceled)return n(i)}}var f=n.Errors.CanceledError,o,u,e;(function(n){n.fulfilled="fulfilled";n.rejected="rejected"})(o=t.PromiseStates||(t.PromiseStates={}));t.wrapWithCancelablePromise=s;t.makeCancelable=r;t.cancelOnDispose=h;u=(function(){function n(){this.cancelation=ko.observable()}return Object.defineProperty(n.prototype,"canceled",{get:function(){return!!this.cancelation.peek()},enumerable:!1,configurable:!0}),n.prototype.cancel=function(n){var t=this.cancelation,i=t.peek()||n||new f;return t(i),i},n})();t.CancelationToken=u;e=(function(){function n(n,t){if(!n||!t)throw new Error("Argument '"+(n?"cancelationToken":"underlyingPromise")+"' cannot be null or undefined.");this._underlyingPromise=n;this._cancelationToken=t}return n.prototype.then=function(t,r){var u=this._cancelationToken,e=i(t,u),o=i(r,u),f=this._underlyingPromise;return(e||o)&&(f=f.then(e,o)),new n(f,u)},n.prototype.progress=function(t){if(this._underlyingPromise.progress){var u=this._cancelationToken,f=i(t,u),r=this._underlyingPromise;return f&&(r=r.progress(f)),new n(r,u)}return this},n.prototype.finally=function(n){return this.then(n,n)},n.prototype.catch=function(n){return this.then(null,n)},n})()})(i=t.Promises||(t.Promises={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var h=n.keysLength,c=n.uncurryThis,l=Array.prototype,r=c(l.forEach),a=n.shallowCopyFromObject,f=n.disposeDisposable,u="",v={keyNotFound:u,reservedKey:u,noPut:u,noRemove:u,noClear:u},i=FxImpl.getErrorMap(v),e=(function(){function n(){this._modifyMap={};this._dependantMaps=[];this._observable=ko.observable({});this._isInModifyBlock=!1;this.latch=this._observable}return n.prototype.put=function(n,t){var i=this;this._validateKey(n);this.modify((function(){i._modifyMap[n]=t;r(i._dependantMaps,(function(i){return i._putNotification(n,t)}))}))},n.prototype.lookup=function(n){return this._modifyMap[n]},n.prototype.modify=function(n){var i=!1,t=[];this._isInModifyBlock||(i=!0,this._isInModifyBlock=!0,this._modifyMap={},a(this._modifyMap,this._observable()),r(this._dependantMaps,(function(n,i){t.push((function(){return n.modify(t[i+1])}))})));try{t.push(n);t[0]()}finally{i&&(this._isInModifyBlock=!1,this._observable(this._modifyMap))}},n.prototype.clear=function(){var n=this;this.modify((function(){n._modifyMap={};r(n._dependantMaps,(function(t){return t._clearNotification(n)}),n)}))},Object.defineProperty(n.prototype,"count",{get:function(){return h(this._observable())},enumerable:!1,configurable:!0}),n.prototype.remove=function(n){var t=this;this._validateKey(n);n in this._observable()||i.keyNotFound(n);this.modify((function(){delete t._modifyMap[n];r(t._dependantMaps,(function(t){return t._removeNotification(n)}))}))},n.prototype.forEach=function(n){this.some((function(){return n.apply(this,arguments),!1}))},n.prototype.some=function(n,t){var r=this._observable(),f=t||this,i,u;for(i in r)if(u=r[i],n.call(f,u,i))return!0;return!1},n.prototype.every=function(n,t){return!this.some((function(){return!n.apply(this,arguments)}),t)},n.prototype.toArray=function(){var n=[];return this.forEach((function(t){n.push(t)})),n},n.prototype.dispose=function(){},n.prototype.subscribe=function(n,t,i,r){return this._observable.subscribe(n,t,i,r)},n.prototype.map=function(n,t){return new o(n,this,t)},n.prototype._addDependantMap=function(n){this._dependantMaps.push(n)},n.prototype._removeDependantMap=function(n){var t=this._dependantMaps.filter((function(t){return t!==n}));t.length!==this._dependantMaps.length&&(this._dependantMaps=t)},n.prototype._putNotification=function(){},n.prototype._removeNotification=function(){},n.prototype._clearNotification=function(){},n.prototype._validateKey=function(n){for(var t in Object.prototype)t===n&&i.reservedKey(n)},n})(),o,s;t.ObservableMap=e;o=(function(n){function t(t,i,r){var u=n.call(this)||this;return u._map=i,u._transform=r,i._addDependantMap(u),t.registerForDispose(u),u.modify((function(){i.forEach((function(t,i){n.prototype.put.call(u,i,u._transform(t,undefined))}))})),u}return __extends(t,n),t.prototype.dispose=function(){this._map._removeDependantMap(this)},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){var r=this.latch()[t],u=this._transform(i,r);r&&r!==u&&f(r);n.prototype.put.call(this,t,u)},t.prototype._removeNotification=function(t){var i=this.latch()[t];f(i);n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(){this.forEach((function(n){return f(n)}));n.prototype.clear.call(this)},t})(e);t.ObservableMapProjection=o;s=(function(n){function t(t){for(var i,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return i=n.call(this)||this,i._maps=u,t.registerForDispose(i),u.forEach((function(t){t._addDependantMap(i);i.modify((function(){t.forEach((function(t,r){n.prototype.put.call(i,r,t)}))}))})),i}return __extends(t,n),t.prototype.dispose=function(){var n=this;r(this._maps,(function(t){return t._removeDependantMap(n)}))},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){n.prototype.put.call(this,t,i)},t.prototype._removeNotification=function(t){n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(t){var i=this;this._modifyMap={};r(this._maps,(function(r){r!==t&&r.forEach((function(t,r){n.prototype.put.call(i,r,t)}))}));r(this._dependantMaps,(function(n){n._clearNotification(i)}))},t})(e);t.ObservableMapUnion=s})(i=t.Internal||(t.Internal={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){function e(n){for(var i=n.length-1,r=new Array(i),t=0;t<i;t++)r[t]=n[t+1];return r}function o(n){return n.map((function(n){return n&&n()}))}function v(){return u.apply(this,arguments)}function y(){u.apply(this,arguments)}function s(n){var t=n.subscribe;n.subscribe=function(n,i){var r,u;return n&&n.registerForDispose?(arguments.length===2?r=t.call(this,i):(u=e(arguments),r=t.apply(this,u)),n.registerForDispose(r)):r=t.apply(this,arguments),r}}function i(n){return n&&(n.map=p,n.filter=w),n}function p(n,t){if(n&&n.registerForDispose){var r=l.call(this,{mappingWithDisposeCallback:function(i){var r=n.createChildLifetime();return{mappedValue:t(r,i),dispose:function(){r.dispose()}}}});return n.registerForDispose(r),i(r)}return i(l.apply(this,arguments))}function w(n,t){if(n&&n.registerForDispose){var r=a.call(this,t);return n.registerForDispose(r),i(r)}return i(a.apply(this,arguments))}var r=n.computed,b=MsPortalFx.noop,u=n.computed=function(t,i){var u,s,l;if(t&&t.registerForDispose){if(arguments.length===2)u=r.call(this,i);else{var f=e(arguments),h=f[0],c=n.isSubscribable(h)&&[h]||Array.isArray(h)&&h;c&&(f.shift(),s=f[0],typeof s=="function"?f[0]=function(){return n.ignoreDependencies(s,this,o(c))}:(l=s.read,l&&(s.read=function(){return o(c),n.ignoreDependencies(l,this,null)})));u=r.apply(this,f)}t.registerForDispose(u)}else u=r.apply(this,arguments);return u},t,h,c;n.explicitComputed=v;n.reactor=y;t=n.subscribable.fn;s(t);t.subscribeAndRun=function(){var i=this,t=this.subscribe.apply(this,arguments);return n.ignoreDependencies((function(){t.callback(i())})),t};t.fxOnceAndRun=function(n,t,i){i=i||function(n){return!!n};var r=this.fxOnce(n,t,i);return r.callback(this()),r};t.fxAwaitAndRun=function(n,t){t=t||function(n){return!!n};var i=this.fxAwait(n,t);return i.subscription.callback(this()),i};h=n.extenders.trackArrayChanges;n.extenders.trackArrayChanges=function(n){var t=n.subscribe,i=h.apply(this,arguments),r=n.subscribe;return r!==t&&s(n),i};c=n.hasPrototype;n.hasPrototype=function(t,i){return i===u&&(i=r),c.call(n,t,i)};var f=n.observableArray,l=f.fn.map,a=f.fn.filter;i(f.fn)})(ko||(ko={})),
(function(n){var i=n.Base.Diagnostics,t=Array.prototype;n.polyfill(Array,{concatUnique:function(t,i){return n.union(this,t,i)},first:function(t,i){var r=n.findIndex(this,t,i);return r<0?null:this[r]},firstIndex:function(t,i){return n.findIndex(this,t,i)},last:function(){if(this.length<1)throw new Error("Cannot get the last element because the array is empty.");return this[this.length-1]},mapMany:function(t){return n.mapMany(this,t)},remove:function(t){return n.remove(this,(function(n){return n===t}))},stableSort:function(t){return n.stableSort(this,t)},toNumberMap:function(n){var t=[];return this.forEach((function(i){t[n(i)]=i})),t},unique:function(t){return n.unique(this,t)},includes:function(n,i){return!!~t.indexOf.call(this,n,i)}})})(MsPortalFx||(MsPortalFx={})),
(function(n){function t(n,t,i){return{limit:n,format:t,factorSeconds:i||0}}function s(n,t){return n.map((function(n){return t[n]}))}function h(){return r}function c(n){r=n||r;r.ampmAbbr=[r.ampm[0][0]||"",r.ampm[1][0]||""];var t=r.standard;t.f=t.D+" "+t.t;t.g=t.d+" "+t.t;t.G=t.d+" "+t.T}function f(t,i){var r=t+"",u=i-r.length;return u>0&&(r=n.repeat("0",u)+r),r}function l(n,t){return(n+"").substr(-t)}function p(n,t){return l(f(n,t),t)}function e(n){for(var t="",i=0,r=n.length;i<r;i++)t+="\\",t+=n[i];return t}function rt(n,t){var i=t.length,u=i===2?p:l,r=h(),c,a,y,o,w,v,k;switch(t[0]){case"y":return c=n.getFullYear(),i===3?f(c,i):i===1?parseInt(l(c,2),10)+"":p(c,i);case"M":return a=n.getMonth(),i===4?e(r.months[a]):i===3?e(r.monthsAbbr[a]):u(a+1,2);case"d":return i===4?e(r.days[n.getDay()]):i===3?e(r.daysAbbr[n.getDay()]):u(n.getDate(),2);case"h":y=!0;case"H":return o=n.getHours(),o=y?(o-1)%12+1:o,u(o,2);case"m":return u(n.getMinutes(),2);case"s":return u(n.getSeconds(),2);case"t":return w=i===2?r.ampm:r.ampmAbbr,w[n.getHours()<12?0:1];case"z":var s=-n.getTimezoneOffset()/60,d=s<0,b="+";return d&&(s=-s,b="-"),v=parseInt(s+"",10),k=(s-v)*60,b+(i===3?f(v,2)+":"+f(k,2):f(v,i));case"/":return r.dateSeparator;case":":return r.timeSeparator}return""}function w(n,t){var o=t?t.getTime():Date.now(),f=o-n.getTime(),i,r,e,u;for(f/=1e3,r=0,e=y.length;r<e;r++)if(i=y[r],f<i.limit)break;return u=i.format,i.factorSeconds&&(u=u.format(Math.round(f/i.factorSeconds))),u}function b(t){var r;t=t||0;t&&FxImpl.postBootEnv.extensionName&&FxImpl.postBootEnv.extensionName!=="HubsExtension"&&(r="getFirstDayOfWeek has been deprecated to improve portal performance and should not be used.",n.Base.Diagnostics.Log.writeEntry(2,"MsPortalFx/Globalization",new Error(r)));var u=this.getDate(),f=this.getDay(),i=t-f;return i>0&&(i-=7),new Date(this.getFullYear(),this.getMonth(),u+i)}function ut(n){var t=b.call(n,0);return[{limit:86400,format:function(t){return w(t,n)}},{limit:(n.getTime()-t.getTime())/1e3,format:o.create({weekday:"long"}).format},{limit:Number.POSITIVE_INFINITY,format:o.create(o.shortDatePattern).format},]}function ft(n,t){var i=k[n||"difference"];return i?i(this,t||new Date):undefined}function g(){return function(){var e=this,t,i,u,f;return arguments.length?(t=arguments[0],typeof t=="string"?(FxImpl.postBootEnv.extensionName&&FxImpl.postBootEnv.extensionName!=="HubsExtension"&&(i="For globalization purposes, do not use date.toString(string) for formatting dates. Instead use date.toString(Intl.DateTimeFormat options)",n.Base.Diagnostics.Log.writeEntry(2,"MsPortalFx/Globalization",new Error(i))),t=r.standard[t]||t,t=t.replace(/'([^']*)'/g,d),u=function(t){return n.reverse(rt(e,t))},n.reverse(n.reverse(t).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,u).replace(/\\(?!\\)/g,""))):(f=o.create(t),f.format(this))):tt(this,arguments)}}function nt(t){return(typeof t!="string"&&(t=t+""),n.startsWith(t,"/Date("))?parseInt(t.substr(6),10):it.call(null,t)}var o=FxImpl.Intl.DateTimeFormat,u=n.Resources.Strings.DatePolyfill,tt=n.uncurryThis(Date.prototype.toString),it=Date.parse,i=u.AgoStrings,a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],v=["january","february","march","april","may","june","july","august","september","october","november","december"],r={days:s(a,u.Days),daysAbbr:s(a,u.DaysAbbr),months:s(v,u.Months),monthsAbbr:s(v,u.MonthsAbbr),ampm:["AM","PM"],ampmAbbr:[],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"",G:"",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},firstDayOfWeek:0},y=[t(60,i.lessThanAMinute),t(60*1.5,i.aMinute),t(3600,i.minutes,60),t(3600*1.5,i.anHour),t(86400,i.hours,3600),t(86400*1.5,i.aDay),t(604800,i.days,86400),t(604800*1.5,i.aWeek),t(2628e3,i.weeks,604800),t(2628e3*1.5,i.aMonth),t(31536e3,i.months,2628e3),t(31536e3*1.5,i.aYear),t(Number.POSITIVE_INFINITY,i.years,31536e3),],k,d;n.getLocaleValues=h;n.setLocaleValues=c;k={difference:w,timestamp:function(n,t){var u,i,f,r,e;for(t=t||new Date,u=ut(t),f=(t.getTime()-n.getTime())/1e3,r=0,e=u.length;r<e;r++)if(i=u[r],f<i.limit&&i.limit>0)break;return i.format(n)}};d=n.uncurryThis(e);n.getDateToStringFunc=g;n.dateParse=nt;n.polyfill(Date,{getFirstDayOfWeek:b,toRelativeString:ft,toString:g()},!0);n.forEachKey({getLocaleValues:h,parse:nt,setLocaleValues:c},(function(n,t){Object.defineProperty(Date,n,{value:t,configurable:!0,enumerable:!1,writable:!0})})),(function(){try{new Date(1e4,1,1).toLocaleString();return}catch(r){}var t=Date.prototype,i=function(n){return function(){try{return n.call(this)}catch(t){return this.toISOString()}}};n.polyfill(Date,{toLocaleDateString:i(t.toLocaleDateString),toLocaleString:i(t.toLocaleString),toLocaleTimeString:i(t.toLocaleTimeString)},!0)})();c(r)})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t="MsPortalFx.Internal.Constants.RpcMethods.",i;(function(n){n.hubsGetResourceGroupsFromSubscription="Hubs."+t+"getResourceGroupsFromSubscription";n.getLockValidation="Hubs."+t+"isLocked";n.getSasUriForQueue=t+"AzureStorage.getSasUriForQueue";n.getClientIp=t+"UtilitiesController.getClientIp";n.getHmacSha256=t+"UtilitiesController.getHmacSha256";n.getProvisioningRequest=t+"ParameterCollection.ShellProvisioner.fulfillProvisioningRequest";n.initiateProvisioningRequest=t+"ParameterCollection.ShellProvisioner.initiateProvisioningRequest";MsPortalFx.extendArrayIntoMap(n,["addClientNotification","addClientNotifications","brokerExtensionService","canShowNps","deletePutConfirmation","entryPointGetBladeDefinition","entryPointGetReactModel","entryPointDisposeReactModel","entryPointGetCommandsDefinition","entryPointGetControlDefinition","entryPointGetDefinition","entryPointGetPartDefinition","entryPointInitialize","forwardEvent","getArmEndpoint","getAllAssetTypes","getAssetTypeInformation","getCatalogApiCacheContent","getClientNotifications","getExtensionGalleryServiceViewModel","getExtensionRegistration","getLastResourceIdInJourney","getLocalGalleryPackagesEndpoints","getLocationDisplayNames","getLocations","getLocationsForCreate","getManifest","getManifestEnvironment","getProvisioningOperation","getRegisteredResourceProviderInfo","getResource","getResourceAssetInformation","getResourceGroup","getResourceTypeAssetTypeInformation","getSelectedSubscriptions","getSettings","getSharedSettings","getUserInfo","hasPermission","listTestExtensions","logFeatureAdoptionTelemetry","mapAssetIdToDynamicSelectionAndIcon","mapAssetIdToResourceId","mapResourceIdToAssetId","mapResourceIdToDynamicSelectionAndIcon","navigateToDashboard","networkTelemetry","notifyDeployment","pollDeployment","internalDeploymentHelper","experimentationHelper","notifyExtensionStatus","ping","pinParts","postBoot","registerLocalGalleryPackagesEndpoint","registerTestExtensions","setExtensionFlights","showNps","submitProvisionerTelemetry","unregisterTestExtensions","updateSubscriptionInfo","updateTenantInfo","viewModels","tryEarlyGetViewModel",],null,(function(n){return t+n}));MsPortalFx.extendStringMapIntoMap(n,{getAuthToken:"getAuthenticationToken",registration:"register",shellReadUserSettings:"Shell.readUserSettings",shellWriteUserSettings:"Shell.writeUserSettings",shellWriteLastUsedUserSettings:"Shell.writeLastUsedUserSettings"},(function(n){return t+n}))})(i=n.RpcMethods||(n.RpcMethods={}))})(t=n.Constants||(n.Constants={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){function a(n){return new t.Log(n.normalize(undefined))}function v(t,i){var u,e=arguments.length>1&&arguments[arguments.length-1],s=typeof e=="object"&&e,h=o?1:0,f,c;return t&&typeof t!="string"?(u=new r,n.extend(u,t),u._sourceErrorLevel=h):(f={message:t,_sourceErrorLevel:h},typeof i=="string"&&(f.stack=i),u=new r(f)),s&&(c=n.extend({},u.data),u.data=n.extend(c,s)),u}var i=n.Errors,r=i.Error,p=i.ErrorLevel,e=window,o=n.isDiagnosticsEnabled,u=FxImpl.errorHandlingImpl,s=u.handleError,h=u.preinitialize,f=FxImpl.internalEnv,c=f.isShell,l=f.inWebWorker,y;h(FxImpl.features,!c&&function(t,i,r){var u={kind:2,data:__assign(__assign({error:n.getLogFriendlyMessage(t)},typeof i=="number"&&{code:i}),r&&{details:Array.from(r).map(n.getLogFriendlyMessage)})};l?self.postMessage(u):e.parent.postMessage(u,FxImpl.trustedParentOrigin)});t.createLog=a;t.createIgnoreUnhandledRejectionError=v,(function(n){function t(t){s(t,n.lastError);n.lastError=null}n.handleError=t})(y=t.ErrorReporter||(t.ErrorReporter={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function o(n,u){r=null;var f=n===i.Part?[i.Blade,i.Part]:[n];f.forEach((function(r){for(var e,o,f=t.length-1;f>=0;f--)if(e=!t[f].hasValue(r),o=r===i.Blade&&n===i.Part?{id:u.bladeId,instanceId:u.bladeInstanceId}:u,t[f].setContextValue(r,o),!e)break}))}function s(n){var f,e;(r=null,f=u(t),f)&&(e=n===i.Part?[i.Blade,i.Part]:[n],e.forEach((function(n){for(var u,r=f.getValue(n),i=t.length-1;i>=0;i--){if(u=t[i].getValue(n),r&&u!==r||t[i].resetContextValue(n),t[i].hasValue(n))break;r=u}})))}function h(n,t){return function(){var i=arguments[0];try{return f.apply(n,arguments),i()}finally{f.apply(t,arguments)}}}function c(n){for(var r,i=t.length-1;i>=0;i--)if(r=t[i].getValue(n),r)return r}function l(){for(var i={},r=!1,n=0,u=t.length;n<u;n++)MsPortalFx.forEachKey(t[n].getValues(),(function(n,t){t&&(r=!0,i[n]=t)}));return r?i:undefined}function a(){return r||(r=new e(u(t)))}function v(n){r=null;t.push(new e(n))}function y(){r=null;t.length>1&&t.pop()}function u(n){return MsPortalFx.last(n)}var i,f;(function(n){n[n.Part=0]="Part";n[n.Blade=1]="Blade";n[n.CompositionItem=2]="CompositionItem"})(i=n.ContextType||(n.ContextType={}));n.setContextValue=o;n.resetContextValue=s;f=Function.call;n.provideContext=h(o,s);n.getCurrentValue=c;n.getCurrentValues=l;n.getState=a;n.usingState=h(v,y);var e=(function(){function n(n){var u,i,t,f,r;if(this._providers=[],n&&n._providers)for(u=this._providers,i=n._providers,t=0,f=i.length;t<f;t++)r=i[t],u[t]=r?r.slice():[]}return n.prototype.setContextValue=function(n,t){(this._providers[n]||(this._providers[n]=[])).push(t)},n.prototype.resetContextValue=function(n){var t=this._providers[n];t&&t.length&&t.pop()},n.prototype.getValue=function(n){var t=this._providers[n];return t&&u(t)},n.prototype.getValues=function(){for(var t,r={},f=!1,e=this._providers,n=0,o=e.length;n<o;n++)t=u(e[n]),t&&(f=!0,r[i[n]]=t);return f?r:undefined},n.prototype.hasValue=function(n){var t=this._providers[n];return!!(t&&t.length)},n})(),r=null,t=[new e,]})(t=n.TelemetryContext||(n.TelemetryContext={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){function t(n){return function(){return f(n)}}var r=FxImpl.TelemetryContext,u=r.ContextType,f=r.getCurrentValue,i=u;n.getPartContext=t(i.Part);n.getBladeContext=t(i.Blade);n.getJourneyContext=function(){return{id:""}};n.getCompositionItemContext=t(i.CompositionItem)})(t=n.Context||(n.Context={}))})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function i(n){return function(t){var i,e,r,u;return t&&(e=t[f],e||(r=FxImpl.Po.getOrCreateMetadata(t),u=r,r&&(i=u[n],i||(i=u[n]={})))),i}}function r(n){return function(t,i,r){var u=n(t),f;if(u)return f=arguments.length>2,f?u[i]=r:u[i]}}function e(t){var i=FxImpl.Po.getOrCreateMetadata(t);i&&(i.isNonSerializableCallStack=n.getCurrentCallStack()||"(Unknown callstack)")}var u=n.generateNonSerializableProperty,f=u("poSpecialType");t.dataContainer=i("client");t.disposableDataContainer=i("clientDisposables");t.data=r(t.dataContainer);t.disposableData=r(t.disposableDataContainer);t.markNonSerializable=e})(i=t.ProxiedObservables||(t.ProxiedObservables={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function ar(t){return t?Q.defer():n.defer()}function vr(n){try{return o(n)?n:ef(n)}catch(t){return t}}function b(n,t){var i=ft(n),r=i?i.id+":":"";try{return r+nf(n,t)}catch(u){return r+"Failed to get descriptor:"+u}}function ct(n){return typeof n=="string"&&n[0]!==i?"removed:"+n.length:n}function yr(n){var o,h,t,s,e,f,l;if(!n)return n;if(n.length===1)return[ct(n[0])];for(o=[],h=n.length>50?50:n.length,t=0;t<h;t+=2){var c=n[t],r=n[t+1],a=c.split(i),v=parseInt(a[1]),u=void 0;switch(v){case 11:for(s=r.length,u=new Array(s),e=0;e<s;e++)u[e]=ct(r[e]);break;case 3:for(u=[],f=0,l=r.length;f<l;f++)u.push(f%2==0?r[f]:ct(r[f]));break;default:u=ct(r)}o[t]=c;o[t+1]=u}return o}function wf(n){return pr.some((function(t){return t.test(n)}))}function wr(t,i,r){var u="Po-"+t+": ",f;if(i&&(u+=i),u+="\r\n"+(o(r)?r:vr(r)),r&&(f=typeof r=="string"?r:r.id||r.poId,f)){if(f=f.replace(cf,lf),!st&&t===301&&wf(f))return;u+="\r\nThe error occured in below callstack:\r\n"+f}if(st&&n.Rpc.getMessageContext&&n.Rpc.getMessageContext()&&(u+="\r\n"+n.Rpc.getMessageContext().callStack),t===301){ki.warning(u,t);return}ki.error(u,t)}function lt(n,t,i,r){wr(n,t,i,r)}function f(n,t){wr(n,"Please open a bug to Framework.",t)}function rt(n,t){f(n,"Unsupported: "+t)}function br(n,t,i){t.raiseRemoteException("Po-"+n+": "+vr(i))}function k(n,t,i){t[i]=n.slice(0)}function kr(n,t,i){var u={id:n};return r.set(t,u),Array.isArray(t)&&k(t,u,i.aId),i.isPrimary&&i.nc++===pf&&ti((function(){wu(i,!0)})),u}function bf(n){for(var r,i={},t=0,u=n.length;t<u;t++)r=n[t],i[r]=!0;return i}function kf(n,t){for(var r,u=Object.keys(t),i=0,f=u.length;i<f;i++)r=u[i],n[r]=t[r];return n}function df(n){for(var t in n)return t,!1;return!0}function ui(n){return typeof n.reject=="function"&&n.promise||typeof n.then=="function"}function gf(n){return n.charCodeAt(0)===95&&!(n.charCodeAt(1)===109&&n.charCodeAt(2)===115&&n.charCodeAt(3)===80&&n.charCodeAt(4)===111&&n.charCodeAt(5)===114&&n.charCodeAt(6)===116&&n.charCodeAt(7)===97&&n.charCodeAt(8)===108&&n.charCodeAt(9)===70&&n.charCodeAt(10)===120)}function w(n,t){var c,f,e,i,l,u,s,h;if(!o(n)&&r.get(n)&&!t.get(n)){t.set(n,!0);c=typeof n;switch(c){case"object":if(Array.isArray(n))for(i=0;i<n.length;i++)w(n[i],t);else if(ui(n))f=g(n),f.getState()!==0&&w(f.getValue(),t);else if(!(n instanceof Date)&&!(n instanceof RegExp)){for(e=Object.keys(n),i=0,l=e.length;i<l;i++)(u=e[i],gf(u))||ot&&(s=er(n,u),s.get||s.set)||w(n[u],t);h=ur(n);h!==ni&&w(h,t)}break;case"function":ko.isObservable(n)&&w(n.peek(),t)}}}function ne(n,t){return n.map[t]||n.pending[t]}function dr(n,t){t.length>300&&(n.freedIds=t.slice(100,300))}function fi(n,t){return n.freedIds.indexOf(t)>=0}function c(n,t,i,r,u){var e=n.map[t]||n.pending[t];if(e)return e;if(fi(n,t)){ri(207,{id:t,code:i});return}f(i,{id:t,d:n.disposed,v:b(r),s:u&&tf(!0)})}function d(n,t){var i=r.get(n);return i||f(t,b(n)),i}function ei(n,t){var i=r.get(n);return i?i[t]:n}function te(n,t,i){var u=c(n,t,i);return u?r.get(u).disallowRemoteMutations:!1}function si(n,t,i){for(var r,e,f=t.id,u=0,o=h.length;u<o;u++)r=h[u],e=r.map[f]||r.pending[f],e===n&&i(r)}function hi(n,t,i,u,f){var e=n.gFuncCallId(),k=[],l=c(n,t,222,u,!0),a,o,v,s,d,p,nt,w,b,h;if(l){for(a=r.get(l).disallowRemoteMutations,o=[l],i===gt?v=cr:(v=y(n,i,a,!0),o.push(i)),s=0,d=u.length;s<d;s++)p=u[s],k.push(y(n,p,a,!0)),o.push(p);nt={cid:e,fid:t,t:v,a:k};w=g(f);n.funcCalls[e]={promise:w,objs:o};n.onFunction(nt);b=w.promise;h=!1;b.hold=function(){return h=!0,{dispose:function(){delete n.roots[e];h=!1}}};b.then((function(t){h&&(n.roots[e]=t)}),(function(){}))}}function nu(){var i,n,r,t;for(at=!0;a.length;)for(i=a,a=[],n=0,r=i.length;n<r;n++)t=i[n],t.length===3?si.apply(null,t):hi.apply(null,t);at=!1}function yt(n){vt=ie[n];tu=re[n]}function pt(n,t){var i=n[t];return i===undefined?0:i}function ci(n,t){var i=pt(n,t);return n[t]=++i,i}function iu(n,t,i,r){i.desiredValue=r;try{t(r)}finally{i.desiredValue=undefined}}function ue(n,t,i,r){var c=ko.isComputed(t),u=t.peek(),h=ei(u,n.aId),o,l,f,s,a;if(nr(h,u)||(u.length=0,h.length&&rf.apply(u,h)),c||t.valueWillMutate(),i)for(f=0,s=i.length;f<s;f++){o=i[f];switch(o.k){case 0:l=e(n,o.v);u.splice(o.i,0,l);break;case 1:u.splice(o.i,1)}}else for(u.splice(0,u.length),f=0,s=r.length;f<s;f++)u.push(e(n,r[f]));a=d(u,240);k(u,a,n.aId);c?t(u):t.valueHasMutated()}function fe(n,t,i,r,u,f,o){var s=e(n,t.o),h=u+1;if(f===h||i.peek()===s)try{iu(n,i,r,s)}finally{pt(r,o)===u&&(r[o]=f)}else return n.isPrimary?ci(r,o):iu(n,i,r,s),b(s)}function ee(n,t,i){var o=[],f,s,r,u;if(t)for(r=0,u=t.length;r<u;r++)f=t[r],s=f.v,o.push({k:f.k,i:f.i,v:s?b(e(n,s)):null});else if(i)for(r=0,u=i.length;r<u;r++)o.push(b(e(n,i[r])));return o}function ru(n,t){var o=t.o,u=t.a,s=t.fa,f,i,r;if(o)e(n,o);else if(u)for(i=0,r=u.length;i<r;i++)f=u[i],f.k===0&&e(n,f.v);else for(i=0,r=s.length;i<r;i++)e(n,s[i])}function oe(n,t,i,r,u,f,e){var h=n.sId,o=r[h],s=t.sn,c=t.a,l=t.fa,a=s===o;if(f!==u+1&&a)return r[h]=o?o+1:1,r[e]=undefined,ee(n,c,l);if(!a){if(o&&(s===undefined||s<o))return;r[h]=s;r[e]=undefined}ue(n,i,c,l);pt(r,e)===u&&(r[e]=f)}function uu(n,t,i,r){var u=t.id;vt(n,t,(function(n){var c=n.cnId,l=ci(t,c),f,s,e,a,o,v,h;if(n.receivedChanges[u]!==l){if(f={id:u,cn:l},t[n.sId]&&t[c]===1){for(s=[],e=0,a=r.length;e<a;e++)s.push(y(n,r[e],!1));f.fa=s}else i=ei(i,n.aId),o=ff(i,r,{sparse:!0}),o=uf(o),v=o.map((function(i){switch(i.status){case"added":return{k:0,i:i.index,v:y(n,i.value,t.disallowRemoteMutations,!0)};case"deleted":return{k:1,i:i.index};default:rt(106,i.status)}})),f.a=v;h=t[n.sId];h&&(f.sn=h);n.onChange(f);k(r,d(r,235),n.aId)}}))}function fu(n,t,i,r){var u=i===r,f=Array.isArray(i);if(u&&f){uu(n,t,i,r);return}vt(n,t,(function(i){var u=ci(t,i.cnId),f;if(i.receivedChanges[t.id]===u)if(ko.isComputed(n)&&r!==t.desiredValue)u=++t[i.cnId];else return;f={id:t.id,o:y(i,r,t.disallowRemoteMutations,!0),cn:u};i.onChange(f)}))}function ut(n,t){var i=n._poBuffer;n._poBuffer=t;i&&i()}function se(n){var t=n.deferred,i=n.promise;t&&!i[tt]&&or(i,tt,{value:t,enumerable:!1})}function ai(n,t,i,r){vt(n,t,(function(n){var u=n.pId;if(!t[u]&&!n.disposed)n.onPromise({id:t.id,s:i,v:y(n,r,t.disallowRemoteMutations,!0)});t[u]&&t[u]--}))}function hu(n){var t=ht.get(n.promise),i;t||(t={},i=function(n){t.value=n},n.promise.then(i,i),ht.set(n.promise,t))}function cu(n,t){n.progress((function(n){var i=d(t,236);ai(t,i,0,n)}));n.always((function(i){arguments.length===0&&(i=n.getValue());var r=n.getState(),u=d(t,237);switch(r){case 1:ai(t,u,1,i);break;case 2:ai(t,u,2,i);break;default:rt(100,r)}}))}function lu(n,t,i,r,u){switch(t){case 1:n.deferred.resolve(i);break;case 2:n.deferred.reject(i);break;case 0:u||cu(n,r);break;default:rt(101,t)}}function g(n){var t;return typeof n.resolve=="function"&&typeof n.reject=="function"&&n.promise?typeof n.promise=="function"?(t=new su(n,n.promise(),7),hu(t)):t=n.promise instanceof Promise&&!hr(n.promise)||du(n.promise)?new eu(n,n.promise,7):new ou(n,n.promise,7):hr(n)?t=new ou(n[tt],n,6):n instanceof Promise||du(n)?t=new eu(n[tt],n,6):sr(n)&&(t=new su(n[tt],n,6),hu(t)),se(t),t}function he(n,t){var u=e(n,t.v),o=c(n,t.id,221,u),s,i,f,r;if(o){if(s=g(o),s.getState()!==0){ri(244,t.id);return}if(i=d(o,238),i.disallowRemoteMutations){br(242,n,{id:i.id,msg:"Remote mutation is not allowed"});return}f=n.pId;i[f]?i[f]++:i[f]=1;r=s.deferred;switch(t.s){case 1:r.resolve(u);break;case 2:r.reject(u);break;case 0:r.notify&&r.notify(u);break;default:rt(101,t.s)}}}function wt(n,t,i,r){if(!n.disposed)n.onPromise({id:r.cid,s:i,v:y(n,t,te(n,r.fid,220),!0)})}function ce(n,t){return function(){var i=ar(!0);tu(n,t,this,arguments,i);var r=i.promise,u=r.hold,f=r.then(MsPortalFx.identity);return u&&(f.hold=u),f}}function le(n,t,i){var r=e(n,t.v),s=n.funcCalls,h=t.id,c=i.promise,u=c.deferred,f=t.s;o(r)||s[h].objs.push(r);switch(f){case 1:u.resolve(r);break;case 2:u.reject(r);break;case 0:u.notify&&u.notify(r);break;default:rt(103,f)}f!==0&&c.alwaysHandled((function(){ti((function(){delete s[h]}))}))}function v(n,t,i,u){var f=r.get(t),e=n.map,o;if(f){if(f.id?u=f.id:f.id=u,e[u])return u;if(o=n.pending,o[u])return e[u]=t,delete o[u],i.push([u,t]),n.revivedIds[u]=t,u;Array.isArray(t)&&k(t,f,n.aId)}else kr(u,t,n);return e[u]=t,i.push([u,t]),u}function ae(n,t){var i=er(t,n);return i.get||i.set}function au(n,t,r,u){for(var o=[],h=Object.keys(t),f,e,s=0,c=h.length;s<c;s++)if(f=h[s],!t.hasOwnProperty||fr(t,f)){if(f.charCodeAt(0)===95&&!(f.charCodeAt(1)===109&&f.charCodeAt(2)===115&&f.charCodeAt(3)===80&&f.charCodeAt(4)===111&&f.charCodeAt(5)===114&&f.charCodeAt(6)===116&&f.charCodeAt(7)===97&&f.charCodeAt(8)===108&&f.charCodeAt(9)===70&&f.charCodeAt(10)===120))continue;if(ot&&ae(f,t))continue;e=t[f];switch(typeof e){case"function":if(f==="constructor")continue;break;case"object":if(!e){o.push(f,e);continue}if(e[it])continue;break;default:o.push(f,e);continue}o.push(f,i+v(n,e,u,r+"."+f))}return o}function ve(n,t,r,u){for(var o=[],f,e=0,s=t.length;e<s;e++){f=t[e];switch(typeof f){case"object":o[e]=f?f[it]?undefined:i+v(n,f,u,r+"."+e):f;break;case"function":o[e]=i+v(n,f,u,r+"."+e);break;default:o[e]=f}}return o}function fo(n,t,u){var st=[],vt=n.map,c,w,b,ht,d,y,p,rt,ut,tt,ot,et;if(t[it])return cr;if(c=[],w=r.get(t),w&&(b=w.id,vt[b]))if(w.disallowRemoteMutations=u,Array.isArray(t)){if(ht=ei(t,n.aId),nr(t,ht))return[b,undefined];c.push([b,t]);k(t,w,n.aId)}else return[b,undefined];for(d=[],v(n,t,c,n.gId());c.length;){var ct=c.shift(),a=ct[0],e=ct[1],at=typeof e,h=void 0,l=void 0;switch(at){case"function":ko.isObservable(e)?(y=e.peek(),"splice"in e||"map"in e?y&&Array.isArray(y)?(h=yi,l=v(n,y,c,a+"(a)")):y===undefined?h=ye:y===null?h=pe:lt(303,"Attempting to serialize an observable array whose value is not an array, null, or undefined.",a):(ko.isPureComputed(e)&&(e[n.kId]=e.subscribe(nt)),o(y)?(h=we,l=y):(h=vu,l=v(n,y,c,a+"(o)")))):(h=be,l=undefined);break;case"object":ui(e)?(p=g(e),p.getState()===0&&cu(p,e),rt=p.getValue(),ut=void 0,o(rt)?(ut=ro,l=rt):(ut=uo,l=v(n,rt,c,a+"()")),h=s[p.type]+i+s[p.implementation]+ut+p.getState()):e instanceof Date?(h=ke,l=e.getTime()):e instanceof RegExp?(h=de,tt=e.source+i,e.global&&(tt+="g"),e.ignoreCase&&(tt+="i"),e.multiline&&(tt+="m"),l=tt):Array.isArray(e)?(h=ge,l=ve(n,e,a,c)):e instanceof Error?(h=bt,ot={message:e.message,name:e.name,stack:e.stack,extension:n.lWinId},kf(ot,e),l=au(n,ot,a,c)):e instanceof ArrayBuffer?(h=to,l=e):(et=ur(e),h=et===ni?bt:et===null?no:bt+i+v(n,et,d,a+"(p)"),l=au(n,e,a,c));break;default:f(105,{pId:n.id,t:at})}u&&(ft(e).disallowRemoteMutations=!0);st.push(a+i+h,l);!c.length&&d.length&&(c=d,d=[])}return st}function eo(n,t,r,u){for(var e,o,s,h,f=0,c=u.length;f<c;f+=2)e=u[f],o=u[f+1],o&&o[0]===i?(s=o.substring(1),h=n[s]||t[s],h?r[e]=h:(r[e]=s,l.push(e))):r[e]=o}function oo(n,t,r){for(var f,e,o,u=0,s=r.length;u<s;u++)f=r[u],f&&f[0]===i&&(e=f.substring(1),o=n[e]||t[e],o?r[u]=o:(r[u]=e,l.push(""+u)));return r}function so(n,t){for(var l,r,s,a,h,e=0,v=n.length;e<v;e++){var o=n[e],y=o[0],i=o[1],u=o[2];switch(y){case 11:for(r=0,s=u.length;r<s;r++)l=u[r],i[l]=c(t,i[l],243);k(i,ft(i),t.aId);break;case 3:for(r=0,s=u.length;r<s;r++)a=u[r],i[a]=c(t,i[a],232);break;case 0:case 1:h=c(t,u,233);i(h);break;case 7:case 6:h=c(t,u,234);lu(i,o[3],h,y===7?i.deferred:i.promise,!1);break;default:f(107,t.id)}}}function ho(n,t){function ft(r){var e,h,u,o;for(d?d[r]&&f(213,r):d={},d[r]=!0,e=r+i,h=e.length,u=s-1;u>=2;u-=2)if(o=t[u],o.substring(0,h)===e){t[s+1]=o;t[s+2]=t[u+1];t[u]=io;t[u+1]=null;s+=4;return}f(214,{id:r,f:fi(n,r)})}for(var o=n.map,a=n.pending,h=[],y,d,s=t.length-1,p,c,r,v,tt,w,b,k;s>0;){var et=t[s-1],u=t[s],e=et.split(i);p=e[0];c=oi[e[1]];r=void 0;switch(c){case 3:v=e[2];v?v==="n"?r=rr(null):(tt=o[v]||a[v],tt?r=rr(tt):(ft(v),y=!0)):r={};y||(eo(o,a,r,u),l.length&&(h.push([3,r,l]),l=[]));break;case 11:r=oo(o,a,u);l.length&&(h.push([11,r,l]),l=[]);break;case 4:r=new Date(u);break;case 5:var it=u.lastIndexOf(i),ot=u.substring(0,it),st=u.substring(it+1);r=new RegExp(ot,st);break;case 10:r=ce(n,p);break;case 0:if(r=ko.observable(),w=void 0,e[2])w=u;else if(w=o[u]||a[u],!w){h.push([c,r,u]);break}r(w);break;case 1:if(r=ko.observableArray(),b=void 0,e[2])b=e[2]==="u"?undefined:null;else if(b=o[u]||a[u],!b){h.push([c,r,u]);break}r(b);break;case 7:case 6:var rt=c===6,nt=g(ar(!!oi[e[2]])),ut=oi[e[4]];if(r=rt?nt.promise:nt.deferred,k=void 0,e[3])k=u;else if(k=o[u]||a[u],!k){h.push([c,nt,u,ut]);break}lu(nt,ut,k,r,rt);break;case 13:r=u;break;case 14:y=!0;break;default:f(108,{pId:n.id,t:c,d:yr(t)})}y?y=!1:(kr(p,r,n),o[p]=r);s-=2}return h.length&&so(h,n),o[p]}function y(n,t,i,r){if(o(t))return[t];try{return yt(1),fo(n,t,i,r)}catch(u){lt(241,null,{message:u.message,callstack:u.stack,pId:n.id,data:b(t)},!0);throw u;}finally{yt(0)}}function e(n,t){if(t.length===0)return undefined;if(t.length===1)return t[0];if(t.length===2&&t[1]===undefined&&t[0].indexOf(i)<0)return c(n,t[0],245);try{return yt(2),ho(n,t)}finally{yt(0)}}function kt(n,t,i,u){var f=r.get(n),e;f&&f[t]&&(f[t]=undefined);e=n[i];e&&(e.dispose(),n[i]=undefined);f&&f[u]&&(f[u]=undefined)}function yu(n,t){var i=n.roots[t];i||f(206,t);delete n.roots[t];n.isPrimary&&n.dc++}function pu(n){var r=n.roots,u=n.funcCalls,t=gu(),f,e,o,i,s;for(f in r)e=r[f],w(e,t);for(o in u){i=u[o].objs;for(s in i)w(i[s],t)}return t}function co(n){var f=pu(n),i=n.map,e=n.pending,r=[],t,u;for(t in i)u=i[t],f.get(u)||(r.push(t),e[t]=i[t],delete i[t]);return r}function ao(n,t){var e=bf(t),o=n.map,u=n.pending,s=n.aId,h=n.kId,c=n.cnId,f=n.freedIds,i,r;for(i in u)r=u[i],e[i]?(kt(r,s,h,c),f.push(i)):o[i]=r;dr(n,f);ii&&dt.completeTrace(n.gcTk,{disposed:t.length,created:n.nc,immediate:n.gcI||!1});n.pending={};n.revivedIds={};n.nc=0;n.dc=0;n.gcTk=undefined;n.gcLt=tr()}function vo(n,t){for(var i,r,c=pu(n),u=[],s=n.map,e=[],l=n.aId,a=n.kId,v=n.cnId,h=n.freedIds,o=0,y=t.length;o<y;o++)i=t[o],r=s[i],r?c.get(r)||(u.push(i),delete s[i],kt(r,l,a,v),h.push(i)):(u.push(i),e.push(i));return e.length&&f(231,{pId:n.id,objs:e}),dr(n,h),u}function yo(n,t){n.gcIIds=t;n.gcIIdMap=undefined}function po(n,t){var u=n.gcIIds,i,r,f;if(u){if(i=n.gcIIdMap,!i){for(i={},r=0,f=u.length;r<f;r++)i[u[r]]=!0;n.gcIIdMap=i}return i[t]}}function wu(n,t){if(df(n.pending)){var i=co(n);if(i.length){n.gcI=t;ii&&(n.gcTk=dt.start({source:"PO",action:"GC",name:n.id}));n.onRelease({iIds:i})}}}function wo(){return hf((function(){var n=h.filter((function(n){return n.isPrimary&&(n.nc>yf||n.dc)})),t,i;n.length&&(t=0,i=function(){wu(n[t++]);t<n.length&&ti(i)},i())}),vf)}function bo(n,t){return n==="fx"?!0:t==="fx"?!1:n==="HubsExtension"?!0:t==="HubsExtension"?!1:n>t}function wi(n){return function(t){n(t);a.length&&!at&&nu()}}function go(n,t,i,r,u,e,o,s,c){var l=new pi,a=n+h.length;return l.id=a,l.cnId="c-"+a,l.aId="a-"+a,l.kId="k-"+a,l.pId="p-"+a,l.sId="s-"+a,l.raiseRemoteException=t,l.onChange=wi(i),l.onPromise=wi(r),l.onFunction=wi(u),l.onRelease=e,l.gId=gi(a),l.gFuncCallId=gi(a+"f"),l.rWinId=s,l.lWinId=o,l.gcLt=tr(),o===s&&f(210,o),l.isPrimary=bo(o,s),!l.isPrimary||bu||c||(bu=wo()),h.push(l),l}function ft(n){return r.get(n)}function ns(n){var t=ft(n);return t&&t.id}function ku(n){if(!o(n)){var t=r.get(n);return t||(t={id:null},r.set(n,t)),t}}function ts(n){var t=ku(n);t&&(t.disallowRemoteMutations=!0)}function is(){return{compatibilityMode:ot,diagnostics:st,metadataMap:r,jQPromise:ht,managers:h}}function du(n){return!!n._cancelationToken&&sr(n)}var u=MsPortalFx,bi=u.Base,dt=bi.Diagnostics.Telemetry,gt=window,ki=new bi.Diagnostics.Log("Base.ProxiedObservablesV2"),di=ko.subscribable.fn,et=di.notifySubscribers,nt=u.noop,gu=function(){return new Map},o=u.isPrimitive,gi=u.getIdGenerator,rs=u.getObjectConstructorName,nf=u.getObjectDescriptor,tf=u.getCurrentCallStack,us=u.isNullOrUndefined,fs=u.isEmpty,nr=u.arrayEquals,tr=u.startTimer,i=String.fromCharCode(5),rf=Array.prototype.push,ir=ko.utils,uf=ir.adjustArrayEdits,ff=ir.compareArrays,ef=JSON.stringify,sf=Math,p=Object,rr=p.create,ur=p.getPrototypeOf,ni=p.prototype,fr=u.uncurryThis(ni.hasOwnProperty),er=p.getOwnPropertyDescriptor,or=p.defineProperty,es=p.defineProperties,os=p.preventExtensions,sr=Q.isPromiseAlike,hr=Q.isPromise,hf=setInterval,ti=Q.nextTick,cr=[undefined],cf=/^(\w+-\w+-)(\w+-\w+)+(.*)$/,lf="$1?$3",ot=!0,ii=!1,lr=!1,af=!1,ri,pr,a,at,li,l,lo,bu,pi;n.onEnvironmentSet((function(n){ot=!n("enableFastViewModelProxying",!1);ii=u.isFeatureEnabled("gctelemetry");lr=u.isFeatureEnabled("detailedgclog");af=lr||u.isFeatureEnabled("gclog")}));var vf=3e4,yf=100,pf=54e3,st=MsPortalFx.isDevelopmentMode||MsPortalFx.trace.diagnostics,ss=MsPortalFx.trace.potrackobservable,tt="_deferred",it="###isPoUndefined###";[$.prototype,$.Event&&$.Event.prototype||{},gt,].forEach((function(n){or(n,it,{configurable:!0,value:!0})}));var r=new WeakMap,ht=new WeakMap,h=[];ri=nt;pr=[/\.activatedItems$/,/^Microsoft_Azure_Insights(.)*/,/\.notFoundMessage$/,];var gr=sf.max(15,3),oi=u.getStringToIntMap(gr),s=u.getIntToStringMap(gr);a=[];at=!1;var ie=[si,function(n,t,i){a.push([n,t,i])},nt,],re=[hi,function(n,t,i,r,u){a.push([n,t,i,r,u])},nt,],vt=si,tu=hi;di.notifySubscribers=function(n,t){var u=this,i=r.get(this),f;if(i)if(t==="beforeChange")this._capturedOriginalValue===!0&&lt(302,"Detected a cycle subscription. Please avoid pattern:\r\n observable.subscribe(() => { observable(1); }, null, 'beforeChange')",i.id),ut(this),this._originalValue=this.peek(),this._capturedOriginalValue=!0,et.apply(this,arguments);else if(t===undefined){f=this.peek();this._capturedOriginalValue?(this._capturedOriginalValue=!1,ut(this,(function(){fu(u,i,u._originalValue,f)}))):typeof this.push=="function"||n&&typeof n.push=="function"?ut(this,(function(){uu(u,i,f,n)})):ut(this,(function(){fu(u,i,f,n)}));try{et.apply(this,arguments)}finally{ut(this);this._originalValue=undefined}}else et.apply(this,arguments);else et.apply(this,arguments)};li={resolved:1,fulfilled:1,rejected:2,pending:0};var vi=(function(){function n(){}return n.prototype.always=function(n){var t=this;this.promise.finally((function(){n(t.getValue())}))},n.prototype.alwaysHandled=function(n){var i=this,t=function(){n(i.getValue())};this.promise.then(t,t)},n.prototype.progress=function(n){this.promise.progress&&this.promise.progress(n).then(MsPortalFx.identity,MsPortalFx.noop)},n})(),eu=(function(n){function t(t,i,r){var u=n.call(this)||this;return u.implementation=0,u._state=0,u.deferred=t,u.promise=i.then((function(n){return u._state=1,u._value=n}),(function(n){u._state=2;u._value=n;throw n;})),u.type=r,u}return __extends(t,n),t.prototype.getState=function(){return this._state},t.prototype.getValue=function(){return this._value},t})(vi),ou=(function(n){function t(t,i,r){var u=n.call(this)||this;return u.implementation=1,u.deferred=t,u.promise=i,u.type=r,u}return __extends(t,n),t.prototype.getState=function(){var n=this.promise.inspect();return li[n.state]},t.prototype.getValue=function(){var n=this.promise.inspect();switch(n.state){case"pending":return;case"fulfilled":return n.value;case"rejected":return n.reason;default:throw new Error("Unexpected Promise State");}},t})(vi),su=(function(n){function t(t,i,r){var u=n.call(this)||this;return u.implementation=2,u.deferred=t,u.promise=i,u.type=r,u.getState=function(){var n=i.state();return li[n]},u}return __extends(t,n),t.prototype.getValue=function(){if(this.getState()!==0){var n=ht.get(this.promise);return n||f(203,{m:r.get(this.promise)}),n.value}},t})(vi);var yi=s[1],ye=yi+i+"u",pe=yi+i+"n",vu=s[0],we=vu+i+"1",be=s[10],ke=s[4],de=s[5],bt=s[3],ge=s[11],no=bt+i+"n",to=s[13],io=i+14,ro=i+"1"+i,uo=i+i;l=[];lo=nt;pi=(function(){function n(){this.nc=0;this.dc=0;this.ops=[];this.map={};this.pending={};this.roots={};this.receivedChanges={};this.funcCalls={};this.freedIds=[];this.revivedIds={}}return n.prototype.serialize=function(n,t){var u=y(this,n,t,!1),i;return o(n)||n[it]||(i=r.get(n),this.roots[i.id]=n),u},n.prototype.proxyBuffer=function(){a.length&&nu()},n.prototype.deserialize=function(n){var t=e(this,n),i;return o(t)||(i=r.get(t),this.roots[i.id]=t),t},n.prototype.applyPromise=function(n){var i=this,t;this.disposed||(t=this.funcCalls[n.id],t?le(this,n,t):he(this,n))},n.prototype.applyChange=function(n){var l=this,t=n.id,u,h;if(!this.disposed){if(u=ne(this,t),!u){ru(this,n);(this.isPrimary||!po(this,t))&&f(224,{id:t,freed:fi(this,t),data:yr(n.o)});return}if(this.revivedIds[n.id]){ru(this,n);return}var i=r.get(u),e=n.cn,o=this.cnId,s=pt(i,o),c=this.receivedChanges;if(i.disallowRemoteMutations){i[o]=e;br(216,this,{id:i.id,msg:"Remote mutation is not allowed"});return}c[t]=s+1;try{h=n.o?fe(this,n,u,i,s,e,o):oe(this,n,u,i,s,e,o);h&&lt(301,"Detected a simultaneous change.",{id:t,from:this.rWinId,remote:e,local:s,serial:i[this.sId],changes:h},!st)}finally{delete c[t]}}},n.prototype.applyRelease=function(n){var r=this,t,i;if(!this.disposed)if(n.rId)yu(this,n.rId);else if(n.iIds){t=n.iIds;yo(this,t);i=vo(this,t);this.onRelease({cIds:i})}else ao(this,n.cIds)},n.prototype.invoke=function(n){var r=this,s=!1,t,u,o,h;if(!this.disposed&&(u=c(this,n.fid,225),u)){o=e(this,n.t);o===undefined&&n.t.length>1&&f(209);h=n.a.map((function(n){return e(r,n)}));try{t=u.apply(o,h);s=!0}finally{if(t&&ui(t)){var a=fr(t,"_underlyingPromise")?t._underlyingPromise:t,i=g(a),l=i.getState();l===0?(i.progress((function(t){wt(r,t,0,n)})),i.always((function(t){wt(r,t,i.getState(),n)}))):wt(this,i.getValue(),l,n)}else wt(this,t,s?1:2,n)}}},n.prototype.release=function(n){if(!o(n)){var t=d(n,239);yu(this,t.id);this.onRelease({rId:t.id})}},n.prototype.dispose=function(){var s=this,n,o,t;if(!this.disposed){this.disposed=!0;var i=this.map,r=this.pending,u=this.aId,f=this.kId,e=this.cnId;for(gt.clearInterval(this.gcH),n=0,o=h.length;n<o;n++)if(h[n]===this){h.splice(n,1);break}for(t in i)kt(i[t],u,f,e);for(t in r)kt(r[t],u,f,e);this.gcTk&&dt.completeTrace(this.gcTk,{disposed:-1,created:this.nc});this.map=null;this.pending=null;this.roots=null}},n})();t.ProxiedObjectManager=pi;t.createPoMgr=go;t.getMetadata=ft;t.getMetadataId=ns;t.getOrCreateMetadata=ku;t.disallowRemoteMutations=ts;t.getDiagnostics=is})(t=n.Po||(n.Po={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function r(n){return i(n)||n>=0}function u(n,t){return n===t?0:i(n)?-1:i(t)?1:n>t?1:-1}function s(n){var t,i;if(!n)return t=new f,t.major=0,t.minor=0,t.build=0,t.revision=0,t;if(i=o(n),!i)throw new Error("value is not a valid version string.");return i}function o(n){var t;n=n||"";var i=n.split(e),u=null,o=i.length;return o>=2&&(t=new f,t.major=parseInt(i[0]),t.minor=parseInt(i[1]),t.build=o>=3?parseInt(i[2]):null,t.revision=i[3]?parseInt(i[3].match(/\d+/)):null,r(t.major)&&r(t.minor)&&r(t.build)&&r(t.revision)&&(u=t)),u}var i=n.isNullOrUndefined,e=".",f;t.getVersionFromString=s;t.tryParseVersion=o;f=(function(){function n(){}return n.prototype.toString=function(){var n=[this.major,this.minor,],r=this.build,t;return i(r)||(n.push(r),t=this.revision,i(t)||n.push(t)),n.join(e)},n.prototype.compareTo=function(n){var t=u(this.major,n.major);return t||(t=u(this.minor,n.minor),t||(t=u(this.build,n.build),t||(t=u(this.revision,n.revision)))),t},n})()})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function v(n,t,i){n?n(i):t.push(i)}function p(n,t,i){if(i.flags&1)return r.usingState((function(){return n.deserialize(i.initialObject)}),t)}function w(n,t,i){var u=i.channelObjects;return u&&r.usingState((function(){for(var f,i=[],t=0,r=u;t<r.length;t++)f=r[t],i.push(n.deserialize(f));return i}),t)}function nt(n){t.client.start(n)}var f=MsPortalFx,l=f.Base,i=l.Diagnostics,r=n.TelemetryContext,e=n.Po,u=f.disposeDisposable,a=n.getErrorMap({sameWindow:""}),y=(function(n){function t(t,i,r,u,f){var e=n.call(this)||this;return e._poMgr=t,e._connectionId=i,e._ltm=r,e._sendHandlerPortMessage=u,e._initialObject=undefined,e._handlerBuffer=[],e._messageHandler=undefined,e._disallowRemoteMutations=!f.allowRemoteChanges,e}return __extends(t,n),t.prototype.transferInitialObject=function(n){var u,t,i,r;for(this._initialObject=n,u=this._handlerBuffer.length?4:0,this._sendHandlerPortMessage({channelObjects:undefined,connectionId:this._connectionId,flags:1|u,initialObject:this._serializeObject(n),metadata:undefined}),t=0,i=this._handlerBuffer;t<i.length;t++)r=i[t],this._transferObjectCore(r.handlerData,r.proxiedObjects);this._handlerBuffer=null;this._poMgr.proxyBuffer()},t.prototype.transferObjects=function(n,t){this._handlerBuffer?this._handlerBuffer.push({handlerData:n,proxiedObjects:t}):(this._transferObjectCore(n,t),this._poMgr.proxyBuffer())},t.prototype.handleMessage=function(n){this._messageHandler(n.data)},t.prototype.releaseObject=function(n){this._handlerBuffer||this._poMgr.release(n)},t.prototype.onMessage=function(n){this._messageHandler=n},t.prototype.dispose=function(){this._ltm.dispose();this._initialObject&&this._poMgr.release(this._initialObject);n.prototype.dispose.call(this)},t.prototype._transferObjectCore=function(n,t){var r,i,u,f;if(t)for(r=[],i=0,u=t;i<u.length;i++)f=u[i],r.push(this._serializeObject(f));this._sendHandlerPortMessage({channelObjects:r,connectionId:this._connectionId,flags:2,initialObject:undefined,metadata:n})},t.prototype._serializeObject=function(n){return this._poMgr.serialize(n,this._disallowRemoteMutations,!1)},t})(t.DisposableValue),b=(function(n){function t(t,i,r,u){var f=n.call(this,p(t,i,u))||this;return f._poMgr=t,f._telemetryContext=i,f._sendInvokerPortMessage=r,f._handlerBuffer=[],f._messageHandler=undefined,f._connectionId=u.connectionId,f.isChannelEnabled=!!(u.flags&4),f.handleMessage(u),f}return __extends(t,n),t.prototype.handleMessage=function(n){n.flags&2&&v(this._messageHandler,this._handlerBuffer,{body:n.metadata,obj:w(this._poMgr,this._telemetryContext,n)})},t.prototype.postMessage=function(n){this._sendInvokerPortMessage({connectionId:this._connectionId,data:n})},t.prototype.onObject=function(n){this._messageHandler=n;this._handlerBuffer.forEach(this._messageHandler);this._handlerBuffer.length=0},t})(t.DisposableValue),k=(function(){function n(n,i,f,o,s,h){var c=this;this._clientCtx=n;this._remoteWindowId=f;this.remoteInstanceIndex=o;this._pendingObjRequest=s;this._sender=h;this._msgRelay=new t.MessageMultiplexer(function(n){c._sender(n,c._remoteWindowId)},7);this._sendInvokerPortMessage=this._msgRelay.registerHandler(4,(function(n){var t=c._handlerPortContexts.getValue(n.connectionId);t&&t.handleMessage(n)}));this._sendHandlerPortMessage=this._msgRelay.registerHandler(5,(function(n){var t=n.connectionId,i=c._invokerPortContexts.getValue(t),r;if(i)i.handleMessage(n);else if(r=c._pendingObjRequest.getMetadata(t),r){i=new b(c._poMgr,r.telemetryContext,c._sendInvokerPortMessage,n);i.onDispose((function(){c._sendReleaseConnection(t)}));c._pendingObjRequest.resolve(t,c._invokerPortContexts.setValue(t,i))}else c._sendReleaseConnection(t)}));this._sendReleaseConnection=this._msgRelay.registerHandler(6,(function(n){u(c._handlerPortContexts.getValue(n))}));this._handlerPortContexts=new t.DisposableValueDictionary;this._invokerPortContexts=new t.DisposableValueDictionary(function(n,t){c._clientCtx&&c._clientCtx.setRefCount(c._remoteWindowId,n,1,t)});this._poMgr=e.createPoMgr([i,f,o].join("-"),(function(n){c._clientCtx.raiseRemoteException(n,c._remoteWindowId)}),this._msgRelay.registerHandler(0,(function(n){var t=e.getMetadata(n);r.usingState((function(){c._poMgr.applyChange(n)}),t)})),this._msgRelay.registerHandler(1,(function(n){c._poMgr.applyPromise(n)})),this._msgRelay.registerHandler(2,(function(n){c._poMgr.invoke(n)})),this._msgRelay.registerHandler(3,(function(n){c._poMgr.applyRelease(n)})),i,f)}return n.prototype.createConnection=function(n,t,i){return this._handlerPortContexts.setValue(n,new y(this._poMgr,n,t,this._sendHandlerPortMessage,i))},n.prototype.handleEventMessage=function(n){this._msgRelay.handleMessage(n)},n.prototype.dispose=function(){u(this._invokerPortContexts,this._handlerPortContexts,this._poMgr)},n})(),d=(function(){function n(n,i,r,u,f){this.remoteId=n;this._clientCtx=i;this._sendAcquireObjRequest=r;this._sendConnectionMessage=u;this._log=f;this._pendingPoInvocations=new t.PendingObjectTable(this.remoteId,this._clientCtx,2,!1,this._log);this._poContext=undefined}return n.prototype.getPoContext=function(n){this._checkConnection(n.srcInstanceIndex);var t=this._poContext||(this._poContext=new k(this._clientCtx,n.destWindowId,n.srcWindowId,n.srcInstanceIndex,this._pendingPoInvocations,this._sendConnectionMessage));return t.remoteInstanceIndex===n.srcInstanceIndex?t:null},n.prototype.acquireObject=function(n,t){var i=this;return this._pendingPoInvocations.create(n,(function(r){i._sendAcquireObjRequest({connectionId:r,name:n,arg:t},i.remoteId)}),r.getState())},n.prototype.handleAcquireObjResponseError=function(n){this._pendingPoInvocations.reject(n.connectionId,n)},n.prototype.reset=function(n){this._pendingPoInvocations.handleResetMessage(n);this._checkConnection(n.instanceIndex+1)},n.prototype._checkConnection=function(n){this._poContext&&this._poContext.remoteInstanceIndex<n&&(this._poContext&&(this._poContext.dispose(),this._poContext=null),this._sendConnectionMessage(null,this.remoteId))},n.prototype.dispose=function(){u(this._poContext,this._pendingPoInvocations)},n})(),g=(function(){function n(n,i,r){var u=this,f;this._routedMsgClientCtx=n;this._endpoints=i;this._log=r;this._targetWindows=Object.create(null);f=n.routedMessageRelay;this._sendIntiateConnectionRequest=f.registerHandler(9,(function(n,i){var r=u._getPoContext(i);r&&u._endpoints.invokeEndPoint(n.name,n.arg,i,(function(t,i){return r.createConnection(n.connectionId,t,i)}),(function(n,t){t.transferInitialObject(n)}),(function(r){u._sendConnectionInitiationError({connectionId:n.connectionId,error:t.createRpcError(r)},i.srcWindowId)}))}));this._sendConnectionInitiationError=f.registerHandler(10,(function(n,t){u._getWindowContext(t.srcWindowId).handleAcquireObjResponseError(n)}));this._sendPoEventMessage=f.registerHandler(11,(function(n,t){var i=u._getPoContext(t);i&&n&&i.handleEventMessage(n)}))}return n.prototype._getWindowContext=function(n){return n===this._routedMsgClientCtx.localWindowId&&a.sameWindow(),this._targetWindows[n]||(this._targetWindows[n]=new d(n,this._routedMsgClientCtx,this._sendIntiateConnectionRequest,this._sendPoEventMessage,this._log))},n.prototype._getPoContext=function(n){return this._getWindowContext(n.srcWindowId).getPoContext(n)},n.prototype.acquireObject=function(n,t,i){return this._getWindowContext(t).acquireObject(n,i)},n.prototype.reset=function(n){this._getWindowContext(n.windowId).reset(n)},n.prototype.dispose=function(){for(var n in this._targetWindows)this._targetWindows[n].dispose()},n})(),o=(function(r){function u(t){return r.call(this,t,(function(n){i.ErrorReporter.lastError=n;i.ErrorReporter.handleError({})}),{createLog:function(n){return new i.Log(n)},writeEntry:i.Log.writeEntry2,flush:i.Log.flush,disable:i.Log.disable},n.features)||this}return __extends(u,r),u.prototype.registerObjectFactory=function(n,t){this._poEndPoints.registerEndPoint(n,t)},u.prototype.acquireObject=function(n,t,i){return this._assertReady(),this._poClient.acquireObject(n,this._windowRedirectMap[t]||t,i)},u.prototype.start=function(n){r.prototype.start.call(this,n);this._poClient=this._dispatcher.createClient(g,this._poEndPoints,this._log,this._features,null)},u.prototype.reset=function(){r.prototype.reset.call(this);this._poClient&&(this._poClient.dispose(),this._poClient=null);this._poEndPoints=new t.EndPointTable(this._registrationTimeoutInMs,this._reportError,this._log)},u})(t.CoreClient),s,h,c;t.Client=o;t.client=new o(3e4);n.registerGlobalState(t.client);t.start=nt;s=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.invoke=function(n,t,i){return n.invokeRpc(this.name,t,i)},t})(t.ActionEndPointDefinitionBase);t.ActionEndPointDefinition=s;h=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.invoke=function(n,t,i){return n.invokeRpc(this.name,t,i)},t})(t.FuncEndPointDefinitionBase);t.FuncEndPointDefinition=h;c=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.registerObjectFactory=function(n,t){n.registerObjectFactory(this.name,t)},t.prototype.acquireObject=function(n,t,i){return n.acquireObject(this.name,t,i)},t})(t.EndPointDefinition);t.ProxiedObjectTypeDefinition=c})(t=n.Rpc||(n.Rpc={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i=n.Rpc;t.extensionStatusEndPoint=new i.ActionEndPointDefinition(n.Constants.RpcMethods.notifyExtensionStatus);t.postBootEndPoint=new i.ActionEndPointDefinition(n.Constants.RpcMethods.postBoot);t.waitForExtensionIdleEndPoint=new i.FuncEndPointDefinition("waitForExtensionIdle");t.onNewReactViewEndPoint=new i.ActionEndPointDefinition("onNewReactView");t.onReactViewInteractiveEndPoint=new i.ActionEndPointDefinition("onReactViewInteractive");t.onReactViewDisposed=new i.ActionEndPointDefinition("onReactViewDisposed")})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){function l(t,i){return{type:t.type,data:t.data,options:n.extend2(t.options,{badge:i})}}function a(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t=i.filter((function(n){return n})),t.length>0?t.join(" "):undefined}function v(t,i){return t&&{type:t.type,data:t.data,options:n.extend2(t.options,i,{customClass:a(t.options&&t.options.customClass,i.customClass)})}}function i(n){return function(t){return t?e(n,t):o(n)}}function y(n){return{type:2,data:n}}function p(n,t){var i="",r;return n<0||n>99?(r=new h.Diagnostics.Log("MsPortalFx/Base/Base.Images"),r.error("MsPortalFx.Base.Images.Number("+ +n+"), "+ +n+" is outside valid range of 0 - 99")):i='<svg class=\'fxs-svg-number msportalfx-svg-placeholder\' viewbox="0 0 19 19" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svg="http://www.w3.org/2000/svg"><g><circle class=\'msportalfx-svg-c23 fxs-svg-circle\' stroke="#b3d2ff" cx="9.5" cy="9.5" r="9"><\/circle><text class=\'msportalfx-font-bold fxs-svg-text\' text-anchor="middle" x="9.3" y="13">'+ +n+"<\/text><\/g><\/svg>",{type:899+n,data:i,options:t}}function u(t,r){n.extendStringMapIntoMap(t,r,i)}function it(n){return e(n)}function r(n){return function(){return s(n)}}var h=n.Base,c=n.Services.Image,f=n.Base.Images,e=c.newImageData,o,w,b,k,d,g,nt,tt,s,rt;t.CustomImageWithBadge=l;t.CustomImageWithOptions=v;o=n.memoize(e);t.ImageUri=y;t.Number=p;u(f,{Add:4,AddAlternate:259,AddBoxed:300,AddTeamMember:82,AddTile:318,Alert:383,AllServices:344,ArrowDown:260,ArrowLeft:261,ArrowRight:262,ArrowUp:263,Attachment:83,AvatarDefault:84,AvatarUnknown:85,AzurePortal:334,AzureQuickstart:161,Backlog:86,Blank:0,BlankDashboard:396,Book:10,Canceled:74,Capture:355,CaretDown:286,CaretUp:287,Check:12,Clock:75,Clone:76,CloudUpload:367,Code:94,Collapse:298,Columns:264,Commit:96,Commits:210,Connect:132,Console:333,Copy:338,Customize:296,Delete:17,Diagnostics:279,Disable:98,Disabled:18,Discard:19,Disconnect:133,DoubleChevron:345,Download:174,Edit:99,EditInverted:100,Ellipsis:176,Error:77,Expand:299,Favorite:101,Feedback:228,File:102,Filter:22,FilterRemove:349,FolderAlternate:265,ForPlacementOnly:177,Gear:103,GearAlternate:249,GetMoreLicense:104,GetStarted:105,Globe:285,Go:108,Guide:218,Hamburger:313,HeartPulse:211,Help:130,HideItems:360,History:109,Hyperlink:31,Inactive:110,Info:225,Insert:339,InstallVisualStudio:111,Json:395,Key:266,LaunchCurrent:227,Line:348,Link:35,Lock:37,Log:112,Mail:267,Message:268,Monitoring:193,Move:356,MoveAcrossResourceGroups:399,MoveAcrossSubscriptions:400,MoveAcrossRegions:401,NotificationBell:363,Notifications:342,NumberError:364,NumberSuccess:365,Paused:79,Pending:43,Person:44,PersonWithFriend:45,Pin:46,Plus:297,Postpone:114,PowerUp:216,Print:394,Properties:48,Publish:162,Query:270,Question:49,Queued:80,QuickStart:50,Redo:157,Refresh:51,Reimage:354,Release:115,Request:116,ResourceFlat:351,Retain:117,Save:52,SaveAll:271,Search:248,Settings:341,ShowItems:361,Signout:226,SmileyHappy:319,SmileyNeutral:320,SmileySad:321,Star:283,Start:61,StatusUpsell:343,Stop:62,Subtract:65,Support:219,Swap:66,Tag:239,Tags:246,Tasks:119,Tools:159,Tour:275,TrendDown:204,TrendUp:205,Triangle:120,Undo:272,Unknown:366,Unlock:69,Unpin:70,Unshare:397,Upload:121,Variables:206,View:387,Warning:317,WebHostingPlan:236,Wrench:160,Chevron:158,Close:55,ShellCustomize:314,Dots:169,ExitPeekMode:347,Fullscreen:323,ShellGear:247,HeaderDots:273,Maximize:58,Mini:322,Minimize:289,PeekMode:346,Restore:59,Share:324,Trash:284,TrashOutline:327,TripleArrow:257});t.GitLogo=i(106);t.GitLogoBox=i(107);t.VisualStudio=i(123);t.VisualStudioLogoBox=i(124),(function(){u(f.Logos,{Bitbucket:181,BitbucketBox:182,Channel9:277,CodePlex:183,CodePlexBox:184,Dropbox:185,DropboxBox:186,ExternalRepositoryBox:212,Git:187,GitBox:188,GitHub:189,GitHubBox:190,Microsoft:220,MicrosoftSquares:258,Redis:229,StackOverflow:278,VisualStudio:191,VisualStudioBox:192})})(w=t.Logos||(t.Logos={})),(function(t){function u(n){return{type:n,options:{customClass:"msportalfx-svg-fabric-rotate360"}}}function r(n){return function(){return f(n)}}t.EllipsisSquare=i(295);var f=n.memoize(u);t.Spinner=r(328);t.Loader=r(329)})(b=t.Loading||(t.Loading={})),(function(n){n.Happy=i(242)})(k=t.Emoticon||(t.Emoticon={})),(function(n){n.Azure=i(379);n.Blue=i(380);n.Dark=i(381);n.Light=i(382)})(d=t.Themes||(t.Themes={})),(function(n){u(n,{ActiveDirectory:3,Advisor:336,AllServices:385,ApiManagement:301,AppInsights:135,Automation:164,AvailabilitySet:136,AzurePortal:403,Backlog:87,Backup:137,BillingHub:92,BizTalk:302,BlobBlock:231,BlobPage:232,SuccessCheckmark:402,Branch:240,Browser:138,Bug:11,Builds:93,Cache:230,Cdn:303,Certificate:194,Chart:241,ClearDBDatabase:178,Clock:195,CloudService:13,Code:95,Commit:97,Controls:14,ControlsHorizontal:196,CostAlerts:357,CostAnalysis:358,CostBudgets:359,Counter:250,Cubes:15,CustomDomain:139,Dashboard:350,Database:16,DevConsole:213,Discs:244,Download:20,ErrorIcon:274,EventGrid:340,EventHub:304,Extensions:237,File:254,Files:255,FolderBlank:23,FolderCube:24,FolderWebsite:25,Ftp:26,Functions:337,Gear:27,Globe:140,GlobeError:222,GlobeSuccess:223,GlobeWarning:224,Grid:28,Guide:29,Heart:30,Image:256,Info:32,InputOutput:197,Insights:362,IpAddress:141,JourneyHub:33,Key:34,LaunchPortal:142,Learn:371,LoadBalancer:143,LoadTest:144,Location:36,Log:145,LogAnalytics:353,LogDiagnostics:146,LogStreaming:147,ManagementPortal:276,Media:38,MediaFile:39,Mobile:40,MobileEngagement:305,Module:198,Monitoring:41,NetworkInterfaceCard:148,Notification:42,NotificationBell:363,OperationalInsights:306,Owl:332,Power:291,Powershell:47,PowerUp:199,Preview:294,ProcessExplorer:251,ProductionReadyDb:214,QuickStart:384,RemoteApp:307,ResourceDefault:149,ResourceGroup:179,ResourceGroupList:208,ResourceLinked:150,ResourceList:207,ResourceRole:288,Scale:118,Scheduler:308,Search:53,SearchGrid:54,ServerFarm:151,ServiceBus:309,SiteRecovery:310,SqlDatabase:165,SqlDataBaseServer:152,SSD:280,SslCustomDomains:60,Storage:63,StorageAzureFiles:290,StorageContainer:233,StorageQueue:234,Store:64,StorSimple:311,StreamAnalytics:312,Support:200,Table:235,Tags:386,TeamProject:67,TfsVcRepository:153,Toolbox:68,TrafficManager:166,Versions:203,VirtualMachine:71,VirtualNetwork:245,WebEnvironment:167,WebHosting:154,WebJobs:168,Website:72,WebsitePower:73,WebsiteStaging:155,WebSlots:215,WebTest:156,Workbooks:352,Workflow:180,AddSubscription:388,ContentErrorGeneric:368,ContentErrorNotFound:369,ContentErrorUnauthorized:370,CornerCheck:221,DefaultBlade:57,ManageAccess:389,StudentTools:390});n.PolyTrafficManagerDisabled=i(201);n.PolyTrafficManagerEnabled=i(202);n.TrafficManagerDisabled=i(201);n.TrafficManagerEnabled=i(202)})(g=t.Polychromatic||(t.Polychromatic={})),(function(n){u(f.Shell,{Add:325,AddSubscription:388,ArrowWideDown:281,ArrowWideUp:282,Chevron:158,Close:55,Collapse:56,ContentErrorGeneric:368,ContentErrorNotFound:369,ContentErrorUnauthorized:370,CornerCheck:221,Customize:314,DefaultBlade:57,Dots:169,ExitPeekMode:347,Filter:326,Fullscreen:323,Gear:247,HeaderDots:273,ManageAccess:389,Maximize:58,Mini:322,Minimize:289,PeekMode:346,Pin:331,Restore:59,Save:330,Share:324,StudentTools:390,Trash:284,TrashOutline:327,TripleArrow:257});var t;(function(n){n.Home=i(127);n.Alerts=i(129);n.Journey=i(128);n.Browse=i(126);n.Billing=i(92);n.Create=i(125)})(t=n.JumpBar||(n.JumpBar={}))})(nt=t.Shell||(t.Shell={})),(function(n){var t,r;n.Canceled=i(89);n.Critical=i(292);n.Disabled=i(90);n.Error=i(6);n.Failed=i(252);n.Info=i(78);n.None=i(7);n.Pending=i(88);n.Stopped=i(131);n.Success=i(8);n.Unknown=i(91);n.Update=i(373);n.Upsell=i(372);n.Warning=i(9),(function(n){n.Canceled=i(374);n.Critical=i(293);n.Disabled=i(375);n.Error=i(170);n.Failed=i(253);n.Info=i(171);n.None=i(376);n.Pending=i(377);n.Stopped=i(175);n.Success=i(172);n.Unknown=i(209);n.Update=i(238);n.Upsell=i(378);n.Warning=i(173)})(t=n.Outline||(n.Outline={})),(function(n){n.Error=i(315);n.Info=i(316);n.Warning=i(317);n.Unknown=i(366)})(r=n.Solid||(n.Solid={}))})(tt=t.StatusBadge||(t.StatusBadge={}));s=n.memoize(it),(function(n){n.CollectionPartWithRollup=r(1e3);n.CollectionSummary=r(1001);n.DonutChart=r(1002);n.DonutChartPartial=r(1003);n.Extensions=r(1004);n.GridWithMoreData=r(1005);n.Map=r(1006);n.MultiLineChartMultiTrendLine=r(1007);n.MultiScatterChart=r(1008);n.MultiStackedBarChart=r(1009);n.MutliLineChart=r(1010);n.PricingTier=r(1011);n.QuotaGauge=r(1012);n.ResourceMap=r(1013);n.SingleAreaChart=r(1014);n.SingleAreaChartSingleThreshold=r(1015);n.SingleAreaChartSingleTrendline=r(1016);n.SingleBarChartLarge=r(1017);n.SingleBarChartSmall=r(1018);n.SingleLineChart=r(1019);n.SingleScatterChart=r(1020);n.SingleScatterSingleThreshold=r(1021);n.SingleValueGauge=r(1022);n.SplitBarChart=r(1023);n.StackedAreaChart=r(1024)})(rt=t.PartGallery||(t.PartGallery={}))})(i=t.Images||(t.Images={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function nt(t,r){var o,s,h;return(f=r,!u.isFeatureEnabled("networktelemetry"))?{onSettled:MsPortalFx.noop,onInteractive:MsPortalFx.noop,onDisposed:MsPortalFx.noop}:(o={context:t},i.push(o),s=t.instanceId,h=function(n){var t;(t=e.get(s))===null||t===void 0?void 0:t.resolve(n)},e.set(s,n.defer()),{onDisposed:function(){var n=i.indexOf(o);n>=0&&i.splice(n,i.length-n);h(undefined);setTimeout((function(){e.delete(s)}),3e5)},onSettled:function(){o.settled=!0},onInteractive:h})}function tt(n,i){var r;i===void 0&&(i=l);t.pendingCallCount(t.pendingCallCount.peek()+1);f&&(r=f,f=null,r());var u=fx.getTimestamp(),e=Date.now(),o=w();return function(r,f){t.pendingCallCount(t.pendingCallCount.peek()-1);var s=p(r.responseText),h=fx.getTimestamp(),c=n.setAuthorizationHeader===!0?"arm":(n.setAuthorizationHeader||{}).resourceName;a({request:__assign(__assign({},n),{dataSentBytes:p(n.data),token:c}),response:__assign(__assign({},r),{dataReceivedBytes:s,isError:f}),startTime:u,startTimeDateNow:e,endTime:h,blade:o},i)}}function it(n){a(__assign(__assign({},n),{blade:{context:n.bladeContext}}))}function a(n,t){var i;return t===void 0&&(t=l),__awaiter(this,void 0,void 0,(function(){var e,s,h,b,l,f,k,a,d,nt,o,tt,it,rt,ut,ft,ot,c,st,v,p;return __generator(this,(function(ht){switch(ht.label){case 0:return(e=n.request,s=n.response,h=n.startTime,b=n.startTimeDateNow,l=n.endTime,f=n.blade,e.skipTelemetry||!u.isFeatureEnabled("networktelemetry"))?[2]:(k=f&&((i=w())===null||i===void 0?void 0:i.context.instanceId)!==f.context.instanceId,a=f===null||f===void 0?void 0:f.context.id.endsWith(".ReactView"),d=a?et(f).then((function(n){var t=b||h;return{interactive:n?(t>=n).toString():"indeterminate"}})):{},[4,MsPortalFx.require("FxInternal/NetDiagnostics")]);case 1:return(nt=ht.sent().nameNetworkCall,o=nt(e,t),!o)?[2]:(tt=e.headers||{},it=tt["x-ms-client-request-id"]||"placeHolder_"+g++,rt=Math.round(l-h),ut={requestId:it,status:s.status,dataSent:e.dataSentBytes,dataReceived:s.dataReceivedBytes,method:e.type||"GET",startTime:Math.round(h),endTime:Math.round(l),token:e.token},ft=y,v={source:f===null||f===void 0?void 0:f.context.id,action:"Ajax",actionModifier:s.isError?r.ActionModifier.Cancel:r.ActionModifier.Complete,duration:rt,name:o.commandName},ot=[__assign(__assign(__assign({},ut),o.uri&&{uri:o.uri}),o.batchRequests&&{batchRequests:o.batchRequests})],c=f,!c)?[3,3]:(p={},st=[__assign(__assign({},f.context),!a&&{settled:!!f.settled})],[4,d]);case 2:c=(p.blade=__assign.apply(void 0,[__assign.apply(void 0,st.concat([ht.sent()])),{interrupted:k}]),p);ht.label=3;case 3:return ft.apply(void 0,[(v.data=__assign.apply(void 0,ot.concat([c])),v)]),[2]}}))}))}function rt(){c.registerRpcEndPoint(h,{allowedOrigin:null,handler:function(n,t){r.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:n.action,actionModifier:n.actionModifier,name:n.name,duration:n.duration,data:n.data,optional:n.optional})}})}function v(){var n=navigator.connection,t,i;if(!performance||!navigator.hardwareConcurrency||!n)return{};if(t=performance.getEntries&&performance.getEntries(),i=t&&t[0],!i||typeof i.transferSize!="number")return{};var r={},u={},f={},e={},o=0,s=0;return t.forEach((function(n){if(n.entryType==="resource"){var t=n.initiatorType;f[t]=(f[t]||0)+n.transferSize;e[t]=(e[t]||0)+n.duration;o+=n.transferSize||0;s+=n.duration;n.transferSize?u[t]=(u[t]||0)+1:r[t]=(r[t]||0)+1}})),{connection:{rtt:n.rtt,downlink:n.downlink,effectiveType:n.effectiveType,saveData:n.saveData},uncachedCountByGroup:u,homepageTransferBytes:i.transferSize,cachedCountByGroup:r,totalBytesTransferred:o,totalTransferMsByGroup:e,totalBytesTransferredByGroup:f,hardwareConcurrency:navigator.hardwareConcurrency,totalTransferMs:s}}function ut(){var t=fx.bootstrapTelemetry,n=performance.timing;return n?(t.timing=n.toJSON&&n.toJSON(),t.appCacheLoad=n.domainLookupStart-n.fetchStart,t.requestTime=n.responseStart-n.requestStart,t.pageLoad=n.loadEventEnd-n.responseEnd,t.navigationTime=o("DocumentNavigationTime",n.fetchStart,n.responseEnd),t.ttfb=o("DocumentFirstByte",n.fetchStart,n.responseStart),t.domainLookup=o("DocumentDnsTime",n.domainLookupStart,n.domainLookupEnd),t.unloadTime=o("DocumentUnloadTime",n.navigationStart,n.fetchStart),t.performanceTelemetry=v(),t):t}function o(n,t,i,u){u=u||{};var f=i-t;return y({timestamp:Math.round(i+(u.epochAdjustment||0)),source:d,action:n,name:u.name,actionModifier:r.ActionModifier.Complete,duration:f,data:ft(u.data)}),f}function y(t){n.internalEnv.isShell?r.trace(t):c.invokeRpc(h,b,t)}function p(n){return n?typeof n=="string"?n.length:-1:0}function ft(n){for(var t={},i=n;i&&i!==Object;)Object.keys(i).forEach((function(n){t[n]=undefined})),i=Object.getPrototypeOf(i);return u.forEachKey(t,(function(i){var r=n[i];typeof r!="function"?t[i]=r:delete t[i]})),t}function w(){return i.length>0?i[i.length-1]:undefined}function et(n){var t,i=n.context.instanceId;return((t=e.get(i))===null||t===void 0?void 0:t.promise)||Promise.resolve(undefined)}var u=MsPortalFx,s=u.Base,b=s.Constants.Shell,k=s.Diagnostics,r=k.Telemetry,h=n.Constants.RpcMethods.networkTelemetry,c=n.Rpc.client,d="Framework",l=!0,g=1,f,i=[],e=new Map;t.listenForBlade=nt;t.pendingCallCount=ko.observable(0);t.createTelemetry=tt;t.traceReactViewAjax=it;t.registerTelemetrySubmissionHandler=rt;t.getPerformanceTelemetry=v;t.getBootstrapTelemetry=ut})(t=n.NetDiagnostics||(n.NetDiagnostics={}))})(FxImpl||(FxImpl={})),
(function(n){function e(){return t}function o(u){u&&(u=MsPortalFx.union(u,[n.origin,i.fxGraphEndpoint,i.fxMsGraphEndpoint,n.trustedParentOrigin,t,]));n.authTokenDomainValidator=r(u)}function r(n){function i(n){var t=n.lastIndexOf(":");return t>-1&&(n=n.substring(0,t)),n}function f(n){var e=n&&new MsPortalFx.Base.UriBuilder(n).getAuthority(),f=e&&i(e.toLowerCase()),o=f&&r&&(t.has(f)||u.some((function(n){return f.endsWith(n)})));return o&&t.set(f,!0),o}var r=!!n,t=new Map,u=[];return(n||[]).filter((function(n){return!!n})).forEach((function(n){var r=MsPortalFx.trimEnd(n.toLowerCase().trim(),"/"),f;r.startsWith("*.")?u.push(i(r.substring(1))):(f=r.indexOf("://"),f>-1&&(r=i(new MsPortalFx.Base.UriBuilder(r).getAuthority())),t.set(r,!0))})),{hasTrustedDomains:r,validateDomain:f}}function s(t){return!!n.authTokenDomainValidator&&n.authTokenDomainValidator.validateDomain(t)}var u=new MsPortalFx.Base.Diagnostics.Log("FxImpl/Base.Net"),i=n.internalEnv,t,f=function(){var f,e,r;t=i.fxArmEndpoint;f=n.features.getValue("armendpointprefix");f&&(e=!!f.match(/^[a-zA-Z0-9-]+$/),e?(r=new MsPortalFx.Base.UriBuilder(t),t=[r.getScheme(),MsPortalFx.ensureSuffix(f,"."),r.getAuthority(),r.getRelativePath(),r.getOriginalQuery(),].join("")):u.error("Attempted to prefix ARM endpoint with unsafe value"))};f();n.extensionName="";n.onEnvironmentSet((function(t){n.extensionName=t("extensionName");o(t("trustedDomains"))}));n.getArmEndpoint=e;n.getDomainValidator=r;n.validateDomain=s})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var r=n,u=FxImpl,f=r.Helpers,i=r.Base,w=u.NetDiagnostics,h=r.isUndefined,b=r.isEmpty,l=i.Diagnostics.Telemetry,k=FxImpl.Extension,d=256,s=12,g=n.isInWebWorker,nt=r.getUniqueIdGenerator(),a="Failed to get authorization token.",v=FxImpl.getArmEndpoint()+("batch?api-version="+(n.getFeatureValue("batchapiversion")||"2020-06-01"||"2020-06-01")),e=new i.Diagnostics.Log("MsPortalFx/Base/Base.Net"),y=f.ajax,p=y,c=n.memoize((function(n){return n<=1?1:c(n-1)+c(n-2)})),o,tt;(function(t){function at(n){var i=n.getResponseHeader("Pragma"),t;return i===ut?!0:(t=n.getResponseHeader("Cache-Control")||"",t.includes(ut))?!0:!1}function et(n){return!n||rt[n.status]||ft[n.status]&&!n.getResponseHeader("x-ms-request-id")}function it(n,t,i){h(n[t])&&(n[t]=i)}function vt(){ct()}function yt(n,t){tt.log=n||tt.log;tt.sanitize=t||tt.sanitize}function pt(n){p=n||y}function ot(n,t){n.contentType="application/json";n.data=JSON.stringify(t);n.type="POST"}function st(t){return function(){var i=t.headers||{};return{uri:tt.sanitize(t.uri),type:t.type||"GET",pathAndQuery:tt.sanitize(i["x-ms-path-query"]),requestId:i["x-ms-client-request-id"],failureCause:tt.sanitize(i["x-ms-failure-cause"]),sessionId:n.sessionId,commandName:t.setTelemetryHeader}}}function ht(t,i,r){var u=t();return n.isObject(i)&&n.extend(u,{status:i.status,statusText:i.statusText}),r&&n.extend(u,r),u}function bt(n,t){return o.postJSON(n,t)}function kt(n){return o.ajax(n)}function dt(n){return o.ajaxExtended(n)}function gt(){return o}function ni(n){return o.cachedAjax(n)}function ti(n){n&&delete n["x-ms-cache-tag"]}function ii(t,i){return n.extend(t,{"x-ms-cache-tag":i})}function ri(t){o.initialize(n.getEnvironmentValue("version"),t,n.getEnvironmentValue("featuresFromConfig",{}),FxImpl.Intl.effectiveLocale)}function ct(){o.skipVersionCheck=!0}var tt={log:function(){return e.error.apply(e,arguments)},sanitize:n.sanitizeMessage},lt=3,ut="no-cache",rt={},ft,wt,o;rt[0]=rt[500]=rt[502]=rt[503]=rt[504]=!0;ft={};ft[401]=ft[403]=!0;t.isRetryable=et;t.disableAjaxServerVersionCheck=vt;t.setAjaxLogFunc=yt;t.setAjaxFunc=pt,(function(t){function y(){return FxImpl.getArmEndpoint()}function pt(n){return i.Net2.ajaxExtended(n)}function rt(n,i,r,u){var o=!r||n.duration()<=r,f,e;if(n.retryCount&&o&&(!u||u()))return n.retryCount--,f=n.retryDuration&&n.retryDuration()||0,e=c(s-n.retryCount)*t.environment.betweenRetry,Q.delay(Math.max(e-f,0)).then(i)}function wt(){o=new t.AjaxCaller}var yt=n.getUriAuthority(FxImpl.internalEnv.fxGraphEndpoint),ft,ct,vt;u.registerGlobalState({reset:function(){t.environment={betweenRetry:400}}});t.getArmEndpoint=y;t.ajaxExtended=pt;ft=(function(){function t(){this.ajaxStatus=ko.observable({code:0});this.unknownErrorStatusCode=0;this._initialized=f.Deferred();this._unknownErrors=0;this._backgroundTask=f.Deferred()}return t.prototype.initialize=function(n,t,i,r){var u,f;this._version=n;u=this._backgroundTask;u.resolve(),(function(){var n=u;setInterval((function(){n===u&&u.resolve()}),6e4)})();f=r&&r.split(".");this._acceptLanguage=f&&f[0];this._effectiveLocale=r;this._getAuthTokenFunc=t;b(i)||(this._extensionFlags=JSON.stringify(i));this._initialized.resolve()},t.prototype.postJSON=function(n,t){return ot(n,t),this.ajax(n)},t.prototype.oldPostJSON=function(n,t){return ot(n,t),this.oldAjax(n)},t.prototype.ajaxExtended=function(n){return this._executeAjaxCall(n,new ct(st(n)))},t.prototype.oldAjax=function(n){return this._executeAjaxCall(n,new vt)},t.prototype.ajax=function(n){var t=this.ajaxExtended(n);return t.then((function(n){return n.content}))},t.prototype._ajaxFuncImpl=function(t){var f=t.settings,v=t.isRelativeUri,p=t.deferred,tt=t.token,rt=t.executionContext,o=f.headers||{},w,b,c,s,l,a,h,k,g;if(f.setAuthorizationHeader&&(o.Authorization=tt),w=this._acceptLanguage,w&&it(o,"Accept-Language",w),b=y().toLowerCase(),c=v&&b,f.useFxArmEndpoint&&!c){h="There was no ARM endpoint to use with the useFxArmEndpoint setting or the URL was not a relative URL";p.reject(h,{error:h,responseText:h},null);return}if(f.invokeApi?(l=void 0,f.useFxArmEndpoint&&c?(l=encodeURI(f.url),s=new i.UriBuilder(c+r.trimStart(f.invokeApi,"/"))):n.getEnvironmentValue("useFxArmEndpoint")&&c?(s=new i.UriBuilder(c),l=encodeURI(f.url),s.setRelativePath(f.invokeApi)):(s=new i.UriBuilder(f.url),s.query.clear(),l=encodeURI(s.getRelativePath()+s.getOriginalQuery()),s.setRelativePath(f.invokeApi)),it(o,"Cache-Control",ut),f.uri=f.url=s.toString(),it(o,"x-ms-path-query",l)):f.useFxArmEndpoint&&c&&(s=new i.UriBuilder(c+r.trimStart(f.url,"/")),f.uri=f.url=s.toString()),u.extensionName&&f.uri.toLowerCase().startsWith(b)&&(n.isNullOrUndefined(f.setTelemetryHeader)||!f.setTelemetryHeader.startsWith(u.extensionName)&&!f.setTelemetryHeader.startsWith("{"))&&(f.setTelemetryHeader=u.extensionName+"."+(f.setTelemetryHeader||"")),f.setTelemetryHeader&&(o["x-ms-command-name"]=f.setTelemetryHeader.substring(0,d)),a=u.authTokenDomainValidator,!f.skipDomainValidation&&a&&a.hasTrustedDomains&&f.setAuthorizationHeader&&!v&&!a.validateDomain(f.uri)&&(h="Security issue: Request to send auth token to untrusted domain '{0}'. Only a fixed set of domains should be configured to receive auth tokens.".format(new i.UriBuilder(f.uri).getAuthority()),e.error(h),u.isDevelopmentMode)){p.reject(h,{error:h,responseText:h},null);return}it(o,"x-ms-effective-locale",this._effectiveLocale);it(o,"x-ms-client-request-id",nt());it(o,"x-ms-client-session-id",n.sessionId);k=this._version;f.checkVersion&&k&&it(o,"x-ms-version",k);g=this._extensionFlags;v&&g&&(o["x-ms-extension-flags"]=g);f.headers=o;this._worker(f,rt,p)},t.prototype._execAjaxWithGetAuth=function(t){var o=this,i=t.settings,v=t.isRelativeUri,h=t.deferred,r=t.executionContext,c=(i.headers||{})["WWW-Authenticate"],f={};i.setAuthorizationHeader!==!0&&(f={resourceName:i.setAuthorizationHeader.resourceName,authConfigStamp:n.getFeatureValue("authstamp")});c&&(f=__assign(__assign({},f),{wwwAuthHeader:c}));n.isFeatureEnabled("loggraphcallwitharmtoken")&&(i.setAuthorizationHeader===!0||!f.resourceName)&&i.uri.includes(yt)&&l.trace({source:"Base.Net",action:"IncorrectGraphToken",data:{extensionName:u.extensionName,setAuthorizationHeaderValue:i.setAuthorizationHeader}});n.tryImmediateResolve(this._getAuthTokenFunc(f),(function(t){if(!t&&n.isFeatureEnabled("failajaxonnulltoken")){e.error("Expected auth header but it is null. URI: {0}, Method: {1}".format(n.getLogFriendlyMessage(i.uri),i.type||"GET"));var u=(n.getEnvironmentValue("extensionName")||"").toLowerCase();if(["hubsextension","fx"].includes(u))return Q.reject("Null auth header.")}o._ajaxFuncImpl({deferred:h,executionContext:r,isRelativeUri:v,settings:i,token:t})})).catch((function(u){if(!rt(r,(function(){return o._execAjaxWithGetAuth(t)}),i.maxRetryDuration)){var f=s-r.retryCount+1,e=!i.maxRetryDuration||r.duration()<=i.maxRetryDuration,c=i.performRetry?"Retryable ajax call failed after several "+f+" attempts. "+(e?"":"Exceed maximum retry duration("+i.maxRetryDuration+").")+" Actual duration: "+r.duration()+".":a;h.reject(c,{error:n.getLogFriendlyMessage(u),responseText:a},null)}}))},t.prototype._executeAjaxCall=function(t,e){var y=this,w=t.url=t.originalUri=t.uri||t.url,a={retryCount:t.performRetry?s:0,duration:r.startTimer()},o=!n.isUriAbsolute(w),c,b,p;return(g&&!t.useFxArmEndpoint&&(t.uri=t.url=t.originalUri=u.ensureAbsoluteUri(w)),t.useRawAjax)?(this._worker(t,a,e),e.getPromise()):(h(t.setAuthorizationHeader)&&(t.setAuthorizationHeader=o),h(t.checkVersion)&&(t.checkVersion=o,this.skipVersionCheck&&(t.checkVersion=!1)),c=this._initialized.promise(),t.isBackgroundTask&&(c=c.then(this._backgroundTask.promise),b=this._backgroundTask=f.Deferred(),e.finally((function(){b.resolve()}))),p=function(){var r;if(t.setAuthorizationHeader){var u=null,f=(t.type||"GET").toUpperCase(),h=new i.UriBuilder(t.url).getRelativePath();if(((r=FxImpl.postBootEnv)===null||r===void 0?void 0:r.isWriteDisallowedTenant)&&n.isFeatureEnabled("ameconfirmationdialog")){var s=(t.url||"").toLowerCase(),c=["PUT","DELETE"].includes(f),p=t.useFxArmEndpoint||s.startsWith(FxImpl.getArmEndpoint().toLowerCase())&&s.includes("/subscriptions/"),w=s!==v.toLowerCase();c&&p&&w&&(u=k.invokeAmeConfirmationDialogEndPoint.invoke(FxImpl.Rpc.client,i.Constants.Shell,[{httpMethod:f,resourceId:h}]))}return u?u.then((function(n){if(!n){var i={status:403,statusText:"Forbidden",readyState:XMLHttpRequest.DONE,getResponseHeader:function(){return null},getAllResponseHeaders:function(){return null},state:function(){return"rejected"},always:function(n){n()},then:function(n,t){t(i,"","")}};return l.trace({source:"MsPortalFx.Base.Net",action:"AME confirmation dialog - delete/put cancelled",data:{httpMethod:f,resourceId:h}}),e.reject("Operation cancelled from dialog.",null,i)}return y._execAjaxWithGetAuth({deferred:e,executionContext:a,isRelativeUri:o,settings:t})})):y._execAjaxWithGetAuth({deferred:e,executionContext:a,isRelativeUri:o,settings:t})}y._ajaxFuncImpl({deferred:e,executionContext:a,isRelativeUri:o,settings:t,token:null})},n.isFeatureEnabled("ajaxstacks")&&!t.stack&&(t.stack=n.getCurrentCallStack()),c.state()==="resolved"?p():c.then(p),e.getPromise())},t.prototype.cachedAjax=function(t){return t.headers=n.extend({"x-ms-cache-tag":'"0"'},t.headers),this.ajaxExtended(t).then((function(n){var r=n.content,i=n.textStatus,t=n.jqXHR;return{cachedAjax:!0,data:r,modified:i==="success",textStatus:i,cacheTagValue:t.status===200?t.getResponseHeader("x-ms-cache-tag"):null,jqXHR:t}}))},t.prototype.oldCachedAjax=function(t){var i=f.Deferred();return t.headers=n.extend({"x-ms-cache-tag":'"0"'},t.headers),this.oldAjax(t).then((function(n,t,r){i.resolve({cachedAjax:!0,data:n,modified:t==="success",textStatus:t,cacheTagValue:r.status===200?r.getResponseHeader("x-ms-cache-tag"):null,jqXHR:r},t,r)}),(function(n,t,r){i.reject(n,t,r)})),i.promise()},t.prototype._worker=function(t,i,u){var o=this,c,h,f;this._stall||(i.retryDuration=r.startTimer(),c=w.createTelemetry(t),t.data&&t.data.length<5e5&&t.url===v&&n.isFeatureEnabled("simplebatch")&&FxImpl.postBootEnv.usePortalArmToken&&(h=JSON.parse(t.data),t.contentType="text/plain",h.headers={},n.forEachKey(t.headers,(function(n,t){h.headers[n]=t.split(";")})),h.headers["content-type"]=["application/json"],t.data=JSON.stringify(h),delete t.headers),f=p(t),f.always((function(){if(t.checkVersion&&at(f)){var h=f.getResponseHeader("x-ms-version-mismatch");h&&(e.warning("'{0}' with version '{1}' is not accepting requests from clients with version '{2}'".format(t.uri,h,o._version)),o._stall=!0,o.ajaxStatus({code:1,data:{version:h}}))}if(f.getResponseHeader("x-ms-force-login")&&o.ajaxStatus({code:2,message:"Received logged out header from server."}),!o._stall)switch(f.state()){case"resolved":c(f);o._unknownErrors&&(o._unknownErrors=0,o.ajaxStatus({code:0}));f.then((function(n,t,i){u.resolve(n,t,i)}));break;case"rejected":c(f,!0);t.isBackgroundTask||t.ignoreUnknownNetworkError||f.status!==o.unknownErrorStatusCode?f.status!==429||t.type&&t.type!=="GET"||o.ajaxStatus({code:6,data:{uri:t.originalUri,type:t.type,correlationId:f.getResponseHeader("x-ms-correlation-request-id"),clientRequestId:(t.headers||{})["x-ms-client-request-id"],retryAfter:f.getResponseHeader("Retry-After")}}):(o._unknownErrors++,o._unknownErrors>=lt&&(o._unknownErrors=0,o.ajaxStatus({code:4,data:{uri:t.uri,type:t.type,correlationId:f.getResponseHeader("x-ms-correlation-request-id"),clientRequestId:(t.headers||{})["x-ms-client-request-id"]}})));f.then(null,(function(h,c,l){var y,p=ht(st(t),h,{duration:i.duration()}),w=f.status,a,b,d,v;w>=500&&tt.log(h,1,p);var g=!t.maxRetryDuration||i.duration()<=t.maxRetryDuration,k=f.getResponseHeader("WWW-Authenticate"),nt=(y=t.setAuthorizationHeader)===null||y===void 0?void 0:y.resourceName;n.isFeatureEnabled("cae")&&w===401&&k&&!i.retriedWithWwwAuthenticate?o._getAuthTokenFunc({resourceName:nt,wwwAuthHeader:k}).then((function(r){var f=t.url=t.originalUri=t.uri||t.url,e=!n.isUriAbsolute(f);return i.retriedWithWwwAuthenticate=!0,o._ajaxFuncImpl({deferred:u,executionContext:i,isRelativeUri:e,settings:t,token:r})})):rt(i,(function(){return o._worker(t,i,u)}),t.maxRetryDuration,(function(){return et(h)}))||(w===403&&t.skipRetryOnForbidden!==!0&&(f.getResponseHeader("x-ms-failure-cause")||"").toLowerCase()==="gateway"?(a=r.clone(t,!0),a.skipRetryOnForbidden=!0,a.headers=a.headers||{},a.headers["Cache-Control"]=ut,o._worker(a,i,u)):(t.performRetry&&i.retryCount<s&&(b=s-i.retryCount+1,b>1&&(d=h.status||h.readyState?2:1,v="Retryable ajax call failed after several "+b+" attempts. "+(g?"":"Exceed maximum retry duration("+t.maxRetryDuration+").")+" Actual duration: "+i.duration()+".",d===2?(l=new n.Errors.Error({message:v,innerErrors:l}),tt.log(v,0,p)):e.warning(v,0,p))),t.detailedError?u.reject(c,{error:l,responseText:f.responseText},h):u.reject(c,l,h)))}))}})))},t})();t.AjaxCaller=ft;ct=(function(){function t(t){var i=Q.defer(),u=r.startTimer();this.resolve=function(n,t,r){i.resolve({content:n,jqXHR:r,textStatus:t})};this.reject=function(r,f,e){var o=new n.Errors.AjaxError({message:"ajaxExtended call failed",data:ht(t,e,{duration:u()}),jqXHR:e,textStatus:r,errorThrown:f,stack:null,create:i.promise.stack});i.reject(o)};this.getPromise=function(){return i.promise};this.finally=function(t){i.promise.finally(t).catch(n.noop)}}return t})();vt=(function(){function n(){var n=f.Deferred();this.resolve=function(t,i,r){n.resolve(t,i,r)};this.reject=function(t,i,r){n.reject(r,t,i)};this.getPromise=function(){return n.promise()};this.finally=function(t){n.promise().finally(t)}}return n})();t.reset=wt})(wt=t.Internal||(t.Internal={}));o=new t.Internal.AjaxCaller;t.postJSON=bt;t.ajax=kt;t.ajaxExtended=dt;t.getSingleton=gt;t.cachedAjax=ni;t.invalidateCacheHeader=ti;t.setCacheHeader=ii;t.initialize=ri;t.status=ko.pureComputed((function(){return o.ajaxStatus()}));t.disableVersionCheck=ct;$.support.cors=!0;$.ajaxTransport("+binary",(function(n,t,i){if(n.dataType&&n.dataType==="binary")return{send:function(t,i){var r=new XMLHttpRequest,f=n.url,e=n.type,o=n.data||null,u;r.addEventListener("load",(function(){var t={};t[n.dataType]=r.response;i(r.status,r.statusText,t,r.getAllResponseHeaders())}));r.open(e,f,!0);r.responseType="blob";for(u in t)r.setRequestHeader(u,t[u]);r.send(o)},abort:function(){i.abort()}}}))})(o=t.Net2||(t.Net2={})),(function(n){n.HttpStatusCode=o.HttpStatusCode;n.disableAjaxServerVersionCheck=i.Net2.disableAjaxServerVersionCheck;var t=i.Net2.getSingleton();n.postJSON=function(n,i){return t.oldPostJSON(n,i)};n.ajax=function(n){return t.oldAjax(n)};n.cachedAjax=function(n){return t.oldCachedAjax(n)};n.invalidateCacheHeader=o.invalidateCacheHeader;n.setCacheHeader=o.setCacheHeader;n.initialize=o.initialize;n.status=ko.pureComputed((function(){return t.ajaxStatus()}));n.disableVersionCheck=o.disableVersionCheck})(tt=t.Net||(t.Net={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n.Base,u=i.Net2,r=new i.Diagnostics.Log("MsPortalFx/Base/Base.Debouncer"),f=(function(){function t(t,i,u,f,e){function g(n,t){c||s&&!w()||b(tt,!0,n,t)}function a(n,u,f,e){if((o.length||u&&h.length)&&!c){var s=t(h,o);o=[];h=[];c=!0;v=Q(i(s)).then(null,(function(i){if(n)return o=t(s,o),c=!1,a(!1,u,f,e);if(i&&i.jqXHR&&i.jqXHR.status===0)r.warning("AjaxError with jqXHR status 0 (no network)");else{r.error(i);throw i;}})).finally((function(){c=!1;b(undefined,undefined,f,e)}))}else h.length&&!c&&g(f,e);return v.then(f).catch(e)}function nt(){return o.length+h.length>=it}e=e||{};var p=u||0,tt=e.optionalDataInterval||p*10+1,it=e.maxBatchSize||1e3,s;f=!!f;var c=!1,o=[],h=[],v=Q(),l=0,y=0,k=n.noop,d=function(n){s=setTimeout(k,n);y=l},w=e.shouldFlush?function(){return nt()||e.shouldFlush(o,h)}:nt,b=f?function(n,t,i,r){if(w())a(!0,!!t,i,r),l=y=0;else{var u=n||p;l=Date.now()+u;k=function(){if(s=0,l){var n=l-Date.now();n<=0?(a(!0,!!t,i,r),l=y=0):d(n)}};y>l&&(clearTimeout(s),s=0);s||d(u)}}:function(n,t,i,r){w()?a(!0,!!t,i,r):s||(s=setTimeout((function(){s=null;a(!0,!!t,i,r)}),n||p))};this.execute=function(n,i,r,u){i?(h=t(h,n),g(r,u)):(o=t(o,n),c||b(undefined,undefined,r,u))};this.flush=function(){return o.length?v.then((function(){return a(!1,!1)})):v}}return t.getMergeIntoArrayDataMerger=function(){return n.merge},t.getPostArrayExecutor=function(n){return function(t){var i,r,f;if(Array.isArray(t)&&t.length)r=JSON.stringify(t);else if(typeof t=="string")r=t;else return;return f={contentType:"application/json",type:"POST",uri:n.uri,headers:n.headers,isBackgroundTask:!!n.isBackgroundTask,performRetry:n.performRetry,setAuthorizationHeader:(i=n.setAuthHeader)!==null&&i!==void 0?i:!0,skipTelemetry:!!n.skipTelemetry,data:r},u.ajax(f)}},t})();t.Debouncer=f})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){function c(r){function p(i){return function(f){var e="["+f.join(",")+"]";return t.getPostArrayExecutor({uri:i,headers:n.getStandardHeaders(r.extensionName),isBackgroundTask:!u,performRetry:r.performRetry,setAuthHeader:v||!0,skipTelemetry:a})(e)}}function w(n,t){for(var u,f,i="[",e=!1,r=0,o=n;r<o.length;r++)u=o[r],f=u!==undefined&&t(u),f&&(e&&(i+=",")||(e=!0),i+=f);return i+"]"}function b(n){function u(n){return MsPortalFx.isObject(n)?n.toJSON?t(n):e(n,(function(n,t){return[n,r(t)]})):r(n)}var t=function(t){try{var u=typeof t,r=JSON.stringify(t,i.serializationPrivacyReplacer);return(n&&u==="string"||u==="object")&&(r=i.sanitizeMessageFull(r)),r}catch(f){return'"_SERIALIZATION_ERROR_"'}},r=function(n){var i=MsPortalFx.getTypeOf(n),r;return i!=="function"?(r=void 0,i==="array"?w(n,t):t(n)):undefined};return u}function k(n){if(MsPortalFx.notNullOrUndefined(n))try{return y(n)}catch(t){s.warning("Error serializing entry",null,t.stack)}}function o(n){return!n||!n.length?0:n.reduce((function(n,t){return n+t.length}),n.length)}var u=0,c=r.interval||1e4,l=r.maxBatchSize||2e3,a=!!r.skipTelemetry,v=h&&(r===null||r===void 0?void 0:r.setAuthorizationHeader),y=r.serializer||b(r.sanitizeData),f=new t(t.getMergeIntoArrayDataMerger(),p(r.uri),c,!0,{maxBatchSize:l,shouldFlush:function(n,t){return o(n)+o(t)>=2e6}});return{execute:function(n,t){f.execute(n.map(k).filter(MsPortalFx.notNullOrUndefined),t)},flush:function(){var n=f.flush();return Q.isPending(n)?(u++,f.flush().finally((function(){u--}))):n}}}function l(t,i){var e=MsPortalFx.getEnvironmentValue,h=e("isShell")===!1,o=e("pageVersion"),c=e("shellVersion"),s={"x-ms-version":i||"","x-ms-client-version":i||e("version"),"x-ms-client-query":u=u||JSON.stringify(MsPortalFx.extend2(f,r)),"x-ms-extension-name":t,"x-ms-sdk-version":e("sdkVersion"),"x-ms-shell-client-version":h?c:o,"x-ms-extension-client-version":o,"x-ms-time-zone-offset":(new Date).getTimezoneOffset()+""};return n.isDevelopmentMode&&(s["x-ms-client-settings"]="devmode"),s}function e(n,t){var r="{",e=!1,u,f,i;for(u in n)f=n[u],i=MsPortalFx.notNullOrUndefined(f)&&t(u,f),i&&i[1]&&(e&&(r+=",")||(e=!0),r+=JSON.stringify(i[0])+":"+i[1]);return r+"}"}function a(n){MsPortalFx.extend(r,n)}var o=MsPortalFx.Base,t=MsPortalFx.Base.Debouncer,i=n.Base.Diagnostics,r={},s=new o.Diagnostics.Log("MsPortalFx/Base/Base.Debouncer"),h=n.features.isEnabled("cae"),u,f={};n.onEnvironmentSet((function(){f=n.features.value}));n.getStandardDebouncer=c;n.getStandardHeaders=l;n.topLevelStringifier=e;n.addQueryOverride=a})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function e(n){return function(){return n}}function pt(n){return tt.initialize({extensionName:n})}function wt(n){y.invokeRpc(l.RegisterExtension,p,undefined);y.registerRpcEndPoint(l.TraceTelemetry,{allowedOrigin:[p],handler:function(t){n?n.trace(t):it(t)}})}function it(n){i.trace(n)}function bt(n){return i.start(n)}function kt(n){return i.startTrace(n)}function dt(n,t){return i.endTrace(n,!1,t)}function gt(n,t){return i.endTrace(n,!0,t)}function ni(n,t,r){return i.endTrace(n,t,r)}function ti(n){i.resetTrace(n)}function ii(){return i.flush()}function ri(n){i.telemetryEventProcessors.push(n)}function s(t){var i=u(t.data),f=i===undefined?undefined:JSON.parse(i),r={timestamp:st(),data:f};return n.shallowCopyFromObject(r,t,["source","action","actionModifier","assetType","context","duration","extension","name","journeyId","serviceTreeId","optional","lowPriority",]),r}var h=n.Base,c=h.Constants,l=c.TelemetrySharing,a=n.isNullOrUndefined,rt=h.Diagnostics,ut=FxImpl.TelemetryContext,v=FxImpl.Base.Diagnostics,ft=n.Errors.Error,et=Q(),f=n.noop,ot=n.startTimer,y=FxImpl.Rpc.client,r=new rt.Log("MsPortalFx.Base.Diagnostics.Telemetry"),p=c.Shell,st=Date.now,u=JSON.stringify,o=v.sanitizeMessageFull,ht=n.isFeatureEnabled("canmodifyextensions"),ct=n.isFeatureEnabled("consoletelemetry"),lt=n.isFeatureEnabled("disableTelemetryDataMax"),at="Telemetry data length exceeded the maximum size of 1000000.",vt=" ... [truncated after 100KB]",w="start",b="complete",k="reset",d="cancel",g="mark",yt,nt,i,tt;(function(n){n.Start=w;n.Complete=b;n.Reset=k;n.Cancel=d;n.Mark=g})(yt=t.ActionModifier||(t.ActionModifier={}));nt=(function(){function n(n){function u(n){var t=ut.getCurrentValues();a(t)||(n.context=t)}function e(t){n.forEach((function(n){try{t(n)}catch(i){r.error(i)}}))}function o(n,t,r){var u=s(n._evt);return u.actionModifier=t,u.duration=n._timer(),r=r||i,r(u),u.duration}function h(n){n._evt.duration=0;n._timer=ot()}function y(n){o(n,k);h(n)}function c(n){return function(i){var r=s(i),e=l++,u="telemetry_"+e,f={_evt:r,_timer:null};return r.actionModifier=w,h(f),t[u]=f,n(r),u}}var t={},l=1,v=function(n){return n&&n.duration&&(n.duration<0||n.duration>18446744073709550000)?(r.error(new ft("Event duration is not in UInt64 range."),0,n),!1):!0},i=ht?f:function(n){v(n)&&e((function(t){t.trace(n)}))};this.telemetryEventProcessors=n;this.trace=function(n){var r=n.timestamp,t=s(n);t.actionModifier=t.actionModifier||g;t.timestamp=r||t.timestamp;u(t);i(t)};this.start=c(f);this.startTrace=c(i);this.endTrace=function(n,r,f){var e=t[n],s;if(e)return typeof r=="boolean"&&(r=r?b:d),s=o(e,r,(function(n){a(f)||(n.data=f);u(n);i(n)})),delete t[n],s};this.resetTrace=function(n){var i=t[n];i&&y(i)};this.flush=function(){var n=[],t;return e((function(t){n.push(t.flush())})),t=n.every((function(n){return!Q.isPending(n)})),t?Q():Q.all(n)}}return n})();i={telemetryEventProcessors:[],trace:f,start:e(""),startTrace:e(""),endTrace:e(0),resetTrace:f,flush:e(et)},(function(t){function f(t){var s=t.extensionName,e=t.userQuery,u=t.processors,h=i.telemetryEventProcessors,r="",f,o;return FxImpl.postBootEnv.thirdPartyExtension||(r=FxImpl.internalEnv.extensionTelemetryUri,n.getEnvironmentValue("enablePortalLogging")&&r||(r=FxImpl.ensureAbsoluteUri(n.getEnvironmentValue("telemetryUri","api/Telemetry")))),e&&!r.includes("?")&&(r+="?"+e),f=u&&u.length?u.slice(0):[n.Services.getTelemetryEventProcessor(r,s)],ct&&(o=n.Services.getConsoleTelemetryEventProcessor(),f.push(o)),i=new nt(f),h}function e(){var n=[],t=function(t,i){n.includes(t)||(n.push(t),r.warning("Unexpected property when serializing telemetry event: "+t+" with type "+i))};return function(n){return FxImpl.topLevelStringifier(n,(function(i,f){var e,s;switch(i){case"duration":case"extension":case"timestamp":return[i,u(f)];case"data":e=void 0;try{return e=u(f,v.serializationPrivacyReplacer),!lt&&e.length>1e6?(s=e.slice(0,1e5),e=u(o(s)+vt),r.error(at,0,__assign(__assign({},n),{data:undefined}))):e=o(e),[i,e]}catch(h){r.warning("Error serializing the telemetry data property",null,h,__assign(__assign({},n),{data:undefined}))}break;case"action":case"actionModifier":case"source":case"name":case"serviceTreeId":case"journeyId":case"assetType":case"context":return[i,o(u(f))];case"optional":case"lowPriority":break;default:t(i,typeof f)}}))}}t.initialize=f;t.getTelemetryPrivacySerializer=e})(tt=t.Internal||(t.Internal={}));t.initialize=pt;t.registerForShellTelemetry=wt;t.trace=it;t.start=bt;t.startTrace=kt;t.cancelTrace=dt;t.completeTrace=gt;t.endTrace=ni;t.resetTrace=ti;t.flush=ii;t.addProcessor=ri})(i=t.Telemetry||(t.Telemetry={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){function t(n,t,i,r){t.activatedItems.subscribeArrayChanges(n,i,r)}function r(n,t,i){return $.extend({source:n,action:t},i)}function i(t,i,u){return function(f){n.trace(r(t,i,u(f)))}}function u(n,r,u,f,e,o){t(n,r,i(u,f,o),i(u,e,o))}n.addActivatedItemsWatcher=t;n.addActivatedItemsTelemetryWatcher=u})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function u(t){t?(i=FxImpl.getStandardDebouncer({uri:FxImpl.ensureAbsoluteUri(t),skipTelemetry:!0,extensionName:n.getEnvironmentValue("extensionName"),sanitizeData:!0,setAuthorizationHeader:e?{resourceName:"telemetryToken"}:!0}),r._setBufferFullCallback((function(n){return i.execute(n),[]}))):r._setBufferFullCallback((function(){return[]}))}function o(){}function s(){return r.flush(),i?i.flush():Q()}var f=n.Base,r=f.Diagnostics.Log,i,e=FxImpl.features.isEnabled("cae");t.initialize=u;t.upload=o;t.flush=s;FxImpl.onEnvironmentSet((function(n){if(!FxImpl.postBootEnv.thirdPartyExtension){var t=FxImpl.internalEnv.extensionTraceUri;n("enablePortalLogging")&&t||(t=n("clientTraceUri","api/ClientTrace"));u(t)}}))})(i=t.Upload||(t.Upload={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function s(t){var i=c[t];return n.isNullOrUndefined(i)?null:"#"+i.substr(f.length)}function h(n){return i[n]}function w(n){var t=n.length,i=f.length;if(t===e)return n;if(t===e+1){if(n[0]==="#")return n.substr(1)}else if(t===e+i&&n.substr(0,i)===f)return n.substr(i);return null}function b(t){var r=w(t),i;return!n.isNullOrUndefined(r)&&(i=c[f+r],!n.isNullOrUndefined(i))?i:null}function k(t){return n.isNullOrUndefined(t)?0:t.length>=e?b(t):i[t]}function rt(t,i){var u=k(t),r;return n.isNullOrUndefined(u)?null:(r=d(u),i?r.map(s):r.map(h))}function d(n){return n=n%g,it[n]}function ut(){if(n.isNullOrUndefined(u)){var t=0;for(u=new Array(33),t=0;t<u.length;t++)u[t]=t}return u}function r(t,i){var u=new Array(t&&t.length),f=t.length,e=n.isNullOrUndefined(i)?0:i,r;if(i){for(r=0;r<f;r++)u[r]=t[(r+e)%f];return u}return t}function v(n){return r(nt,n)}function y(n){return r(tt,n)}function ft(t){return n.isNullOrUndefined(l)&&(l=v().map(h)),r(l,t)}function et(t){return n.isNullOrUndefined(a)&&(a=v().map(s)),r(a,t)}function ot(t){return n.isNullOrUndefined(o)&&(o=y().map(h)),r(o,t)}function st(t){return n.isNullOrUndefined(p)&&(p=y().map(s)),r(o,t)}var f="Hex_",e=6,c,i;(function(n){n[n.Hex_fcd116=0]="Hex_fcd116";n[n.Hex_eb3c00=1]="Hex_eb3c00";n[n.Hex_ba141a=2]="Hex_ba141a";n[n.Hex_b4009e=3]="Hex_b4009e";n[n.Hex_442359=4]="Hex_442359";n[n.Hex_002050=5]="Hex_002050";n[n.Hex_0072c6=6]="Hex_0072c6";n[n.Hex_008272=7]="Hex_008272";n[n.Hex_007233=8]="Hex_007233";n[n.Hex_7fba00=9]="Hex_7fba00";n[n.Hex_a0a5a8=10]="Hex_a0a5a8";n[n.Hex_fff100=11]="Hex_fff100";n[n.Hex_ff8c00=12]="Hex_ff8c00";n[n.Hex_e81123=13]="Hex_e81123";n[n.Hex_ec008c=14]="Hex_ec008c";n[n.Hex_68217a=15]="Hex_68217a";n[n.Hex_00188f=16]="Hex_00188f";n[n.Hex_00bcf2=17]="Hex_00bcf2";n[n.Hex_00b294=18]="Hex_00b294";n[n.Hex_009e49=19]="Hex_009e49";n[n.Hex_bad80a=20]="Hex_bad80a";n[n.Hex_bbc2ca=21]="Hex_bbc2ca";n[n.Hex_fffc9e=22]="Hex_fffc9e";n[n.Hex_ffb900=23]="Hex_ffb900";n[n.Hex_dd5900=24]="Hex_dd5900";n[n.Hex_f472d0=25]="Hex_f472d0";n[n.Hex_9b4f96=26]="Hex_9b4f96";n[n.Hex_4668c5=27]="Hex_4668c5";n[n.Hex_6dc2e9=28]="Hex_6dc2e9";n[n.Hex_00d8cc=29]="Hex_00d8cc";n[n.Hex_55d455=30]="Hex_55d455";n[n.Hex_e2e584=31]="Hex_e2e584";n[n.Hex_d6d7d8=32]="Hex_d6d7d8";n[n.Hex_807900=33]="Hex_807900";n[n.Hex_804600=34]="Hex_804600";n[n.Hex_740912=35]="Hex_740912";n[n.Hex_760046=36]="Hex_760046";n[n.Hex_34113d=37]="Hex_34113d";n[n.Hex_000c48=38]="Hex_000c48";n[n.Hex_005e79=39]="Hex_005e79";n[n.Hex_084c41=40]="Hex_084c41";n[n.Hex_063d20=41]="Hex_063d20";n[n.Hex_3d460a=42]="Hex_3d460a";n[n.Hex_32383f=43]="Hex_32383f";n[n.Hex_bfb500=44]="Hex_bfb500";n[n.Hex_bf6900=45]="Hex_bf6900";n[n.Hex_ae0d1a=46]="Hex_ae0d1a";n[n.Hex_b10069=47]="Hex_b10069";n[n.Hex_4e195c=48]="Hex_4e195c";n[n.Hex_00126b=49]="Hex_00126b";n[n.Hex_008db5=50]="Hex_008db5";n[n.Hex_00856f=51]="Hex_00856f";n[n.Hex_0f5b2f=52]="Hex_0f5b2f";n[n.Hex_8ba208=53]="Hex_8ba208";n[n.Hex_464f59=54]="Hex_464f59";n[n.Hex_fcf37e=55]="Hex_fcf37e";n[n.Hex_ffba66=56]="Hex_ffba66";n[n.Hex_f1707b=57]="Hex_f1707b";n[n.Hex_f466ba=58]="Hex_f466ba";n[n.Hex_a47aaf=59]="Hex_a47aaf";n[n.Hex_6674bc=60]="Hex_6674bc";n[n.Hex_66d7f7=61]="Hex_66d7f7";n[n.Hex_66d1bf=62]="Hex_66d1bf";n[n.Hex_66c592=63]="Hex_66c592";n[n.Hex_d6e86c=64]="Hex_d6e86c";n[n.Hex_8f9ca8=65]="Hex_8f9ca8";n[n.Hex_fffccc=66]="Hex_fffccc";n[n.Hex_ffe8cc=67]="Hex_ffe8cc";n[n.Hex_facfd3=68]="Hex_facfd3";n[n.Hex_fbcce8=69]="Hex_fbcce8";n[n.Hex_e1d3e4=70]="Hex_e1d3e4";n[n.Hex_ccd1e9=71]="Hex_ccd1e9";n[n.Hex_ccf2fc=72]="Hex_ccf2fc";n[n.Hex_ccf0ea=73]="Hex_ccf0ea";n[n.Hex_ccecdb=74]="Hex_ccecdb";n[n.Hex_f0f7b2=75]="Hex_f0f7b2";n[n.Hex_63707e=76]="Hex_63707e";n[n.max=77]="max"})(c=t.AllRawColorCode||(t.AllRawColorCode={})),(function(n){n[n.a1=0]="a1";n[n.b1=1]="b1";n[n.c1=2]="c1";n[n.d1=3]="d1";n[n.e1=4]="e1";n[n.f1=5]="f1";n[n.g1=6]="g1";n[n.h1=7]="h1";n[n.i1=8]="i1";n[n.j1=9]="j1";n[n.k1=10]="k1";n[n.a0=11]="a0";n[n.b0=12]="b0";n[n.c0=13]="c0";n[n.d0=14]="d0";n[n.e0=15]="e0";n[n.f0=16]="f0";n[n.g0=17]="g0";n[n.h0=18]="h0";n[n.i0=19]="i0";n[n.j0=20]="j0";n[n.k0=21]="k0";n[n.a2=22]="a2";n[n.b2=23]="b2";n[n.c2=24]="c2";n[n.d2=25]="d2";n[n.e2=26]="e2";n[n.f2=27]="f2";n[n.g2=28]="g2";n[n.h2=29]="h2";n[n.i2=30]="i2";n[n.j2=31]="j2";n[n.k2=32]="k2";n[n.a0s2=33]="a0s2";n[n.b0s2=34]="b0s2";n[n.c0s2=35]="c0s2";n[n.d0s2=36]="d0s2";n[n.e0s2=37]="e0s2";n[n.f0s2=38]="f0s2";n[n.g0s2=39]="g0s2";n[n.h0s2=40]="h0s2";n[n.i0s2=41]="i0s2";n[n.j0s2=42]="j0s2";n[n.k0s2=43]="k0s2";n[n.a0s1=44]="a0s1";n[n.b0s1=45]="b0s1";n[n.c0s1=46]="c0s1";n[n.d0s1=47]="d0s1";n[n.e0s1=48]="e0s1";n[n.f0s1=49]="f0s1";n[n.g0s1=50]="g0s1";n[n.h0s1=51]="h0s1";n[n.i0s1=52]="i0s1";n[n.j0s1=53]="j0s1";n[n.k0s1=54]="k0s1";n[n.a0t1=55]="a0t1";n[n.b0t1=56]="b0t1";n[n.c0t1=57]="c0t1";n[n.d0t1=58]="d0t1";n[n.e0t1=59]="e0t1";n[n.f0t1=60]="f0t1";n[n.g0t1=61]="g0t1";n[n.h0t1=62]="h0t1";n[n.i0t1=63]="i0t1";n[n.j0t1=64]="j0t1";n[n.k0t1=65]="k0t1";n[n.a0t2=66]="a0t2";n[n.b0t2=67]="b0t2";n[n.c0t2=68]="c0t2";n[n.d0t2=69]="d0t2";n[n.e0t2=70]="e0t2";n[n.f0t2=71]="f0t2";n[n.g0t2=72]="g0t2";n[n.h0t2=73]="h0t2";n[n.i0t2=74]="i0t2";n[n.j0t2=75]="j0t2";n[n.k0t2=76]="k0t2";n[n.max=77]="max"})(i=t.ColorCode||(t.ColorCode={}));var l,a,o,p,u,g=11,nt=[i.a0,i.a1,i.b2,i.b0,i.c2,i.b1,i.c0,i.c1,i.d0,i.d1,i.e2,i.e0,i.e1,i.f1,i.f0,i.g1,i.g0,i.g2,i.h2,i.h0,i.h1,i.i1,i.i0,i.i2,i.j1,i.j0,i.j2,],tt=[i.g0,i.f0,i.e0,i.h0,i.i0,i.j0,i.a1,i.b1,i.c1,i.d1,i.e1,i.f1,i.g1,i.h1,i.i1,i.j1,i.b2,i.c2,i.e2,i.g2,i.h2,i.i2,i.j2,i.a0,i.b0,i.c0,i.d0,],it={0:[i.a0s2,i.a0s1,i.a0,i.a0t1,i.a0t2,],1:[i.b0s2,i.b0s1,i.b0,i.b0t1,i.b0t2,],2:[i.c0s2,i.c0s1,i.c0,i.c0t1,i.c0t2,],3:[i.d0s2,i.d0s1,i.d0,i.d0t1,i.d0t2,],4:[i.e0s2,i.e0s1,i.e0,i.e0t1,i.e0t2,],5:[i.f0s2,i.f0s1,i.f0,i.f0t1,i.f0t2,],6:[i.g0s2,i.g0s1,i.g0,i.g0t1,i.g0t2,],7:[i.h0s2,i.h0s1,i.h0,i.h0t1,i.h0t2,],8:[i.i0s2,i.i0s1,i.i0,i.i0t1,i.i0t2,],9:[i.j0s2,i.j0s1,i.j0,i.j0t1,i.j0t2,],10:[i.k0s2,i.k0s1,i.k0,i.k0t1,i.k0t2,]};t.getRawColorString=s;t.getColorCodeString=h;t.getRawColorCode=w;t.getRawColorIndex=b;t.getColorIndex=k;t.getColorCodeTintSet=rt;t.getColorCodeTintSetIndex=d;t.getAllColorCodeIndexes=ut;t.getRotatedArray=r;t.getGradientColorCodeIndexes=v;t.getRainbowColorCodeIndexes=y;t.getGradientColorCode=ft;t.getRawGradientColorCode=et;t.getRainbowColorCode=ot;t.getRawRainbowColorCode=st})(t=n.ColorUtil||(n.ColorUtil={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n.initObservable,r=(function(){function n(n,t){this.startDateTime=i(n,null);this.endDateTime=i(t,null)}return n})();t.DateTimeRange=r})(t=n.DateUtil||(n.DateUtil={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function u(n){return{original:n,unitType:n>>ft,index:n&127,perTime:!!(n&et)}}function lt(n,t,i){return $.isNumeric(n)?at(Math.abs(n),t,i):t}function at(t,i,r){var c=u(i),o,h=i,s=t,f,e,l,a=n.isNullOrUndefined(r)?i:r;if(c.unitType>0&&(o=ct[c.unitType],f=o.indexOf(i),e=t>1?1:-1,l=e>0?o.length-1:0,t!==1)){while(f!==l){if(s=t/d(i,o[f+e])+it,e>0){if(s<1)break}else if(s>=1){f+=e;break}f+=e}h=o[f];e<0&&f===0&&s<tt&&(h=a)}return h}function h(n,t,i){var r=ot[n],u=r[t],f=r[i];return{dividend:f.dividend*u.divisor,divisor:f.divisor*u.dividend}}function vt(n,t,i){var r=t.index-p,u=i.index-p,o=Math.max(0,r),s=Math.max(0,u),c=-Math.min(0,r),l=-Math.min(0,u),f=h(n,o,s),e=h(2,l+y,c+y);return{dividend:f.dividend*e.dividend,divisor:f.divisor*e.divisor}}function d(n,t){var i=pt(n,t);return i.dividend/i.divisor}function yt(n,t){var i=s[n];return i?i[t]:null}function g(n,t,i){var r=s[n];r||(r=s[n]={});r[t]=i}function pt(n,t){var e=null,s=!1,i,l,o;if(n===t)return f;if(i=yt(n,t),i)return i;if(l=u(n),o=u(t),l.unitType===o.unitType){switch(o.unitType){case r.DecimalPerTime:s=!0;case r.Decimal:e=0;break;case r.BytesPerTime:s=!0;case r.Bytes:e=1;break;case r.BytesPerTime_SI:s=!0;case r.Bytes_SI:e=0;break;case r.Time:e=2}if(e!==null)return i=s?vt(e,l,o):h(e,l.index,o.index),g(n,t,i),g(t,n,{dividend:i.divisor,divisor:i.dividend}),i}throw"Not supported: conversion from unit "+n+"("+c(n)+") to unit "+t+"("+c(t)+") is not supported.";}function c(n,t){var i;return t===!0?(i=b[n],i===l&&(i=b[n]=nt(n,!0))):(i=w[n],i===l&&(i=w[n]=nt(n,!1))),i}function nt(n,r){switch(n){case t.Unit.Count:return"";case t.Unit.Thousand:return i.thousand;case t.Unit.Million:return i.million;case t.Unit.Billion:return i.billion;case t.Unit.Trillion:return i.trillion;case t.Unit.Bytes:case t.Unit.Bytes_SI:return i.bytes;case t.Unit.Kilobytes:return r?i.kilobytesSI:i.kilobytes;case t.Unit.Kilobytes_SI:return i.kilobytesSI;case t.Unit.Megabytes:return r?i.megabytesSI:i.megabytes;case t.Unit.Megabytes_SI:return i.megabytesSI;case t.Unit.Gigabytes:return r?i.gigabytesSI:i.gigabytes;case t.Unit.Gigabytes_SI:return i.gigabytesSI;case t.Unit.Terabytes:return r?i.terabytesSI:i.terabytes;case t.Unit.Terabytes_SI:return i.terabytesSI;case t.Unit.Petabytes:return r?i.petabytesSI:i.petabytes;case t.Unit.Petabytes_SI:return i.petabytesSI;case t.Unit.BytesPerDay:case t.Unit.BytesPerDay_SI:return i.bytesPerDay;case t.Unit.BytesPerHour:case t.Unit.BytesPerHour_SI:return i.bytesPerHour;case t.Unit.BytesPerMinute:case t.Unit.BytesPerMinute_SI:return i.bytesPerMinute;case t.Unit.BytesPerSecond:case t.Unit.BytesPerSecond_SI:return i.bytesPerSecond;case t.Unit.KilobytesPerSecond:return r?i.kilobytesPerSecondSI:i.kilobytesPerSecond;case t.Unit.KilobytesPerSecond_SI:return i.kilobytesPerSecondSI;case t.Unit.MegabytesPerSecond:return r?i.megabytesPerSecondSI:i.megabytesPerSecond;case t.Unit.MegabytesPerSecond_SI:return i.megabytesPerSecondSI;case t.Unit.GigabytesPerSecond:return r?i.gigabytesPerSecondSI:i.gigabytesPerSecond;case t.Unit.GigabytesPerSecond_SI:return i.gigabytesPerSecondSI;case t.Unit.TerabytesPerSecond:return r?i.terabytesPerSecondSI:i.terabytesPerSecond;case t.Unit.TerabytesPerSecond_SI:return i.terabytesPerSecondSI;case t.Unit.PetabytesPerSecond:return r?i.petabytesPerSecondSI:i.petabytesPerSecond;case t.Unit.PetabytesPerSecond_SI:return i.petabytesPerSecondSI;case t.Unit.CountPerDay:return i.countPerDay;case t.Unit.CountPerHour:return i.countPerHour;case t.Unit.CountPerMinute:return i.countPerMinute;case t.Unit.CountPerSecond:return i.countPerSecond;case t.Unit.ThousandPerSecond:return i.thousandPerSecond;case t.Unit.MillionPerSecond:return i.millionPerSecond;case t.Unit.BillionPerSecond:return i.billionPerSecond;case t.Unit.TrillionPerSecond:return i.trillionPerSecond;case t.Unit.MicroSeconds:return i.microSeconds;case t.Unit.MilliSeconds:return i.milliSeconds;case t.Unit.Seconds:return i.seconds;case t.Unit.Minutes:return i.minutes;case t.Unit.Hours:return i.hours;case t.Unit.Days:return i.days;case t.Unit.Percentage:return i.percentage;default:return""}}var l=undefined,i=n.Resources.Strings.UnitConversion,tt=.0001,it=1e-5,f={dividend:1,divisor:1},a=60,v=60*a,e=24*v,rt=7*e,ut=30*e,o=[{dividend:1,divisor:Math.pow(10,6)},{dividend:1,divisor:Math.pow(10,3)},f,{dividend:a,divisor:1},{dividend:v,divisor:1},{dividend:e,divisor:1},{dividend:rt,divisor:1},{dividend:ut,divisor:1},],y=o.indexOf(f),ft=FxImpl.UnitConversionUtil.higherByteOffset,p=3,et=FxImpl.UnitConversionUtil.perTimeBit,ot=[function(n){return{dividend:Math.pow(10,3*n),divisor:1}},function(n){return{dividend:Math.pow(2,10*n),divisor:1}},function(n){return o[n]}].map((function(n){return o.map((function(t,i){return n(i)}))})),s={},w={},b={},r=FxImpl.UnitConversionUtil.UnitType,k=n.getEnumArray,st=k(r,!0),ht=k(t.Unit).map((function(n){return u(n.value)})),ct=st.map((function(n){return n.value===0?[]:ht.filter((function(t){return t.unitType===n.value})).map((function(n){return n.original})).sort((function(n,t){return n-t}))}));t.getAppropriateUnit=lt;t.getConversionFactor=d;t.toString=c})(t=n.UnitConversionUtil||(n.UnitConversionUtil={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function s(n,t,u){var f=e(u)?null:i(u),o=r.getAppropriateUnit(n,i(t),f);return a(o)}function h(n,t){return r.getConversionFactor(i(n),i(t))}function c(n,t){return r.toString(i(n),t)}function y(n,t,i,r,u,f){return l(n,t,s(n,t,u),i,r,u,f)}function l(n,t,i,r,u,f,s){var w=u?u:v,a=r?r:{minimumFractionDigits:0,maximumFractionDigits:2},y=h(t,i),p=i,l="";return n===0?(l=o(a).format(n),p=e(f)?i:f):y&&(l=o(a).format(n/y)),w.format(l,c(p,s))}function i(n){var t=r.Unit,i=u[n];return t[i]}function a(n){var t=u,i=r.Unit[n];return t[i]}var f=n,r=f.UnitConversionUtil,e=f.isNullOrUndefined,o=FxImpl.Intl.NumberFormat.create,v="{0} {1}",u;(function(n){n[n.None=0]="None";n[n.Percentage=1]="Percentage";n[n.Bytes=2]="Bytes";n[n.Kilobytes=3]="Kilobytes";n[n.Megabytes=4]="Megabytes";n[n.Gigabytes=5]="Gigabytes";n[n.Terabytes=6]="Terabytes";n[n.Petabytes=7]="Petabytes";n[n.BytesPerDay=8]="BytesPerDay";n[n.BytesPerHour=9]="BytesPerHour";n[n.BytesPerMinute=10]="BytesPerMinute";n[n.BytesPerSecond=11]="BytesPerSecond";n[n.KilobytesPerSecond=12]="KilobytesPerSecond";n[n.MegabytesPerSecond=13]="MegabytesPerSecond";n[n.GigabytesPerSecond=14]="GigabytesPerSecond";n[n.TerabytesPerSecond=15]="TerabytesPerSecond";n[n.PetabytesPerSecond=16]="PetabytesPerSecond";n[n.Count=17]="Count";n[n.Thousand=18]="Thousand";n[n.Million=19]="Million";n[n.Billion=20]="Billion";n[n.Trillion=21]="Trillion";n[n.MicroSeconds=22]="MicroSeconds";n[n.MilliSeconds=23]="MilliSeconds";n[n.Seconds=24]="Seconds";n[n.Minutes=25]="Minutes";n[n.Hours=26]="Hours";n[n.Days=27]="Days";n[n.CountPerDay=28]="CountPerDay";n[n.CountPerHour=29]="CountPerHour";n[n.CountPerMinute=30]="CountPerMinute";n[n.CountPerSecond=31]="CountPerSecond";n[n.ThousandPerSecond=32]="ThousandPerSecond";n[n.MillionPerSecond=33]="MillionPerSecond";n[n.BillionPerSecond=34]="BillionPerSecond";n[n.TrillionPerSecond=35]="TrillionPerSecond";n[n.Bytes_SI=36]="Bytes_SI";n[n.Kilobytes_SI=37]="Kilobytes_SI";n[n.Megabytes_SI=38]="Megabytes_SI";n[n.Gigabytes_SI=39]="Gigabytes_SI";n[n.Terabytes_SI=40]="Terabytes_SI";n[n.Petabytes_SI=41]="Petabytes_SI";n[n.BytesPerDay_SI=42]="BytesPerDay_SI";n[n.BytesPerHour_SI=43]="BytesPerHour_SI";n[n.BytesPerMinute_SI=44]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=45]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=46]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=47]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=48]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=49]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=50]="PetabytesPerSecond_SI"})(u=t.Unit||(t.Unit={}));t.getAppropriateUnit=s;t.getConversionFactor=h;t.toString=c;t.getConvertedValue=y;t.getConvertedValueForTargetUnit=l;t._convertUnitToInternalConversionUnit=i;t._convertInternalConversionUnitToUnit=a})(t=n.UnitConversion||(n.UnitConversion={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function u(n){return typeof n=="string"}function s(n,t){var i=n.name;return n&&t[i.namespaceIndex]+"."+i.name}function h(n){return n?r[n]:null}function c(n,t){var i=l(n,t);return i&&i.itemType||null}function v(n,t){return h(c(n,t))}function l(n,t){var i=u(n)?h(n):n,r=i&&i.properties;return r&&r[t]}function y(n,t){var i=l(n,t);return!!(i&&i.isArray)}function p(n){var r=[],t=n&&n.properties,i;if(t)for(i in t)t.hasOwnProperty(i)&&r.push(i);return r}function w(n){var i=u(n)?t.getTypeMetadata(n):n;return i&&i.idProperties||null}function tt(n){var t=w(n);return t&&t.length>0}function it(n,i){for(var c=u(i)?t.getTypeMetadata(i):i,e=b(c),s,r,h=[],f=0,l=e.length;f<l;f++){if(s=e[f],r=ko.unwrap(n[s]),o(r))return;r===null&&(r=nt);h.push(r)}return h.join(",")}function b(n){return w(n)}function rt(n,t){f(n,t,{visitArray:function(n,t){$.data(n,a,t)}})}function f(n,t,i){if(t)if(Array.isArray(ko.unwrap(n)))i.visitArray&&i.visitArray(n,t),ko.unwrap(n).forEach((function(n){f(n,t,i)}));else if(g(n))for(var r in n)n.hasOwnProperty(r)&&f(n[r],c(t,r),i)}function ut(n){return $.data(n,a)}function k(n){var t=u(n)?r[n]:n,i={},f;return t&&(f=p(t),f.forEach((function(n){var r=v(t,n),u=y(t,n);if(u)i[n]=ko.observableArray();else if(!r||r.entityType)i[n]=ko.observable();else if(r.name)i[n]=ko.observable(k(r.name));else throw new Error("Cannot create entity.");}))),i}function ft(n){return n&&n.entityType}function d(n,t){t&&!t.name&&(t=e.clone(t),t.name=n);r[n]=t}function et(n){for(var i,t,f=(n+"Type").split("."),r=window,e=f.length,s=e-1,u=0;u<e;u++){if(i=f[u],t=r[i],u===s){if(t!==n){if(!o(t))throw new Error("Cannot create namespace for '"+n+"' because it already exists.");r[i]=n}}else if(typeof t!="object"){if(!o(t))throw new Error("Cannot create namespace for '"+n+"' at the segment '"+i+"' because it already exists.");t={};r[i]=t}r=t}}function i(n,t){return n===undefined?t:n}function ot(n){var t=n.namespaces,u=n.metadata,f=u.map((function(n){var h={},f,e,r,o;et(s(n,t));f=n.properties;for(e in f)r=f[e],o=i(r.typeIndex,-1),h[e]={isArray:!!i(r.isArray,!1),isDate:!!i(r.isDate,!1),itemType:o===-1?null:s(u[o],t),trackEdits:!!i(r.trackEdits,!0),persistEdits:!!i(r.persistEdits,!0)};return{name:s(n,t),properties:h,idProperties:n.idProperties,entityType:n.entityType,hasGloballyUniqueId:n.hasGloballyUniqueId}})),r=n.rootTypeIndex;return f.forEach((function(n){d(n.name,n)})),typeof r=="number"&&r>=0&&f[r]||null}var e=n,g=e.isObject,o=e.isUndefined,a="aux-type",nt="NULL-VALUED-ID-PROPERTY",r={},st;t.getTypeMetadata=h;t.getPropertyType=c;t.getPropertyTypeMetadata=v;t.getPropertyMetadata=l;t.getPropertyCardinality=y;t.getProperties=p;t.typeHasId=tt;t.getItemId=it;t.getIdPropertyNames=b;t.decorateWithType=rt;t.visitTypedData=f;t.getArrayItemType=ut;t.createEmptyObject=k;t.typeIsEntityType=ft;t.setTypeMetadata=d;t.setTypesMetadata=ot,(function(n){function t(){r={}}n.clearAllTypesMetadata=t})(st=t.Internal||(t.Internal={}))})(i=t.Metadata||(t.Metadata={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(t=n.SortOrder||(n.SortOrder={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i="This callback is already registered.",r=(function(){function t(n){this._resetListeners=[];this._partialErrors=n||ko.observableArray()}return Object.defineProperty(t.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!1,configurable:!0}),t.prototype.resetNavigation=function(){var n=this._resetListeners.map((function(n){return n()}));return Q.all(n)},t.prototype.addResetNavigationListener=function(n){if(this._resetListeners.includes(n))throw new Error(i);this._resetListeners.push(n)},t.prototype.removeResetNavigationListener=function(n){var t=this._resetListeners.indexOf(n);if(t<0)throw new Error(i);this._resetListeners.splice(t,1)},__decorate([__metadata("fx:diagnostics",[require,"DataNavigatorBase"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Function])],t)})();t.DataNavigatorBase=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){n.ArgBrowseFeatureValueToEnumMap={allowoptin:1,forceoptin:2,force:3,disable:4}})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){n[n.All=0]="All";n[n.Any=1]="Any"})(t=n.SetRequirement||(n.SetRequirement={}))})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function r(n,t,r){var u=r&&r.allowedOrigins;return i.registerRpcEndPoint(n,{allowedOrigin:u,handler:function(n){return t.apply(null,n)}})}function u(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return i.invokeRpc(t,n,u)}var i=FxImpl.Rpc.client,f;t.registerCallback=r;t.invokeCallback=u,(function(t){function i(t){return function(i){n.require("FxInternal/Events").then((function(n){n.registerEventHandler(t,i)}))}}t.Decorator=i})(f=t.EventHandler||(t.EventHandler={}))})(i=t.Rpc||(t.Rpc={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n.initObservable,r=(function(){function n(n,t,r,u,f){this.uri=i(n);this.target=i(t,"_blank");this.windowFeatures=i(r);this.onLinkOpened=u;this.telemetryName=f}return n})();t.ClickableLink=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var i=(function(){function n(n,t,i){this.partName=n;this.parameters=t;this.options=i||{}}return n})(),t;n.PartReference=i;t=(function(){function n(){}return n})();n.ResourcePartReference=t})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){function t(n,t){var i="_msPortalFxShell";return t?n[i]=t:t=n[i],t}function v(n,t){var i=n;i._msPortalFxIsSelectableViewModel=!0;t&&(i._msPortalFxSelectable=t);n.configureSelectable=h.configureSelectable.bind(n)}function y(n,t){var i=n;i._msPortalFxSelectable=t}function p(n){return o(n)?n:null}function o(n,t){var i=n,r;return i&&i._msPortalFxIsSelectableViewModel===!0?(r=!!i._msPortalFxSelectable2,!t)?!!i._msPortalFxSelectable||r:r:!1}function w(n){var i=n&&t(n);return i&&i.type===21298}function b(n,t,i){var r=n._msPortalFxCallbacks;r&&r[t]&&typeof r[t]=="function"&&r[t].apply(r,i)}var c=window,i="",l={supplyConflict:i,recieveConflict:i,syncConflict:i,supplyBladeConflict:i},f=MsPortalFx.initObservable,r=n.getErrorMap(l),a,u,e,s,h;n.shellInterface=t,(function(n){var t=(function(){function n(n,t,i,r,u){this.uri=f(n);this.target=f(t,"_blank");this.windowFeatures=f(i);this.onLinkOpened=r;this.telemetryName=u}return n})();n.ClickableLink=t})(a=n.CompositionCore||(n.CompositionCore={})),(function(i){var u;(function(i){var e=(function(){function n(n,t){this.parameters=n;this._msPortalFxCallbacks=t}return n.prototype.clone=function(t){return new n(t,this._msPortalFxCallbacks)},n})(),u,o,s,h,f,c;i.BladeReference=e;u=(function(n){function t(t,i,r,u){var f=this,e=r&&r.parameters,o=r&&r.callbacks;return f=n.call(this,e,o)||this,f.bladeName=t,f.extensionName=i,f.options=r,f.metadata=u,f}return __extends(t,n),t})(e);i.PdlBladeReference=u;o=(function(n){function i(i,r,u,f,e){var o=n.call(this,i,r,f,e)||this;return t(o,{type:19792,marketplaceId:u}),o}return __extends(i,n),i})(u);i.ProvisioningBladeReference=o;s=(function(n){function t(t,i,r,u,f){var e=n.call(this,t,r,u,f)||this;return e.menuId=i,e.contentBladeReference=u&&u.contentBladeReference,e}return __extends(t,n),t})(u);i.MenuBladeReference=s;h=(function(i){function u(u,f,e,o){function c(t){var i=new n.TriggerableLifetimeManager,r=e.editScopeAccessor.getEditableObservable(i);t(r);i.dispose()}var h=i.call(this,u,f,e,o)||this,s;return e.editScopeAccessor?(e.receiveResult||e.supplyInitialData)&&r.supplyConflict():e.receiveResult||r.recieveConflict(),s=ko.observable(),t(h,{type:20560,bladeConfig:s,getBladeConfig:function(){var n=null,t;return e.supplyInitialData?n=e.supplyInitialData():e.editScopeAccessor&&c((function(t){n=t()})),t={config:e.supplyProviderConfig?e.supplyProviderConfig():undefined,initialState:n},s(t),t},receiveResult:function(n){e.receiveResult?e.receiveResult(n):c((function(t){t(n)}))}}),h}return __extends(u,i),u})(u);i.ParameterProviderBladeReference=h;f=(function(){function n(){}return n})();i.SelectableBase=f;c=(function(n){function i(i){function h(n,t,i){return{reason:n,flags:0,bladeReference:t,operationId:i||MsPortalFx.getUniqueId()}}function c(n,t){return h(1,n,t)}function l(n){var t=u();return o(t),c(t,n)}function a(n){return Q(e()).then((function(t){return o(t),c(t,n)}))}var f=n.call(this)||this,u=i.supplyBladeReference,e=i.supplyBladeReferenceAsync,s=ko.observable(),o=ko.observable();return u||e||r.syncConflict(),u&&e&&r.supplyBladeConflict(),t(f,{type:21298,flags:1,fetchRequest:u?l:a,requestOpenBlade:s,currentBladeReference:o}),f.renavigateActivatedBlade=function(n){s()(h(2,n))},f}return __extends(i,n),i})(f);i.Selectable2=c})(u=i.Selectable||(i.Selectable={}))})(u=n.Composition||(n.Composition={}));e=u.Selectable;n.BladeReference=e.BladeReference;n.initializeSelectableViewModel=v;n.assignSelectable=y;n.tryGetSelectableViewModelContract=p;n.isSelectableViewModel=o;n.isSelectable2=w;n.invokeCallback=b;s=(function(){function n(){}return n.prototype.configureSelectable=function(n){var t=new u.Selectable.Selectable2(n),i=this._msPortalFxSelectable;return i&&(i.dispose(),delete this._msPortalFxSelectable),this._msPortalFxSelectable2=t,t},n})();h=new s;c.define("Fx/Composition/Selectable",u.Selectable)})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){n.TimeRangeValueType="MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"})(t=n.Configuration||(n.Configuration={}))})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function t(n){return typeof n=="object"?u(n,!0):n}var i=MsPortalFx.deepEquals,r=MsPortalFx.union,u=MsPortalFx.clone,f=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Part"),e=(function(){function n(n,t){this._configChangedHandler=t}return n.prototype.setValues=function(n){this._persistedValues=t(n)},n.prototype.getValues=function(){var n=this._persistedValues;return n.parameters,t(n)},n.prototype.updateValues=function(n,u){var w;if(u===void 0&&(u=!0),!this._persistedValues)throw new Error("This 'updateValues' method cannot be called until the associated Part/Blade has been initialized.  Typically, 'updateValues' is called in the 'receiveResult' callback for a ParameterCollector opening a configuration Blade.");var o,s=n.parameters,c=n.settings,l=this._persistedValues,a=l.parameters,h=l.settings,v=a.values,y=s&&s.values||{},e=a.metadata,p=s&&s.metadata||{},b=r(Object.keys(y),Object.keys(p));return b.forEach((function(n){var h,c,u,r,l,s,a;if(!e.hasOwnProperty(n)){f.error("Parameter named '"+n+"' is not a recognized parameter for this Part.");return}if(c=e&&e[n]&&Array.isArray(e[n].bindingSources)&&e[n].bindingSources.length>0,c){if(u=p[n],r=u&&u.activeBindingSourceName,r!==e[n].activeBindingSourceName){if(l=!r||MsPortalFx.findIndex(e[n].bindingSources,(function(n){return n.name===r}))>=0,!l)throw new Error("The name '"+r+"' supplied as 'activeBindingSourceName' does not match a binding source in 'bindingSources'.");e[n].activeBindingSourceName=r;o=!0}h=!!r}s=y[n];a=h||i(s,v[n]);a||(v[n]=t(s),o=!0)})),w=Object.keys(c),w.forEach((function(n){var u=!0,r=c[n];r===undefined&&(u=!1);u?i(r,h[n])||(h[n]=t(r),o=!0):h[n]!==undefined&&(h[n]=undefined,o=!0)})),o?this._configChangedHandler(t(this._persistedValues),u):Q()},n})();n.Configuration=e})(t=n.Composition||(n.Composition={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t=(function(){function n(){}return n})(),i;n.ContainerContract=t,(function(n){function t(n,t){t===void 0&&(t=!0);var i=n;i.preview(!!t)}n.markAsPreview=t})(i=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Dirty=4]="Dirty";n[n.Info=5]="Info";n[n.Upsell=6]="Upsell";n[n.Complete=7]="Complete"})(t=n.InternalContentState||(n.InternalContentState={}))})(t=n.Internal||(n.Internal={}));n.ContentState=t.InternalContentState})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(){})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){function f(){return{value:null}}var i=FxImpl.Rpc,r=i.FuncEndPointDefinition,u=FxImpl.Constants.RpcMethods,e,t;n.createDialogRef=f,(function(t){function i(t,i){return new n.Selectable({selectedValue:arguments.length===2?i:!0,isSelected:!!(t&&t.container&&t.container.selectable.isSelected),isCommandSelected:!!(t&&t.container&&t.container.selectable.isCommandSelected)})}function r(t,i){return new n.ClickableLink(t,i)}t.createSelectableViewModel=i;t.createClickableLinkViewModel=r})(e=n.Part||(n.Part={}));n.navigateToDashboardEndPoint=new r(u.navigateToDashboard);t=(function(){function n(){}return n})();n.PartContainerContract=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){function t(t){var i=(n.postBootEnv.hostingServiceBaseDomains||[]).filter((function(n){return/^https:\/\/[\w\.\-]+$/.test(n)}));n.toAbsoluteUrisRequireCore(t,{origin:n.origin,protocol:n.protocol,appPath:MsPortalFx.getEnvironmentValue("applicationPath"),baseDomains:i})}n.toAbsoluteUrisRequire=t;var i;(function(t){function s(){return{getLocalGalleryPackagesEndpoints:function(){return t.getLocalGalleryPackagesEndpointsDefinition.invoke(n.Rpc.client,"fx",undefined)}}}var u=n.Rpc,f=u.ActionEndPointDefinition,r=u.FuncEndPointDefinition,e=u.ProxiedObjectTypeDefinition,i=n.Constants.RpcMethods,o;t.invokeAmeConfirmationDialogEndPoint=new r(i.deletePutConfirmation);t.getExtensionGalleryService=new e(i.getExtensionGalleryServiceViewModel);t.getBladeDefinitionEndPoint=new r(i.entryPointGetBladeDefinition);t.getPartDefinitionEndPoint=new r(i.entryPointGetPartDefinition);t.downloadBladeBundlesEndPoint=new f("downloadBladeBundles"),(function(n){n.getExtensionConfigurationEndPoint=new r(i.getManifestEnvironment);n.registerTestExtensionsEndPoint=new r(i.registerTestExtensions);n.unregisterTestExtensionsEndPoint=new r(i.unregisterTestExtensions);n.listTestExtensionsEndPoint=new r(i.listTestExtensions)})(o=t.CreateUiDef||(t.CreateUiDef={}));t.getReactModelEndPoint=new f(i.entryPointGetReactModel);t.disposeReactModelEndPoint=new f(i.entryPointDisposeReactModel);t.getCommandsDefinitionEndPoint=new r(i.entryPointGetCommandsDefinition);t.pingEndPoint=new r(i.ping);t.getLastResourceIdInJourneyEndPoint=new r(i.getLastResourceIdInJourney);t.getCatalogApiCacheContentEndPoint=new r(i.getCatalogApiCacheContent);t.getExtensionRegistrationEndPoint=new r(i.getExtensionRegistration);t.getManifestEndPoint=new r(i.getManifest);t.getAuthorizationTokenEndPoint=new r(i.getAuthToken);t.getSharedSettingsEndPoint=new r(i.getSharedSettings);t.getLocalGalleryPackagesEndpointsDefinition=new r(i.getLocalGalleryPackagesEndpoints);t.getLocalGalleryPackagesEndpointDefinition=new r(i.registerLocalGalleryPackagesEndpoint);t.hasPermissionsToShell=new r(i.hasPermission);t.mapAssetIdToResourceIdEndPoint=new r(i.mapAssetIdToResourceId);t.mapResourceIdToAssetIdEndPoint=new r(i.mapResourceIdToAssetId);t.mapAssetIdToDynamicSelectionAndIconEndPoint=new r(i.mapAssetIdToDynamicSelectionAndIcon);t.mapResourceIdToDynamicSelectionAndIconEndPoint=new r(i.mapResourceIdToDynamicSelectionAndIcon);t.getAssetTypeInformationEndPoint=new r(i.getAssetTypeInformation);t.getResourceTypeAssetTypeInformationEndPoint=new r(i.getResourceTypeAssetTypeInformation);t.getResourceAssetInformationEndPoint=new r(i.getResourceAssetInformation);t.getResourceEndPoint=new r(i.getResource);t.getRuntime=s})(i=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){n.AutomationGroupId="automation_group";n.ManagementGroupId="management_group";n.SupportGroupId="support_group";n.QuickAccessGroupId="quickaccess_group";n.MonitoringGroupId="monitoring_group";n.EventLogsItemId="eventlogs";n.ExportTemplateItemId="exporttemplate";n.MyAccessItemId="access";n.ResourceProvidersItemId="resourceproviders";n.ResourceHealthItemId="resourcehealth";n.ResourceGroupsItemId="resourceGroups";n.ResourcesItemId="resources";n.PreviewFeaturesItemId="previewfeatures";n.SubscriptionCertsItemId="subcerts";n.SubscriptionQuotasItemId="quotas";n.SupportHelpRequestItemId="supportrequest";n.TagsItemId="tags";n.LocksItemId="locks";n.TroubleshootItemId="troubleshoot";n.UsersItemId="users";n.PropertiesItemId="properties";n.AlertsItemId="alerts";n.DiagnosticsItemId="diagnostics";n.MetricsItemId="metrics";n.LogSearchItemId="logsearch";n.ResourceAdvisorItemId="resourceadvisor";n.AnalyticsItemId="analytics"})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function o(n,t,e){var o,s=!1;return n.registerForDispose((function(){s=!0})),i.has(e)?o=i.get(e):(o=Q(u.acquireObject(f,t.name,{})).then((function(t){return n.registerForDispose(t),t.value})),i.set(e,o),n.registerForDispose((function(){i.delete(e)}))),o.then((function(n){return s?Q.reject(new r.DisposedError({message:"supplyMenuDetailBladeReferenceAsync's input lifetime is already disposed",errorLevel:0})):n.supplyBladeReferenceAsync(e).then((function(n){var i;if(!n){i=new MsPortalFx.Errors.Error("supplyBladeReference returned null/undefined for resource menu item '"+e.id+"'");i.extension=t.name;throw i;}if(!n.bladeName){i=new MsPortalFx.Errors.Error("supplyBladeReference returned blade reference with null/undefined for bladeName for resource menu item '"+e.id+"'");i.extension=t.name;throw i;}return n})).catch((function(n){var i=r.Error.isBaseOf(n)?n:new r.Error(MsPortalFx.getLogFriendlyMessage(n));return i.extension=t.name,i._sourceErrorLevel=0,Q.reject(i)}))}))}var r=MsPortalFx.Errors,u=n.Rpc.client,f="MenuDetailBladeReferenceLifeExtenderObject",i=new Map,e;t.supplyMenuDetailBladeReferenceAsync=o;e=(function(){function n(){this.value=ko.observable()}return n.prototype.supplyBladeReferenceAsync=function(n){var r=this,t=function(n){return r.value(n),n},i;return n.supplyBladeReference?(i=n.supplyBladeReference(),Q(t(i))):Q(n.supplyBladeReferenceAsync()).then((function(n){return t(n)}))},n})();u.registerObjectFactory(f,{allowedOrigin:["HubsExtension","fx"],allowRemoteChanges:!0,handler:function(){return new e}})})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){function t(n,t,i,r,u){var f=function(n){var r,t;n.length&&(r=FxImpl.lowerCaseStringMap(),n.forEach((function(n){r.set(n.resourceId,!0)})),t=i().filter((function(n){return!r.has(n.resourceId)})),t.push.apply(t,n),i(t))},e=t.items.filter(n,r).map(n,(function(n,t){return ko.ignoreDependencies((function(){return u(t)}))}));e.subscribeAndRun(n,f)}n.ConnectView=t})(t=n.SupplementalDataStreamHelper||(n.SupplementalDataStreamHelper={}))})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function u(n,t){return(n&t)===t}function o(n,t){return n&&n.viewModel&&u(n.contracts,t)}function i(n,t){return Q(new e.PdlBladeReference(n.detailBlade,n.extension,{parameters:n.detailBladeInputs,onClosed:t}))}function s(t){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().mapAssetIdToResourceId(t)}))}function h(t){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().mapResourceIdToAssetId(t)}))}function f(t,i){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().mapAssetIdToDynamicSelectionAndIcon(t,i)}))}function c(t,i){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().mapAssetIdToDynamicSelectionAndIcon(t,i)})).then((function(n){return n.selection}))}function l(n){return f(n,!0).then((function(n){return i(n.selection)}))}function r(t,i){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().mapResourceIdToDynamicSelectionAndIcon(t,i)}))}function a(n,t){return r(n,t).then((function(n){return n.selection}))}function v(n,t){return Q(r(n,!0).then((function(n){return i(n.selection,t)})))}function y(t,i){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getAssetTypeInformation(t,i)}))}function p(t){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getResourceTypeAssetTypeInformation(t)}))}function w(t){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getResourceAssetInformation(t)}))}function b(){return Q()}var e=FxImpl.Composition.Selectable;t.supportsContract=u;t.assetTypeInformationSupportsContract=o;t.mapDynamicBladeSelectionToBladeReference=i;t.mapAssetIdToResourceId=s;t.mapResourceIdToAssetId=h;t.mapAssetIdToDynamicSelectionAndIcon=f;t.mapAssetIdToDynamicSelection=c;t.mapAssetIdToBladeReference=l;t.mapResourceIdToDynamicSelectionAndIcon=r;t.mapResourceIdToDynamicSelection=a;t.mapResourceIdToBladeReference=v;t.getAssetTypeInformation=y;t.getResourceTypeAssetTypeInformation=p;t.getResourceAssetInformation=w;t.signalResourcesChanged=b})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function i(n,i){return t(n,i)}function t(n,t){return n+"_"+t}n.getAssetTypeOrResourceTypeId=i;n.getAssetTypeOrResourceTypeIdByWindowId=t})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t=(function(){function n(){this._init()}return n.prototype.add=function(n,t){var i,r,u;return n&&(i=void 0,r=this._entries,t?(u=this._names,i=u[t],i===undefined&&(i=r.length,u[t]=i)):i=r.length,r[i]=n),this},n.prototype.remove=function(n){var t=this._entries,i,r;return typeof n=="string"?(i=this._names,r=i[n],isNaN(r)||(delete i[n],t[r]=null)):t.forEach((function(i,r){i===n&&(t[r]=null)})),this},n.prototype.clear=function(){return this._init(),this},n.prototype.fire=function(n){return this._entries.forEach((function(t){t&&t(n)})),this},n.prototype._init=function(){this._entries=[];this._names={}},n})();n.Callbacks=t})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t,i,r,u,f,e,o,s,h;n.Shell="fx",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.ClassicResources="Microsoft_Azure_ClassicResources";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(t=n.ExtensionNames||(n.ExtensionNames={})),(function(n){n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseResourceBlade="BrowseResource";n.BrowseBlade="BrowseResource";n.BrowseAllResources="BrowseAllResources";n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.Gallery="Gallery";n.StoreGallery="StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource="BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(i=n.AssetNames||(n.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(r=n.ResourceTypes||(n.ResourceTypes={})),(function(n){var t;(function(n){n.BrowseResourcePinnedPart="BrowseResourcePinnedPart";n.BrowseResourceGroupPinnedPart="BrowseResourceGroupPinnedPart"})(t=n.Hubs||(n.Hubs={}))})(u=n.PartNames||(n.PartNames={})),(function(n){var t,i,r;(function(n){n.SubscriptionsBlade="SubscriptionsBlade"})(t=n.Billing||(n.Billing={})),(function(n){n.CreateHubBlade="PlusNewBlade";n.BrowseLinkBlade="BrowseLinkBlade";n.BrowseResourceBlade="BrowseResourceBlade";n.BrowseAllResourcesBlade="BrowseAllResourcesBlade";n.BrowseResourceGroupBlade="BrowseResourceGroupBlade";n.BrowseRecentResourcesBlade="BrowseRecentResourcesBlade";n.AssetMenuBlade="AssetMenuBlade";n.UnauthorizedAssetBlade="UnauthorizedAssetBlade";n.NotFoundAssetBlade="NotFoundAssetBlade";n.UnavailableAssetBlade="UnavailableAssetBlade";n.ResourceMenuBlade="ResourceMenuBlade";n.ResourceProperties="ResourceProperties";n.ResourceGroupMapBlade="ResourceGroupMapBlade"})(i=n.Hubs||(n.Hubs={})),(function(n){n.GalleryFeaturedMenuItemBlade="GalleryFeaturedMenuItemBlade";n.GalleryResultsListBlade="GalleryResultsListBlade";n.LegalTermsV2Blade="PCLegalTermsV2Blade"})(r=n.Marketplace||(n.Marketplace={}))})(f=n.BladeNames||(n.BladeNames={})),(function(n){n.FeatureAdoption="FeatureAdoption";n.FeatureObsolete="FeatureObsolete"})(e=n.Telemetry||(n.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(o=n.TelemetrySharing||(n.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(s=n.GalleryMenuItems||(n.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(h=n.BladeParameterNames||(n.BladeParameterNames={}))})(t=n.Constants||(n.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function d(n){var t="task:";try{t+=JSON.stringify(n,(function(n,t){var i=t;return n==="args"&&(i=undefined),typeof t=="function"&&(i=t+""),i}))}catch(i){t+="{\nname: "+n.name+" \nFunc: "+(n.scheduledTask+"")+" }"}return t}function v(){}function h(){var t,y,f,e;if(!r&&(t=n.first(i),t)){var s=l(),h=[t],c=!1,v=1,u=1;for(y=i.length;u<y;u++)if(f=i[u],f.scheduledExecutionTime<=s)v++,f!==t?h.push(f):c=!0;else break;c&&(i=h.concat(i.slice(u)));e=0;a&&(e=(v>>>2)*1e3);r=setTimeout(k,Math.max(e,t.scheduledExecutionTime-s));o=t}}function g(n){return n===o&&r}function c(){r&&(clearTimeout(r),r=null,o=null)}function y(n,t){var i,u="Error executing \n'"+d(n)+"'"+t?"\nerror:"+t.message:"",r;return e.isInstanceOfErrorType(t,e.Error)?(t.message=u,i=t):(r=new e.Error(u),r.innerErrors.push(t),i=r),i}var e=n.Errors,p=new t.Diagnostics.Log("MsPortalFx/Base/Base.Scheduler"),l=Date.now,a=!n.isFeatureEnabled("nodataperf"),u="",w={recurring:u,autoRecurring:u,concurrent:u,positiveInt:u},f=FxImpl.getErrorMap(w),r,o,i=[],b=function(){var t,u,n,f,r;try{if(u=i[0],c(u),n=i.shift(),n)if(v(n,!0),a)t=Q.fcall((function(){return n.scheduledTask.apply(n,n.args||[])})).catch((function(t){return Q.reject(y(n,t))})).finally((function(){n.recurring&&s.scheduleTask(n)}));else try{f=n.scheduledTask.apply(n,n.args||[]);t=Q(f)}catch(e){r=y(n,e);p.error(r);t=Q.reject(r)}finally{n.recurring&&s.scheduleTask(n)}}finally{h()}return t},k=b,s=(function(){function t(){}return t.scheduleTask=function(t,r){var s,u,a;t.recurring&&(t.absoluteTime&&f.recurring(),t.isAsync&&f.autoRecurring());!r&&i.includes(t)&&f.concurrent();t.name||(t.name="Anonymous "+n.getUniqueId());var y=l(),e=t,o=e.absoluteTime;for(o||(s=e.delayInMs,(isNaN(s)||s<=0)&&f.positiveInt(),o=y+s),e.scheduledExecutionTime=o,u=0,a=i.length;u<a;u++)if(i[u].scheduledExecutionTime>o)break;i.splice(u,0,e);v(e);u===0&&c();h()},t.deleteTask=function(n){var t=i.filter((function(t){return t!==n}));t.length!==i.length&&(i=t,g(n)&&c(),h())},t})();t.Scheduler=s})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function i(n,t){return new FxImpl.Security.AuthTokenCacheImpl(n,t)}function r(t){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getAuthorizationToken(t)}))}function u(){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getUserInfo()}))}function f(t,i){return Q.spread([n.require("Fx/DependencyInjection"),n.require("FxInternal/ResourceManagement/Permissions"),],(function(n,r){return n.container.get(r.PermissionChecker).hasPermission(t,i)}))}function e(t,i){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().assetHasPermission(t,i)}))}t.createAuthTokenCache=i;t.getAuthorizationToken=r;t.getUserInfo=u;t.hasPermission=f;t.assetHasPermission=e})(i=t.Security||(t.Security={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function o(t,i){var r=n.createError(t&&t.errorMessage||"Token Error",{data:i});return MsPortalFx.extend(r,t),Q.reject(r)}function s(n,t){if(t?t.token=n:t={token:n},n&&n.expiresAt>0){var r=Date.now(),i=n.expiresAt-a;t.expiresAt=n.expiresAt;t.refreshAfter=i<r?-1:i}else t.expiresAt=-1,t.refreshAfter=-1;return t}var u=MsPortalFx.Base,c=u.Diagnostics.Telemetry,i=new u.Diagnostics.Log("MsPortalFx/Base/Internal/Base.Security"),f=MsPortalFx.isFeatureEnabled("enableauthtelemetry"),e=1e3,r=6e4,l=4,a=6e5,h;t.tokenErrors={unknown:"Unknown",accessDenied:"AccessDenied",sessionEnded:"SessionEnded",credentialsExpired:"CredentialsExpired",networkError:"NetworkError",requiresMFA:"RequiresMfa",accountDisabled:"AccountDisabled",tooManyRequests:"TooManyRequests",badRequest:"BadRequest",appNotProvisioned:"AppNotProvisioned"};h=(function(){function n(n,t){var i=this;this._getTokenWorker=n;this._cachedTokenMap={};MsPortalFx.forEachKey(t,(function(n,t){i._cachedTokenMap[n]=s(t)}))}return n.prototype.getToken=function(n){var a=this._stalledPromise,p;if(a)return a;n=n||{};var u=n.resourceName||"",v={resourceName:u,wwwAuthHeader:n.wwwAuthHeader,authConfigStamp:n.authConfigStamp,audience:n.audience},r=Date.now(),l=this._cachedTokenMap,t=l[u];t||(l[u]={token:null,expiresAt:-1,refreshAfter:-1},t=l[u]);var s=t.refreshAfter,o=t.expiresAt,y=function(n){c.trace({source:"Base.Security",action:n,data:{resourceName:u,tokenExpiresAt:o,tokenRefreshAfter:s,currentTime:r}})},h=MsPortalFx.isFeatureEnabled("cae")&&!!n.wwwAuthHeader;return!h&&t.token&&s>r?Q(t.token):h||!t.token||o>0&&o<r?(f&&y("CacheMiss"+(h?"_WwwAuth":"")),p=h||!!t.token,t.token=null,t.expiresAt=-1,t.refreshAfter=-1,this._refreshTokenWorker(v,p,!1,e,t)):(s>0&&s<r&&(f&&y("CacheUpdateInBackground"),this._refreshTokenWorker(v,!0,!0,e,t)),o<r&&i.warning("Returning expired token for '{0}'. Current time: {1}, Expiration time: {2}".format(n.resourceName,r,o)),Q(t.token))},n.prototype.getTokenExpiresAt=function(n){return n=n||"",(this._cachedTokenMap[n]||{}).expiresAt},n.prototype._refreshTokenWorker=function(n,t,i,r,u){if(u.tokenPromise)return u.tokenPromise;var f=MsPortalFx.extend(n,{isBackground:i,ignoreRejection:!1,skipCache:t});return u.tokenPromise=this._refreshTokenWorkerInternal(f,r,u).catch((function(n){var t=n,i;return f.ignoreRejection?(i=new MsPortalFx.Errors.CanceledError("GetAuthorizationTokenOptionsExtended2.ignoreRejection === true"),i.innerErrors.push(n),t=i):t&&t.message&&(t.message="Base.Security: Unexpected failure getting token. Error:"+t.message+"."),Q.reject(t)})).finally((function(){u.tokenPromise=null}))},n.prototype._refreshTokenWorkerInternal=function(n,u,f){var e=this;return Q(this._getTokenWorker(n)).then((function(h){var p=h||{},c=p.token,v,y;if(c&&c.header)return s(c,f),c;var a=p.error,w=p.errorMessage,b={options:n,retryDelay:u};if(n.isBackground)return n.ignoreRejection=!0,o(h,b);switch(a){case t.tokenErrors.accountDisabled:case t.tokenErrors.credentialsExpired:case t.tokenErrors.sessionEnded:i.warning("Failed to get token, promise will be stalled. ServerMessage:"+w+". ServerErrorCode:"+a+".");y=e._stalledPromise;y||(e._stalledPromise=y=Q.defer().promise);v=y;break;case t.tokenErrors.unknown:i.warning("Failed to get token, operation will be retried. ServerMessage:"+w+". ServerErrorCode:"+a+".");v=Q.delay(u).then((function(){var t=u>=r?r:Math.min(u*l,r);return f.tokenPromise=null,e._refreshTokenWorkerInternal(n,t,f)}));break;case t.tokenErrors.requiresMFA:case t.tokenErrors.accessDenied:default:i.warning("Failed to get token, operation will not be retried. ServerMessage:"+w+". ServerErrorCode:"+a+".");n.ignoreRejection=!0;v=o(h,b)}return v}))},n})();t.AuthTokenCacheImpl=h})(t=n.Security||(n.Security={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){var t,i,r;(function(n){n[n.Minimized=0]="Minimized";n[n.Normal=1]="Normal";n[n.Maximized=2]="Maximized"})(t=n.DisplayState||(n.DisplayState={})),(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.Menu=51]="Menu"})(i=n.BladeWidth||(n.BladeWidth={})),(function(n){n[n.Action=1]="Action";n[n.Info=2]="Info";n[n.Create=3]="Create";n[n.Context=4]="Context";n[n.Help=5]="Help";n[n.Basic=6]="Basic";n[n.ContextAction=7]="ContextAction";n[n.BasicWithCommands=8]="BasicWithCommands";n[n.Hub=9]="Hub";n[n.HubSubMenu=10]="HubSubMenu";n[n.ResourceSetting=11]="ResourceSetting";n[n.App=12]="App"})(r=n.BladeStyle||(n.BladeStyle={}))})(t=n.Internal||(n.Internal={}))})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=MsPortalFx,r=i.Base,s=i.Errors,f,u,e,o;(function(t){function r(n){if(i){var t=MsPortalFx.Helpers.Deferred();return t.resolve(n),t.promise()}return Q.resolve(n)}var i=n.features.isEnabled("jquerypromises",!1);t.resolve=r})(f||(f={}));u=f.resolve();e=(function(){function t(n,t,i){var u=this,f;this._loadedCacheEntry=ko.observable(null);this._isDisposed=!1;this._requestInProgress=ko.observable();this._dataSource=n;this._errorNotificationTarget=t;this._interceptNotFound=i&&i.interceptNotFound!==undefined?i.interceptNotFound:!0;r.ProxiedObservables.markNonSerializable(this);f=this._lifetime=t;this._isLoading=ko.computed(f,(function(){return!!u._requestInProgress()}));f.registerForDispose((function(){u._isDisposed=!0;u._cancelInProgressRequest();u._releaseCurrentContents()}))}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),t.prototype.fetch=function(t){var h=this,o,c,s=this._requestInProgress,l,a,e;if(this._isDisposed)return u;if(l=this._currentCacheEntryDisposer,a=function(){l&&l.dispose()},this._currentParams=t,this._cancelInProgressRequest(),this._currentParams===null||this._currentParams===undefined)return this._loadedCacheEntry(null),a(),u;this._currentCacheEntryDisposer=new n.TriggerableLifetimeManager;var v=this._dataSource.fetch(t,this._currentCacheEntryDisposer),y=new r.Promises.CancelationToken,f={cancelationToken:y,cancelablePromise:r.Promises.wrapWithCancelablePromise(v,y),externalPromise:null};return a(),s(f),e=(c=(o=v)===null||o===void 0?void 0:o._getStatusPromise)===null||c===void 0?void 0:c.call(o),e&&!e.isPending()?(s(null),this._loadedCacheEntry(e.isFulfilled()?e.valueOf():null)):f.cancelablePromise.then((function(n){h._loadedCacheEntry(n);s(null)}),(function(){s(null);h._loadedCacheEntry(null)})),f.externalPromise=f.cancelablePromise.then(i.noop),f.externalPromise.then(null,(function(n){h._handleFetchRejections(n)})),f.externalPromise},t.prototype._cancelInProgressRequest=function(){var n=this._requestInProgress;n()&&(n().cancelationToken.cancel(),n(null))},t.prototype._releaseCurrentContents=function(){this._currentCacheEntryDisposer&&(this._currentCacheEntryDisposer.dispose(),this._currentCacheEntryDisposer=null)},t.prototype._handleFetchRejections=function(n){if(n instanceof s.NotFoundDataError&&this._interceptNotFound!==!1){var t=n;t.handled=!0;typeof this._interceptNotFound=="function"?this._interceptNotFound(this._currentParams):this._errorNotificationTarget.notFound&&this._errorNotificationTarget.notFound()}},__decorate([__metadata("fx:diagnostics",[require,"ObjectView"]),i.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],t)})();t.ObjectView=e;o=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u._partialErrors=ko.observableArray(),ko.reactor(i,(function(){var n=u._loadedCacheEntry();u._partialErrors(n&&n.partialErrors()||[])})),u}return __extends(t,n),Object.defineProperty(t.prototype,"_refreshableDataSource",{get:function(){return this._dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){var n=this._requestInProgress,t,f,e;if(this._isDisposed||(t=this._currentCacheEntryDisposer,!t))return u;if(!n()){if(!this._loadedCacheEntry())return this.fetch(this._currentParams);f=new r.Promises.CancelationToken;n({cancelationToken:f,cancelablePromise:r.Promises.wrapWithCancelablePromise(this._refreshableDataSource.refresh(this._currentParams,t),f),externalPromise:null});e=function(){n(null)};n().cancelablePromise.then(e,e);n().externalPromise=n().cancelablePromise.then(i.noop)}return n().externalPromise},__decorate([__metadata("fx:diagnostics",[require,"DataView"]),i.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],t)})(e);t.DataView=o})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var r=MsPortalFx.Base,i=MsPortalFx.Data,u=(function(){function n(){r.ProxiedObservables.markNonSerializable(this);this._atomizationCache=new i.ObjectCache({serializeKey:function(n){return JSON.stringify([n.type,n.id])},supplyValue:function(){return null}})}return n.prototype.getEntity=function(n,t,i){var r={type:n,id:t},u;return this._atomizationCache.hasEntry(r)&&(u=this._atomizationCache.getValue(r,i)),u},n.prototype.addEntity=function(n,t,i,r){this._atomizationCache.insertValueIfNotPresent({type:n,id:t},i,r)},n.prototype.releaseEntities=function(){},n})(),f;t.RefCountingAtomizationContext=u,(function(t){function u(i){i=i||r;var u=t.atomizationContextCollection[i];return u||(u=n.Data.AtomizationContext.createInstance(),t.atomizationContextCollection[i]=u),u}function f(n){if(!n)return!1;var t=i.Metadata.getTypeMetadata(n);return!!(t&&t.hasGloballyUniqueId&&i.Metadata.typeHasId(n))}function e(){return new n.Data.RefCountingAtomizationContext}t.atomizationContextCollection={};var r="__default__";t.get=u;t.canAtomizeType=f;t.createInstance=e})(f=t.AtomizationContext||(t.AtomizationContext={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var u=MsPortalFx.Base,f=MsPortalFx.Data,e=0,o=0,c=new u.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.DataCache"),i="",s={loaderConflict:i,getSerialize:i,dataCacheProps:i,establishDataSet:i},r=n.getErrorMap(s),h=(function(){function n(n){var t=this,i,o;u.ProxiedObservables.markNonSerializable(this);this._cacheName=[n.cacheName,n.entityTypeName,"DataCache",++e].filter((function(n){return!!n})).join(":");n.loader?(this._loader=n.loader,(n.sourceUri||n.httpMethod)&&r.loaderConflict()):n.sourceUri||n.supplyData&&n.serializeParams?(this._loader=new f.DataCacheLoader2(n),i=n.httpMethod&&n.httpMethod.toUpperCase()!=="GET",i&&!n.serializeParams&&r.getSerialize()):r.dataCacheProps();o={supplyValue:function(n,i){var f=t._createUniqueDataSetName(),r=t._supplyValue(f,n,i),u=Q(r);return u!==r&&u.catch((function(){})),r._getStatusPromise=function(){return u},r},tryFindValueInRelatedCache:function(n,i){var u=t._tryFindDataInRelatedCache(n,i);if(u){var e=ko.toJS(u),r=t._createUniqueDataSetName(),o=t._establishDataSet(r,n,e,i),f=Q(o);return f.dataSetName=r,t._doesPoll()&&t._supplyValue(r,n,i),{value:f}}return null},serializeKey:function(n){return t._loader.serializeParams(n)},evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n){var i=function(){t._loader.disposeDataSet(n)};n.state&&n.state()!=="pending"||n.isFulfilled&&n.isFulfilled()||n.isRejected&&n.isRejected()?i():n.then(i,i)}};this._cacheByParams=new f.ObjectCache(o)}return n.prototype.fetch=function(n,t){var i=this._cacheByParams,r=i.getValue(n,t);return r.then(null,(function(){i.immediatelyEvictEntry(n)})),r},n.prototype.refresh=function(n,t){var r=this._cacheByParams.hasEntry(n),i=this.fetch(n,t);return r?this._loader.refreshDataSet(i):i},n.prototype.refreshAll=function(n){var t=this;this._forEachEntry((function(n,i){t._loader.refreshDataSet(i)}),n)},n.prototype.forceRemove=function(n){this._cacheByParams.immediatelyEvictEntry(n)},n.prototype.applyChanges=function(n,t){var i=this;this._forEachEntry((function(t,r,u){u&&n(t,u);var e=r.dataSetName,f=i._loader;f.isLoadingDataSet(e)&&f.refreshDataSet(r)}),t)},n.prototype.dispose=function(){this._cacheByParams.dispose()},n.prototype._doesPoll=function(){return this._loader._doesPoll()},n.prototype._findEntity=function(n,t){var r=this,i;return this._forEachEntry((function(u,f,e){if(e){var o=r._getDataFromDataSet(e);i=n(u,o,t)}}),(function(){return!i})),i},n.prototype.dump=function(n){var t=[];if(this._forEachEntry((function(n,i,r){t.push(ko.toJS({key:n,data:r?r.data:"<null dataSet>"}))})),n)return t;console.log(JSON.stringify(t,null,4))},n.prototype._tryFindDataInRelatedCache=function(){return null},n.prototype._forEachEntry=function(n,t){var i=this,r=MsPortalFx.memoize((function(n){return i._loader.getLoadedDataSet(n)}));this._cacheByParams.forEachEntry((function(i,u){(!t||t(i))&&n(i,u,r(u.dataSetName))}))},n.prototype._supplyValue=function(n,t,i){return this._loader.loadDataSetForParams(n,t,i)},n.prototype._establishDataSet=function(n,t,i,u){return this._loader.establishDataSet||r.establishDataSet(),this._loader.establishDataSet(n,t,i,u)},n.prototype._createUniqueDataSetName=function(){return this._cacheName+":"+ ++o},n})();t.DataCache=h})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var e=MsPortalFx,c=e.Base,o=e.Data,i=n.Rpc,l=n.Data,s,h;t.saveSerializedEditScopeEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.saveSerializedEditScope");t.loadSerializedEditScopeEndPoint=new i.FuncEndPointDefinition("FxImpl.Data.loadSerializedEditScope");t.onEditScopeDiscardedEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.onEditScopeDiscarded");t.updateEditScopeIsSavingStateEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.updateEditScopeIsSavingState");var r="",a={dataCachePolling:r,viewUnloaded:r,serializeParams:r,fetchPrereq:r,existingPrereq:r,newPrereq:r},u=n.getErrorMap(a),f;(function(n){n[n.LoadOriginalDataFailed=0]="LoadOriginalDataFailed";n[n.LoadEditsFailed=1]="LoadEditsFailed";n[n.ApplyEditsFailed=2]="ApplyEditsFailed"})(f=t.FetchEditScopeError||(t.FetchEditScopeError={}));s=(function(){function n(n){var r=this;n===void 0&&(n=i.client);this._caches=[];t.onEditScopeDiscardedEndPoint.register(n,["fx"],(function(n){r._caches.forEach((function(t){t.onEditScopeDiscarded(n)}))}))}return n.prototype.register=function(n){this._caches.push(n)},n.prototype.deregister=function(n){MsPortalFx.remove(this._caches,n)},n})();t.EditScopeDiscardedReceiver=s;t.editScopeDiscardedReceiver=new s;h=(function(){function r(n,i){var r=this,h,f;this._ltm=s.allLifetimes.createChildLifetime();this._editScopeEditsChangedSubs={};this._loadEdits=i&&i.loadEdits||s._remoteLoadEdits;this._saveEdits=i&&i.saveEdits||s._remoteSaveEditScope;this._updateEditScopeIsSavingState=i&&i.updateEditScopeIsSavingState||s._remoteUpdateEditScopeIsSavingState;h=this._options=e.clone(n);f=h.dataCache;f&&f._doesPoll()&&u.dataCachePolling();c.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new o.ObjectCache({supplyValue:function(n,t){var i=r._getEditScopeForKey(n,t),u=Q(i);return u!==i&&u.catch((function(){})),i._getStatusPromise=function(){return u},i},serializeKey:function(n){return r._serializeKey(n)},onEntryDisposed:function(n,t){var i=r._serializeKey(t),u=r._editScopeEditsChangedSubs[i];u&&(r._editScopeEditsChangedSubs[i]=null,u.dispose());n.then((function(n){n.dispose()}))}});t.editScopeDiscardedReceiver.register(this)}s=r;r.prototype.createView=function(n,t){return new o.EditScopeView(this,n,t||{})};r.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)};r.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,t)})))})),Q.all(t)};r.prototype.dispose=function(){var n=this._cacheByParams;n&&(n.dispose(),this._cacheByParams=null);this._ltm.dispose();t.editScopeDiscardedReceiver.deregister(this)};r.prototype.disposeAndDiscardEdits=function(n,t){var i=t.editScope();i||u.viewUnloaded();i.dispose();s._remoteSaveEdits(n,{edits:[]})};r.prototype.onEditScopeDiscarded=function(n){return this.forEachEditScope((function(t,i){t!==n||i.saving()||i.revertAll()}))};r._remoteSaveEditScope=function(n,t){s._remoteSaveEdits(n,t.getEdits())};r._remoteSaveEdits=function(n,r){t.saveSerializedEditScopeEndPoint.invoke(i.client,"fx",{editScopeId:n,edits:r})};r._remoteLoadEdits=function(r){return Q(t.loadSerializedEditScopeEndPoint.invoke(i.client,"fx",r)).catch((function(t){return n.QReject("Loading of EditScope edits from user settings service failed.",{innerErrors:t})}))};r._remoteUpdateEditScopeIsSavingState=function(n,r){t.updateEditScopeIsSavingStateEndPoint.invoke(i.client,"fx",{editScopeId:n,isSaving:r})};Object.defineProperty(r.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!1,configurable:!0});r.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,r,t,f;return i&&(r=this._options,t=r.serializeParams,t||(t=r.serializeKeyOrQuery,t||(f=typeof i,f==="number"||f==="string"?t=JSON.stringify:u.serializeParams())),e+=":"+t(i)),e};r.prototype._getEditScopeForKey=function(n,t){var r,i,f;if(!n.editScopeId)return Q.fcall((function(){return u.fetchPrereq()}));if(i=this._options,f=n.params,f!==undefined)if(i.supplyExistingData)r=function(){return Q(i.supplyExistingData(f,t))};else if(i.dataCache)r=function(){return MsPortalFx.Base.Promises.cancelOnDispose(t,(function(){return i.dataCache.createView(t)})).then((function(n){return n.fetch(f).then((function(){return n.data}))}))};else return Q.fcall((function(){return u.existingPrereq()}));else if(i.supplyNewData)r=function(){return Q(i.supplyNewData())};else if(i.entityTypeName)r=function(){return Q(o.Metadata.createEmptyObject(i.entityTypeName))};else return Q.fcall((function(){return u.newPrereq()}));return this._acquireEditScope(n,r,t,i.entityTypeName)};r.prototype._acquireEditScope=function(n,t,i,r){var u=this,s=this._ltm.createChildLifetime(),e,f,o;return i.registerForDispose(s),MsPortalFx.Base.Promises.cancelOnDispose(s,(function(){return t()})).then((function(t){var h,s=u._options;if(s.refreshEditScope?h=function(t){var r=i.createChildLifetime();return MsPortalFx.Base.Promises.cancelOnDispose(r,(function(){return s.refreshEditScope(n.params,r,t)})).finally((function(){r.dispose()}))}:s.dataCache&&(h=function(){var t=i.createChildLifetime();return MsPortalFx.Base.Promises.cancelOnDispose(t,(function(){return s.dataCache.createView(t)})).then((function(t){return t.fetch(n.params).then((function(){return t.data}))})).finally((function(){t.dispose()}))}),o=i.createChildLifetime(),e=n.editScopeId,f=l.createEditScope(o,t,{kind:s.kind,typeName:r,refresh:h,save:s.saveEditScopeChanges&&function(t,i,r){u._updateEditScopeIsSavingState(e,!0);var f=o.createChildLifetime();return u._cacheByParams.getValue(n,f),t.saving.subscribe(f,(function(n){n||(f.dispose(),u._updateEditScopeIsSavingState(e,!1))})),s.saveEditScopeChanges(n.params,t,i,f,r)}}),s.onEditScopeCreated)s.onEditScopeCreated(i,f);return u._loadAndApplyEdits(f,e)})).then((function(){var i=u._serializeKey(n),t=u._editScopeEditsChangedSubs[i];return t&&t.dispose(),t=u._editScopeEditsChangedSubs[i]=s.createChildLifetime(),f.editsChanged.subscribe(t,(function(){u._saveEdits(e,f)})),f})).catch((function(n){return o&&o.dispose(),Q.reject(n)}))};r.prototype._loadAndApplyEdits=function(t,i){var r=this;return Q(this._loadEdits(i)).then((function(i){if(!r._isDisposed)return i&&!t.applyEdits(i)?n.QReject(f[f.ApplyEditsFailed]+": Application of EditScope edits from user settings service failed.",{data:i}):void 0})).catch((function(t){return n.QReject(""+f[f.LoadEditsFailed],{innerErrors:t})}))};var s;return r.allLifetimes=new n.TriggerableLifetimeManager,s=__decorate([__metadata("fx:diagnostics",[require,"1"]),MsPortalFx.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],r)})();t.EditScopeCache=h})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var f=MsPortalFx,o=f.Base,c=n.Rpc,e=f.Data,i;(function(t){function r(){if(i){var n=MsPortalFx.Helpers.Deferred();return{promise:n.promise(),resolve:function(t){n.resolve(t)},reject:function(t){n.reject(t)}}}return Q.defer()}function u(n){if(i){var t=MsPortalFx.Helpers.Deferred();return t.resolve(n),t.promise()}return Q.resolve(n)}var i=n.features.isEnabled("jquerypromises",!1);t.defer=r;t.resolve=u})(i||(i={}));var s=new o.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),h=n.Data.editScopeDiscardedReceiver,r="",l={noEditScope:r,missingSerializeParams:r,missingSupplyExistingData:r,fetchNewPrereq:r,fetchExistingPrereq:r},u=n.getErrorMap(l),a=(function(){function r(t,i){var r=this;this._ltm=new n.TriggerableLifetimeManager;this._editScopeEditsChangedSubs={};this._loadEdits=i&&i.loadEdits||l._remoteLoadEdits;this._saveEdits=i&&i.saveEdits||l._remoteSaveEditScope;this._options=f.clone(t);o.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new e.ObjectCache({supplyValue:function(n,t){var i=r._getEditScopeForKey(n,t),u=Q(i);return u!==i&&u.catch((function(){})),i._getStatusPromise=function(){return u},i},serializeKey:function(n){return r._serializeKey(n)},onEntryDisposed:function(n,t){var i=r._serializeKey(t),u=r._editScopeEditsChangedSubs[i];u&&(r._editScopeEditsChangedSubs[i]=null,u.dispose());n.then((function(n){n.dispose()}))}});h.register(this)}l=r;r.prototype.createView=function(n,t){return new e.EditScopeView(this,n,t||{})};r.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)};r.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,t)})))})),Q.all(t)};r.prototype.dispose=function(){var n=this._cacheByParams;n&&(n.dispose(),this._cacheByParams=null);this._ltm.dispose();h.deregister(this)};r.prototype.disposeAndDiscardEdits=function(n,t){var i=t.editScope();i||u.noEditScope();i.dispose();l._remoteSaveEdits(n,{edits:[]})};r.prototype.onEditScopeDiscarded=function(n){return this._revertEditScope(n)};r._remoteSaveEditScope=function(n,t){l._remoteSaveEdits(n,t.getEdits())};r._remoteSaveEdits=function(n,i){t.saveSerializedEditScopeEndPoint.invoke(l._rpcClient,"fx",{editScopeId:n,edits:i})};r._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.invoke(l._rpcClient,"fx",n).then(null,(function(n){s.error("Loading of EditScope edits from user settings service failed.");throw n;}))};Object.defineProperty(r.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!1,configurable:!0});r.prototype._revertEditScope=function(n){return this.forEachEditScope((function(t,i){t===n&&i.revertAll()}))};r.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,r,t,f;return i&&(r=this._options,t=r.serializeParams,t||(t=r.serializeKeyOrQuery,t||(f=typeof i,f==="number"||f==="string"?t=JSON.stringify:u.missingSerializeParams())),e+=":"+t(i)),e};r.prototype._getEditScopeForKey=function(n,t){var o,r=this._options,f=n.params;return n.editScopeId&&(f||f===null)?(r.supplyExistingData||u.missingSupplyExistingData(),o=function(){return r.supplyExistingData(f,t)}):n.editScopeId&&f===undefined&&r.supplyNewData?o=function(){return i.resolve(r.supplyNewData())}:n.editScopeId&&!f&&r.entityTypeName?o=function(){return i.resolve(e.Metadata.createEmptyObject(r.entityTypeName))}:r.supplyNewData||r.entityTypeName?u.fetchExistingPrereq():u.fetchNewPrereq(),this._acquireEditScope(n,o,t,r.entityTypeName)};r.prototype._acquireEditScope=function(r,u,f,e){var o=this,s,h=i.defer(),c=h.promise,l=r.editScopeId;return u().then((function(t){var i,u;if(!o._isDisposed){if(i=o._options,s=new n.TriggerableLifetimeManager,u=n.Data.createEditScope(s,t,{kind:i.kind,typeName:e,refresh:i.refreshEditScope&&function(n){var t=f.createChildLifetime();return i.refreshEditScope(r.params,t,n).finally((function(){t.dispose()}))},save:i.saveEditScopeChanges&&function(n,t,u){var f=s.createChildLifetime();return i.saveEditScopeChanges(r.params,n,t,f,u).finally((function(){f.dispose()}))}}),i.onEditScopeCreated)i.onEditScopeCreated(f,u);o._loadAndApplyEdits(u,l).then((function(){if(!o._isDisposed){var t=o._serializeKey(r),n=o._editScopeEditsChangedSubs[t];n&&n.dispose();n=o._editScopeEditsChangedSubs[t]=o._ltm.createChildLifetime();u.editsChanged.subscribe(n,(function(){o._saveEdits(l,u)}));h.resolve(u)}}),(function(n){h.reject(n)}))}}),(function(){h.reject(t.FetchEditScopeError.LoadOriginalDataFailed)})),c.catch((function(){s&&s.dispose()})),c};r.prototype._loadAndApplyEdits=function(n,r){var u=this;return this._loadEdits(r).then((function(r){if(!u._isDisposed){var f=i.defer();return r?n.applyEdits(r)?f.resolve():(s.warning("Application of EditScope edits from user settings service failed."),f.reject(t.FetchEditScopeError.ApplyEditsFailed)):f.resolve(),f.promise}}),(function(){return t.FetchEditScopeError.LoadEditsFailed}))};var l;return r._rpcClient=c.client,l=__decorate([__metadata("fx:diagnostics",[require,"1"]),MsPortalFx.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],r)})();t.EditScopeCacheOld=a})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function s(n){return(n.evictionDelay&&n.extendEntryLifetimes&&r.delayAndLifetime(),n.extendEntryLifetimes)?e:(n.evictionDelay>6e4&&r.maxEvictionDelay(6e4),n.evictionDelay)}var u=MsPortalFx.forEachKey,e=105e3,i="",o={delayAndLifetime:i,maxEvictionDelay:i,nullKey:i,nullCreateCallback:i,cacheDisposed:i},r=n.getErrorMap(o),h=(function(){function n(n){this._isDisposed=!1;this._evictionDelayMilliseconds=null;this._evictionTimeoutHandlesByKey={};this._entriesByKey={};this._entriesByReferrerThenKey={};MsPortalFx.Base.ProxiedObservables.markNonSerializable(this);n&&(n.onEntryDisposed&&(this._onDisposeEntryCallback=function(t,i){n.onEntryDisposed(i,t)}),this._evictionDelayMilliseconds=s(n))}return n.prototype.getEntry=function(n,t,i){n||r.nullKey();i||r.nullCreateCallback();this._isDisposed&&r.cacheDisposed();var u=this._entriesByKey[n];return u||(u=new f(n,i()),t&&(this._entriesByKey[n]=u)),t?(this._ensureReferenceExists(u,t),this._cancelAnyDelayedEviction(u.key)):this._evictionTimeoutHandlesByKey[u.key]||this._immediateEvictEntryIfNoReferences(u),u.value},n.prototype.hasEntry=function(n){return n in this._entriesByKey},n.prototype.dissociateEntry=function(n,t){var r=this._entriesByKey[n],i;r&&(r.dissociate(t),i=this._entriesByReferrerThenKey[t],i&&(delete i[n],MsPortalFx.isEmptyObject(i)&&delete this._entriesByReferrerThenKey[t]),this._delayedEvictEntryIfNoReferences(r))},n.prototype.immediatelyEvictEntry=function(n){var r=this,t=this._entriesByKey[n],i;t&&(i=t.dissociateFromAllReferrers(),i.forEach((function(t){var i=r._entriesByReferrerThenKey[t];i&&delete i[n]})),this._immediateEvictEntryIfNoReferences(t))},n.prototype.disposeReferrer=function(n){var t=this;u(this._entriesByReferrerThenKey[n],(function(i){t.dissociateEntry(i,n)}))},n.prototype.forEachEntry=function(n){u(this._entriesByKey,(function(t,i){n(t,i.value)}))},n.prototype.dispose=function(){var t=this,n;this._isDisposed=!0;n=this._onDisposeEntryCallback;n&&this.forEachEntry(n);this._entriesByKey={};this._entriesByReferrerThenKey={};u(this._evictionTimeoutHandlesByKey,(function(n){t._cancelAnyDelayedEviction(n)}))},n.prototype._ensureReferenceExists=function(n,t){var i=this._entriesByReferrerThenKey[t],r;i||(i={},this._entriesByReferrerThenKey[t]=i);r=n.key;r in i||(i[r]=n,n.associate(t))},n.prototype._cancelAnyDelayedEviction=function(n){var t=this._evictionTimeoutHandlesByKey[n];t&&(delete this._evictionTimeoutHandlesByKey[n],clearTimeout(t))},n.prototype._delayedEvictEntryIfNoReferences=function(n){var i=this,t;n.hasNoReferences()&&(t=n.key,this._cancelAnyDelayedEviction(t),this._evictionDelayMilliseconds===null||this._evictionDelayMilliseconds===undefined?this._immediateEvictEntryIfNoReferences(n):this._evictionTimeoutHandlesByKey[t]=setTimeout((function(){i._immediateEvictEntryIfNoReferences(n)}),this._evictionDelayMilliseconds))},n.prototype._immediateEvictEntryIfNoReferences=function(n){var t,r,i;n.hasNoReferences()&&(t=n.key,r=n.value,delete this._entriesByKey[t],i=this._onDisposeEntryCallback,i&&i(t,r),this._cancelAnyDelayedEviction(t))},n})(),f;t.RefCountCache=h;f=(function(){function n(n,t){this._referrerIds=new Map;this.key=n;this.value=t}return n.prototype.hasNoReferences=function(){return!this._referrerIds.size},n.prototype.associate=function(n){this._referrerIds.set(n,n)},n.prototype.dissociate=function(n){this._referrerIds.delete(n)},n.prototype.dissociateFromAllReferrers=function(){var n=[],t=this._referrerIds;return t.forEach((function(t,i){return n.push(i)})),t.clear(),n},n})()})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){function i(n,i){var r=n[i];return t(n,i)?r():r}function t(n,t){var i=n[t];return ko.isObservable(i)&&!MsPortalFx.isObservableArray(i)}function r(n){if(!MsPortalFx.isArrayOrObservableArray(n))throw new Error("Only an array or an observable array is expected here.");return ko.unwrap(n)}n.unwrapObjectPropertyValue=i;n.isObservableObjectPropertyValue=t;n.unwrapArrayOrObservableArray=r})(t=n.Shared||(n.Shared={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var i=MsPortalFx,t=i.Data.Metadata,r=i.isArrayOrObservableArray,u=i.isObject,f=(function(){function i(n,t){var i=this,r=t,u=this._callbacks={};["visitEntityArray","visitNonEntityArray","visitArray","visitArrayItem","visitEntity","visitNonEntityObject","visitObject","shouldVisitObjectProperty","visitEntityTypedObjectPropertyValue","visitNonEntityTypedObjectPropertyValue","visitObjectPropertyValue","visitDate","visitScalar","visitFunction",].forEach((function(n){u[n]=r[n]||function(){return i[n].apply(i,arguments)}}))}return i.prototype.visit=function(n,t,i){return this._visit(n,t,i)},i.prototype.visitEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},i.prototype.visitNonEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},i.prototype.visitArray=function(t,i,r){for(var e=this._callbacks.visitArrayItem,f=n.Shared.unwrapArrayOrObservableArray(t),u=0,o=f.length;u<o;u++)e(f[u],u,i,r);return},i.prototype.visitArrayItem=function(n,t,i,r){if(ko.isObservable(n))throw new Error("Data can't include arrays whose items are observables.  Only scalar- and object-typed array items are supported.");return this._visit(n,i,r)},i.prototype.visitEntity=function(n,t,i){return this._callbacks.visitObject(n,t,i)},i.prototype.visitNonEntityObject=function(n,t,i){return this._callbacks.visitObject(n,t,i)},i.prototype.visitObject=function(n,t,i){for(var u=this.getObjectPropertiesToVisit(n,t),r=0,f=u.length;r<f;r++)this.visitObjectPropertyValueDispatch(u[r],n,t,i);return},i.prototype.shouldVisitObjectProperty=function(n,t){return typeof ko.unwrap(t[n])!="function"},i.prototype.visitEntityTypedObjectPropertyValue=function(t,i,u,f){var e=n.Shared.unwrapObjectPropertyValue(i,t),o=r(e)?this._callbacks.visitEntityArray:e?this._callbacks.visitEntity:undefined;return o&&o(e,u,f)},i.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitObjectPropertyValue=function(t,i,r,u){return this._visit(n.Shared.unwrapObjectPropertyValue(i,t),r,u)},i.prototype.visitDate=function(){return},i.prototype.visitScalar=function(){return},i.prototype.visitFunction=function(){return},i.prototype.getObjectPropertiesToVisit=function(n,t){var i=this._callbacks.shouldVisitObjectProperty;return Object.keys(n).filter((function(r){return i(r,n,t)}))},i.prototype.visitObjectPropertyValueDispatch=function(n,i,r,u){var f=t.getPropertyTypeMetadata(r,n),o=t.typeIsEntityType(f),e=this._callbacks,s=o?e.visitEntityTypedObjectPropertyValue:e.visitNonEntityTypedObjectPropertyValue;return s.call(null,n,i,f,u)},i.prototype._visit=function(n,t,i){var f,e,o;return(r(n)?f=this._visitArrayDispatch:u(n)&&(f=this._visitObjectDispatch),f)?f.call(this,n,t,i):(e=this._callbacks,o=e.visitScalar,n instanceof Date?o=e.visitDate:typeof n=="function"&&(o=e.visitFunction),o.call(null,n,i))},i.prototype._visitArrayDispatch=function(n,i,r){var u=this._callbacks,f=u.visitNonEntityArray;return t.typeIsEntityType(i)&&(f=u.visitEntityArray),f.call(null,n,i,r)},i.prototype._visitObjectDispatch=function(n,i,r){var u=this._callbacks,f=u.visitNonEntityObject;return t.typeIsEntityType(i)&&(f=u.visitEntity),f.call(null,n,i,r)},i})();n.Visitor=f})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t=MsPortalFx,i=t.isObservableArray,r=(function(t){function r(n,i){return t.call(this,n,i)||this}return __extends(r,t),r.prototype.clone=function(n,t){return this._visit(n,t)},r.prototype.visitArray=function(t,r){var f=this,u=n.Shared.unwrapArrayOrObservableArray(t).map((function(n,t){return f._callbacks.visitArrayItem(n,t,r)}));return i(t)&&(u=t.splice?ko.observableArray(u):ko.observable(u)),u},r.prototype.visitObject=function(n,t){var r=this,i={};return this.getObjectPropertiesToVisit(n,t).forEach((function(u){i[u]=r.visitObjectPropertyValueDispatch(u,n,t)})),i},r.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i){return this._callbacks.visitObjectPropertyValue(n,t,i)},r.prototype.visitObjectPropertyValue=function(t,i,r){var u=i[t],f=n.Shared.isObservableObjectPropertyValue(i,t),e=this._visit(f?u():u,r);return f?ko.observable(e):e},r.prototype.visitDate=function(n){return new Date(n.getTime())},r.prototype.visitScalar=function(n){return n},r.prototype.visitFunction=function(){throw new Error("Cloning functions is not supported.");},r})(n.Visitor);n.CloneVisitor=r})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var u=MsPortalFx.Data.Metadata,c=MsPortalFx.areEqual,f=MsPortalFx.isArrayOrObservableArray,e=MsPortalFx.isObject,o=MsPortalFx.isObservableArray,s=ko.utils,h=s.compareArrays,i="",l={cannotMerge:i,handleAddAndDeleteRequired:i,dataNotTypeCompatible:i,missingId:i},r=n.getErrorMap(l),a=(function(n){function i(t,i){var r=n.call(this,t,i)||this;return r._clone=t.clone,r._onDetach=t.onDetach,r}return __extends(i,n),i.prototype.merge=function(t,i,u){var f=n.prototype._visit.call(this,t,u,i);f||r.cannotMerge()},i.prototype.visitObject=function(n,t,i){var r=this;return this.getObjectPropertiesToVisit(n,t).every((function(u){return r.visitObjectPropertyValueDispatch(u,n,t,i)}))},i.prototype.visitObjectPropertyValueDispatch=function(i,f,e,s){var h=n.prototype.visitObjectPropertyValueDispatch.call(this,i,f,e,s),a;if(!h){var c=s[i],v=t.Shared.unwrapObjectPropertyValue(f,i),l=t.Shared.unwrapObjectPropertyValue(s,i);ko.isObservable(c)&&o(v)!==o(l)&&r.dataNotTypeCompatible();ko.isObservable(c)?(h=!0,a=u.getPropertyTypeMetadata(e,i),l&&this._onDetach(l,a),c(this._clone(v,a))):h=!1}return h},i.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitObjectPropertyValue=function(n,i,r,u){var s,o=t.Shared.unwrapObjectPropertyValue(i,n),h=t.Shared.unwrapObjectPropertyValue(u,n);return f(o)?f(h)&&(s=this._visitArrayDispatch(o,r,h)):e(o)?e(h)&&(s=this._visitObjectDispatch(o,r,h)):typeof o=="function"?s=!0:c(o,h)&&(s=!0),s},i.prototype.visitArray=function(n,t,i){return this._mergeArray(n,t,i)},i.prototype._mergeArray=function(n,i,f,e){var c=this,a,v,o,w,nt;e=e||{};!!e.handleAdd!=!!e.handleDelete&&r.handleAddAndDeleteRequired();e.getEdits||(a=void 0,v=void 0,u.typeHasId(i)?(o=function(n){var t=u.getItemId(n,i);return t===undefined&&r.missingId(),t},a=function(n,t){var r=n.map(o),u=t.map(o),i=h(u,r);return i.forEach((function(i){i.value=MsPortalFx.find(i.status==="added"?n:t,(function(n){return o(n)===i.value}))})),i},v=function(n,t){var i=o(n);return MsPortalFx.find(t,(function(n){return o(n)===i}))}):(a=function(n,t){return h(t,n)},v=null),MsPortalFx.extend(e,{getEdits:a,getSourceItem:v}));var k=t.Shared.unwrapArrayOrObservableArray(n),tt=t.Shared.unwrapArrayOrObservableArray(f),y=ko.isObservable(f),b=y&&f,l=b&&b(),p,it=function(n){var t=n.index,u,f;switch(n.status){case"added":if(u=c._clone(n.value,i),e.handleAdd)e.handleAdd(u,t);else if(y)p=!0,l.splice(t,0,u);else return!1;break;case"deleted":if(f=n.value,e.handleDelete)e.handleDelete(f,t);else if(y)c._onDetach(f,i),p=!0,l.splice(t,1);else return!1;break;case"retained":if(e.getSourceItem){var r=n.value,o=e.getSourceItem(r,k),s=c._callbacks.visitObject(o,i,r);if(!s)if(y)c._onDetach(r,i),p=!0,l.splice(l.indexOf(r),1,c._clone(o,i));else return!1}}return!0},d=s.adjustArrayEdits(e.getEdits(k,tt)),g=!0;for(w=0;w<d.length;w++)if(nt=d[w],!it(nt)){g=!1;break}return p&&b(l),g},i})(t.Visitor);t.MergeVisitor=a})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i,r){var u=n.call(this,r)||this;return u._currentSkipTakeParams=ko.observable(null),u._allItems=i,u.items=ko.computed(t,(function(){var n,t=u._allItems;return(n=u._currentSkipTakeParams())&&t()?t().slice(n.skip,n.take?n.skip+n.take:undefined):[]})),u.metadata=ko.computed(t,(function(){return{totalItemCount:u._allItems().length}})),u}return __extends(t,n),t.prototype.loadBySkipTake=function(n,t){return this._currentSkipTakeParams({skip:n||0,take:t}),Q(!0)},t})(n.DataNavigatorBase);n.LocalDataNavigator=t})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=(function(t){function i(n,i,r,u,f){var e=t.call(this,f)||this;if(e._continuationTokenFilter=null,e._continuationTokenSort=[],e._continuationTokenResetRequested=!0,e._queryParams=null,!n)throw new Error("Argument cannot be null: lifetime");return e.items=i,e.metadata=r,e._options=u,e._options.loadBySkipTake||(e.loadBySkipTake=null),e._options.loadByContinuationToken||(e.loadByContinuationToken=null),e}return __extends(i,t),i.prototype.loadBySkipTake=function(n,t,i,r){if(!this._options.loadBySkipTake)throw new Error("This data navigator does not support skip/take.");return this._options.loadBySkipTake(this.metadata(),this._getClonedQuery(),n,t,i,r)},i.prototype.loadByContinuationToken=function(){if(!this._options.loadByContinuationToken)throw new Error("This data navigator does not support continuation tokens.");var n=this._continuationTokenResetRequested;return this._continuationTokenResetRequested=!1,this._options.loadByContinuationToken(this.metadata(),this._getClonedQuery(),n,this._continuationTokenFilter,this._continuationTokenSort)},i.prototype.resetLoadByContinuationToken=function(n,t){this._continuationTokenResetRequested=!0;this._continuationTokenFilter=n;this._continuationTokenSort=t},i.prototype.setQuery=function(n){return this._queryParams=n,this.resetNavigation()},i.prototype._getClonedQuery=function(){return n.clone(this._queryParams,!0)},i})(t.DataNavigatorBase);t.RemoteDataNavigator=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){function r(i,u,f){Array.isArray(i)?i.forEach((function(n){r(n,u,f)})):n.isObject(i)&&Object.getOwnPropertyNames(i).forEach((function(n){var e=t.Metadata.getPropertyMetadata(u,n),o=e&&e.itemType;f(i,n,e)&&o&&r(i[n],o,f)}))}function u(n){return n.substr(0,6)==="/Date("?new Date(parseInt(n.substr(6),10)):new Date(n)}i.DataContractJsonSerializer={processResult:function(n,t,i,f,e){return e&&r(t.data,e,(function(n,t,i){var f=!0,r;return i&&(i.isDate||i.itemType==="System.DateTime")&&(r=n[t],typeof r=="string"&&(n[t]=u(r)),f=!1),f})),!0}}})(i=t.DataProvider||(t.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){function t(n){var r=n.property,u=n.operator,t=n.value,i;typeof t=="string"?t="'"+t+"'":t&&t instanceof Date&&(t="datetime'"+t.toISOString()+"'");switch(u){case"<":i=r+" lt "+t;break;case"<=":i=r+" le "+t;break;case"==":i=r+" eq "+t;break;case"!=":i=r+" ne "+t;break;case">=":i=r+" ge "+t;break;case">":i=r+" gt "+t;break;case"StartsWith":i="startswith("+r+","+t+") eq true";break;case"EndsWith":i="endswith("+r+","+t+") eq true";break;case"Contains":i="substringof("+t+","+r+") eq true";break;default:throw new Error("The operator '"+u+"' is not supported.");}return i}function i(n){return n.descending?n.property+" desc":n.property}n.OData={shapeQuery:function(n){var u={},e=n.filter,f,r;return e&&e.length&&(u.$filter=e.map(t).join(" and ")),f=n.sort,f&&f.length&&(u.$orderby=f.map(i).join()),r=n.paging,r&&r.skip&&(u.$skip=r.skip),r&&r.take&&(u.$top=r.take),n.includeTotalCount&&(u.$inlinecount="allpages"),u}}})(t=n.DataProvider||(n.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function ft(n,t){w.data(n,b,t)}function a(n){return r(n)||h(n)?w.data(n,b):null}function et(n){w.data(n,b,undefined)}function c(n){var t=ko.unwrap(n);return r(t)?n:t}function k(n,t){var i=ko.unwrap(n[t]);return r(i)?n[t]:i}function vt(){return Date.now()}function yt(n,t){return n===t}function d(n,i,r){var u=a(n);return u?r===1&&u.editKind===t.EditKind.Add?!1:!i||u.unlockedAt&&i>=u.unlockedAt:!0}function g(n,t){return t&&t.indexOf?t.indexOf(n):-1}function ot(n,t,i,r){ko.isObservable(t)&&v(n,r,(function(){t.valueWillMutate()}));var u=ko.unwrap(t);u.splice.apply(u,[0,u.length].concat(i));ko.isObservable(t)&&v(n,r,(function(){t.valueHasMutated()}))}function pt(n,t,i){for(var u,c=n.length,s,f,h,o,r=i-1;r>=0;r--)if(u=g(n[r],t),u>=0){s=u+1;f=i-r;break}for(r=i+1;r<c;r++)if(u=g(n[r],t),u>=0){h=u;o=r-i;break}return e(f)&&e(o)?t.length:(f||1e5)<(o||1e5)?s:h}function wt(n,t,r,u){for(var s,f,h={},c=[],o=0,l=t.length;o<l;o++)s=t[o],f=i.getItemId(s,r),e(f)?p(n,u):(h[f]=s,c.push(f));return{index:h,ids:c}}function nt(n,t,i){var u=ko.unwrap(n),f,e,s,o;if(!rt(u)){if(f=!1,i++,r(u)){for(e=0,s=u.length;e<s;e++)if(f=t(k(u,e)),f||nt(k(u,e),t,i),f)break}else if(h(u)&&(i===1&&(f=t(u)),!f))for(o in u)if(!o.match(/^jQuery\d+$/)&&(f=nt(k(u,o),t,i),f))break;return f}}function tt(n,t,i,u,f,e){var o=!0,s=ko.unwrap(i);return r(s)?st(n,t,i,u,f,e):h(s)?l(n,t,i,u,f,e):o=!1,o}function st(n,t,r,u,f,e){var o=i.getArrayItemType(r)||u,s=i.typeHasId(o);f.preserveNewItemsOrdering?kt(n,t,r,o,s,f,e):dt(n,t,r,o,s,f,e)}function kt(n,t,r,u,f,o,s){for(var k=ko.unwrap(r),st=k.length,w,g,a=ko.unwrap(t),h,tt=a.length,b,ut,ht=f&&a.map((function(t){var r=i.getItemId(ko.unwrap(t),u);return e(r)&&p(n,o),r})),ct=o.preventItemRemoval,lt=o.fetchStart,it,rt=[],nt,ft=a.slice(0),et,v=0;v<st;v++){if(w=k[v],g=undefined,it=!1,f&&tt>0)for(g=i.getItemId(ko.unwrap(w),u),e(g)&&p(n,o),h=0;h<tt;h++)b=a[h],ut=ht[h],yt(g,ut)&&(l(n,b,w,u,o,s),a.splice(h,1,w),ft[h]=null,it=!0);it||!ct&&d(c(w),lt,1)||rt.push(v)}for(h=0;h<tt;h++)b=ft[h],b&&(a[h]=y(n,b,u,o,s));for(et=rt.length,nt=0;nt<et;nt++)v=rt[nt],w=k[v],h=pt(k,a,v),a.splice(h,0,w);ot(n,r,a,o)}function dt(n,t,r,u,f,o,s){for(var nt=ko.unwrap(r),w=nt.slice(0),b,k,g=ko.unwrap(t),v,h,rt=f&&wt(n,g,u,o),ut,st=o.preventItemRemoval,ht=o.fetchStart,tt=[],ft={},et=0,it=!1,a=nt.length-1;a>=0;a--)b=nt[a],h=null,f&&(k=i.getItemId(ko.unwrap(b),u),e(k)&&p(n,o),h=rt.index[k]),h?(l(n,h,b,u,o,s),ft[k]=!0,et++):!st&&d(c(b),ht,1)&&(w.splice(a,1),it=!0);if(et!==g.length){for(v=0,ut=g.length;v<ut;v++)h=g[v],f&&ft.hasOwnProperty(rt.ids[v])||tt.push(y(n,h,u,o,s));tt.length>0&&(w.push.apply(w,tt),it=!0)}it&&ot(n,r,w,o)}function l(n,t,u,e,s,a){var y,p,w;if(d(c(u),s.fetchStart,0)){et(c(u));y=ko.unwrap(u);p=function(u){if(t.hasOwnProperty(u)){var w=ko.unwrap(y[u]),c=ko.unwrap(t[u]),b=i.getPropertyType(e,u),p=ht(n,u);if(c===null)w!==null&&(ko.isObservable(y[u])?v(p,s,(function(){y[u](null)})):f.observableChangeFailed(s.dataSetName,p));else if(r(c))r(w)?st(p,c,y[u],b||null,s,a):o(p,y,u,c,b,s,a);else if(h(c))rt(w)?o(p,y,u,c,b,s,a):w instanceof Date?(w>c||w<c)&&o(p,y,u,c,b,s,a):l(p,c,w,b||null,s,a);else{if(typeof c=="function")return"continue";o(p,y,u,c,b,s,a)}}};for(w in t)p(w)}}function o(n,t,i,r,u,f,e){var o=y(n,r,u,f,e),s;t[i]&&ko.isObservable(t[i])?v(n,f,(function(){t[i](ko.unwrap(o))})):(s=ko.isObservable(o)?o:ko.observable(o),t[i]=s)}function v(t,i,r){try{r()}catch(u){f.mergeSubscriberRaisedException(i.dataSetName,t,n.getLogFriendlyMessage(u))}}function y(n,t,r,u,f){var e=it(n,t,r,u,f);return i.decorateWithType(e,r),e}function it(n,t,i,u,f){return r(ko.unwrap(t))?ko.observableArray(ko.unwrap(t).map((function(t){return it(n,t,i,u,f)}))):h(t)?gt(n,t,i,u,f):t}function gt(n,t,r,u,f){var e,a=f&&f.lifetime&&f._atomizationContext&&FxImpl.Data.AtomizationContext.canAtomizeType(r),c,s,o,h;if(a&&(c=i.getItemId(t,r),s=f._atomizationContext.getEntity(r,c,f.lifetime),s&&(l(n,t,s,r,u,f),e=s)),!e){e={};for(o in t)t.hasOwnProperty(o)&&(h=it(ht(n,o),t[o],i.getPropertyType(r,o),u,f),e[o]=ko.isObservable(h)?h:ko.observable(h));a&&f._atomizationContext.addEntity(r,c,e,f.lifetime)}return e}function ht(n,t){return n&&n+"/"+t}function p(n,t){f.missingId(t.dataSetName,n)}var ct=FxImpl.Data,lt=ct.AtomizationContext,s=n,i=s.Data.Metadata,w=s.Base.ProxiedObservables,e=s.isUndefined,h=s.isObject,rt=s.isNullOrUndefined,ni=new n.Base.Diagnostics.Log("MsPortalFx/Data/Data.DataSet"),r=Array.isArray,b="aux-lockState",ut=".",u="",at={missingId:u,incorrectOptions:u,invalidEditKind:u,multipleIds:u,invalidMergeTarget:u,addToNonArray:u,removeFromNonArray:u,noObservableToReceiveMergeChange:u,mergeSubscriberRaisedException:u,observableChangeFailed:u},f=FxImpl.getErrorMap(at),bt=(function(){function u(t,i,r){this._data=null;this._navigationMetadata=ko.observable(null);this._partialErrors=ko.observableArray();n.Base.ProxiedObservables.markNonSerializable(this);this._type=t||null;r&&!i&&f.incorrectOptions();this._lifetime=i;this._atomizationContext=r&&lt.get(r.atomizationContextId)}s=u;Object.defineProperty(u.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0});Object.defineProperty(u.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!1,configurable:!0});Object.defineProperty(u.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0});Object.defineProperty(u.prototype,"navigationMetadata",{get:function(){return this._navigationMetadata},enumerable:!1,configurable:!0});Object.defineProperty(u.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!1,configurable:!0});u.lockItem=function(n,i){t.EditKind[i]||f.invalidEditKind();ft(n,{editKind:i})};u.hasUnmergedClientChanges=function(n){return nt(n,(function(n){var t=a(n);return!!(t&&!!t.unlockedAt)}),0)};u.unlockItem=function(n,t){if(t=arguments.length===1?!0:t,t){var i=a(n);i&&(i.unlockedAt=vt())}else et(n)};u.isLockedItem=function(n){var t=a(n);return!!(t&&!t.unlockedAt)};u.getIdPropertyNames=function(n){n instanceof s&&(n=n.data);var t=i.getArrayItemType(n);return t&&i.getIdPropertyNames(t&&i.getTypeMetadata(t))};u.getIdPropertyName=function(n){var t=this.getIdPropertyNames(n),i=null;return t&&(t.length>1&&f.multipleIds(),i=t[0]||null),i};u.mergeWithoutAtomization=function(n,t,r){r=r||{};var u=r.type||i.getArrayItemType(t);tt(null,n,t,u,r,null)||f.invalidMergeTarget()};u.prototype.addItems=function(n,u,o,s,h){var v=this,l,a;o=o||{};h?l=o.type||i.getArrayItemType(h):(h=this.data,l=this.type);r(ko.unwrap(h))||f.addToNonArray();s=e(s)?!0:s;a=u.map((function(n){var i=y(null,n,l,o,v);return s&&ft(c(i),{editKind:t.EditKind.Add}),i}));h.splice.apply(h,[n,0].concat(a))};u.prototype.removeItems=function(n,t,u,e){e?u=u||i.getArrayItemType(e):(e=this.data,u=this.type);r(ko.unwrap(e))||f.removeFromNonArray();var o=e.splice(n,t);this._atomizationContext&&this._atomizationContext.releaseEntities(u,o,this.lifetime)};u.prototype.removeItem=function(n,t,i){i||(i=this.data);var r=g(n,ko.unwrap(i));r>=0&&this.removeItems(r,1,t,i)};u.prototype.setProperty=function(n,t,i,r){i=i||{};var u;r?u=i.type:(r=this.data,u=this.type);tt(null,t,r[n],u,i,this)||o(null,r,n,t,u,i,this)};u.prototype.merge=function(n,t){t=t||{};tt(ut,n,this.data,this.type,t,this)||o(ut,this,"_data",n,this.type,t,this)};u.prototype.hasUnmergedClientChanges=function(){return s.hasUnmergedClientChanges(this.data)};var s;return s=__decorate([__metadata("fx:diagnostics",[require,"1"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[String,Object,Object])],u)})();t.DataSet=bt})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t,i,r;(function(n){n[n.Copy=0]="Copy";n[n.InPlace=1]="InPlace"})(t=n.EditScopeKind||(n.EditScopeKind={})),(function(n){n[n.None=0]="None";n[n.Created=1]="Created";n[n.Deleted=2]="Deleted";n[n.Updated=3]="Updated"})(i=n.EditState||(n.EditState={})),(function(n){n[n.AcceptClientChanges=0]="AcceptClientChanges";n[n.DiscardClientChanges=1]="DiscardClientChanges";n[n.RefreshFromServerImplicitly=2]="RefreshFromServerImplicitly";n[n.ServerChangesAppliedManually=3]="ServerChangesAppliedManually";n[n.ServerDataReturned=4]="ServerDataReturned"})(r=n.AcceptEditScopeChangesAction||(n.AcceptEditScopeChangesAction={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function ci(t,i,r){var u=r&&r.kind;return t.createChildLifetime||(r=i,i=t,t=new n.TriggerableLifetimeManager),u===ri.InPlace?new vi(t,i,r):new ai(t,i,r)}function li(n){var t=ti(n),r,u;t.length?(r=t.map((function(n){var t={state:i[n.state]},r=n.entityReference;return r&&r.type&&(t.entityType=r.type,t.entityId=r.id),n.entityPath&&(t.pathFromRoot=n.entityPath),n.encodedCreatedEntities&&(t.createdEntities=n.encodedCreatedEntities),n.entityUpdates&&(t.updates=n.entityUpdates),t})),u=JSON.stringify(ko.toJS(r),(function(n,t){return n&&vt(t)?"<undefined>":t}),4),console.debug(u)):console.debug("No edits")}function et(){r.accessorLifetime()}function ot(n){var t="";n&&n.stack&&(t+=" Inner exception:"+n.message+" at "+n.stack);r.resetObs(t)}function f(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),e.extend({shouldVisitObjectProperty:function(t,r,u){return ni(t,u)&&n().shouldVisitObjectProperty(t,r,u)&&(!i||!g(w(u,t)))}},t)}function ct(n){typeof n!="object"&&r.makeObs();oi(n,(function(t,i){if(d(i))ct(i),n[t]=ko.observableArray(i);else{var r=typeof i;r==="object"?ct(i):r!=="function"&&(n[t]=ko.observable(i))}}))}function dt(t){var i=n.toSerializableObject(t);return JSON.stringify(i)}function gt(t,i,r){if(r===0)return wi(t,i);var u=JSON.parse(t);return n.fromSerializableObject(u)}function wi(n,t){var i=JSON.parse(n);return t||ct(i),i}function lt(n,t){var i=k(n.type)&&k(t.type)&&k(n.id)&&k(t.id),r=n.type===t.type&&n.id===t.id;return i||r}function it(n){var t=0,r,i;if(n.length===0)return t+"";for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r^0;return t+""}function ni(n,t){return!(t&&t.properties&&t.properties[n]&&t.properties[n].trackEdits===!1)}function ti(n,t){t===void 0&&(t=!0);var r=n.version||0;return n.edits.map((function(n){var u={state:n.state,entityReference:n.entityReference};switch(n.state){case i.Created:u.entityPath=n.entityPath;u.encodedCreatedEntities=n.createdEntities.map((function(n){return gt(n,t,r)}));break;case i.Updated:u.entityUpdates=gt(n.entityUpdates,t,r)}return u}))}function ii(n){return g(n)?!0:n?h.getProperties(n).some((function(t){return ii(w(n,t))})):!1}var e=MsPortalFx,h=e.Data.Metadata,i=e.Data.EditState,rt=n.Data.Shared,y=e.Data.AcceptEditScopeChangesAction,c=n.Data.Visitor,b=n.Data.CloneVisitor,ut=n.Data.MergeVisitor,ri=e.Data.EditScopeKind,s=e.isArrayOrObservableArray,at=e.areEqual,vt=e.isUndefined,k=e.isNullOrUndefined,o=e.isObject,yt=MsPortalFx.getUniqueId,pt=e.Data.DataSet,a=e.Base.ProxiedObservables,v=rt.unwrapArrayOrObservableArray,p=rt.unwrapObjectPropertyValue,ui=rt.isObservableObjectPropertyValue,d=Array.isArray,g=h.typeIsEntityType,w=h.getPropertyTypeMetadata,ft=new e.Base.Diagnostics.Log("MsPortalFx/Data/Data.EditScope"),l=undefined,fi="aux-entityState",ei="aux-entityArrayState",nt=MsPortalFx.isDevelopmentMode,wt="Turn on development mode to generate diagnostic information for this error.",oi=e.forEachKey,si=e.isEmpty,u="",hi={accessorLifetime:u,scopeInputType:u,scopeOptsTypes:u,missingMeta:u,noRefresh:u,noSave:u,entityDupe:u,saveInProg:u,nullMerge:u,resetInProg:u,noEntityRoot:u,resetType:u,newInputObs:u,newEditObs:u,diffEditInput:u,missingIdProp:u,targetArrObs:u,editsUnavail:u,mergeUnavail:u,noImpl:u,serialize:u,namedMeta:u,disposed:u,nestedEntities:u,makeObs:u,entityEdit:u,resetObs:u,moveEditState:u},r=n.getErrorMap(hi),tt,st;t.allowNonPersistentEdits=!1;t.createEditScope=ci;t.logEditsToConsole=li;t.nonPersistedPropertySentinel="EDITSCOPENOTPERSISTED";tt={entityType:!0};st={registerForDispose:et,createChildLifetime:et,isDisposed:et};var bt=(function(){function u(){this._isDisposed=!1;this._initializing=ko.observable(!0);this._saving=ko.observable(!1);this._refreshing=ko.observable(!1);this._refreshInProgressCount=0;this._resettingValue=ko.observable(!1);this._dirty=ko.observable(!1);this._edits=ko.observable([]);this.editsChanged=ko.observable()}return u.prototype.init=function(t,i,u,f){var c=this,y,v,p,l;a.markNonSerializable(this);t.createChildLifetime||(f=u,u=i,i=t,t=new n.TriggerableLifetimeManager);y=this._ltm=t.createChildLifetime();this._createEditableAndOriginalData=f;v=s(i)&&ko.unwrap(i);p=v&&(v.length===0||o(v[0]));p||o(i)||r.scopeInputType();u=u||{};l=u.typeMetadata;l?u.typeName&&r.scopeOptsTypes():u.typeName&&(l=h.getTypeMetadata(u.typeName),l||r.missingMeta(u.typeName));this._hasMetadata=!!l;l?l.entityType||(l=e.extend2(l,{entityType:!0})):l=tt;this._inconsistent=ko.pureComputed((function(){return c._initializing()||c._refreshing()||c._saving()||c._resettingValue()}));this._getEditsVisitor=this._createGetEditsVisitor(!1);this._getPersistableEditsVisitor=this._createGetEditsVisitor(!0);this._applyEditsVisitor=this._createApplyPersistedEditsVisitor();this._revertAllVisitor=this._createRevertAllVisitor();this._generateValueBasedEntityIdVisitor=this._createGenerateValueBasedEntityIdVisitor();this._mergeToEditableVisitor=this._createMergeToEditableVisitor();ko.computed(y,(function(){c._inconsistent()?c._edits(null):(c._edits(c._getEdits(!1)),c.editsChanged.valueHasMutated())}));this._entityStateKey=fi+yt();this._entityArrayStateKey=ei+yt();this._rootTypeMetadata=l;this._root=this._createEditableAndOriginalData(i,this._rootTypeMetadata).editable;this._refreshCallback=u.refresh||function(){return r.noRefresh(),null};this._saveCallback=u.save||function(){return r.noSave(),null};ko.computed(y,(function(){c._inconsistent()||c._dirty(c._edits().length>0)}));this._initializing(!1)},u.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._deregisterNestedEntities(this._root,this._rootTypeMetadata,!1),this._ltm.dispose())},Object.defineProperty(u.prototype,"root",{get:function(){return this._assertNotDisposed(),this._root},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"refreshing",{get:function(){return this._refreshing},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"saving",{get:function(){return this._saving},enumerable:!1,configurable:!0}),u.prototype.markForDelete=function(n){this._assertNotDisposed();var r=this._getEntityState(n,!1),t=r.readOnlyEditState();t!==i.None&&this._revertEntity(n,r,t);t!==i.Created&&this._markAsDeletedOrUpdated(n,i.Deleted)},u.prototype.create=function(n){this._assertNotDisposed();var t=this._getEntityArrayType(n,!1);return h.createEmptyObject(t)},u.prototype.addCreated=function(n,t){var i,u;this._assertNotDisposed();i=this._getEntityState(n,!1,!1);i&&r.entityDupe();u=this._getCreatedEntities(t,!1);this._addEntityStateToCreatedEntity(n,t);u.push(n)},u.prototype.revert=function(n){this._assertNotDisposed();var t=this._getEntityState(n,!1),r=t.readOnlyEditState();this._revertEntity(n,t,r);t.writableEditState(i.None)},u.prototype.revertAll=function(){this._assertNotDisposed();this._revertAll()},u.prototype.getEditState=function(n){return this._assertNotDisposed(),this._getEditState(n,!1)},u.prototype.getOriginal=function(n){return this._assertNotDisposed(),s(n)?this._getEntityArrayState(n,!1).original:this._getEntityState(n,!1).original},u.prototype.getCreated=function(n){return this._assertNotDisposed(),this._getCreatedEntities(n,!1)},u.prototype.mergeFromOriginal=function(){this._assertNotDisposed();this._mergeFromOriginal()},u.prototype.refresh=function(){var n=this;this._assertNotDisposed();this._refreshInProgressCount++;this._refreshing(!0);var r=this._refreshCallback(this._getRefreshableData())||Q(l),t=Q.defer(),i=function(){--n._refreshInProgressCount<=0&&(n._refreshInProgressCount=0,n._refreshing(!1))};return r.then((function(r){n._onRefreshComplete(r);n._isDisposed||(i(),t.resolve())})).catch((function(n){i();t.reject(n)})),t.promise},u.prototype.save=function(){this.mergeFromOriginal();this.revertAll()},u.prototype.saveChanges=function(){var n=this,t;if(this._assertNotDisposed(),this._inconsistent()&&r.saveInProg(),t=this._edits(),t.length===0)return Q();this._saving(!0);var e=MsPortalFx.mapMany(t,(function(n){switch(n.state){case i.Created:return n.createdEntities.map((function(t){return{editState:i.Created,entityTypeName:n.typeMetadata.name,entity:t}}));case i.Updated:case i.Deleted:return[{editState:n.state,entityTypeName:n.typeMetadata.name,entity:n.updatedOrDeletedEntity}]}return[]})),o=this._saveCallback(this,e,this._getRefreshableData())||Q(l),u=Q.defer(),f=function(){n._revertAll();n._isDisposed||(n._saving(!1),u.resolve())};return o.then((function(t){var u=t&&t.action||y.AcceptClientChanges,i;switch(u){case y.AcceptClientChanges:n._acceptChanges();break;case y.RefreshFromServerImplicitly:return n.refresh().then((function(){f()}));case y.ServerChangesAppliedManually:n._onRefreshComplete(null);break;case y.ServerDataReturned:i=t.dataToMerge;i||r.nullMerge();n._onRefreshComplete(i)}f()})).catch((function(t){n._isDisposed||(n._saving(!1),u.reject(t))})),u.promise},u.prototype.resetValue=function(n,t){var a=this,v,e,i,y,h,l,s,u;this._assertNotDisposed();this._inconsistent.peek()&&r.resetInProg();v=n;v.returnsObservablesFromEditScope||ot();try{e=n.getOriginalObservable(st);i=n.getEditableObservable(st)}catch(p){ot(p)}(!e||!i||ko.isComputed(e)||ko.isComputed(i))&&ot();y=function(n){var e=n,i,u,t=new c(null,f((function(){return t}),{visitObject:function(n,r){t.getObjectPropertiesToVisit(n,r).forEach((function(f){n[f]===e?(u=!0,i=w(r,f)):t.visitObjectPropertyValueDispatch(f,n,r)}))}}));return t.visit(a._root,a._rootTypeMetadata),u||r.noEntityRoot(),i};this._resettingValue(!0);try{h=y(i);ii(h)&&r.resetType();l=t.newInputValue;ko.isObservable(l)&&r.newInputObs();s=this._createEditableAndOriginalData(l,h);i(s.editable);e(s.original);t.hasOwnProperty("newEditableValue")&&(u=t.newEditableValue,ko.isObservable(u)&&r.newEditObs(),(d(u)||o(u))&&u===s.original&&r.diffEditInput(),i(t.newEditableValue))}finally{this._resettingValue(!1)}},u.prototype.getEntityArrayWithEdits=function(n){var t=this,u=this._getCreatedEntities(n,!1)(),r=ko.unwrap(n),f=r.filter((function(n){return t.getEditState(n)()!==i.Deleted})).concat(u),e=r.filter((function(n){return t.getEditState(n)()===i.Updated})),o=r.filter((function(n){return t.getEditState(n)()===i.Deleted}));return{arrayWithEdits:f,createdEntities:u,updatedEntities:e,deletedEntities:o}},u.prototype.applyArrayAsEdits=function(n,t){var u=this,s=this._getEntityArrayState(t,!1,!1),i,o,l;if(s){i=t;o=s.typeMetadata;(!d(o.idProperties)||o.idProperties.length<1)&&r.missingIdProp();var a=[],c=[],p=this._getCreatedEntities(t,!0)().slice(0);n.forEach((function(n){var t=h.getItemId(n,o);vt(t)?c.push(n):a.push(n)}));var v=function(n){ko.isObservable(i)?u.addCreated(n,i):u.addCreated(n,i)},w=e.extend({handleAdd:function(n){v(n)},handleDelete:function(n){u.markForDelete(n)}},this._createMergeEntityOnlyVisitorOptions()),y=new pi(w,f((function(){return y})));y.applyEntityArrayAsEdits(a,i,s.typeMetadata);c.length&&c.forEach((function(n){v(n)}));p.forEach((function(n){u.revert(n)}))}else ko.isObservable(t)||r.targetArrObs(),l=new b(null,f((function(){return l}))),t(l.clone(n,null))},u.prototype.getEdits=function(){this._inconsistent()&&r.editsUnavail();var n=this._getEdits(!0).map((function(n){var t={state:n.state,entityReference:n.entityReference};switch(t.state){case i.Created:t.entityPath=n.entityPath;t.createdEntities=n.encodedCreatedEntities.map((function(n){return dt(n)}));break;case i.Updated:t.entityUpdates=dt(n.entityUpdates)}return t}));return{edits:n,version:1}},u.prototype.applyEdits=function(n){this._assertNotDisposed();var t=ti(n,this._hasMetadata);return this._applyEdits(t,this._applyEditsVisitor,!1),!0},Object.defineProperty(u.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!1,configurable:!0}),u.prototype._mergeFromOriginal=function(){r.mergeUnavail()},u.prototype._getRefreshableData=function(){return r.noImpl(),null},u.prototype._onRefreshComplete=function(){r.noImpl()},u.prototype._addEntityStateToEditableEntity=function(t,u,f){var e=this,o=this._addEntityState(t);o.original=u;o.typeMetadata=f;ko.computed(o.lifetimeManager=new n.TriggerableLifetimeManager,(function(){if(!e._inconsistent()){var u=e._getEntityState(t,!0),n=u.readOnlyEditState.peek(),f=e._edits().some((function(n){return n.state===i.Updated&&n.updatedOrDeletedEntity===t}));f?n===i.None?e._markAsDeletedOrUpdated(t,i.Updated):n!==i.Updated&&r.moveEditState(i[n],i[i.Updated]):n===i.Updated&&u.writableEditState(i.None)}}))},u.prototype._addEntityStateToCreatedEntity=function(n,t){var r=this._addEntityState(n);r.containingArray=t;r.writableEditState(i.Created)},u.prototype._addEntityState=function(n){var t=ko.observable(i.None),r={writableEditState:t,readOnlyEditState:ko.pureComputed((function(){return t()}))};return a.data(n,this._entityStateKey,r),r},u.prototype._getEntityState=function(n,t,i){var e=this,u,f,r;if(i===void 0&&(i=!0),u=n&&a.data(n,this._entityStateKey),!u&&i){f=!s(n)&&o(n);r="";r=t?"Entity-typed object is not known to this edit scope.  Such entity-typed objects can only be added via 'editScope.addCreated', 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such objects cannot be added due to the addition of some object/array that nests this object.":f?this._rootTypeMetadata===tt?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":nt?"":"Object passed as the 'entity' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entity' parameter must be an object.";nt||(r=r+"  "+wt);throw new Error(r);}return u},u.prototype._deregisterNestedEntities=function(n,t,r){var e=this,u;r===void 0&&(r=!0);u=new ht({getCreatedEntities:function(n){return e._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,t,i){u.visitEntityArray(n,t,i);e._disposeEntityArrayState(n)},visitEntity:function(n,t,r){if(u.visitEntity(n,t,r),r){var f=e._getEditState(n,!0)();f!==i.None&&ft.error("Edited entities are being disconnected from the EditScope, losing user-authored edits.")}e._disposeEntityState(n)}}));u.visit(n,t,r)},u.prototype._addEntityArrayState=function(n,t,i){var r={typeMetadata:i,original:t};a.data(n,this._entityArrayStateKey,r)},u.prototype._createVisitorCallbacks=function(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),f(n,t,i)},u.prototype._rootIsEntity=function(){return o(this._root)},u.prototype._rootAsEntity=function(n){return n===void 0&&(n=!0),o(this._root)?n?this._root:this._getOriginalEntity(this._root):null},u.prototype._rootAsArray=function(n){return n===void 0&&(n=!0),s(this._root)?n?this._root:this._getOriginalArray(this._root):null},u.prototype._getOriginalEntity=function(n){return this._getEntityState(n,!0).original},u.prototype._getOriginalArray=function(n){return this._getEntityArrayState(n,!0).original},u.prototype._revertEntity=function(n,t,r){switch(r){case i.Updated:this._mergeToEditableVisitor.mergeEntity(t.original,n,t.typeMetadata);break;case i.Created:var u=this._getCreatedEntities(t.containingArray,!0);u.splice(u().indexOf(n),1)}},u.prototype._getEntityArrayState=function(n,t,i){var e=this,u,f,r;if(i===void 0&&(i=!0),u=a.data(n,this._entityArrayStateKey),!u&&i){f=s(n);r="";r=t?"Entity-typed array is not known to this EditScope.  Such entity-typed arrays can only be added via 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such arrays cannot be added due to the addition of some object/array that nests this array.":f?this._rootTypeMetadata===tt?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":nt?"":"Array passed as the 'entityArray' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entityArray' parameter must be an array or an observable array.";nt||(r=r+"  "+wt);throw new Error(r);}return u},u.prototype._disposeEntityArrayState=function(n){a.data(n,this._entityArrayStateKey,l)},u.prototype._disposeEntityState=function(n){var t=this._getEntityState(n,!0);t.lifetimeManager&&t.lifetimeManager.dispose();a.data(n,this._entityStateKey,l)},u.prototype._markAsDeletedOrUpdated=function(n,t){var f=this._getEntityState(n,!0),u=f.readOnlyEditState.peek();u!==i.None&&u!==t&&r.entityEdit(i[u]);f.writableEditState(t)},u.prototype._getEntityArrayType=function(n,t){return this._getEntityArrayState(n,t).typeMetadata},u.prototype._getCreatedEntities=function(n,t){var r=this._getEntityArrayState(n,t),i=r.createdEntities;return i||(i=r.createdEntities=ko.observableArray()),i},u.prototype._revertAll=function(){this._revertAllVisitor.visit(this._root,this._rootTypeMetadata)},u.prototype._createRevertAllVisitor=function(){var n=this,t=new ht({getCreatedEntities:function(t){return n._getCreatedEntities(t,!0)}},f((function(){return t}),{visitEntityArray:function(i,r){t.visitArray(i,r);for(var u=n._getCreatedEntities(i,!0);u().length>0;)n.revert(u()[0])},visitEntity:function(i,r){t.visitEntity(i,r);n.revert(i)}}));return t},u.prototype._getEdits=function(n){var t=[],i=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,!1):null,r=n?this._getPersistableEditsVisitor:this._getEditsVisitor;return r.visit(this._root,this._rootTypeMetadata,{edits:t,entityReference:i,entityPath:""}),t},u.prototype._createGetEditsVisitor=function(n){var t=this,u=new ht({getCreatedEntities:function(n){return t._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,i){t._getEntityArrayState(n,!0);u.visitEntityArray(n,i)},visitEntity:function(n,i){t._getEntityState(n,!0);u.visitEntity(n,i)}})),o=this._createComputeEntityUpdatesVisitor(n),e=function(n,t,i){return o.visit(n,t,i)},r=new c(null,f((function(){return r}),{shouldVisitObjectProperty:function(n,i,u){return ni(n,u)&&r.shouldVisitObjectProperty(n,i,u)&&t._objectPropertyNestsEntities(i,n,u)},visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(n,f,o){var s;if(r.visitArray(n,f,o),s=t._getCreatedEntities(n,!0),s().length){var h=o.edits,c=o.entityReference,l=o.entityPath;h.push({state:i.Created,entityReference:c,entityPath:l,encodedCreatedEntities:s().map((function(n){return e(n,f)})),typeMetadata:f,createdEntities:s()});s().forEach((function(n){u.visit(n,f)}))}},visitObject:function(n,i,u){var f=g(i),e=u.edits,o=u.entityReference,s=u.entityPath;r.getObjectPropertiesToVisit(n,i).forEach((function(u){r.visitObjectPropertyValueDispatch(u,n,i,{edits:e,entityReference:f?t._createEntityReference(n,i,!1):o,entityPath:f?u:s+"."+u})}))},visitEntity:function(n,u,f){var o=f.edits,h=t._getEditState(n,!0)(),s=e(n,u,t._getOriginalEntity(n));si(s)?h===i.Deleted&&o.push({state:i.Deleted,entityReference:t._createEntityReference(n,u,!1),typeMetadata:u,updatedOrDeletedEntity:n}):o.push({state:i.Updated,entityReference:t._createEntityReference(n,u,!1),entityUpdates:s,typeMetadata:u,updatedOrDeletedEntity:n});r.visitEntity(n,u,f)}}));return r},u.prototype._createApplyPersistedEditsVisitor=function(){var n=this;return this._createApplyEditsVisitor(!1,{applyCreate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!0);n.addCreated(i,t)},applyUpdate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!1);n._applyEntityUpdates(t,i,r)},applyDelete:function(t,r){n._markAsDeletedOrUpdated(r,i.Deleted)}})},u.prototype._createApplyEditsVisitor=function(n,t){var u=this,r=new c(null,f((function(){return r}),{visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(f,e,o){var h,v;r.visitArray(f,e,o);var s=o.edits,l=ko.unwrap(f),y=function(r){var o=l[r],c=u._createEntityReference(o,e,n),h=MsPortalFx.findIndex(s,(function(n){return n.state===i.Deleted&&lt(c,n.entityReference)}));h>=0&&(s.splice(h,1),t.applyDelete(f,o))};for(h=l.length-1;h>=0;h--)y(h);var a=o.entityReference,p=o.entityPath,c=MsPortalFx.findIndex(s,(function(n){if(n.state===i.Created)if(a){if(n.entityReference&&lt(a,n.entityReference)&&p===n.entityPath)return!0}else if(!n.entityReference)return!0}));c>=0&&(v=s[c],s.splice(c,1),v.encodedCreatedEntities.forEach((function(n){t.applyCreate(f,n,e)})))},visitObject:function(f,e,o){var s=o.edits,c=o.entityReference,v=o.entityPath,l=g(e),h,a;l&&(c=u._createEntityReference(f,e,n));r.getObjectPropertiesToVisit(f,e).forEach((function(n){r.visitObjectPropertyValueDispatch(n,f,e,{edits:s,entityReference:c,entityPath:l?n:v+"."+n})}));l&&(h=MsPortalFx.findIndex(s,(function(n){return n.state===i.Updated&&lt(c,n.entityReference)})),h>=0&&(a=s[h],s.splice(h,1),t.applyUpdate(f,a.entityUpdates,e)))}}));return r},u.prototype._acceptChanges=function(){var n=this._getEdits(!1);this._applyEdits(n.slice(0),this._createAcceptChangesVisitor(!0),!0);this._applyEdits(n,this._createAcceptChangesVisitor(!1),!1)},u.prototype._createAcceptChangesVisitor=function(n){var t=this;return this._createApplyEditsVisitor(n,{applyCreate:function(i,r,u){if(!n){var f=i,e=t._createEditableAndOriginalData(r,u).editable,o=function(n,t){if(n.push)n.push(t);else{var i=n,r=i().slice(0);r.push(t);i(r)}};o(f,e);o(t._getOriginalArray(f),t._getOriginalEntity(e))}},applyUpdate:function(i,r,u){n&&t._applyEntityUpdates(i,r,u)},applyDelete:function(n,t){var u=ko.unwrap(n).indexOf(t),i,r;n.splice?n.splice(u,1):(i=n,r=i().slice(0),r.splice(u,1),i(r))}})},u.prototype._applyEntityUpdates=function(n,t,i){this._mergeToEditableVisitor.mergeEntity(t,n,i)},u.prototype._removeNonPersistedPropertySentinels=function(n,i,r){var u=new c(null,{visitObjectPropertyValue:function(n,i,f){var e=p(i,n);e===t.nonPersistedPropertySentinel?ko.isObservable(i[n])?i[n](l):r?i[n]=l:delete i[n]:u.visitObjectPropertyValue(n,i,f)},visitArray:function(n,i){var r=v(n);r.length===1&&r[0]===t.nonPersistedPropertySentinel?r.splice(0,1):u.visitArray(n,i)}});u.visit(n,i)},u.prototype._generateValueBasedEntityId=function(n,t){return this._generateValueBasedEntityIdVisitor.visit(n,t)},u.prototype._createGenerateValueBasedEntityIdVisitor=function(){var n=new c(null,f((function(){return n}),{visitArray:function(t,i){var r="";return v(t).forEach((function(t,u){r+=n.visitArrayItem(t,u,i)})),it(r)},visitObject:function(t,i){var u=n.getObjectPropertiesToVisit(t,i).sort(),r="";return u.forEach((function(u){r+=n.visitObjectPropertyValueDispatch(u,t,i)})),it(r)},visitScalar:function(n){return it(""+n)},visitDate:function(n){return it(""+n)}},!0));return n},u.prototype._createEntityReference=function(n,t,i){var u,s,f,e,o;return i===void 0&&(i=!1),s=this._rootAsEntity(!i)===n,s?u={type:l,id:l}:(f=i?n:this._getOriginalEntity(n),e=void 0,t&&(t.name||t===this._rootTypeMetadata)||r.serialize(),e=h.typeHasId(t)?h.getItemId(f,t):this._generateValueBasedEntityId(f,t),o=t.name||null,o||t===this._rootTypeMetadata||r.namedMeta(),u={type:o,id:e}),u},u.prototype._createComputeEntityUpdatesVisitor=function(n){var e=this,r=new b(null,f((function(){return r}),{visitObject:function(i,u){var f={};return r.getObjectPropertiesToVisit(i,u).forEach((function(o){var h=r.visit(p(i,o),w(u,o)),c,l,a;n&&(e._shouldPersistObjectPropertyEdits(o,u)||(h=t.nonPersistedPropertySentinel));c=i[o];ui(i,o)?l=ko.observable(h):s(c)&&h===t.nonPersistedPropertySentinel?(a=[t.nonPersistedPropertySentinel],l=ko.isObservable(c)?"splice"in c?ko.observableArray(a):ko.observable(a):a):l=h;f[o]=l})),f}},!0)),i={},u=new c(null,f((function(){return u}),{visitObject:function(f,s,h){if(o(h)){var c;return e._enumeratePropertiesForUpdates(f,h,u,s,(function(r){var o=u.visit(p(f,r),w(s,r),p(h,r));o!==i&&(c||(c={}),n&&(e._shouldPersistObjectPropertyEdits(r,s)||(o=t.nonPersistedPropertySentinel)),c[r]=o)})),c||i}return r.visit(f,s)},visitArray:function(n,t,f){var e=!1,o;return s(f)?v(n).length!==v(f).length?e=!0:(o=v(f),e=v(n).some((function(n,r){return u.visitArrayItem(n,r,t,o[r])!==i}))):e=!0,e?r.visit(v(n),t):i},visitScalar:function(n,t){return at(n,t)?i:n},visitDate:function(n,t){return at(n,t)?i:n}},!0));return u},u.prototype._shouldPersistObjectPropertyEdits=function(t,i){if(!n.Data.allowNonPersistentEdits)return!0;var r=i&&i.properties&&i.properties[t];return!r||r.persistEdits!==!1},u.prototype._enumeratePropertiesForUpdates=function(n,t,i,r,u){i.getObjectPropertiesToVisit(n,r).forEach((function(n){t.hasOwnProperty(n)?u(n):ft.warning("Encountered a property '"+n+"' on an editable object that is not present on the original object.  Updates to the property value are not being persisted along with other edits.")}));i.getObjectPropertiesToVisit(t,r).forEach((function(t){n.hasOwnProperty(t)||ft.warning("Encountered a property '"+t+"' on an original object that is not present on the editable object.  Updates to the property value are not being persisted along with other edits.")}))},u.prototype._assertNotDisposed=function(){this._isDisposed&&r.disposed()},u.prototype._objectPropertyNestsEntities=function(n,t,i){var r=n[t],u;return(ko.isObservable(r)&&(r=r.peek()),!(d(r)||o(r)))?!1:(u=w(i,t),!u)?!1:!0},u.prototype._getEditState=function(n,t){return this._getEntityState(n,t).readOnlyEditState},u.prototype._createMergeToEditableVisitor=function(){var n=new yi(this._createMergeEntityOnlyVisitorOptions(),f((function(){return n})));return n},u.prototype._createMergeEntityOnlyVisitorOptions=function(){var n=new c(null,f((function(){return n}),{visitEntityTypedObjectPropertyValue:function(){r.nestedEntities()}})),t=new b(null,f((function(){return t})));return{onDetach:function(t,i){n.visit(t,i)},clone:function(n,i){return t.clone(n,i)}}},u.prototype._applyEdits=function(n,t,i){var r=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,i):null,u=i?this.getOriginal(this._root):this._root;t.visit(u,this._rootTypeMetadata,{edits:n,entityReference:r,entityPath:""})},u.prototype._addMetadataHelperMessage=function(n){var t=this;return n},__decorate([__metadata("fx:diagnostics",[require,"EditScopeBase"]),MsPortalFx.Composition.ProxyCompatibilityMode],u)})(),ai=(function(n){function t(t,i,r){var u=n.call(this)||this;return u.init(t,i,r,(function(n,t){return{editable:u._getVisitor().clone(n,t),original:n}})),u}return __extends(t,n),t.prototype._mergeFromOriginal=function(n){n===void 0&&(n=!0);var t=this._rootTypeMetadata,i=this._createMergeEntitiesVisitor(n);this._rootIsEntity()?i.mergeEntity(this._rootAsEntity(!1),this._rootAsEntity(),t):i.mergeEntityArray(this._rootAsArray(!1),this._rootAsArray(),t)},t.prototype._getRefreshableData=function(){return this.getOriginal(this._root)},t.prototype._onRefreshComplete=function(n){n&&pt.mergeWithoutAtomization(n,this.getOriginal(this._root),{type:this._rootTypeMetadata.name});this._mergeFromOriginal(!1)},t.prototype._getVisitor=function(){var t=this,n=this._visitor;return n||(this._visitor=n=new b(null,f((function(){return n}),{visitEntityArray:function(i,r){var u=n.visitEntityArray(i,r);return t._addEntityArrayState(u,i,r),u},visitEntity:function(i,r){var u=n.visitEntity(i,r);return t._addEntityStateToEditableEntity(u,i,r),u}}))),n},t.prototype._createMergeEntitiesVisitor=function(n){var t=this,i=new kt({onDetach:function(i,r){t._deregisterNestedEntities(i,r,n)},clone:function(n,i){return t._getVisitor().clone(n,i)},getSourceEntity:function(n){return t._getOriginalEntity(n)},isSourceForTargetEntity:function(n,i){return t._getOriginalEntity(i)===n}},f((function(){return i})));return i},t})(bt),vi=(function(n){function t(t,i,r){var u=n.call(this)||this;return u.init(t,i,r,(function(n,t){return{editable:n,original:u._getVisitors().clone.clone(n,t)}})),u}return __extends(t,n),t.prototype._getRefreshableData=function(){return this._root},t.prototype._onRefreshComplete=function(n){n&&pt.mergeWithoutAtomization(n,this._root,{type:this._rootTypeMetadata.name});this._mergeToOriginal()},t.prototype._getVisitors=function(){var t=this,i=this._visitors,n,r;return i||(n=new b(null,f((function(){return n}),{visitEntityArray:function(i,r,u){var f=n.visitEntityArray(i,r,u);return t._addEntityArrayState(i,f,r),f},visitEntity:function(i,r,u){var f=n.visitEntity(i,r,u);return t._addEntityStateToEditableEntity(i,f,r),f}})),r=new kt({onDetach:function(){},clone:function(t,i){return n.clone(t,i)},getSourceEntity:function(n,i){return MsPortalFx.find(i,(function(i){var r=t._getEntityState(i,!0,!1);return r&&r.original===n}))},isSourceForTargetEntity:function(n,i){var r=t._getEntityState(n,!0,!1);return r&&r.original===i}},f((function(){return r}))),this._visitors=i={clone:n,merge:r}),i},t.prototype._mergeToOriginal=function(){var n=this._rootTypeMetadata,t=this._getVisitors().merge;this._rootIsEntity()?t.mergeEntity(this._rootAsEntity(),this._rootAsEntity(!1),n):t.mergeEntityArray(this._rootAsArray(),this._rootAsArray(!1),n)},t})(bt),ht=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._getCreatedEntities=t&&t.getCreatedEntities,r}return __extends(t,n),t.prototype.visitEntityArray=function(t,i,r){var u=this._getCreatedEntities(t);return n.prototype.visitEntityArray.call(this,u,i,r),n.prototype.visitEntityArray.call(this,t,i,r)},t})(c),yi=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(){return!0},t})(ut),pi=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._handleAdd=t.handleAdd,r._handleDelete=t.handleDelete,r}return __extends(t,n),t.prototype.applyEntityArrayAsEdits=function(n,t,i){var r=this;this._mergeArray(n,i,t,{handleAdd:function(n){r._handleAdd(n)},handleDelete:function(n){r._handleDelete(n)}})},t})(ut),kt=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._getSourceEntity=t.getSourceEntity,r._isSourceForTargetEntity=t.isSourceForTargetEntity,r}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.mergeEntityArray=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){var h=this._callbacks,u=p(t,n),f=p(r,n),e=!1;return s(u)?s(f)&&(e=h.visitEntityArray(u,i,f)):o(u)&&o(f)&&this._isSourceForTargetEntity(u,f)&&(e=h.visitEntity(u,i,f)),e},t.prototype.visitEntityArray=function(n,t,i){var r=this;return this._mergeArray(n,t,i,{getEdits:function(n,t){var i=function(t){return r._getSourceEntity(t,n)},f=t.map((function(n){return i(n)})),u=ko.utils.compareArrays(f,n);return u.forEach((function(n){if(n.status==="deleted"||n.status==="retained"){var r=n.value;n.value=MsPortalFx.find(t,(function(n){return i(n)===r}))}})),u},getSourceItem:function(n,t){return r._getSourceEntity(n,t)}})},t})(ut)})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){function i(n){return new t.EditScopeCache(n)}function r(n){return new t.EditScopeCacheOld(n)}var t=FxImpl.Data;n.createNew=i;n.create=r})(t=n.EditScopeCache||(n.EditScopeCache={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=(function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"editScope",{get:function(){return this._loadedCacheEntry},enumerable:!1,configurable:!0}),i.prototype.fetchForNewData=function(n){return this.fetch({editScopeId:n,params:undefined})},i.prototype.fetchForExistingData=function(t,i){return this.fetch({editScopeId:t,params:n.isNullOrUndefined(i)?null:i})},__decorate([__metadata("fx:diagnostics",[require,"EditScopeView"]),n.Composition.ProxyCompatibilityMode],i)})(FxImpl.Data.ObjectView);t.EditScopeView=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i="",u={entityCacheWithLoader:i,missingObservableData:i},r=FxImpl.getErrorMap(u),f=(function(i){function u(t){var f=i.call(this,n.clone(t))||this,u=t;return u.findCachedEntity&&u.loader&&!u.loader.establishDataSet&&r.entityCacheWithLoader(),f._findCachedEntity=u.findCachedEntity,f}return __extends(u,i),u.prototype.createView=function(n,i){return new t.EntityView(this,n,i)},u.prototype._tryFindDataInRelatedCache=function(n){var i,t=this._findCachedEntity,r,f,u,e;return t&&(t.hasOwnProperty("queryCache")?(r=t,f=r.queryCache,i=f._findMatchingEntity(r.entityMatchesId,n)):(u=t,e=u.dataCache,i=e._findEntity(u.findMatchingEntityInCacheEntry,n))),i},u.prototype._getDataFromDataSet=function(n){var t=n.data;return ko.isObservable(t)||r.missingObservableData(),n.data()},u})(FxImpl.Data.DataCache);t.EntityCache=f})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=(function(t){function i(n,i,r){var u=t.call(this,n,i,r||{})||this;return u._item=ko.observable(null),ko.computed(i,(function(){var t=u._loadedCacheEntry(),n,i;if(t)if(n=t.data,ko.isObservable(n))i=n(),u._item(i);else throw new Error("DataSets used with EntityView must contain observable data.");else u._item(null)})),u}return __extends(i,t),Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"data",{get:function(){return this._item()},enumerable:!1,configurable:!0}),__decorate([__metadata("fx:diagnostics",[require,"EntityView"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],i)})(FxImpl.Data.DataView);t.EntityView=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function ut(n,t){return r[n]=new et(n,t)}function a(n,t){var i=n in f&&f[n]||b||k;return i[t]}function v(n){return Math.max(n||0,vt||k.fastPollingInterval)}function yt(t){var i;return t=n.clone(t),i=t.fastPollingInterval=v(t.fastPollingInterval),i=t.pollingInterval=Math.max(v(t.pollingInterval),i),t.slowPollingInterval=Math.max(v(t.slowPollingInterval),i),t}function ft(n,t,i){n.fetchingSameData&&(n.fetchingSameData=i);t&&(n.isForcedCacheRefresh=!0)}function pt(t,i,r){if(i){var u=i.status;if(u===401||u===403)return new n.Errors.UnauthorizedDataError(t,i);if(u===404&&(!r||at(i)))return new n.Errors.NotFoundDataError(t,i)}return new n.Errors.FetchDataError(t,i)}var g=n.Base,ot=n.Data,st=g.Promises,y=g.Net2,nt=n.isObject,tt=n.deepEquals,u,et,d;(function(t){function r(){if(i){var t=n.Helpers.Deferred();return{promise:t.promise(),resolve:function(n){t.resolve(n)},reject:function(n){t.reject(n)}}}return Q.defer()}function u(t){if(i){var r=n.Helpers.Deferred();return r.resolve(t),r.promise()}return Q.resolve(t)}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.defer=r;t.resolve=u})(u||(u={}));var p=Date.now,i=null,s="",ht={earlyRefresh:s,unknownDataSet:s,modifyLifetime:s,unaccessedDataSet:s},h=FxImpl.getErrorMap(ht),c=new n.Base.Diagnostics.Log("Data.Loader"),r={},it={getFetchParameters:function(n,t,r){return r?{headers:t&&t.ajaxHeaders,data:t&&t.ajaxData}:i},fetchData:function(n,t,r,u,f,e){var h=i,o,s;return r&&(h=typeof r=="string"?r:JSON.stringify(r)),o="json",s=y.ajax({uri:t,type:f||"POST",dataType:o,cache:!1,headers:u,traditional:!0,contentType:"application/json",data:h,setAuthorizationHeader:e}),s.requestedDataType=o,s},processResult:[t.DataProvider.DataContractJsonSerializer.processResult]},w,b,f={},k={fastPollingInterval:1e4,pollingInterval:6e4,slowPollingInterval:3e5},e={slow:"slowPollingInterval",normal:"pollingInterval",fast:"fastPollingInterval"},o=0,ct=/^application\/json\b/,lt=function(n){try{return JSON.parse(n),!0}catch(t){return!1}},at=function(n){return ct.test(n.getResponseHeader("Content-Type"))&&lt(n.responseText)},rt=n.isFeatureEnabled("tracefetch"),vt,l;(function(n){n[n.Never=1]="Never";n[n.Normal=2]="Normal"})(l=t.PollFrequency||(t.PollFrequency={}));et=(function(){function t(n,t){var u=this,r;this._pollFrequency=l.Normal;this._fastPollingRefCount=0;this._pollCount=0;this._hasSnapshottedFetchOptions=!1;this._name=n;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;t&&(this._snapshotFetchOptions(t),r=t.type);this.dataSet=new ot.DataSet(r||i,t.dataSetLifetime,t.atomizationOptions)}return t.prototype._hasRequestInFlight=function(){return!!this._currentFetchDeferred},t.prototype._getLastFetchState=function(){return this._lastFetchState},t.prototype.getCachedOrInFlightData=function(n){var f=n.uri,e=n.ajaxData,o=n.ajaxHeaders,t,r,s=n.httpMethod||i;return this._lastCompletedFetchStart&&f===this._uri&&s===this._httpMethod&&tt(e,this._ajaxData)&&tt(o,this._ajaxHeaders)?!this._expiry||this._expiry>p()?(n.forceCacheRefresh&&this.debounceServerFetch(!0,!0),t=u.defer(),t.resolve({name:this._name,value:this.dataSet})):this._currentFetchDeferred&&!n.forceCacheRefresh?t=this._currentFetchDeferred:(c.verbose("Cached data expired: '"+this._name+"'"),r=!0):(this._tryExecuteDebouncedServerFetch(),this._snapshotFetchOptions(n)),{promise:t?t.promise:i,fetchingSameData:r}},t.prototype.forceRefresh=function(){return this._hasSnapshottedFetchOptions||h.earlyRefresh(),y.invalidateCacheHeader(this._ajaxHeaders),this._tryExecuteDebouncedServerFetch(!0)?this._currentFetchDeferred.promise:this.debounceServerFetch(!0,!0)},t.prototype.debounceServerFetch=function(t,r){var f=this,e;return this._debouncedFetch?ft(this._debouncedFetch,r,t):(this._currentFetchDeferred=u.defer(),this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask),e=function(){var n=f._debouncedFetch,t=n.isForcedCacheRefresh,r=n.fetchingSameData;f._debouncedFetch=i;f._fetchData(r,!0,t)},this._debouncedFetch={callback:e,timeoutId:setTimeout(e,0),isForcedCacheRefresh:r,fetchingSameData:t}),this._currentFetchDeferred.promise},t.prototype.setFastPolling=function(n){n?this._fastPollingRefCount++:this._fastPollingRefCount>0&&this._fastPollingRefCount--},t.prototype.dispose=function(){this._lifetimeManager.dispose();delete f[this._name];this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask)},t.prototype._tryExecuteDebouncedServerFetch=function(n){var t=this._debouncedFetch;return t?(ft(t,n,n),clearTimeout(t.timeoutId),t.callback(),!0):!1},t.prototype._snapshotFetchOptions=function(t){this._hasSnapshottedFetchOptions=!0;this._uri=t.uri;this._httpMethod=t.httpMethod||i;this._ajaxData=t.ajaxData;this._ajaxHeaders=t.ajaxHeaders;this._loaderOptions=t.loaderOptions;this._preserveNewItemsOrdering=t.preserveNewItemsOrdering;this._pollFrequency=t.pollFrequency||l.Normal;this._setAuthorizationHeader=t.setAuthorizationHeader;var r=t.fetchStartListener;this._fetchStartListener=r?function(n){r.fire(n)}:n.noop},t.prototype._fetchData=function(t,r,u){var f=this,e=this._name,nt=this._getLoaderOptionFunction("getFetchParameters"),w=this._getLoaderOptionFunction("fetchData"),s=this._getLoaderOptionFunction("processResult"),v=p(),h=this._currentFetchDeferred,b=this._lastFetchState,k=n.Base.Diagnostics.Telemetry,d,tt=this.dataSet,l,a,g;rt&&(d=k.startTrace({source:"Data",action:"Fetch",name:this._name,data:this._uri}));u&&(this._lastForcedFetchStart=v);this._fetchStartListener({dataSetName:e,promise:h.promise,isClientInitiated:r});l=nt(e,b,t)||{};a=n.clone(this._ajaxData,!1,!0)||i;l.data&&(a=n.extend(a,l.data));this._uri||w!==it.fetchData||c.error("Missing uri parameter in fetchData for '"+e+"' created by: "+(this._constructorCallStack||""));st.cancelOnDispose(this._lifetimeManager,(function(){var t=w(e,f._uri,a,n.extend2(f._ajaxHeaders,l.headers),f._httpMethod,f._setAuthorizationHeader);return g=t.requestedDataType==="json",t})).then((function(u){var w=!0,l=u&&u.cachedAjax?u:{cachedAjax:!1,modified:!0,data:u,cacheTagValue:i},g={data:l.data},a,nt,it,p,ft,et;l.cacheTagValue&&(f._ajaxHeaders=y.setCacheHeader(f._ajaxHeaders,l.cacheTagValue));try{if(f._lifetimeManager.isDisposed())return;if(Array.isArray(s)||(s=[s]),l.modified)for(nt=s.length,a=0;a<nt;++a)if(!s[a](e,g,b,t,tt.type)){w=!1;break}it=!r&&o>0;f._onFetchCompleted(r,!0,h);l.modified&&w&&!it&&f._shouldAcceptFetchResult(v)&&f._acceptFetchResult(g,v)}catch(ut){p="Data merge failed for data set '"+e+"'.";n.isFeatureEnabled("detailedexternallog")&&(p+=" The error message was: "+n.getLogFriendlyMessage(ut));c.error(p)}finally{rt&&k.completeTrace(d);try{h.resolve({name:e,value:f.dataSet})}catch(ut){ft=n.getLogFriendlyMessage(ut);et="Data-load completed callback threw an exception for data set '"+e+"'. The error message was: "+ft;c.error(et)}}})).catch((function(n){if(!f._lifetimeManager.isDisposed()){f._onFetchCompleted(r,!1,h);var t=pt(e,n&&n.jqXHR||n,g);h.reject(t)}}))},t.prototype._onFetchCompleted=function(n,t,r){var u=this,f=this._pollFrequency!==l.Never;n&&t&&f&&!this._pollingTask&&(this._pollingTask={name:"poll data set: "+this._name,scheduledTask:function(){u._pollData()},recurring:!1,isAsync:!0,delayInMs:a(this._name,e.fast),silent:!0});r===this._currentFetchDeferred&&(this._currentFetchDeferred=i,this._reschedulePolling(!0))},t.prototype._reschedulePolling=function(t){this._pollingTask&&(t&&(this._pollCount=0),n.Base.Scheduler.scheduleTask(this._pollingTask))},t.prototype._shouldAcceptFetchResult=function(n){if(this._lastCompletedFetchStart){var t=n>this._lastCompletedFetchStart,i=this._lastForcedFetchStart&&n<this._lastForcedFetchStart;return t&&!i}return!0},t.prototype._acceptFetchResult=function(t,r){this.dataSet.merge(t.data,{type:t.type,fetchStart:r,preserveNewItemsOrdering:this._preserveNewItemsOrdering});var u=this.dataSet;u.navigationMetadata(t.navigationMetadata||i);u.partialErrors(t.partialErrors||[]);this._lastCompletedFetchStart=r;this._lastFetchState=t.fetchState;this._expiry=p()+a(this._name,e.slow)*3;n.isInWebWorker||$(u).trigger("mergeComplete")},t.prototype._determinePollingInterval=function(){return e.normal},t.prototype._pollData=function(){var n,t,i,r;if(!this._lifetimeManager.isDisposed())return this._currentFetchDeferred||o||(this._pollCount++,this._isFastPollNeeded()?(n=!0,t=e.fast):(n=!0,t=this._determinePollingInterval()),t&&(i=a(this._name,t)),n&&(r=Math.ceil(i/a(this._name,e.fast)),n=this._pollCount%r==0)),n?(this._currentFetchDeferred=u.defer(),this._fetchData(!0),this._currentFetchDeferred.promise):(this._reschedulePolling(),u.resolve(null))},t.prototype._isFastPollNeeded=function(){return this._fastPollingRefCount>0||this.dataSet.hasUnmergedClientChanges()},t.prototype._getLoaderOptionFunction=function(n){var t;return this._loaderOptions&&(t=this._loaderOptions[n]),!t&&w&&(t=w[n]),t||it[n]},t})();d=(function(){function n(){}return n.getData=function(n,t){var i,u,e,f;return nt(n)&&(t=n,n=t.dataSetName||t.uri),i=r[n],i?(f=i.getCachedOrInFlightData(t),u=f.promise,e=f.fetchingSameData):i=ut(n,t),u||(u=i.debounceServerFetch(e,t.forceCacheRefresh)),u},n.forceRefresh=function(n){var t=r[n];if(t)return t.forceRefresh();h.unknownDataSet()},n.getDataSet=function(t,i,r,u,f){var e=!1,o={dataSetLifetime:u,atomizationOptions:f,uri:undefined};return typeof i=="boolean"?e=i:typeof i=="string"&&(e=!0,o.type=i),n.getDataSet2(t,e,o,r)},n.getDataSet2=function(n,t,u,f){var e=r[n],s=u.dataSetLifetime,o;return e&&s&&s!==e.dataSet.lifetime&&h.modifyLifetime(),!e&&t&&(e=ut(n,u)),o=e?e.dataSet:i,o&&f&&o.merge(f),o},n.hasRequestInFlight=function(n){var t=r[n];return t&&t._hasRequestInFlight()},n.disposeDataSet=function(n){var t=r[n];t&&(t.dispose(),delete r[n])},n.setFastPolling=function(n,t){var i=r[n];i?i.setFastPolling(t):h.unaccessedDataSet()},n.pausePolling=function(){o++},n.resumePolling=function(){o>0&&o--},n.setDefaultLoaderOptions=function(n){w=n},n.setPollingIntervals=function(n,t){var r=n;nt(n)&&(t=n,r=i);t=yt(t);r?f[r]=t:b=t},n.resetPollingIntervals=function(n){typeof n=="string"?f[n]=null:b=null},n._internal={setDefaultPollingIntervals:function(n){k=n}},n.getMinPollingInterval=v,n})();t.Loader=d,(function(n){var t;(function(n){function t(){Object.getOwnPropertyNames(r).forEach((function(n){var t=r[n];t&&(t.dispose(),delete r[n])}))}n.disposeAllCachedDataSetsForTests=t})(t=n.Internal||(n.Internal={}))})(d=t.Loader||(t.Loader={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=t.Loader,f=n.Data.PollFrequency,s="GET",r="",h={needBothOptions:r,minimumPoll:r,incompatibleOptions:r},u=FxImpl.getErrorMap(h),e=(function(){function r(i){i.atomizationOptions&&!i.entityTypeName?u.needBothOptions():!i.atomizationOptions&&i.entityTypeName&&(i.atomizationOptions={});this._dataType=i.entityTypeName;this._uriForParams=i.sourceUri;this._httpMethod=i.httpMethod;this._polls=!!i.poll;this._pollInterval=i.pollInterval||null;this._serializeParams=i.serializeParams;this._supplyData=i.supplyData;this._atomizationOptions=i.atomizationOptions;this._processServerResponse=i.processServerResponse;this._preservesClientOrder=!!i.pollPreservesClientOrdering;this._setAuthHeader=i.setAuthorizationHeader;n.Base.ProxiedObservables.markNonSerializable(this);var r=t.Loader.getMinPollingInterval();this._polls&&this._pollInterval!==null&&this._pollInterval<r&&u.minimumPoll(r);this._setAuthHeader!==undefined&&this._supplyData&&u.incompatibleOptions()}return r.prototype._doesPoll=function(){return this._polls},r.prototype.serializeParams=function(n){return this._serializeParams?this._serializeParams(n):this._uriForParams(n)},r.prototype.loadDataSetForParams=function(n,t,i){var r=this._getDataSetLoaderOptions(n,t,i);return this.loadDataSet(n,r)},r.prototype.loadDataSet=function(n,t){var u=i.getData(n,t),r=u.then((function(n){return n.value}));return r.dataSetName=n,r},r.prototype.refreshDataSet=function(n){return i.forceRefresh(n.dataSetName)},r.prototype.disposeDataSet=function(n){i.disposeDataSet(n.dataSetName)},r.prototype.getLoadedDataSet=function(n){var t=i.getDataSet(n);return t&&t.data?t:null},r.prototype.isLoadingDataSet=function(n){return i.hasRequestInFlight(n)},r.prototype._getDataSetLoaderOptions=function(n,r,u){var h=this,o={uri:this._uriForParams?this._uriForParams(r):null,type:this._dataType,httpMethod:this._httpMethod||s,pollFrequency:this._polls?f.Normal:f.Never,atomizationOptions:this._atomizationOptions,dataSetLifetime:u,preserveNewItemsOrdering:!this._preservesClientOrder,setAuthorizationHeader:this._setAuthHeader,loaderOptions:{processResult:[t.DataProvider.DataContractJsonSerializer.processResult]}},e=this._pollInterval,c;return this._polls&&e!==null&&i.setPollingIntervals(n,{slowPollingInterval:e,pollingInterval:e,fastPollingInterval:e}),this._supplyData&&(o.loaderOptions.fetchData=function(n,t,i,f,e){return h._supplyData(e,t,f,i,r,u)}),this._processServerResponse&&(c=function(n,t){var i=h._processServerResponse(t.data);return i&&(t.data=i.data,t.navigationMetadata=i.navigationMetadata,t.partialErrors=i.partialErrors),!0},o.loaderOptions.processResult.unshift(c)),o},r})(),o;t.DataCacheLoader=e;o=(function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.establishDataSet=function(n,t,r,u){var f=this._getDataSetLoaderOptions(n,t,u);return i.getDataSet2(n,!0,f,r)},t})(e);t.DataCacheLoader2=o})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){n[n.Add=0]="Add";n[n.Update=1]="Update"})(t=n.EditKind||(n.EditKind={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=FxImpl.Data,i=0,r=(function(){function n(n){this._referrerUniqueId=0;var r=n.onEntryDisposed;this._referrerPropertyName="_objectCache_"+ ++i;this._serializeKey=n.serializeKey;this._supplyValue=n.supplyValue;this._tryFindValueInRelatedCache=n.tryFindValueInRelatedCache;this._entries=new t.RefCountCache({evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n){n.lifetime&&n.lifetime.dispose();r&&r(n.value,n.key)}})}return n.prototype.getValue=function(n,t){var i=this,u=this._serializeKey(n),f=t?this._getOrCreateReferrerId(t):null,r,e=function(){var t=new FxImpl.TriggerableLifetimeManager,u,f;return i._tryFindValueInRelatedCache&&(f=i._tryFindValueInRelatedCache(n,t),f&&(u=f.value,r=!0)),r||(u=i._supplyValue(n,t)),{key:n,value:u,lifetime:t}};return this._entries.getEntry(u,f,e).value},n.prototype.insertValueIfNotPresent=function(n,t,i){var r=this._serializeKey(n),u=this._getOrCreateReferrerId(i);this._entries.getEntry(r,u,(function(){return{key:n,value:t,lifetime:null}}))},n.prototype.hasEntry=function(n){var t=this._serializeKey(n);return this._entries.hasEntry(t)},n.prototype.dissociateEntry=function(n,t){var r=this._serializeKey(n),i=this._getOrCreateReferrerId(t);i&&this._entries.dissociateEntry(r,i)},n.prototype.immediatelyEvictEntry=function(n){var t=this._serializeKey(n);this._entries.immediatelyEvictEntry(t)},n.prototype.forEachEntry=function(n){this._entries.forEachEntry((function(t,i){n(i.key,i.value)}))},n.prototype.dispose=function(){this._entries.dispose()},n.prototype._getOrCreateReferrerId=function(n){var r=this,t=n,i=t[this._referrerPropertyName];return this._referrerPropertyName in t||(t[this._referrerPropertyName]=i="referrer"+ ++this._referrerUniqueId,n.registerForDispose((function(){delete t[r._referrerPropertyName];r._entries.disposeReferrer(i);i=null}))),i},n})();n.ObjectCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n.clone,r=(function(r){function u(n){var t=r.call(this,n)||this;return t.navigationOptions=t._navigationOptions=n.navigation?i(n.navigation):null,t}return __extends(u,r),u.prototype.createView=function(n,i){return new t.QueryView(this,n,i)},u.prototype.createNavigator=function(n){return this.createNavigatorWithOptions(n,null)},u.prototype.createNavigatorWithOptions=function(n,i){var u=this._navigationOptions;if(u){var f={},r=this.createView(n),e=i&&i.createMapping?i.createMapping(n,r.items):r.items;return u.loadBySkipTake&&(f.loadBySkipTake=function(n,t,i,f,e,o){return u.loadBySkipTake(r,t,i,f,e,o)}),u.loadByContinuationToken&&(f.loadByContinuationToken=function(n,t,i,f,e){return u.loadByContinuationToken(r,t,i,f,e)}),new t.RemoteDataNavigator(n,e,r.metadata,f,r.partialErrors)}throw new Error("Cannot create a DataNavigator, because the QueryCache has no navigation options configured.");},u.prototype._findMatchingEntity=function(t,i){var r=function(n){return t(n,i)};return this._findEntity((function(t,i){var u=i&&ko.unwrap(i);return u&&n.find(u,r)}),i)},u.prototype._getDataFromDataSet=function(n){var t=n.data;if(!ko.isObservable(t)||!Array.isArray(t()))throw new Error("DataSets used with QueryCache must contain an observable-wrapped array.");return n.data},u})(FxImpl.Data.DataCache);t.QueryCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n.noop,r=(function(t){function r(n,r,u){var f=t.call(this,n,r,u||{})||this;f._items=ko.observableArray();f._metadata=ko.observable(null);var e=f._loadedCacheEntry,o=f._items,s=f._metadata;return ko.reactor(r,(function(){var n=[],r=e(),t;r&&(t=r.data,i(t),n=t(),n=n.slice());o(n)})),ko.reactor(r,(function(){var n=e(),t=n&&n.navigationMetadata();s(t||null)})),f}return __extends(r,t),Object.defineProperty(r.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"metadata",{get:function(){return this._metadata},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this._items},enumerable:!1,configurable:!0}),__decorate([__metadata("fx:diagnostics",[require,"QueryView"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object])],r)})(FxImpl.Data.DataView);t.QueryView=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function t(n,t){var i=t?encodeURIComponent:null;return function(t){var r=typeof t,u=r==="string"||r==="number"?{id:t}:t;return n.format(u,i)}}n.uriFormatter=t})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={}))