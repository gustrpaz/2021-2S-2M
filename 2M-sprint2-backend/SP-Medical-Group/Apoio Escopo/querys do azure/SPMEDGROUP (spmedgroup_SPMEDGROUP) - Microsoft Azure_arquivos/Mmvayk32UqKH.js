/*!
 * Fuse.js v3.4.4 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */
(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?
define("_oss/fuse",[],t):typeof exports=="object"?exports.Fuse=t():n.Fuse=t()})(this,(function(){return (function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((i&1&&(n=t(n)),i&8)||i&4&&typeof n=="object"&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),i&2&&typeof n!="string")for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s="./src/index.js")})({"./src/bitap/bitap_matched_indices.js":function(n){n.exports=function(){for(var f,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,r=[],n=-1,u=-1,t=0,o=i.length;t<o;t+=1)f=i[t],f&&n===-1?n=t:f||n===-1||(u=t-1,u-n+1>=e&&r.push([n,u]),n=-1);return i[t-1]&&t-n>=e&&r.push([n,t-1]),r}},"./src/bitap/bitap_pattern_alphabet.js":function(n){n.exports=function(n){for(var t,i={},r=n.length,u=0;u<r;u+=1)i[n.charAt(u)]=0;for(t=0;t<r;t+=1)i[n.charAt(t)]|=1<<r-t-1;return i}},"./src/bitap/bitap_regex_search.js":function(n){var t=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;n.exports=function(n,i){var h=arguments.length>2&&arguments[2]!==undefined?arguments[2]:/ +/g,c=new RegExp(i.replace(t,"\\$&").replace(h,"|")),u=n.match(c),f=!!u,o=[],r,s,e;if(f)for(r=0,s=u.length;r<s;r+=1)e=u[r],o.push([n.indexOf(e),e.length-1]);return{score:f?.5:1,isMatch:f,matchedIndices:o}}},"./src/bitap/bitap_score.js":function(n){n.exports=function(n,t){var i=t.errors,h=i===void 0?0:i,r=t.currentLocation,c=r===void 0?0:r,u=t.expectedLocation,l=u===void 0?0:u,f=t.distance,e=f===void 0?100:f,o=h/n.length,s=Math.abs(l-c);return e?o+s/e:s?1:o}},"./src/bitap/bitap_search.js":function(n,t,i){var r=i("./src/bitap/bitap_score.js"),u=i("./src/bitap/bitap_matched_indices.js");n.exports=function(n,t,i,f){for(var ht,ct,l,w,h,lt,o,b,rt,vt,ut=f.location,yt=ut===void 0?0:ut,ft=f.distance,v=ft===void 0?100:ft,et=f.threshold,pt=et===void 0?.6:et,ot=f.findAllMatches,wt=ot===void 0?!1:ot,st=f.minMatchCharLength,bt=st===void 0?1:st,e=yt,k=n.length,c=pt,s=n.indexOf(t,e),y=t.length,nt=[],tt=0;tt<k;tt+=1)nt[tt]=0;s!==-1&&(ht=r(t,{errors:0,currentLocation:s,expectedLocation:e,distance:v}),c=Math.min(ht,c),s=n.lastIndexOf(t,e+y),s!==-1&&(ct=r(t,{errors:0,currentLocation:s,expectedLocation:e,distance:v}),c=Math.min(ct,c)));s=-1;var d=[],p=1,g=y+k,kt=1<<y-1;for(l=0;l<y;l+=1){for(w=0,h=g;w<h;)lt=r(t,{errors:l,currentLocation:e+h,expectedLocation:e,distance:v}),lt<=c?w=h:g=h,h=Math.floor((g-w)/2+w);g=h;var at=Math.max(1,e-h+1),it=wt?k:Math.min(e+h,k)+y,a=Array(it+2);for(a[it+1]=(1<<l)-1,o=it;o>=at;o-=1)if(b=o-1,rt=i[n.charAt(b)],rt&&(nt[b]=1),a[o]=(a[o+1]<<1|1)&rt,l!==0&&(a[o]|=(d[o+1]|d[o])<<1|1|d[o+1]),a[o]&kt&&(p=r(t,{errors:l,currentLocation:b,expectedLocation:e,distance:v}),p<=c)){if(c=p,s=b,s<=e)break;at=Math.max(1,2*e-s)}if(vt=r(t,{errors:l+1,currentLocation:e,expectedLocation:e,distance:v}),vt>c)break;d=a}return{isMatch:s>=0,score:p===0?.001:p,matchedIndices:u(nt,bt)}}},"./src/bitap/index.js":function(n,t,i){function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function r(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function f(n,t,i){return t&&r(n.prototype,t),i&&r(n,i),n}var e=i("./src/bitap/bitap_regex_search.js"),o=i("./src/bitap/bitap_search.js"),s=i("./src/bitap/bitap_pattern_alphabet.js"),h=(function(){function n(t,i){var r=i.location,y=r===void 0?0:r,f=i.distance,p=f===void 0?100:f,e=i.threshold,w=e===void 0?.6:e,o=i.maxPatternLength,h=o===void 0?32:o,c=i.isCaseSensitive,b=c===void 0?!1:c,l=i.tokenSeparator,k=l===void 0?/ +/g:l,a=i.findAllMatches,d=a===void 0?!1:a,v=i.minMatchCharLength,g=v===void 0?1:v;u(this,n);this.options={location:y,distance:p,threshold:w,maxPatternLength:h,isCaseSensitive:b,tokenSeparator:k,findAllMatches:d,minMatchCharLength:g};this.pattern=this.options.isCaseSensitive?t:t.toLowerCase();this.pattern.length<=h&&(this.patternAlphabet=s(this.pattern))}return f(n,[{key:"search",value:function(n){if(this.options.isCaseSensitive||(n=n.toLowerCase()),this.pattern===n)return{isMatch:!0,score:0,matchedIndices:[[0,n.length-1]]};var i=this.options,r=i.maxPatternLength,u=i.tokenSeparator;if(this.pattern.length>r)return e(n,this.pattern,u);var t=this.options,f=t.location,s=t.distance,h=t.threshold,c=t.findAllMatches,l=t.minMatchCharLength;return o(n,this.pattern,this.patternAlphabet,{location:f,distance:s,threshold:h,findAllMatches:c,minMatchCharLength:l})}}]),n})();n.exports=h},"./src/helpers/deep_value.js":function(n,t,i){var u=i("./src/helpers/is_array.js"),r=function r(n,t,i){var f,o,c;if(t){var s=t.indexOf("."),h=t,e=null;if(s!==-1&&(h=t.slice(0,s),e=t.slice(s+1)),f=n[h],f!==null&&f!==undefined)if(e||typeof f!="string"&&typeof f!="number")if(u(f))for(o=0,c=f.length;o<c;o+=1)r(f[o],e,i);else e&&r(f,e,i);else i.push(f.toString())}else i.push(n);return i};n.exports=function(n,t){return r(n,t,[])}},"./src/helpers/is_array.js":function(n){n.exports=function(n){return Array.isArray?Array.isArray(n):Object.prototype.toString.call(n)==="[object Array]"}},"./src/index.js":function(n,t,i){function r(n){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function u(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function o(n,t,i){return t&&u(n.prototype,t),i&&u(n,i),n}var f=i("./src/bitap/index.js"),s=i("./src/helpers/deep_value.js"),h=i("./src/helpers/is_array.js"),c=(function(){function n(t,i){var r=i.location,it=r===void 0?0:r,u=i.distance,rt=u===void 0?100:u,f=i.threshold,ut=f===void 0?.6:f,o=i.maxPatternLength,ft=o===void 0?32:o,h=i.caseSensitive,et=h===void 0?!1:h,c=i.tokenSeparator,ot=c===void 0?/ +/g:c,l=i.findAllMatches,st=l===void 0?!1:l,a=i.minMatchCharLength,ht=a===void 0?1:a,v=i.id,ct=v===void 0?null:v,y=i.keys,lt=y===void 0?[]:y,p=i.shouldSort,at=p===void 0?!0:p,w=i.getFn,vt=w===void 0?s:w,b=i.sortFn,yt=b===void 0?function(n,t){return n.score-t.score}:b,k=i.tokenize,pt=k===void 0?!1:k,d=i.matchAllTokens,wt=d===void 0?!1:d,g=i.includeMatches,bt=g===void 0?!1:g,nt=i.includeScore,kt=nt===void 0?!1:nt,tt=i.verbose,dt=tt===void 0?!1:tt;e(this,n);this.options={location:it,distance:rt,threshold:ut,maxPatternLength:ft,isCaseSensitive:et,tokenSeparator:ot,findAllMatches:st,minMatchCharLength:ht,id:ct,keys:lt,includeMatches:bt,includeScore:kt,shouldSort:at,getFn:vt,sortFn:yt,verbose:dt,tokenize:pt,matchAllTokens:wt};this.setCollection(t)}return o(n,[{key:"setCollection",value:function(n){return this.list=n,n}},{key:"search",value:function(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(n,'"'));var r=this._prepareSearchers(n),f=r.tokenSearchers,e=r.fullSearcher,u=this._search(f,e),o=u.weights,t=u.results;return this._computeScore(o,t),this.options.shouldSort&&this._sort(t),i.limit&&typeof i.limit=="number"&&(t=t.slice(0,i.limit)),this._format(t)}},{key:"_prepareSearchers",value:function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",r=[],t,n,u,e;if(this.options.tokenize)for(t=i.split(this.options.tokenSeparator),n=0,u=t.length;n<u;n+=1)r.push(new f(t[n],this.options));return e=new f(i,this.options),{tokenSearchers:r,fullSearcher:e}}},{key:"_search",value:function(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],h=arguments.length>1?arguments[1]:undefined,i=this.list,c={},u=[],t,l,f,r,a,o,e,v,n;if(typeof i[0]=="string"){for(t=0,l=i.length;t<l;t+=1)this._analyze({key:"",value:i[t],record:t,index:t},{resultMap:c,results:u,tokenSearchers:s,fullSearcher:h});return{weights:null,results:u}}for(f={},r=0,a=i.length;r<a;r+=1)for(o=i[r],e=0,v=this.options.keys.length;e<v;e+=1){if(n=this.options.keys[e],typeof n!="string"){if(f[n.name]={weight:1-n.weight||1},n.weight<=0||n.weight>1)throw new Error("Key weight has to be > 0 and <= 1");n=n.name}else f[n]={weight:1};this._analyze({key:n,value:this.options.getFn(o,n),record:o,index:r},{resultMap:c,results:u,tokenSearchers:s,fullSearcher:h})}return{weights:f,results:u}}},{key:"_analyze",value:function(n,t){var o=n.key,ut=n.arrayIndex,ft=ut===void 0?-1:ut,i=n.value,et=n.record,l=n.index,ot=t.tokenSearchers,a=ot===void 0?[]:ot,st=t.fullSearcher,ht=st===void 0?[]:st,ct=t.resultMap,v=ct===void 0?{}:ct,lt=t.results,at=lt===void 0?[]:lt,u,b,f,y,k,d,p,tt,w,e,it,rt,c,pt;if(i!==undefined&&i!==null){var vt=!1,r=-1,yt=0;if(typeof i=="string"){if(this._log("\nKey: ".concat(o===""?"-":o)),u=ht.search(i),this._log('Full text: "'.concat(i,'", score: ').concat(u.score)),this.options.tokenize){for(b=i.split(this.options.tokenSeparator),f=[],y=0;y<a.length;y+=1){for(k=a[y],this._log('\nPattern: "'.concat(k.pattern,'"')),d=!1,p=0;p<b.length;p+=1){var s=b[p],g=k.search(s),nt={};g.isMatch?(nt[s]=g.score,vt=!0,d=!0,f.push(g.score)):(nt[s]=1,this.options.matchAllTokens||f.push(1));this._log('Token: "'.concat(s,'", score: ').concat(nt[s]))}d&&(yt+=1)}for(r=f[0],tt=f.length,w=1;w<tt;w+=1)r+=f[w];r=r/tt;this._log("Token score average:",r)}e=u.score;r>-1&&(e=(e+r)/2);this._log("Score average:",e);it=this.options.tokenize&&this.options.matchAllTokens?yt>=a.length:!0;this._log("\nCheck Matches: ".concat(it));(vt||u.isMatch)&&it&&(rt=v[l],rt?rt.output.push({key:o,arrayIndex:ft,value:i,score:e,matchedIndices:u.matchedIndices}):(v[l]={item:et,output:[{key:o,arrayIndex:ft,value:i,score:e,matchedIndices:u.matchedIndices}]},at.push(v[l])))}else if(h(i))for(c=0,pt=i.length;c<pt;c+=1)this._analyze({key:o,arrayIndex:c,value:i[c],record:et,index:l},{resultMap:v,results:at,tokenSearchers:a,fullSearcher:ht})}}},{key:"_computeScore",value:function(n,t){var r,s,i;for(this._log("\n\nComputing score:\n"),r=0,s=t.length;r<s;r+=1){var u=t[r].output,c=u.length,h=1,f=1;for(i=0;i<c;i+=1){var e=n?n[u[i].key].weight:1,l=e===1?u[i].score:u[i].score||.001,o=l*e;e!==1?f=Math.min(f,o):(u[i].nScore=o,h*=o)}t[r].score=f===1?h:f;this._log(t[r])}}},{key:"_sort",value:function(n){this._log("\n\nSorting....");n.sort(this.options.sortFn)}},{key:"_format",value:function(n){var o=[],u,t,f,h,i,s,e,c;for(this.options.verbose&&(u=[],this._log("\n\nOutput:\n\n",JSON.stringify(n,(function(n,t){if(r(t)==="object"&&t!==null){if(u.indexOf(t)!==-1)return;u.push(t)}return t}))),u=null),t=[],this.options.includeMatches&&t.push((function(n,t){var f=n.output,r,e,i,u;for(t.matches=[],r=0,e=f.length;r<e;r+=1)(i=f[r],i.matchedIndices.length!==0)&&(u={indices:i.matchedIndices,value:i.value},i.key&&(u.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(u.arrayIndex=i.arrayIndex),t.matches.push(u))})),this.options.includeScore&&t.push((function(n,t){t.score=n.score})),f=0,h=n.length;f<h;f+=1){if(i=n[f],this.options.id&&(i.item=this.options.getFn(i.item,this.options.id)[0]),!t.length){o.push(i.item);continue}for(s={item:i.item},e=0,c=t.length;e<c;e+=1)t[e](i,s);o.push(s)}return o}},{key:"_log",value:function(){if(this.options.verbose){var n;(n=console).log.apply(n,arguments)}}}]),n})();n.exports=c}})}));
define("MsPortalImpl/UI/Hubs/UI.FavoritesManagerDeferred",["require","exports","Fx/DependencyInjection","MsPortalImpl/Services/Services.AssetTypes","MsPortalImpl/Services/Services.BrowseCuration","MsPortalImpl/UI/Hubs/UI.BrowseManager","MsPortalImpl/UI/Hubs/UI.FavoritesManager","_oss/fuse","MsPortalImpl/Services/Services.Recents","FxHubs/ResourceManagement"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";function y(n,t,i){return t===a.BrowseResourceGroupBlade&&(t=a.ResourceGroups),d.getAssetTypeOrResourceTypeIdByWindowId(n,t)+(i?"."+i.toLowerCase():"")}function ft(n,t){return n.extensionName===t.extension&&n.assetType===t.assetTypeManifest.name}function et(n){if(n.item.boost)if(n.item.boost>2&&(n.item.boost=2),n.item.boost<-2&&(n.item.boost=-2),n.item.boost>0)n.score=Math.pow(n.score,1+n.item.boost);else if(n.item.boost<0){var t=1+Math.abs(n.item.boost);n.score=Math.pow(n.score,1/t)}}function p(n,t){var u=t.toLocaleLowerCase(),i=[],r=[];return n.forEach((function(n){var t=n.item.assetType.compositeDisplayName.service.toLocaleLowerCase().startsWith(u);t?i.push(n):r.push(n)})),i.concat(r)}function w(n,t,i,r){var s=i?ut:c,h=new o(t,s),e=h.search(n),u,f;return(e=e.filter((function(n){return n.score<=c.threshold})),u=e.reduce((function(n,t){return et(t),t.score<=c.threshold&&n.push(t),n}),[]),u.sort((function(n,t){return n.score-t.score})),r&&(f=r.find((function(t){return t.toLocaleLowerCase()===n.toLocaleLowerCase()})),f===null||f===void 0?void 0:f.length))?u:p(u,n)}var b;Object.defineProperty(t,"__esModule",{value:!0});t.FavoritesManagerDeferred=t.allServicesWithOverviewEnabled=t.tokenFavoritesPerCategory=t.tokenFavorites=void 0;var l=MsPortalFx.Base,k=l.Constants,a=k.AssetNames,d=FxImpl.Assets,g=l.Diagnostics,nt=MsPortalFx.tryImmediateResolve,ot=g.createLog(n),tt="uncurated",it=/\s+/g,rt=MsPortalFx.find,v=MsPortalFx.stableSort,c={shouldSort:!0,includeScore:!0,includeMatches:!0,tokenize:!0,threshold:.3,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:[{name:"label",weight:.9},{name:"keywords",weight:.3},{name:"resourceType",weight:.1}]},ut=MsPortalFx.extend({matchAllTokens:!0},c);t.allServicesWithOverviewEnabled=MsPortalFx.isFeatureEnabled("allServicesWithOverview");b=(function(){function o(n,i,f,o,h){var c=this;this._assetTypeService=n;this._browseManager=i;this._favoritesManager=f;this._diContainer=o;this._recentsManager=h;this.categories=ko.observableArray();this.categoriesLookup={};this.showCategories=ko.observable(!1);this.possibleFavorites=ko.observableArray();this.possibleFavoritesLookup={};this._ltm=new FxImpl.TriggerableLifetimeManager;this._extensionToDefaultCategoryMap={};this._assetTypes=ko.observable();this._categoriesInitialized=!1;this._recentsManager=this._diContainer.get(s.RecentServicesManager);this._assetTypes([]);nt(this._assetTypeService.assetTypesComplete,(function(){var n=c._browseManager.getFilteredAssetTypes()||[];n.length&&c._assetTypes(n)}));this.initializeCategories=MsPortalFx.memoizeQ((function(){if(c._categoriesInitialized)return Q();var n=c._curationPromise||u.getBrowseCuration(),i=t.allServicesWithOverviewEnabled&&u.getAllServicesAdditionalData();return c._categoriesInitialized=!0,Q.all([n,i]).then((function(n){var i=n[0],f=n[1],h,u;c._discoveryPolicy=i.discoveryPolicy||0;c._curationSearchKeywords=i.globalSearchKeywords;var o=function(n,t){var i=f&&f.categoriesDataMap[n],u={id:n,showLabel:ko.observable(!0),isFilteredOut:ko.observable(!1),isHidden:ko.pureComputed((function(){return!u.possibleFavorites().some((function(n){return!n.isHidden()}))})),label:r.provideCategoryName(n),count:ko.observable(0),possibleFavorites:ko.observableArray(),sourceCategory:t,freeTrainings:i&&i.trainings,usefulLinks:i&&i.usefulLinks,seeAllTrainingsLink:i&&i.seeAllTrainingsLink};return u},s=i.categories||[],t=s.map((function(n){return o(n.id,n)}));return t&&t.length&&(h=c._uncuratedCategory=o(tt),t.push(h)),c.categories(t),c.possibleFavorites().forEach((function(n){var t=e.getAssetTypeKind(n.assetType,n.kind),i=n.assetType,r=e.getAssetTypeDisplayText(i,t);n.label=r;n.labelId=r.replace(it,"");n.image=e.getAssetTypeIcon(i,t);n.keywords=(e.getAssetTypeKeywords(i,t)||"").split(",");n.isHidden(n.isHidden())})),u={},s.forEach((function(n){(n.discoveryExtensions||[]).forEach((function(i){u[i]=rt(t,(function(t){return t.id===n.id}))||c._uncuratedCategory}))})),c._extensionToDefaultCategoryMap=u,c._loadFlyoutMenu()}))}))}return o.prototype.updateForRecents=function(n,t){var i=this;return this.initializeCategories().then((function(){return i._recentsManager.getServices().then((function(r){var u=r&&r.length||0,s=n&&n.length,f,e,h,c,o;if(t){if(n||(f=u>t?t:u),s>=t)return n.slice(0,t);f=t-s>=u?u:t-s}else f=u;if(f!==0){for(e=r.slice(0),e.sort((function(n,t){return t.timeStamp-n.timeStamp})),h=n&&n.slice(0)||[],c=function(t){if(!n||!MsPortalFx.find(n,(function(n){return e[t].assetId===n.id.toLowerCase()}))){var r=i.possibleFavoritesLookup[e[t].assetId.toLowerCase()];r&&h.push({relevanceScore:ko.observable(1),id:r.id,image:r.image,isFavorite:r.isFavorite,label:r.label,labelId:r.labelId,keywords:r.keywords,matches:ko.observable(""),uri:r.uri,opensExternal:r.opensExternal,isHidden:ko.observable(!1),isFilteredOut:ko.observable(!1),assetType:r.assetType})}},o=0;o<f;o++)c(o);return h}}))}))},o.prototype._fuzzySearch=function(n,t,i){var f,e=0,s=[],r,h,c,u,o,l,a;return n?(n=n.trim(),r=w(n,t,!1,i?this._curationSearchKeywords:undefined),h=n.split(" "),h.length>1&&(c=w(n,t,!0,i?this._curationSearchKeywords:undefined),r.push.apply(r,c),r.sort((function(n,t){return n.score-t.score})),u=(f=this._curationSearchKeywords)===null||f===void 0?void 0:f.find((function(t){return t.toLocaleLowerCase()===n.toLocaleLowerCase()})),(u===null||u===void 0?void 0:u.length)||(r=p(r,n)),r=MsPortalFx.unique(r,(function(n,t){return MsPortalFx.areEqual(n.item.label,t.item.label)}))),o={},l=1,r.forEach((function(n){if(!n.item.isHidden()){var t=n.matches.filter((function(n){return n.key==="keywords"})),i=t[0]&&t[0].value.trim();o[n.item.label]={relevance:l++,keywordMatch:i}}})),t.forEach((function(t){var r=o[t.label],u=r&&r.relevance||0,f=r&&r.keywordMatch||"";i?r&&(a={relevanceScore:ko.observable(u),id:t.id,image:t.image,isFavorite:t.isFavorite,label:t.label,labelId:t.labelId,keywords:t.keywords,matches:ko.observable(f),uri:t.uri,opensExternal:t.opensExternal,isHidden:t.isHidden,isFilteredOut:ko.observable(n&&!r),assetType:t.assetType},s.push(a)):(t.relevanceScore(u),t.matches(f),t.isFilteredOut(n&&!r))})),e=r.length):(t.forEach((function(n){n.isFilteredOut(!1);n.relevanceScore(0);n.matches("")})),e=t.length),{filteredTypes:i?s:t,matchCount:e}},o.prototype.filterAllServices=function(n){var t=this;return n.possibleFavorites&&n.possibleFavorites.length?Q(this._fuzzySearch(n.filter,n.possibleFavorites,n.dontApplyVisibility)):this.initializeCategories().then((function(){return Q(t._fuzzySearch(n.filter,t.possibleFavorites(),n.dontApplyVisibility))}))},o.prototype.dispose=function(){this._ltm.dispose()},o.prototype._addBrowseMenuItem=function(n,t){var u=y(n.extension,n.assetTypeManifest.name,t),i=e.getFavoriteType(n,t,this._diContainer,u),r;this.possibleFavoritesLookup[u.toLowerCase()]||(this.possibleFavorites().push(i),r=MsPortalFx.find(this._favoritesManager.favorites.value,(function(n){return n.id===i.id})),r&&(i.isFavorite=r.isFavorite),this.possibleFavoritesLookup[i.id.toLowerCase()]=i)},o.prototype._addBrowseMenuItemToCategory=function(n,t,i,r,u,f){var c=y(n.extension,n.assetTypeManifest.name,i),s=e.getFavoriteType(n,i,this._diContainer,c,f),l=MsPortalFx.find(this._favoritesManager.favorites.value,(function(n){return n.id===s.id})),h,o;l&&(l.boost=f);u.some((function(n){return n.id===c}))||(o=this.possibleFavoritesLookup[s.id.toLowerCase()],o&&(s.isFavorite=o.isFavorite,s.isFilteredOut=o.isFilteredOut,s.matches=o.matches,s.relevanceScore=o.relevanceScore,h=s.isHidden=o.isHidden,h(h()||r),o.boost=f),u.splice(t,0,s));r&&(o=this.possibleFavorites().filter((function(n){return n.id===s.id}))[0],o&&o.isHidden(r))},o.prototype._loadFlyoutMenu=function(n){var t=this,e=this.possibleFavoritesLookup,i,r,u,o,s;return this._assetTypes().forEach((function(i){t._addBrowseMenuItem(i,undefined,n)})),i=this.categories(),this.showCategories(!!i.length),r=Object.keys(e).slice(0),i.forEach((function(n){var u=n.possibleFavorites;u();var f=n.sourceCategory,e=f&&f.items||[],i=[];e.length&&(e.forEach((function(n,u){var f=-1,e,o;t._assetTypes().some((function(t){if(ft(n,t)){var i=(n.kind||"").toLowerCase();o=i&&t.kindMap&&t.kindMap[i]&&n.kind;f=u;e=t}return f>-1}));f>-1&&(o&&t._addBrowseMenuItem(e,o),MsPortalFx.remove(r,e.id.toLowerCase()),t._addBrowseMenuItemToCategory(e,f,o,!!n.isHidden,i,n.boost))})),u(i),n.count(i.filter((function(n){return!n.isHidden()})).length))})),u=this._uncuratedCategory,o=[],u&&(s=v(r.map((function(n){return e[n]})),(function(n,t){return f.compareAssetTypeForSort(n.label,t.label)})),s.forEach((function(n){var r=n.assetType,f=t._extensionToDefaultCategoryMap[r.extension],s=f||u,c=!f&&t._discoveryPolicy===1||h.supportsOption(r.assetTypeManifest.options,1),l=t.possibleFavorites().filter((function(t){return t.id===n.id}))[0],e,i;l&&l.isHidden(c);e=s.possibleFavorites;i=[];i=f?e():o;t._addBrowseMenuItemToCategory(r,i.length,undefined,c,i);e(i);s.count(i.length)}))),this.possibleFavorites(v(this.possibleFavorites(),(function(n,t){return f.compareAssetTypeForSort(n.label,t.label)}))),Q(this.categories())},__decorate([__metadata("fx:diagnostics",[n,"FavoritesManagerDeferred"]),i.Class(),__metadata("design:paramtypes",[r.AssetTypeService,f.BrowseManager,e.FavoritesManager,i.Container,s.RecentServicesManager])],o)})();t.FavoritesManagerDeferred=b}));
define("MsPortalImpl/Widgets/Widgets.SharedOptionsInit",["require","exports","Fx/ResourceManagement","FxHubs/RpcEndPoints","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.ArmIdHelpers","MsPortalImpl/Base/Base.DeepLink","MsPortalImpl/Base/Base.Router","MsPortalImpl/Services/Services.AssetTypes","MsPortalImpl/Services/Services.Recents","MsPortalImpl/UI/Compositions/UI.Composition.Services","MsPortalImpl/Services/Services.Subscriptions"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";function nt(){p&&(clearTimeout(p),p=null)}function tt(n,t,r,f){var e,o,s,h;return(f=f||i.ArmId.parse(r,!0),f.kind===0)?"":(e=[],f.subscription&&(o=t.get(f.subscription),e.push({name:o&&o.uniqueDisplayName||f.subscription,type:u.Search.subscriptionsType})),f.resourceGroup&&e.push({name:f.resourceGroup,type:u.Search.resourceGroupType}),f.resourceIds.length&&(s=f.provider,f.resourceIds.forEach((function(t,i){s+="/"+f.resourceTypes[i];var r=n.getAssetTypeByResourceType(s);e.push({name:t,type:r?r.compositeDisplayName.singular:f.resourceTypes[i]})}))),h=e.pop(),"{0}\n{1}\n\n{2}".format(h.name,h.type,e.map((function(n){return n.type+": "+n.name})).reverse().join("\n")))}function ut(n,t,i){it(t).then((function(t){var o;t=t||{};i=i||[];var s=t.type,r=t.value,f=i.length,e="",h=!1;r&&(o=!0,s===1||s===2?r===f?e=u.Search.searchingAllSubs:(e=u.Search.searchingSelectedSubsOfTotal.format(f,r),r<=20&&(h=!0,o=!1)):f&&(e=u.Search.searchingSelectedSubsOnly.format(f)),n.subscriptionSummary(e),n.showChangeSubscriptions(o),n.showAllSubscriptionsSearch(h))}))}function ft(){return MsPortalFx.require("MsPortalImpl/Services/Services.Search")}function et(n,it,et){function st(n,t,i,r){ct({source:"TopBar",action:t,data:n});a.action=i;ht.route(r)}var ot=et.get(s.AssetTypeService),lt=et.get(h.RecentServicesManager),ct=v.trace,at=parseInt(MsPortalFx.getFeatureValue("search")),ht;et.get(l.SubscriptionsUserContext).getInSessionSelectedSubscriptions().then((function(t){t.subscribeAndRun(n,(function(n){it.showResults(!1);ut(it,et,n)}))}));it.showMenu.subscribe(n,(function(n){nt();n?(y&&v.cancelTrace(y),a={version:d,correlationId:++g,action:""},y=v.start({source:"Search",action:"SearchSession"}),it.showResults()||it.filter.valueHasMutated()):(a.action||(a.action=it.showResults()?"AbandonedResult":"AbandonedRecent"),v.completeTrace(y,a),y=null,p=setTimeout((function(){it.filter("");it.results([]);nt()}),t.searchClearTimeInMillies))}));it.results.subscribe(n,(function(n){it.showExternalColumn(n.some((function(n){return n.results.some((function(n){return n.isExternal}))})))}));it.openFeedbackPane=function(){et.getAsync(c.FeedbackPaneInfo).then((function(n){var t=n.widget;t.isVisible()||(a.action="Feedback",t.toggle({title:u.Search.feedbackTitle,action:"SearchFeedback"},{correlationId:a.correlationId}))}))};ht=et.get(o.Router);it.openAllResourcesBlade=function(n){st(n,"SearchAllResourcesExecuted","AllResources",s.getBrowseAllDeeplink()+"/filter/"+n)};it.openAllResourceGroupsBlade=function(n){st(n,"SearchResourceGroupsExecuted","AllResourceGroups","#blade/HubsExtension/Resources/resourceType/Microsoft.Resources%2Fsubscriptions%2FresourceGroups/filter/"+n)};it.openMarketplaceBlade=function(n){st(n,"SearchMarketplaceExecuted","Marketplace","#blade/Microsoft_Azure_Marketplace/GalleryFeaturedMenuItemBlade/selectedMenuItemId/home/searchQuery/"+n)};it.openRecentsBlade=function(){st("","SearchAllRecentsExecuted","AllRecents","#blade/HubsExtension/Resources/resourceType/Microsoft.Resources%2Frecent")};it.openResultItemBlade=function(n,t,r){ct({source:"TopBar",action:"SearchResultOpened",data:{id:r.id,resultType:r.resultType,type:r.origAssetType,deepLink:r.deepLink}});it.showResults()?a.action="Result":(a.query="",a.action="Recent");var u="BrowseItem",o=r.id,e=r.armId||i.ArmId.parse(r.id,!0);f.isResourceAtAnyLevel(e)?u="Resource":e.kind===4?u="ResourceGroup":e.kind===1&&(u="Subscription");a.item={id:o,displayName:r.origDisplayName||r.displayName,subName:r.origSubName||r.subName,resultType:u,assetType:r.origAssetType||r.typeName,position:t};r.resultType===3&&r.detailsType===1&&lt.addService(r.id);r.isExternal?window.open(r.deepLink):ht.route(r.deepLink)};it.performSearch=function(n){n=(n||"").trim();a.query=n;a.queryCount=(a.queryCount||0)+1;var t=v.start({source:"TopBar",action:"SearchExecuted"}),i={criteria:n,resultCount:at};return b(et).then((function(r){return ft().then((function(f){return f.search(i,et).then((function(i){v.completeTrace(t,{filter:n,result:i.map((function(n){return(n.results||[]).length})).reduce((function(n,t){return n+t}),0)});var f=[],o=i.map((function(n){var o=(n.results||[]).map((function(n){var i,o,f,t,s,h,c;return n.details&&(n.detailsType===0?(f=n.details,o=f.extensionName+w+f.assetType,i=e.getAssetDeepLink(et,f)):n.detailsType===1?(t=n.details,s=ot.getAssetType(t.extensionName,t.assetType),o=t.extensionName+w+t.assetType,s&&(i=ot.getAssetTypeDeepLink(s))):i=n.details),h=n.isPreview?u.Search.previewLabelFmt.format(n.displayName):n.displayName,c=n.subName,{id:n.id,armId:n.armId,displayName:h,subName:c,subNameFmt:n.subNameFmt,resultType:n.resultType,typeName:n.typeName,icon:n.icon,toolTip:tt(ot,r,n.id,n.armId),isExternal:n.detailsType===3,filteredSubName:n.filteredSubName,deepLink:i,detailsType:n.detailsType,origDisplayName:h,origSubName:c,origAssetType:o}})),t=n.totalResultsCount,i;i=t<=0?u.Search.zeroResults:u.Search.seeAllResults.format(t);f.push({displayName:n.displayName,results:o,totalResultsCount:n.totalResultsCount||0,moreResultsLinkText:i,moreLinkType:n.moreLinkType,moreLinkDetails:n.moreLinkDetails})}));return Q.all(o).then((function(){return f}))}))})).catch((function(n){v.cancelTrace(t,{error:n});throw n;}))}))};it.isDropdownInitialized().then((function(){ko.computed(n,(function(){var t=it.filter(),n;t||(n=r.AssetTypes.getRecentResourcesEndPoint.invoke(rt.client,"HubsExtension",{limit:10}).then((function(n){return n.map((function(n){return b(et).then((function(t){var i=n.assetTypeInformation,o=(n.resourceKind||i.defaultKind||"").toLowerCase(),r=i.kindMap&&i.kindMap[o],s=r&&r.icon||i.icon||k.Images.Polychromatic.ResourceDefault(),h=r&&r.singularDisplayName||i.compositeDisplayName&&i.compositeDisplayName.singular||i.resourceType,f=n.assetTypeInformation.isPreview?u.Search.previewLabelFmt.format(n.name):n.name;return{id:n.resourceId,armId:n.armId,displayName:f,resultType:0,typeName:h,icon:s,toolTip:tt(ot,t,n.resourceId,n.armId),deepLink:e.getAssetDeepLink(et,{extensionName:i.extensionName,assetType:i.assetType,assetId:n.resourceId}),detailsType:0,origDisplayName:f,origAssetType:i.extensionName+w+i.assetType}}))}))})),n.then((function(n){return Q.allSettled(n).then((function(n){it.mruItems(n.filter((function(n){return n.state==="fulfilled"&&n.value})).slice(0,5).map((function(n){return n.value})))}))})))}))}))}var b,it;Object.defineProperty(t,"__esModule",{value:!0});t.initSearchWidgetOptions=t.searchClearTimeInMillies=void 0;var k=MsPortalFx.Base,v=k.Diagnostics.Telemetry,rt=FxImpl.Rpc,ot=r.Subscriptions.CountTypeEnum,w=".";t.searchClearTimeInMillies=3e5;var p,d=1,y,g=0,a={version:d,correlationId:g,action:""};b=MsPortalFx.memoizeQ((function(n){return n.get(l.SubscriptionsUserContext).getInSessionSelectedSubscriptions().then((function(n){var t=FxImpl.lowerCaseStringMap();return n().forEach((function(n){return t.set(n.subscriptionId,n)})),t}))}));it=function(n){return n.get(l.SubscriptionsUserContext).getAllSubscriptionsCount()};t.initSearchWidgetOptions=et}));
define("_generated/Less/MsPortalImpl/Widgets/Widgets.SideBarFlyout.css",["module"],(function(n){"use strict";return{css:".fxs-sidebar-flyout{min-width:320px;list-style:none}.fxs-sidebar-flyout-collapsed-layout .fxs-sidebar-category-label-wrapper{width:calc(100vw - 20px)}.fxs-sidebar-hint-text{text-align:right;font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:5px}.fxs-sidebar-hint-text-hide{visibility:hidden}.fxs-sidebar-hide{display:none !important}.fxs-sidebar-browse-flyout{height:100%}.fxs-sidebar-flyout-header{height:20px;margin:0 0 10px;text-align:right}.fxs-sidebar-flyout-icon{flex:0 0 18px;display:flex;align-items:center;height:18px}.fxs-sidebar-flyout-icon svg,.fxs-sidebar-flyout-icon img{height:18px;width:18px}.fxs-sidebar-possible-favorites{height:calc(100% - 80px);overflow-y:auto;overflow-x:hidden}.fxs-sidebar-flyout .fxs-sidebar-flyout-allcategories-list{width:100%;padding-left:20px;list-style:none;margin:0}.fxs-sidebar-is-collapsed .fxs-sidebar-flyout .fxs-sidebar-flyout-allcategories-list{width:calc(100vw - 300px)}.fxs-sidebar-flyout.fxs-sidebar-flyout-filtered .fxs-sidebar-category{display:block}.fxs-sidebar-flyout.fxs-sidebar-flyout-filtered .fxs-sidebar-flyout-allservices-list{flex-flow:column wrap}.fxs-sidebar-flyout .fxs-sidebar-label{margin-left:10px;width:auto;padding-right:5px}.fxs-sidebar-flyout-item-link{display:flex;flex:1 1 auto;align-items:center;height:40px;padding-left:10px;width:160px;max-height:70px}a.fxs-sidebar-flyout-item-link:hover{text-decoration:none}.fxs-sidebar-flyout .fxs-sidebar-item-category:not(:first-child){margin:10px 5px 0 0}.fxs-sidebar-flyout .fxs-sidebar-item{align-items:flex-start;display:flex;min-height:35px;max-width:400px;margin-right:40px}.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-matches-prefix{font-weight:600}.fxs-sidebar-flyout .fxs-sidebar-item .fxs-sidebar-matches{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:10px;text-align:left;display:block}.fxs-sidebar-flyout .fxs-sidebar-item:hover .fxs-sidebar-star svg,.fxs-sidebar-flyout .fxs-sidebar-item.fxs-portal-selected .fxs-sidebar-star svg{opacity:1}.fxs-sidebar-flyout-item-content{display:flex;align-items:center;flex:1 1 auto;width:400px;max-height:40px}.fxs-sidebar-star{flex:0 0 auto;display:flex;align-items:center;justify-content:center;align-self:center;height:30px;width:30px;cursor:pointer}.fxs-sidebar-star svg{height:14px;width:14px;opacity:.6;fill:#0078d4}.fxs-sidebar-star.fxs-is-favorite svg{opacity:1}.fxs-mode-dark .fxs-sidebar-star svg{fill:#f2f2f2}.fxs-sidebar-category-label-wrapper,.fxs-sidebar-category-label-wrapper-noclick{display:flex;align-items:center;margin-top:10px;height:25px;width:calc(100vw - 300px)}.fxs-sidebar-category-label-wrapper:hover,.fxs-sidebar-category-label-wrapper-noclick:hover{cursor:pointer}.fxs-sidebar-category-label-divider{flex:1 1 auto;border-bottom-width:1px;border-bottom-style:solid;height:0;margin:0 5px}.fxs-sidebar-category-label{text-transform:uppercase;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:600;font-size:10px;text-align:left;padding-right:5px;flex:0 0 auto !important}.fxs-sidebar-category-button{flex:0 0 auto;height:25px !important;width:25px !important;border:0}.fxs-sidebar-category-button>svg{height:10;width:10}.fxs-sidebar-category-button-transform{transform:scale(-1,-1);background-color:rgba(255,255,255,.3)}.fxs-sidebar-filter-input{max-width:124px;margin:0;flex:0 0 auto;border-style:none;height:21px}.fxs-sidebar-flyout .fxs-sidebar-content{height:40px;padding:20px 10px 0 20px;display:flex;flex:1 1 auto;flex-wrap:wrap}.fxs-sidebar-flyout-title-text{font-size:18px;flex:0 0 auto;font-weight:600}.fxs-sidebar-flyout-link{font-size:13px;line-height:1.385;padding-right:10px;padding-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fxs-sidebar-flyout-link:hover{text-decoration:underline}.fxs-sidebar-flyout-state{padding-right:10px;padding-left:5px;margin-left:auto;display:flex;flex:0 1 auto;flex-wrap:wrap;align-self:center;margin-bottom:25px}.fxs-sidebar-flyout-noresults{margin:auto;display:flex;justify-content:center;flex-direction:column}.fxs-sidebar-flyout-noresultsicon{height:120px;width:120px;padding-top:100px;opacity:.4;align-self:center}.fxs-sidebar-flyout-noresultstext{text-align:center;font-size:15px;margin-top:12px}.fxs-sidebar-flyout-info{display:flex;margin-right:10px;flex-wrap:wrap}.fxs-sidebar-flyout-actions{display:flex;flex:0 0 auto}.fxs-sidebar-content-wrapper{display:flex}.fxs-sidebar-count-label{font-size:10px}.fxs-sidebar-flyout-searchview{margin-left:20px !important}.fxs-sidebar-flyout .fxs-sidebar-flyout-searchview{margin-top:10px}.fxs-sidebarflyout-category-button{display:flex;align-items:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer;height:32px;font-size:13px;padding-left:10px;font-weight:400}.fxs-sidebarflyout-category-button-overview{font-weight:600}.fxs-sidebar-category-name{margin-left:20px}.fxs-sidebarflyout-filter-wrapper{display:flex;align-items:center;height:22px;border-style:solid;border-width:1px;border-color:#808080;margin-left:100px;margin-top:10px}.fxs-sidebarflyout-category-nodata{cursor:pointer}.fxs-sidebarflyout-list-container{height:100%}.fxs-sidebar-flyout-content-wrapper{height:100%;position:relative;display:flex;flex-direction:row;flex:1 1 auto;margin:0;list-style:none;top:20px}.fxs-sidebar-flyout-category-list{display:flex;flex-direction:column;width:240px;flex:0 0 auto;max-height:calc(100% - 65px);overflow-y:auto}.fxs-sidebar-flyout-allservices-list{display:flex;flex-direction:row;flex:1 1 auto;flex-flow:row wrap;position:relative;padding-left:0;padding-top:10px;overflow:auto;align-content:flex-start}.fxs-sidebar-flyout-freetrainings-container{display:flex;list-style:none;margin-left:-40px;flex-wrap:wrap}.fxs-sidebar-flyout-freetrainings-item{border:1px solid rgba(204,204,204,.5);box-shadow:rgba(0,0,0,.1) 0 2px 4px 0;transition:box-shadow .02s ease 0s;width:280px;margin-right:16px;margin-top:10px;cursor:pointer}.fxs-sidebar-flyout-freetrainings-item:hover{box-shadow:rgba(0,0,0,.14) 0 4px 8px 0;transition:box-shadow .02s ease 0s}.fxs-sidebar-flyout-usefullinks-item-container,.fxs-sidebar-flyout-freetrainings-item-container{flex-direction:column;display:flex;padding:18px}.fxs-sidebar-flyout-usefullinks-item-container:hover,.fxs-sidebar-flyout-freetrainings-item-container:hover{text-decoration:none !important}.fxs-sidebar-flyout-freetrainings-item-container{height:85%;position:relative}.fxs-sidebar-flyout-usefulink-description{padding-bottom:10px;height:80px}.fxs-sidebar-flyout-freetrainings-item-icon{border:2px solid #0078d4;max-height:30px;max-width:30px;margin-bottom:5px;border-radius:50%}.fxs-sidebar-flyout-freetrainings-item-subtitle{display:flex;font-size:13px;line-height:15px;color:#595959;margin-bottom:8px}.fxs-sidebar-flyout-freetrainings-item-description{font-family:az_ea_font,'Segoe UI',az_font,system-ui,-apple-system,BlinkMacSystemFont,Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:13px;line-height:15px;overflow:hidden;text-overflow:ellipsis;color:#323130;height:86px}.fxs-sidebar-flyout-overflow-fade{position:relative;margin-bottom:30px}.fxs-sidebar-flyout-overflow-fade::after{position:absolute;width:100%;left:0;height:26px;content:\"\";bottom:0;background:rgba(0,0,0,0) linear-gradient(0deg,#fff,rgba(255,255,255,0)) repeat scroll 0% 0%}.fxs-mode-dark .fxs-sidebar-flyout-overflow-fade::after{background:rgba(0,0,0,0) linear-gradient(0deg,#111,rgba(255,255,255,0)) repeat scroll 0% 0%}.fxs-sidebar-flyout-start{color:#0078d4;position:absolute;bottom:16px}.fxs-sidebar-flyout-section-loading{top:120px;left:-50px}.fxs-sidebar-flyout-featured-item,.fxs-sidebar-flyout-overview-title-wrapper{display:flex;align-items:center;margin-bottom:10px}.fxs-sidebar-flyout-overview-title{font-weight:600;margin-right:12px;font-size:17px}.fxs-sidebar-flyout-categories-title{font-weight:600;padding-top:15px;padding-bottom:5px;margin-left:28px;border-bottom:1px solid;font-size:15px}.fxs-sidebar-flyout-allcategories-list{max-height:calc(100% - 80px);overflow-y:auto}.fxs-sidebar-flyout-overview-seeAllServices,.fxs-sidebar-flyout-overview-seeAll{font-size:13px;cursor:pointer}.fxs-sidebar-flyout-overview-category{padding-top:20px;max-width:900px}.fxs-sidebar-flyout-usefullinks-item{background-color:#faf9f8;margin-right:16px;margin-top:10px;width:280px;border:1px solid transparent}.fxs-sidebar-flyout-usefullinks-item-title{font-size:14px;font-weight:600;line-height:16px;padding-bottom:10px}.fxs-sidebar-flyout-usefullinks-title{font-weight:600;font-size:18px;margin-top:35px;margin-bottom:10px}.fxs-sidebar-flyout-usefullinks-container{list-style:none;margin-left:-40px;display:flex;flex-wrap:wrap}.fxs-sidebar-flyout-featured-container{list-style:none;display:flex;margin-bottom:15px;margin-left:-40px;flex-wrap:wrap}.fxs-sidebar-flyout-featured-item{height:100px;width:100px;padding:10px;flex:0 0 auto;box-sizing:border-box;border:1px solid transparent;margin-right:8px}.fxs-sidebar-flyout-featured-item:hover{background-color:#fff;border-color:rgba(204,204,204,.8)}.fxs-sidebar-flyout-featured-item-details{height:100%;width:100%;display:flex;align-items:center;flex-direction:column}.fxs-sidebar-flyout-featured-item-details:hover{text-decoration:none !important}.fxs-sidebar-flyout-featured-item-icon{height:32px;width:32px;flex:0 0 auto;margin-bottom:9px}.fxs-sidebar-flyout-featured-item-icon-allservices{height:24px;margin-left:12px;margin-bottom:18px;transform:rotate(90deg);width:24px}.fxs-sidebar-flyout-featured-item-title{text-align:center;overflow:hidden;width:100%;text-overflow:ellipsis}.fxs-sidebar-flyout-category-trainings{display:flex;flex-direction:column;margin-top:120px;flex-basis:100%;padding-bottom:10px}.fxs-sidebar-flyout-category-dropdown{width:180px;padding-left:10px}.fxs-sidebar-flyout-close-hidden{visibility:hidden}.fxs-sidebar-flyout-usefullinks-link:hover{text-decoration:underline}@media all and (min-width:521px){.fxs-sidebarflyout-filter-wrapper{margin-left:15px;margin-top:0}.fxs-sidebar-flyout-content-wrapper{top:0}.fxs-sidebar-flyout-allcategories-list{max-height:calc(100% - 80px)}.fxs-sidebar-filter-input{max-width:180px}}",moduleId:n.id}}));
define("_generated/MsPortalImpl/Svg/Startup/ArrowWideUp.svg",["require","exports"],(function(){"use strict";return{type:282,data:"<svg viewBox='0 0 9.7 14.2' class='msportalfx-svg-placeholder' role='presentation' focusable='false' xmlns:svg='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g><title><\/title><path d='M9 5.6L5.4 1.9v12.3h-1V1.9L.7 5.6 0 4.9 4.9 0l4.8 4.9z'/><\/g><\/svg>"}}));
define("_generated/Templates/WidgetsSideBarFlyout",["require","exports"],(function(){"use strict";return function(){return'<div class="fxs-sidebar-browse-flyout" aria-describedby="browseFlyoutDescriptionId" data-bind="attr: { \'aria-label\': data.text.flyoutAria }"> <div class="fxs-hide-accessible-label" id="browseFlyoutDescriptionId" data-bind="attr: { title: data.text.description, \'aria-hidden\': true }, text: data.text.description"><\/div> <div class="fxs-hide-accessible-label" id="isFavoriteDescriptionId" data-bind="attr: { title: data.text.markedFavoriteDescription, \'aria-hidden\': true }, text: data.text.markedFavoriteDescription"><\/div> <div class="fxs-hide-accessible-label" id="notFavoriteDescriptionId" data-bind="attr: { title: data.text.notFavoriteDescription, \'aria-hidden\': true }, text: data.text.notFavoriteDescription"><\/div> <div class="fxs-hide-accessible-label" id="filterInputDescriptionId" data-bind="attr: { title: data.text.filterInputDescription, \'aria-hidden\': true }, text: data.text.filterInputDescription"><\/div> <!-- ko if: data.isLoading() --> <div class=\'fxs-sidebar-flyout-section-loading\'> <fxs-progress class=\'fxs-progress-small\'><\/fxs-progress> <\/div> <!-- /ko --> <!-- ko ifnot: data.isLoading() --> <div class="fxs-sidebar-content-wrapper"> <div class="fxs-sidebar-content"> <div class="fxs-sidebar-flyout-info"> <span class="fxs-sidebar-flyout-title-text fxs-portal-text" data-bind="attr: { title: data.moreServicesLabel }, text: data.moreServicesLabel"><\/span> <div class="fxs-sidebar-flyout-category-dropdown fxs-portal-bg-txt-br" data-bind="pcControl: data.categoriesDropdown, visible: data.showCategoriesDropdown()"><\/div> <div tabindex="-1" class="fxs-sidebarflyout-filter-wrapper"> <div class="fxs-search-icon-mini" data-bind="image: data.icons.search, attr: { title: data.text.search }"><\/div> <input tabindex="0" class="fxs-sidebar-filter-input fxs-input fxs-portal-border fxs-portal-background fxs-portal-text" role="searchbox" aria-describedby="filterInputDescriptionId" data-bind="attr: { placeholder: data.searchTextPlaceholder, title: data.text.filterInputDescription, \'aria-label\': data.text.search },\r\n                                valueUpdate: \'input\',\r\n                                value: data.filterInputValue" type="text"/> <div role="presentation" class="fxs-search-clear" data-bind="image: data.icons.close, css: { \'fxs-sidebar-flyout-close-hidden\' : !data.isFiltered() }"><\/div> <\/div> <\/div> <\/div> <\/div> <div class= "fxs-sidebar-flyout-content-wrapper"> <ul class="fxs-sidebar-flyout-category-list fxs-sidebar-list" data-bind="visible: !data.showCategoriesDropdown()"> <!-- ko if: data.allServicesWithOverviewEnabled --> <li class="fxs-sidebar-category-name" style="margin-top: 15px;"> <div class="fxs-sidebarflyout-category-button fxs-sidebarflyout-category-button-overview fxs-portal-text fxs-portal-hover" data-bind="text: $root.data.text.overviewCategory, attr: {\'data-category\': \'Overview\', \'title\': $root.data.text.overviewCategory}"><\/div> <\/li> <li class= "fxs-sidebar-flyout-categories-title fxs-portal-border fxs-portal-text" data-bind="text: data.text.categories"><\/li> <!-- /ko --> <li class="fxs-sidebar-category-name"> <div class="fxs-sidebarflyout-category-button fxs-portal-text fxs-portal-hover" data-bind="text: $root.data.text.everythingCategory, attr: {\'data-category\': \'All\', \'title\': $root.data.text.everythingCategory}"><\/div> <\/li> <!-- ko foreach: func._visibleCategoryNames --> <li class="fxs-sidebar-category-name"> <div class="fxs-sidebarflyout-category-button fxs-portal-text fxs-portal-hover" data-bind="text: $data.label, attr: {\'data-category\': $data.id, \'title\': $data.label }"><\/div> <\/li> <!-- /ko --> <\/ul> <div class="fxs-sidebar-flyout-allcategories-list" data-bind="template: { name: \'showByCategory\' }, attr: { \'aria-label\': $root.data.text.listByCategoryAria}"> <\/div> <\/div> <!-- /ko --> <\/div> '}}));
define("_generated/Templates/WidgetsSideBarFlyoutCategoryTrainings",["require","exports"],(function(){"use strict";return function(){return'<div class="fxs-sidebar-flyout-overview-title-wrapper fxs-portal-text"> <div data-bind="text: $root.data.text.freeTrainings" class="fxs-sidebar-flyout-overview-title"><\/div> <a target="_blank" class="fxs-sidebar-flyout-overview-seeAll" data-bind="attr: { href: seeAllTrainingsLink }, text: $root.data.text.seeAll"><\/a> <\/div> <ul class="fxs-sidebar-flyout-freetrainings-container" data-bind="foreach: freeTrainings"> <li class="fxs-sidebar-flyout-freetrainings-item"> <a target="_blank" role="link" class="fxs-sidebar-flyout-freetrainings-item-container fxs-portal-text" data-bind="attr: { href: link }"> <div class="fxs-sidebar-flyout-freetrainings-item-icon fxs-portal-svg" data-bind="image: icon"><\/div> <div class="fxs-sidebar-flyout-usefullinks-item-title" data-bind="text:title"><\/div> <div class="fxs-sidebar-flyout-freetrainings-item-subtitle fxs-portal-subtext"> <div data-bind="text: units"><\/div> <div style="margin-left: 5px; margin-right: 5px;">â€¢<\/div> <div data-bind="text: duration"><\/div> <\/div> <div class="fxs-sidebar-flyout-overflow-fade"> <div class="fxs-sidebar-flyout-freetrainings-item-description fxs-portal-text" data-bind="text: description, attr: { title: description }"><\/div> <\/div> <div class="fxs-sidebar-flyout-start msportalfx-ext-link" data-bind="text: $root.data.text.start"><\/div> <\/a> <\/li> <\/ul> '}}));
define("_generated/Templates/WidgetsSideBarFlyoutCategoryView",["require","exports"],(function(){"use strict";return function(){return' <!-- ko if: data.allServicesWithOverviewEnabled --> <div class= "fxs-sidebar-flyout-overview-category" data-bind="visible: data.onOverview() && !data.isFiltered()"> <div class="fxs-sidebar-flyout-overview-title-wrapper fxs-portal-text"> <div class= "fxs-sidebar-flyout-overview-title" data-bind="text:data.text.featured"><\/div> <\/div> <ul class="fxs-sidebar-flyout-featured-container"> <!-- ko foreach: data.overviewCategory.possibleFavorites --> <li class="fxs-sidebar-flyout-featured-item fxs-sidebar-flyout-featured-item-asset" data-bind="visible: !$data.isHidden() "> <a class="fxs-sidebar-flyout-featured-item-details" data-bind="attr: { href: uri, title: label, \'aria-label\': label }"> <div class="fxs-sidebar-flyout-featured-item-icon" data-bind="image: image"><\/div> <div class="fxs-sidebar-flyout-featured-item-title fxs-portal-text" data-bind="text: label"><\/div> <\/a> <\/li> <!-- /ko --> <li class="fxs-sidebar-flyout-featured-item fxs-sidebar-flyout-overview-seeAllServices"> <a class="fxs-sidebar-flyout-featured-item-details" data-bind="attr: { title: data.text.seeAllServices, \'aria-label\': data.text.seeAllServices }"> <div class="fxs-sidebar-flyout-featured-item-icon fxs-sidebar-flyout-featured-item-icon-allservices" data-bind="image: data.icons.arrowRight"><\/div> <div class="fxs-sidebar-flyout-featured-item-title" data-bind="text: data.text.seeAllServices"><\/div> <\/a> <\/li> <\/ul> <!-- ko template: { name: \'categoryTrainings\', data: data.overviewCategory } --><!-- /ko --> <div> <div data-bind="text: data.text.overviewUsefulLinks" class="fxs-sidebar-flyout-usefullinks-title fxs-portal-text"><\/div> <ul class="fxs-sidebar-flyout-usefullinks-container" data-bind="foreach: data.overviewCategory.usefulLinks"> <li class="fxs-sidebar-flyout-usefullinks-item"> <div class="fxs-sidebar-flyout-usefullinks-item-container" > <div data-bind="text: title" class="fxs-sidebar-flyout-usefullinks-item-title fxs-portal-text"><\/div> <div class="fxs-sidebar-flyout-usefulink-description fxs-portal-text" data-bind="text:description"><\/div> <a class="fxs-sidebar-flyout-usefullinks-link" data-bind="text: linkTitle, attr: { href: link }"><\/a> <\/div> <\/li> <\/ul> <\/div> <\/div> <!-- /ko --> <ul class="fxs-sidebar-flyout-allservices-list" data-bind="visible: !data.allServicesWithOverviewEnabled || (!data.onOverview() || data.isFiltered())"> <!-- ko foreach: func._visibleCategories --> <li tabindex="0" aria-level="1" class="fxs-sidebar-item-category fxs-sidebar-category-label-wrapper fxs-portal-hover fxs-portal-text" data-bind="attr: { title: label, \'data-category\': $data.label }, css: { \'fxs-sidebar-hide\': ($root.data.isFiltered() || $data.isFilteredOut() || $data.isHidden())}"> <span class="fxs-sidebar-category-label fxs-sidebar-label fxs-portal-text" data-bind="text: label, attr: { title: label }"><\/span> (<span class="fxs-sidebar-count-label" data-bind="text: count"><\/span>) <div class="fxs-sidebar-category-label-divider fxs-portal-border"><\/div> <button tabindex="-1" class="fxs-sidebar-category-button fxs-portal-svg fxs-sidebar-button" data-bind="image: $root.data.icons.caretUp, attr: { \'data-category\': $data.id, \'aria-label\': $root.data.text.collapseCategory }"><\/button> <\/li> <!-- ko template: { name: \'sidebarFlyoutList\', foreach: possibleFavorites } --> <!-- /ko --> <li tabindex="0" class="fxs-sidebar-flyout-noresults fxs-sidebar-hide" data-bind="attr: { \'data-category\': label }"> <div class="fxs-sidebar-flyout-noresultsicon msportalfx-svg-disabled" data-bind="image: $root.data.icons.allServices"><\/div> <div class="fxs-sidebar-flyout-noresultstext msportalfx-font-semilight" data-bind="text: $root.data.noResultsPerCategoryText"><\/div> <a tabindex="0" href="#" class="fxs-sidebar-flyout-noresultstext fxs-sidebarflyout-category-nodata" data-bind="text: $root.data.noResultsPerCategoryLink"><\/a> <\/li> <!-- ko if: $root.data.allServicesWithOverviewEnabled && $data.freeTrainings && $data.freeTrainings.length && !$root.data.isFiltered() --> <li class="fxs-sidebar-flyout-category-trainings fxs-portal-text fxs-sidebar-hide" data-bind="attr: {\'data-category\': label }"> <!-- ko template: { name: \'categoryTrainings\', data : $data } --><!-- /ko --> <\/li> <!-- /ko --> <!-- /ko --> <li class="fxs-sidebar-flyout-noresults fxs-portal-text" data-bind="visible: data.noResults()"> <div class="fxs-sidebar-flyout-noresultsicon msportalfx-svg-disabled" data-bind="image: data.icons.allServices"><\/div> <div class="fxs-sidebar-flyout-noresultstext msportalfx-font-semilight" data-bind="text: data.text.noResultsText"><\/div> <\/li> <\/ul> '}}));
define("_generated/Templates/WidgetsSideBarFlyoutList",["require","exports"],(function(){"use strict";return function(){return'<li tabindex="0" class="fxs-sidebar-flyout-item-content fxs-sidebar-item fxs-portal-hover" aria-level="2" , data-bind="css: { \'fxs-sidebar-hide\': $data.isFilteredOut() || $data.isHidden() }, style: { order: $data.relevanceScore() }, attr: { id: labelId, \'data-category\': $parent.label, \'aria-describedby\': $data.isFavorite() ? \'isFavoriteDescriptionId toggleHintTextId\' : \'notFavoriteDescriptionId toggleHintTextId\' }"> <a tabindex="-1" class="fxs-sidebar-flyout-item-link fxs-portal-text" data-bind="attr: { href: uri}"> <div class="fxs-sidebar-flyout-icon fxs-portal-svg" data-bind="image: image"><\/div> <div class="fxs-sidebar-label"> <div data-bind="text: label, attr: { title: label }"><\/div> <!-- ko if: matches --> <div class="fxs-sidebar-matches"> <span class="fxs-sidebar-matches-prefix" data-bind="text: $root.data.matchesPrefix"><\/span> <span data-bind="text: matches, attr: { title: matches }"><\/span> <\/div> <!-- /ko --> <\/div> <!-- ko if: $data.isPreview --> <span class="msportalfx-preview-text" data-bind="text: $root.data.text.preview, attr: { title: $root.data.text.preview }"><\/span> <!-- /ko --> <!-- ko if: opensExternal --> <div class="fxs-sidebar-external"> <div class="fxs-fill-secondary" data-bind="image: $root.data.icons.hyperlink"><\/div> <\/div> <!-- /ko --> <\/a> <!-- ko ifnot: $root.data.hideFavoriteStars --> <div class="fxs-sidebar-star fxs-portal-svg" data-bind="image: isFavorite() ? $root.data.icons.favorite : $root.data.icons.notFavorite"><\/div> <!-- /ko --> <\/li> '}}));
define("MsPortalImpl/Widgets/Widgets.SideBarFlyout",["require","exports","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/UI/Hubs/UI.FavoritesManager","MsPortalImpl/UI/Hubs/UI.FavoritesManagerDeferred","MsPortalImpl/Widgets/Widgets.WidgetBase","_generated/Templates/WidgetsSideBarFlyoutList","_generated/Templates/WidgetsSideBarFlyoutCategoryView","_generated/Templates/WidgetsSideBarFlyout","_generated/Templates/WidgetsSideBarFlyoutCategoryTrainings","_generated/MsPortalImpl/Svg/Startup/Search.svg","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Interactions/Interactions.PortalReader","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Base/Base.Router","_generated/MsPortalImpl/Svg/Startup/ArrowWideUp.svg","Fx/Controls/DropDown","MsPortalImpl/Base/Base.BrowserDetection","MsPortalImpl/Interactions/Interactions.KeyboardNavigation","Weave","Weave/Core/Computation","WeaveDOM/DirectRender/DataAttribute","MsPortalImpl/Resources/ImplScriptResources","FxInternal/Css","_generated/Less/MsPortalImpl/Widgets/Widgets.SideBarFlyout.css","MsPortalImpl/Widgets/Widgets.SharedOptionsInit"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){"use strict";function yt(n,t,i){ui.trace({source:"AllServicesMenu",name:t,action:n,data:i})}function tr(n,t,i){var r=[];return i&&r.push({text:it.SideBarFlyout.overviewCategory,value:{label:it.SideBarFlyout.overviewCategory,id:"Overview"}}),r.push({text:it.SideBarFlyout.everythingCategory,value:{label:it.SideBarFlyout.everythingCategory,id:"All"}}),t().forEach((function(n){var t={text:n.label,value:{label:n.label,id:n.id}};r.push(t)})),b.create(n,{ariaLabel:it.SideBarFlyout.categoriesDropdownLabel,multiselect:!1,items:r,suppressDirtyBehavior:!0,value:{label:"",id:""}})}function gt(n,t,i,r,u){if(n.removeClass(et),(n.length===0||t.length===0)&&(t=i),r&&u){var f=t.attr("id");r.attr(hi,f)}t.addClass(et);t.get(0)&&t.get(0).scrollIntoView(!1)}function ri(n,t,i){var u=n.id,f=t.favorites,s=MsPortalFx.findIndex(f.value,(function(n){return n.id===u})),e,o,r;n.isFavorite()?s!==-1&&(n.isFavorite(!1),r=MsPortalFx.find(i.possibleFavorites(),(function(n){return n.id===u})),r&&r.isFavorite(!1),f.splice(s,1),e="SideBarUnFavorite",o=t.remove):s===-1&&(n.isFavorite(!0),r=MsPortalFx.find(i.possibleFavorites(),(function(n){return n.id===u})),r&&r.isFavorite(!0),f.push(r),e="SideBarFavorite",o=t.add);e&&yt(e,u,{totalFavorites:f.value.length});u&&o&&o(u)}function wt(n,t,i,r,u,f){var s=!!n.length,e,o;return t.isFiltered(s),u&&u!==it.SideBarFlyout.everythingCategory&&(o=t.visibleCategories().filter((function(n){return n.label===u}))[0],e=o&&o.possibleFavorites),r.read(it.SideBarFlyout.listFiltered),e=e&&e(),i.filterAllServices({filter:n,possibleFavorites:e,currentCategory:u,dontApplyVisibility:f}).then((function(n){return n}))}function pt(n){var i=n.find("."+ft+"."+et),t;i.removeClass(et);t=n.find(".fxs-sidebar-category-label-wrapper.fxs-portal-selected");t.removeClass(et)}function kt(n,t,i){var r=n.find("."+ft+":not("+ct+")")[0],u;r=n.find("."+ft+"[style='order: 1;']")[0]||n.find("."+ft+":not("+ct+")")[0];i.parent().addClass(et);$(r).addClass(et);u=$(r).attr("id");t.attr(hi,u);t.focus()}function ai(n,t){var u=st(t[0]).label,i=t.findByClassName("fxs-sidebar-category-button"),r=n.find("."+ft+'[data-category="'+u+'"]').toArray();i.hasClass(at)?(i.attr("aria-label",it.SideBarFlyout.collapseCategory),i.removeClass(at),r.forEach((function(n){$(n).removeClass(ot)}))):(i.addClass(at),i.attr("aria-label",it.SideBarFlyout.expandCategory),r.forEach((function(n){$(n).addClass(ot)})))}function ir(n){return n.findByClassName("fxs-sidebar-category-button").toArray().some((function(n){return $(n).hasClass(at)}))}function st(n){return dt?tt.getElementData(n):ko.dataFor(n)}function rr(n,t){if(t===it.SideBarFlyout.everythingCategory)n.findByClassName("fxs-sidebar-category-button").toArray().forEach((function(t){var i,r;$(t).hasClass(at)&&(i=$(t).parent().attr("data-category"),$(t).removeClass(at),r=n.find("."+ft+'[data-category="'+i+'"]').toArray(),r.forEach((function(n){$(n).removeClass(ot)})))}));else{var i=n.find('.fxs-sidebar-category-button[data-category="'+t+'"]').first(),r=n.find("."+ft+'[data-category="'+t+'"]').toArray();i.hasClass(at)&&(i.removeClass(at),r.forEach((function(n){$(n).removeClass(ot)})))}}function vi(n,t,i,r,u,f,e,o){return e.attach(n,t,i,(function(n){var h=$(n.currentTarget).attr("data-category"),t=st(n.currentTarget),i=new o.ViewModel(t,$(n.currentTarget),u,f),s;return i.positionHint=2,ui.trace({source:"HoverCard",action:"InitialReveal",name:t.id,data:{hoverCardLocation:f}}),s=f==="AllServicesCategory"?t.id:"",new e.Widget(e.getBalloonElement(t.id+(r?h:""),f,s),i,u)}),u)}var yi;Object.defineProperty(t,"__esModule",{value:!0});t.Widget=t.toggleFavorite=t.ViewModel=void 0;rt.injectCss(ut);var ni=MsPortalFx.Base,ui=ni.Diagnostics.Telemetry,lt=ni.Images,pi=ni.Promises.cancelOnDispose,ur=MsPortalFx.Extension.BrowseType,wi=window,bi=wi.fx.environment,fi=".fxs-sidebar-browse",et="fxs-portal-selected",ft="fxs-sidebar-item",ki=".fxs-sidebar-item a,.fxs-sidebar-flyout-featured-item-asset a",ei="fxs-sidebar-filter-input",ot="fxs-sidebar-hide",ct="."+ot,oi="fxs-sidebar-flyout-allservices-list",at="fxs-sidebar-category-button-transform",di="fxs-sidebar-category-label-wrapper",si="fxs-sidebar-flyout-collapsed-layout",ti=38,ii=40,ht="click",vt="keydown",hi="aria-activedescendant",ci="."+ei+",."+oi,gi={deferred:!0},li=/order: (\d+)/,dt=MsPortalFx.isFeatureEnabled("allservicesweave"),bt=window.matchMedia("(max-width: 640px)"),nr=(function(n){function t(){var t=n.call(this)||this;return t.text=it.SideBarFlyout,t.isFiltered=ko.observable(!1),t.visibleCategories=ko.observableArray(),t.visibleCategoryNames=ko.observableArray(),t.moreServicesLabel=MsPortalFx.isFeatureEnabled("brandingsidebar")?bi.branding.browseLabel:it.SideBar.allServices,t.noResultsPerCategoryText=ko.observable(),t.noResultsPerCategoryLink=ko.observable(),t.icons={hyperlink:lt.Hyperlink(),favorite:lt.Star({palette:99}),notFavorite:lt.Favorite({palette:99}),caretUp:lt.CaretUp(),caretDown:lt.CaretDown(),allServices:lt.Polychromatic.AllServices(),search:c,arrowRight:lt.CustomImageWithOptions(w,{palette:99,customClass:"msportalfx-svg-c35"}),close:lt.Close()},t.searchTextPlaceholder=it.SideBar.searchTextPlaceholder,t.filterInputValue=ko.observable(""),t.matchesPrefix=ko.observable(it.SideBarFlyout.keywords),t.noResults=ko.observable(),t.allServicesWithOverviewEnabled=MsPortalFx.isFeatureEnabled("allServicesWithOverview"),t.onOverview=ko.observable(),t.hideFavoriteStars=MsPortalFx.isFeatureEnabled("hideFavoriteStars"),t.isLoading=ko.observable(!0),t.showCategoriesDropdown=ko.observable(!1),t.categoriesDropdown=ko.observable(),t.renderAllCategory=g.makeWritableComputation(t.allServicesWithOverviewEnabled?!1:!0),t}return __extends(t,n),t.prototype.openExternal=function(n){window.open(n,"_blank")},t})(f.ViewModel);t.ViewModel=nr;t.toggleFavorite=ri;yi=(function(t){function f(n,i,f){var c=t.call(this,n,i)||this,a,p,b,w,k;return c._sidebarBrowse=MsPortalFx.memoize((function(){return $.querySelectorAll(fi)})),c._noResultsInCategory=ko.observable(!1),c._announce=new v.PortalReader(c.ltm,{idPrefix:"allservices"}),a=c.ltm,c._favoritesManager=f.get(r.FavoritesManager),c._FavoritesManagerDeferred=f.get(u.FavoritesManagerDeferred),c._diContainer=f,p=i.visibleCategories,dt||(n.html(s()),l.registerKoTemplate("showByCategory",o()),l.registerKoTemplate("sidebarFlyoutList",e()),l.registerKoTemplate("categoryTrainings",h()),c._bindDescendants(),c._bindingPromise=y.waitForBindings(n[0]),b=MsPortalFx.thunkArray(a,p),w=b.map(a,(function(n,t){var i=MsPortalFx.clone(t);return i.possibleFavorites=t.possibleFavorites.filter(n,(function(n){return!t.isHidden()&&!n.isHidden()})),i})),w.extend(gi),k=MsPortalFx.thunkArray(a,w),c._visibleCategories=k.filter(a,(function(n){return!n.isHidden()})),c._visibleCategoryNames=c._visibleCategories.map(a,(function(n,t){return{label:t.label,id:t.id}}))),c._FavoritesManagerDeferred.initializeCategories().then((function(n){var t,r;if(n[0].id.toLowerCase()==="overview"&&(t=n.shift(),i.allServicesWithOverviewEnabled)){r=t.possibleFavorites().slice(0,15);t.possibleFavorites(r);i.overviewCategory=t;i.onOverview(!0)}if(dt){var f=n.map((function(n){var t=MsPortalFx.clone(n);return t.possibleFavorites=n.possibleFavorites.filter(a,(function(t){return!n.isHidden()&&!t.isHidden()})),t})),u=f.filter((function(n){return!n.isHidden()})),e=u.map((function(n){return{label:n.label,id:n.id}}));p(u);i.visibleCategoryNames(e)}else p(n)})).finally((function(){c.options.isLoading(!1);var t=function(){c._filterInput=n.findByClassName(ei);c._browseLink=$.querySelectorAll(fi);var t=MsPortalFx.getUniqueId(),i=n.findByClassName("fxs-sidebar-flyout-allcategories-list");i.attr({id:t,"aria-label":c._browseLink.attr("aria-label")});c._filterInput.attr("aria-owns",t);c._currentCategoryName||c.options.showCategoriesDropdown()||(c._currentCategoryName=c.element.findByClassName("fxs-sidebarflyout-category-button").first());c._renderSidebarFlyout(bt);new d.KeyboardNavigation(c.ltm,{element:n.findByClassName("fxs-sidebar-flyout-category-list"),tabTriggers:12,itemSelector:".fxs-sidebar-category-name"});new d.KeyboardNavigation(c.ltm,{element:n.findByClassName("fxs-sidebar-flyout-featured-container"),tabTriggers:12,itemSelector:".fxs-sidebar-flyout-featured-item-details"});new d.KeyboardNavigation(c.ltm,{element:n.findByClassName("fxs-sidebar-flyout-freetrainings-container"),tabTriggers:12,itemSelector:".fxs-sidebar-flyout-freetrainings-item-container"});new d.KeyboardNavigation(c.ltm,{element:n.findByClassName("fxs-sidebar-flyout-usefullinks-container"),tabTriggers:12,itemSelector:".fxs-sidebar-flyout-usefullinks-link"});c._attachEventHandlers();c._initiateSelection()};dt?nt.invokeAfterChangePropagation((function(){t()})):t()})),c._noResultsInCategory.subscribe(a,(function(n){n||c.element.find(".fxs-sidebar-flyout-noresults:not("+ct+",.fxs-display-none)").toArray().forEach((function(n){$(n).addClass(ot)}))})),c}return __extends(f,t),f.prototype.dispose=function(){t.prototype.dispose.call(this);this._cleanElement();this._sidebarBrowse.clear()},f.prototype.onDisplay=function(n,t){var u=this.element,i=this._filterInput,r;i&&i.focus();t&&yt("SideBarBrowseMenuOpened");n&&(r=decodeURIComponent(n),this.options.filterInputValue(r),wt(r,this.options,this._FavoritesManagerDeferred,this._announce,it.SideBarFlyout.everythingCategory));pt(u);this._currentCategoryName&&kt(u,i,this._currentCategoryName)},f.prototype._renderSidebarFlyout=function(n){var u=this,i,t,r;n.matches?(i=this._currentCategoryName.text(),t=void 0,t=i===it.SideBarFlyout.everythingCategory?{label:it.SideBarFlyout.everythingCategory,id:"All"}:i===it.SideBarFlyout.overviewCategory?{label:it.SideBarFlyout.overviewCategory,id:"Overview"}:this.options.visibleCategories().filter((function(n){return n.label===i}))[0],this.options.categoriesDropdown()?this.options.categoriesDropdown().value({label:t.label,id:t.id}):(r=tr(this.ltm,this.options.visibleCategories,this.options.allServicesWithOverviewEnabled),r.value({label:t.label,id:t.id}),r.value.subscribe(this.ltm,(function(n){u._switchCategories(null,n.label,n.id)})),this.options.categoriesDropdown(r)),this.options.showCategoriesDropdown(!0),this.element.addClass(si)):(this.options.showCategoriesDropdown(!1),this.element.removeClass(si))},f.prototype._initiateSelection=function(n){var r=this,t=this.element,i=this._filterInput;n?this._bindingPromise.then((function(){kt(t,i,r._currentCategoryName)})):kt(t,i,this._currentCategoryName)},f.prototype._switchCategories=function(n,t,i){var r=this;this.options.filterInputValue("");this.options.renderAllCategory(!0);wt("",this.options,this._FavoritesManagerDeferred,this._announce,it.SideBarFlyout.everythingCategory).then((function(){var s,u,f,e,o;(r.options.noResults()||r._noResultsInCategory())&&(r.options.noResults(!1),r._noResultsInCategory(!1));r._currentCategoryName.parent().removeClass(et);s=r._currentCategoryName;t?(u=t,r._currentCategoryName=r.element.find(".fxs-sidebarflyout-category-button[title='{0}']".format(u))):(r._currentCategoryName=n&&n.findByClassName("fxs-sidebarflyout-category-button"),u=r._currentCategoryName.text());f=u===it.SideBarFlyout.overviewCategory;r.options.onOverview(f);u===it.SideBarFlyout.everythingCategory||f?(r.element.find("."+ft).toArray().forEach((function(n){$(n).removeClass(ot)})),a.unhide(r.element.findByClassName("fxs-sidebar-item-category"))):(r.element.find("."+ft).toArray().forEach((function(n){$(n)[0].getAttribute("data-category")!==u?$(n).addClass(ot):$(n).removeClass(ot)})),a.hide(r.element.findByClassName("fxs-sidebar-item-category")),a.unhide(r.element.find("li[title='{0}']".format(u))));n&&n.addClass(et);pt(r.element);r._initiateSelection();r._filterInput.focus();r._showCategorySpecificTrainings();e=st(s[0]);r.options.showCategoriesDropdown()?yt("CategorySwitch",i):(o=st(r._currentCategoryName[0]),yt("CategorySwitch",o&&o.id,{previousCategory:e&&e.id}))}))},f.prototype._showCategorySpecificTrainings=function(){var t=this,n=this._currentCategoryName.text();this.options.allServicesWithOverviewEnabled&&this.element.findByClassName("fxs-sidebar-flyout-category-trainings").toArray().forEach((function(i){$(i)[0].getAttribute("data-category")!==n?$(i).addClass(ot):n===it.SideBarFlyout.everythingCategory||t.options.onOverview()||$(i).removeClass(ot)}))},f.prototype._attachEventHandlers=function(){var t=this,u=this._filterInput,r=this.element,s=i.getModifierKeys,e={},h=this._diContainer.get(p.Router),f=function(){t._renderSidebarFlyout(bt)},o;k.isIe||k.isSafari?(bt.addListener(f),this.ltm.registerForDispose((function(){return bt.removeListener(f)}))):(bt.addEventListener("change",f),this.ltm.registerForDispose((function(){return bt.removeEventListener("change",f)})));this.ltm.registerForDispose(this.element.setEvents([ht,".fxs-sidebar-flyout-usefullinks-link",function(n){n.stopPropagation();n.preventDefault();var t=n.target&&n.target.hash;h.route(t);yt("OverviewUsefulLinkClicked","GetToKnowAzure",{linkDestination:t})},],[ht,".fxs-sidebar-flyout-freetrainings-item",function(n){var i=st(n.currentTarget);yt("FreeTrainingLinkClicked","FreeTrainings",{linkDestination:i.link,displayTitle:i.title,category:t._currentCategoryName.text()})},],[ht,".fxs-sidebarflyout-category-nodata",function(n){t._noResultsInCategory(!1);e={};u.focus();t._currentCategoryName.parent().removeClass(et);var i=t.options.filterInputValue();a.unhide(t.element.findByClassName("fxs-sidebar-item-category"));wt("",t.options,t._FavoritesManagerDeferred,t._announce,it.SideBarFlyout.everythingCategory).then((function(){pt(r);t._currentCategoryName=t.element.find(".fxs-sidebarflyout-category-button[data-category='All']").first();t.options.filterInputValue(i);wt(i,t.options,t._FavoritesManagerDeferred,t._announce,it.SideBarFlyout.everythingCategory).then((function(){t._currentCategoryName.parent().addClass(et);i&&i.length&&(t.element.find("."+ft).toArray().forEach((function(n){st(n).isFilteredOut()||$(n).removeClass(ot)})),t.element.find("."+ft+":not("+ct+")").toArray().forEach((function(n){var t=st(n);e[t.label]?$(n).addClass("fxs-sidebar-hide"):e[t.label]=!0})));pt(r);kt(r,u,t._currentCategoryName)}))}));n.preventDefault()},],[vt,".fxs-sidebar-flyout-category-list,.fxs-sidebar-category-name",function(n){if(n.keyCode===13||n.keyCode===32){var i=r.findByClassName("fxs-sidebar-flyout-category-list"),u=i.find(".fxs-sidebar-category-name."+et);t._switchCategories(u)}},],[ht,".fxs-sidebar-category-name",function(n){if(n.type===ht){var i=$(n.currentTarget);t._switchCategories(i)}},],[ht+" "+vt,".fxs-sidebar-category-label-wrapper",function(n){var i=$(n.currentTarget);if(n.type===ht||n.type===vt&&n.keyCode===13||n.keyCode===32)return ai(t.element,i),n.stopPropagation(),n.preventDefault(),!1},],[ht,".fxs-search-clear",function(){t.options.filterInputValue("");t._noResultsInCategory(!1);pt(r);kt(r,u,t._currentCategoryName)},],[ht,".fxs-sidebar-star",function(n){var i=st(n.currentTarget),f=$(n.currentTarget);ri(i,t._favoritesManager,t._FavoritesManagerDeferred);pt(r);f.closest("li").addClass(et);u.focus()},],[ht,ki,function(n){var r,u,i=st(n.currentTarget),f=$(n.target),e=f.closest(".fxs-sidebar-flyout-featured-item-asset").length?"OverviewFeaturedItemOpened":"AllServicesAssetTypeOpened";yt(e,i.id,{isFavorite:i.isFavorite(),isBrowseBlade:((u=(r=i.assetType)===null||r===void 0?void 0:r.assetTypeManifest)===null||u===void 0?void 0:u.browseType)===1});t.options.openFavorite(i)&&(n.preventDefault(),n.stopPropagation())},],[vt,".fxs-sidebar-flyout-category-list",function(n){var u=r.findByClassName("fxs-sidebar-flyout-category-list"),t=u.find(".fxs-sidebar-category-name."+et),f=u.findByClassName("fxs-sidebar-category-name").first(),e=u.findByClassName("fxs-sidebar-category-name").last(),i;switch(n.keyCode){case ii:i=t.nextUntil("",".fxs-sidebar-category-name").first();gt(t,i,f);break;case ti:i=t.prevUntil("",".fxs-sidebar-category-name").first();gt(t,i,e)}},],[ht+" "+vt,".fxs-sidebar-flyout-overview-seeAllServices",function(n){(n.type===ht||n.type===vt&&n.keyCode===13||n.keyCode===32)&&t._switchCategories(null,it.SideBarFlyout.everythingCategory)},],[vt,ci,function(n){var t=r.find("."+ft+"."+et);t.length||(t=r.find(".fxs-sidebar-category-label-wrapper.fxs-portal-selected"));var o=r.findByClassName(oi),e=t.attr("style"),f,i=0,s=r.findByClassName(ft).not(ct).first(),h=r.findByClassName(ft).not(ct).last();e&&li.test(e)&&(i=parseInt(li.exec(e)[1]));switch(n.keyCode){case ii:f=i?$(r.find("."+ft+"[style='order: "+(i+1)+";']")):t.nextAll(":not("+ct+",.fxs-display-none)").first();gt(t,f,s,u,o);u.focus();n.stopPropagation();break;case ti:f=i>1?$(r.find("."+ft+"[style='order: "+(i-1)+";']")):t.prevAll(":not("+ct+",.fxs-display-none)").first();gt(t,f,h,u,o);u.focus();n.stopPropagation()}},]));pi(this.ltm,Promise.all([MsPortalFx.require(n.normalize("MsPortalImpl/Widgets/Widgets.HoverCard")),MsPortalFx.require(n.normalize("MsPortalImpl/Widgets/ServiceHoverCard")),])).then((function(n){var i=n[0],u=n[1],f;vi(t.ltm,t.element,".fxs-sidebar-flyout-featured-item-asset",!1,t._diContainer,"AllServicesFeatured",i,u);f=vi(t.ltm,t.element,".fxs-sidebar-flyout-item-content",!0,t._diContainer,"AllServicesCategory",i,u);t.ltm.registerForDispose(t.element.setEvents([vt,ci,function(n){var e=s(n),i=r.find("."+ft+"."+et),u;if(i.length||(i=r.find(".fxs-sidebar-category-label-wrapper.fxs-portal-selected")),i.length>0&&(u=st(i[0])),(n.keyCode===ti||n.keyCode===ii)&&n.preventDefault(),MsPortalFx.isFeatureEnabled("showHoverCard")){if(n.keyCode===112)return f(i[0]),n.stopPropagation(),n.preventDefault(),!1}else if(n.keyCode===32&&e===4)return ri(u,t._favoritesManager,t._FavoritesManagerDeferred),n.stopPropagation(),!1;if(n.keyCode===13&&e===0){if(($(n.target).is("input")||$(n.target).hasClass("fxs-sidebar-flyout-allservices-list"))&&$(i[0]).hasClass(di))return ai(t.element,i),n.stopPropagation(),n.preventDefault(),!1;u&&t.options.openFavorite(u);n.stopPropagation()}},]))}));o=function(n,i,r){var u={};i!==n&&t.element.find("."+ft+":not("+ct+")").toArray().forEach((function(n){var i=st(n),f,e;u[i.label]?r?(f=i.labelId,e=t.element.find('li[id="'+f+'"]'),e.toArray().forEach((function(n){$(n).attr("data-category")!==r&&$(n).addClass("fxs-sidebar-hide")}))):$(n).addClass("fxs-sidebar-hide"):u[i.label]=!0}))};ko.computed(this.ltm,[this.options.filterInputValue],(function(n){var i=function(){var i=t._currentCategoryName&&t._currentCategoryName.text()||it.SideBarFlyout.everythingCategory,f,e;ir(t.element)&&rr(t.element,i);f=!1;t._noResultsInCategory(!1);t.options.noResultsPerCategoryLink("");n.length&&t.options.renderAllCategory(!0);e=n.length>1?Q.delay(100).then((function(){if(t.options.filterInputValue()===n)return wt(n||"",t.options,t._FavoritesManagerDeferred,t._announce,i)})):wt(n||"",t.options,t._FavoritesManagerDeferred,t._announce,i);e.then((function(e){var h,c=st(t._currentCategoryName[0]),s;((h=t.options.filterInputValue())===null||h===void 0?void 0:h.length)&&yt("SearchInAllServicesMenu",MsPortalFx.sanitizeMessage(t.options.filterInputValue()),{currentCategory:c&&c.id});e&&(pt(r),kt(r,u,t._currentCategoryName),s=t.element.find("."+ft+":not("+ct+")").length,f=s===0,i&&i!==it.SideBarFlyout.everythingCategory&&i!==it.SideBarFlyout.overviewCategory?(f&&(wt(n||"",t.options,t._FavoritesManagerDeferred,t._announce,it.SideBarFlyout.everythingCategory,!0).then((function(r){var u=r&&r.matchCount;u&&t.options.noResultsPerCategoryLink(it.SideBarFlyout.noResultsInCategoryLink.format(u));t.options.noResultsPerCategoryText(it.SideBarFlyout.noResultsInCategory.format(n,i))})),t.element.find('.fxs-sidebar-flyout-noresults[data-category="'+i+'"]').toArray().forEach((function(n){$(n).removeClass(ot)}))),o(e.matchCount,s,i),n&&t._noResultsInCategory(f)):(t.options.noResults(f),n.length?o(e.matchCount,s):t.element.find("."+ft+ct).toArray().forEach((function(n){var t=st(n);t.isFilteredOut()||t.isHidden()||$(n).removeClass("fxs-sidebar-hide")}))),t._showCategorySpecificTrainings(),r.find("."+ft+"."+et).length||(pt(t.element),t._initiateSelection()))}))};t.options.isLoading()||(dt?nt.invokeAfterChangePropagation((function(){i()})):i())}))},f})(f.Widget);t.Widget=yi}))