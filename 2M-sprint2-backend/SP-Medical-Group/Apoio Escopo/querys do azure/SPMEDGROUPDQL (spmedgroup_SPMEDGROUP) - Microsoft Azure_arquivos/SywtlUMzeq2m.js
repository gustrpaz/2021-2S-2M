"use strict";var HubsExtension,MsPortalFx,FxImpl;(function(n){var t;(function(n){var t;(function(n){var t=FxImpl.Constants.RpcMethods,i=FxImpl.Rpc.ActionEndPointDefinition;n.updateSubscriptionInfoEndPoint=new i(t.updateSubscriptionInfo);n.getRegisteredResourceProviderInfoEndPoint=new i(t.getRegisteredResourceProviderInfo)})(t=n.Azure||(n.Azure={}))})(t=n.Internal||(n.Internal={}))})(HubsExtension||(HubsExtension={})),
(function(n){var t;(function(n){var o=(function(){function n(){}return n})(),t,i,r,u,f,e,s;n.SubscriptionPolicies=o;t=(function(){function n(){}return n})();n.TenantInfo=t;i=(function(){function n(){}return n})();n.Tenant=i;r=(function(){function n(){this.regionPicker={regionId:ko.observable()}}return n})();n.RegionPickerDataModel=r;u=(function(){function n(){this.subscriptionPicker={subscriptionId:ko.observable(),subscriptionName:ko.observable()}}return n})();n.SubscriptionPickerDataModel=u;f=(function(){function n(){this.resourceGroup={resourceGroupName:ko.observable(),subscriptionId:ko.observable()}}return n})();n.ResourceGroupDataModel=f;e=(function(){function n(){this.resourceGroupPicker={resourceGroupName:ko.observable(),resourceGroupLocation:ko.observable(),subscriptionId:ko.observable(),isNewResourceGroup:ko.observable()}}return n})();n.ResourceGroupPickerDataModel=e,(function(n){var t;(function(n){n.PricingSummaryBlade={displayText:MsPortalFx.Resources.Strings.Services.Gallery.viewPricingSummaryLabel,bladeName:"PricingSummaryBlade",bladeExtension:"Microsoft_Azure_Marketplace"};n.LegalTermsBlade={bladeName:"LegalTermsBlade",bladeExtension:"Microsoft_Azure_Marketplace"};n.ChannelType={directEA:"DirectEA",indirectEA:"IndirectEA",unknownEA:"UnknownEA",direct:"Direct",csp:"CSP"}})(t=n.Constants||(n.Constants={}))})(s=n.Pricing||(n.Pricing={}))})(t=n.Azure||(n.Azure={}))})(HubsExtension||(HubsExtension={})),
(function(n){var t;(function(n){var t;(function(n){n[n.Theme=0]="Theme";n[n.Blue=1]="Blue";n[n.Green=2]="Green";n[n.Orange=3]="Orange";n[n.Pink=4]="Pink";n[n.Purple=5]="Purple";n[n.Azure=6]="Azure";n[n.Dark=7]="Dark";n[n.Red=8]="Red"})(t=n.PartColor||(n.PartColor={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){n[n.Custom=0]="Custom";n[n.CollectionSummary=1]="CollectionSummary";n[n.ItemSummary=4]="ItemSummary";n[n.LogStream=11]="LogStream";n[n.Grid=14]="Grid";n[n.Editor=15]="Editor";n[n.DiffEditor=16]="DiffEditor";n[n.Provisioning=17]="Provisioning";n[n.Unavailable=18]="Unavailable";n[n.Button=20]="Button";n[n.QuickStart=21]="QuickStart";n[n.Asset=22]="Asset";n[n.InfoList=23]="InfoList";n[n.Properties=24]="Properties";n[n.Collection=25]="Collection";n[n.Chart=26]="Chart";n[n.SingleValueGauge=27]="SingleValueGauge";n[n.Donut=28]="Donut";n[n.QuotaGauge=29]="QuotaGauge";n[n.ResourceSummary=30]="ResourceSummary";n[n.Frame=31]="Frame";n[n._Internal_Error=997]="_Internal_Error";n[n._Internal_App=998]="_Internal_App";n[n._Internal_Az=999]="_Internal_Az";n[n._Internal_React=1e3]="_Internal_React"})(t=n.PartKind||(n.PartKind={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){n[n.Mini=0]="Mini";n[n.Small=1]="Small";n[n.Normal=2]="Normal";n[n.Wide=3]="Wide";n[n.Tall=4]="Tall";n[n.HeroWide=5]="HeroWide";n[n.HeroTall=6]="HeroTall";n[n.HeroWideFitHeight=7]="HeroWideFitHeight";n[n.FullWidthFitHeight=8]="FullWidthFitHeight";n[n.FitToContainer=9]="FitToContainer";n[n.Large=10]="Large";n[n.Hero=11]="Hero";n[n.Custom=99]="Custom"})(t=n.InternalPartSize||(n.InternalPartSize={}));n.PartSize=t})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed"})(t=n.PartState||(n.PartState={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function i(t,i,u){var f=n.clone(t);return r.addAssetExpansion(f,i(f,u)),f}function u(n,t,r,u){var f=i(n,r,u);return t.push(f),f}var r,f;(function(n){function r(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]!==undefined}function u(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]}function f(n,r){var u=r.icon,f=[r,r.title,r.description,u,r.assetId,r.assetType||"",];return t.forEach((function(t,r){i(n,t,f[r])})),null}function e(n){return r(n)&&t.forEach((function(t){i(n,t,undefined)})),null}n.assetDetailsPropertyPrefix="$$MSPORTALFX";n.assetDetailsPropertyName=n.assetDetailsPropertyPrefix+"$assetDetails";n.titlePropertyName=n.assetDetailsPropertyName+"$title";n.descriptionPropertyName=n.assetDetailsPropertyName+"$description";n.iconPropertyName=n.assetDetailsPropertyName+"$icon";n.assetTypeStringPropertyName=n.assetDetailsPropertyName+"$assetTypeString";n.assetIdPropertyName=n.assetDetailsPropertyName+"$assetId";var t=[n.assetDetailsPropertyName,n.titlePropertyName,n.descriptionPropertyName,n.iconPropertyName,n.assetIdPropertyName,n.assetTypeStringPropertyName,],i=function(n,t,i){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!1,value:i})};n.isAssetExpanded=r;n.getAssetExpansion=u;n.addAssetExpansion=f;n.removeAssetExpansion=e})(r=t.AssetExpansion||(t.AssetExpansion={}));t.assetExpandItem=i;t.assetExpandItemAndAddToResultSet=u,(function(n){function t(n,t,r,u,f){var e,o;return n.registerForDispose||(f=u,u=r,r=t,t=n,n=null),e=n&&n.createChildLifetime(),e?(t.mapInto(e,(function(n,t){return i(t,u,f)}),r),e):(o=t.map((function(n){return i(n,u,f)})),o.subscribeAndRun(r))}n.connectDataSet=t})(f=t.DataSetAssetExpansionMapper||(t.DataSetAssetExpansionMapper={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(){function n(){}return n.subscribeDataSet=function(n,t,i,r,u){var f,e,o;return n&&n.createChildLifetime?f=n.createChildLifetime():(u=r,r=i,i=t,t=n,n=null),t().forEach((function(n,t){i(n,t,u)})),e="Subscription does not handle ",o=t.subscribeArrayEdits(f,(function(n){n=ko.utils.adjustArrayEdits(n);n.forEach((function(n){switch(n.status){case"added":if(i)i(n.value,n.index,u);else throw new Error(e+"insert.");break;case"deleted":if(r)r(n.value,n.index,u);else throw new Error(e+"remove.");}}))})),f?f:o},n.insertItem=function(n,t,i){n.splice(i,0,t)},n.removeItem=function(n,t,i){n.splice(i,1)},n})();n.DataSetSubscription=t})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var r,t,u,i;n.noSubCreateCategoryId="hidden_nosubcreate",(function(n){n.GalleryParametersKey="galleryParameters";n.GalleryOptionsKey="galleryOptions"})(r=n.Constants||(n.Constants={}));t=(function(){function n(){}return n.prototype.galleryCreatePreCheck=function(){return null},n})();n.BaseGalleryServiceViewModel=t,(function(n){n[n.template=0]="template";n[n.fragment=1]="fragment";n[n.custom=3]="custom";n[n.metadata=4]="metadata"})(u=n.ArtifactType||(n.ArtifactType={}));i=(function(){function n(){this.galleryParameters={selectedTemplateId:ko.observable(),templateJson:ko.observable(),subscriptionId:ko.observable(),resourceGroupName:ko.observable(),resourceGroupLocation:ko.observable(),resourceProviders:ko.observable(),primaryResourceId:ko.observable(),deploymentName:ko.observable()}}return n})();n.GalleryDataModel=i})(t=n.Gallery||(n.Gallery={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function r(){return FxImpl.Rpc.client.acquireObject(FxImpl.Constants.RpcMethods.getSettings,i.Constants.Shell,null).then((function(n){return n.value}))}var i=n.Base;t.getSettings=r})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function u(n){return{trace:n,flush:function(){return Q()}}}function s(n,t){return n?new o(n,t):u(i.noop)}function h(){return u((function(n){n.actionModifier!==r.ActionModifier.Start&&console.log(JSON.stringify(n))}))}var i=n,f=i.Base,r=f.Diagnostics.Telemetry,e=FxImpl.features.isEnabled("cae"),o=(function(){function n(n,t){var i=0,f={uri:n,skipTelemetry:!0,extensionName:t,performRetry:!0,serializer:r.Internal.getTelemetryPrivacySerializer(),setAuthorizationHeader:e?{resourceName:"telemetryToken"}:!0},u=FxImpl.getStandardDebouncer(f),o=FxImpl.getStandardDebouncer(__assign(__assign({},f),{interval:12e4}));setInterval((function(){i<500&&(i=0)}),6e4);this.trace=function(n){n&&(i++,i<=500&&(n.lowPriority?o.execute([n],n.optional):u.execute([n],n.optional),i===500&&u.execute([{extension:t,source:"TelemetryThrottled",action:"TelemetryThrottled"}])))};this.flush=function(){return u.flush()}}return n})();t.getTelemetryEventProcessor=s;t.getConsoleTelemetryEventProcessor=h})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function t(n,t,i){return{extension:n,assetType:t,detailBladeInputs:i}}function i(n,t,i){return{extension:n,detailBlade:t,detailBladeInputs:i}}n.getAssetSelection=t;n.getBladeSelection=i})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function f(n){return n.moved===undefined&&(n.status==="added"||n.status==="deleted")}function r(t,i){if(i){var u=t.peek(),r=u.slice();n.pushUnique(r,i,null,!0);r.length!==u.length&&t(r)}}var u=FxImpl.TriggerableLifetimeManager,i=FxImpl.getErrorMap({noCreateSelection:"",noMatchesSelection:"",badSelectableValue:"",readOnlyEdits:""}),o=(function(){function t(t,e,o,s,h,c,l){var a=this,y,v,k;this.selectedItems=ko.observableArray();this.activatedItems=ko.observableArray();this.itemsWithChildEdits=ko.observableArray();this.itemsArePinnable=ko.observable(!0);this._msPortalFxCurrentCommands=ko.observable();ko.isObservable(t)&&typeof t!="object"||(e=t.itemMatchesSelection,o=t.createSelection,s=t.initialState,h=t.supplyCommands,c=t.keepDeselectedItemsActivated,l=t.leaveSelectionOnDeactivation,t=t.items);e&&!o&&i.noCreateSelection();o&&!e&&i.noMatchesSelection();y=this._lifetime=new u;this._msPortalFxHasCreateSelection=!0;e||o||(e=function(n,t){return n===t},o=function(n){return n},this._msPortalFxHasCreateSelection=!1);v=function(n,t){return ko.ignoreDependencies((function(){return e(n,t)}))};this.itemMatchesSelection=v;this.createSelection=o;this._msPortalFxFindDataItem=function(i,r){var u=!(r&&r.length),f=u?v:function(t,i){var u=o(t);return n.find(r,(function(t){return!n.deepEquals(u[t],i[t])}))===undefined};return t().first((function(n){return f(n,i)}))};this._msPortalFxSupplyCommands=h?function(n){var t=h(n);return a._msPortalFxCurrentCommands(t),t}:undefined;this._msPortalFxDelayedBladeSelection=ko.observable();var p,ft=function(n){return n.data===p},d=function(n){return function(){return n.peek().some((function(n){return v(p,n)}))}},g=d(this.activatedItems),nt=d(this.selectedItems),et=function(n){return function(){return a.itemsWithChildEdits().some((function(t){return v(n,t.item)}))}},b=ko.computed(y,(function(){var u=b?b.peek():[],f=u.map((function(n,t){return t})),e=[],o=t(),r;return o.forEach((function(t){var o,s,c,h;p=t;o=n.findIndex(u,ft);o>=0?(r=u[o],f[o]=-1,s=g(),c=s||nt(),r.isActivated(s),r.isSelected(c)):(h=y.createChildLifetime(),r={data:p,isSelected:ko.observable(nt()),isActivated:ko.observable(g()),hasChildEdits:ko.computed(h,{read:et(p),write:i.readOnlyEdits})},r._lifetime=h);e.push(r)})),f.forEach((function(n){if(n>=0){var t=u[n],i=t&&t._lifetime;i&&i.dispose()}})),e}));this.selectableItems=ko.observableArray(b());b.subscribe(y,(function(n){(a.selectableItems().length||n.length)&&a.selectableItems.splice.apply(a.selectableItems,[0,a.selectableItems().length].concat(n))}));var tt=this.selectableItems(),it=function(t){var i=n.find(a.selectedItems(),(function(n){return v(t.data,n)})),u=n.find(a.activatedItems(),(function(n){return v(t.data,n)})),f=!a.selectableItems().includes(t),r;!f&&t.isSelected()?i||(u||!a._createDelayedBladeSelection?(r=u||o(t.data),n.isNullOrUndefined(r)||a.selectedItems.splice(0,0,r)):a._createDelayedBladeSelection(t.data)):(i&&a.selectedItems.remove(i),c||t.isActivated(!1))},rt=function(t){var f=n.find(a.selectedItems(),(function(n){return v(t.data,n)})),i=n.find(a.activatedItems(),(function(n){return v(t.data,n)})),e=!a.selectableItems().includes(t),r,u;!e&&t.isActivated()?i||(f||!a._createDelayedBladeSelection?(r=f||o(t.data),n.isNullOrUndefined(r)||a.activatedItems.splice(0,0,r)):(u=a._createDelayedBladeSelection(t.data),u&&a._msPortalFxDelayedBladeSelection(u))):(i&&a.activatedItems.remove(i),l||t.isSelected(!1))},w,ut=function(){w&&w.dispose();w=y.createChildLifetime();tt.forEach((function(n){n.isSelected.subscribe(w,(function(){it(n)}));n.isActivated.subscribe(w,(function(){rt(n)}))}))};this.selectableItems.subscribeArrayEdits(y,(function(t){t.forEach((function(t){f(t)&&!n.isNullOrUndefined(t.value)&&(it(t.value),rt(t.value))}));ut()}));ut();k=function(n,t){n.subscribeArrayEdits(y,(function(n){n.forEach((function(n){f(n)&&tt.some((function(i){if(v(i.data,n.value))return i[t](n.status==="added"),!0}))}))}))};k(this.selectedItems,"isSelected");k(this.activatedItems,"isActivated");s&&(r(this.selectedItems,ko.unwrap(s.selectedItems)),r(this.activatedItems,ko.unwrap(s.activatedItems)),r(this.itemsWithChildEdits,ko.unwrap(s.itemsWithChildEdits)))}return t.prototype.activateAllSelectedItems=function(){this.activatedItems(this.selectedItems.slice(0))},t.prototype.dispose=function(){this._lifetime&&this._lifetime.dispose()},t.prototype._setCreateDelayedBladeSelection=function(n){var t=this;this._createDelayedBladeSelection=n;this._msPortalFxCreateSelectionAsync=function(n){var i=t._createDelayedBladeSelection(n);return i?i.selectedValuePromise:Q(null)};this.createSelection=null},t})(),e;t.SelectableSet=o;e=(function(){function n(n){var t=this;n===void 0&&(n={});var e=!1,r=ko.observable(n.selectedValue),f=this,o=this._lifetime=new u;f.lock=function(){e=!0};f.setInternalSelectedValue=function(n){r(n)};f.isLocked=function(){return e};this.selectedValue=ko.computed(o,{read:function(){return r()},write:function(n){r(n)}});this.isSelected=ko.observable(!!n.isSelected);this.isCommandSelected=ko.observable(!!n.isCommandSelected);this.hasChildEdits=ko.observable(!1);this.isActivated=ko.observable(!!n.isActivated);this.isClickable=ko.pureComputed((function(){return!t.isSelected()}));this.value=ko.computed(o,{read:function(){return t.isSelected()?t.selectedValue():undefined},write:function(n){n===undefined?(t.isSelected(!1),t.isActivated(!1)):i.badSelectableValue()}})}return n.prototype.dispose=function(){this._lifetime.dispose()},n.prototype.setIsSelected=function(n,t){n&&n.container&&n.container.selectable?this.isSelected(!!n.container.selectable.isSelected):this.isSelected(t)},n.prototype.onClick=function(){this.isSelected(!0)},n})();t.Selectable=e})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,t)||this;return i.delayedBladeSelection=ko.observable(),i}return __extends(t,n),t})(MsPortalFx.ViewModels.Selectable),i;n.ObsoleteSelectable=t,(function(n){function t(n,t){n._setCreateDelayedBladeSelection(t)}n.setCreateDelayedBladeSelection=t})(i=n.SelectableSet||(n.SelectableSet={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function s(n,t,i){return{extension:n,detailBlade:t,detailBladeInputs:i}}function h(n,t,i){return{extension:n,assetType:t,detailBladeInputs:i}}function c(n,t){return n&&t?f.every((function(i){var e=i.name,r=n[e],u=t[e],f;return r&&u?(f=i.value,f?f(r,u):r===u):!r==!u})):!n==!t}function r(n){return function(t){return t.promise===n}}var i=FxImpl.getErrorMap({promiseCannotBeNull:"",percentValueNotNumber:""}),o,f,e,u;(function(n){n.Selectable=FxImpl.ViewModels.ObsoleteSelectable;var t;(function(n){n.setCreateDelayedBladeSelection=FxImpl.ViewModels.SelectableSet.setCreateDelayedBladeSelection})(t=n.SelectableSet||(n.SelectableSet={}))})(o=t.Internal||(t.Internal={}));t.getBladeSelection=s;t.getAssetSelection=h;f=[{name:"extension"},{name:"detailBlade"},{name:"assetType"},{name:"resourceId"},{name:"detailBladeInputs",value:n.deepEquals},];t.equalDynamicSelections=c;e=(function(){function t(n){var t=this;this._operations=ko.observableArray();this.inProgress=ko.computed(n,(function(){return t._operations().length>0}));this.blockingUi=ko.computed(n,(function(){return t._operations().some((function(n){return n.blockUi()}))}));this.shieldType=ko.pureComputed((function(){var n=t._operations(),i;return n.length>0&&(i=n.every((function(n){return n.shieldType&&n.shieldType()===1}))),i?1:0}))}return t.prototype.dispose=function(){},t.prototype.add=function(n,t){var o=this,r,f;n||i.promiseCannotBeNull();t=t||new u;var e=ko.observable(null),s=ko.observable(t.blockUi),h=ko.observable(t.shieldType);n.progress&&n.progress((function(n){var t=n&&n.percent;typeof t=="string"&&(t=parseFloat(t),isNaN(t)&&i.percentValueNotNumber());typeof t=="number"&&e(Math.min(Math.max(t,0),100))}));r={promise:n,deterministicPercentage:e,blockUi:s,shieldType:h};f=function(){o._operations.remove(r)};this._operations.push(r);n.then(f,f)},t.prototype.remove=function(n){n||i.promiseCannotBeNull();this._operations.remove(r(n))},t.prototype.update=function(t,i){var u=n.find(this._operations(),r(t));u&&(u.blockUi(i.blockUi),typeof i.shieldType=="number"&&u.shieldType(i.shieldType))},t.prototype.getOptionsForOperation=function(t){var i=n.find(this._operations(),r(t));return i?{blockUi:i.blockUi(),shieldType:i.shieldType()}:null},t})();t.PartOperationList=e;u=(function(){function n(){}return n})();t.PartOperationOptions=u;t.ResourceIdTypeName="MsPortalFx.ViewModels.ResourceId"})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/Base"),r=(function(){function t(n,t){t=t||{};this.controlType=0;this.vmKind="MsPortalFx";n?(this._ltm=n.createChildLifetime(),this._ltm.registerForDispose(this)):(i.error(FxImpl.createError("LifetimeManager was not provided. Creating a TriggerableLifetimeManager.",{data:{ctor:this.constructor+""}})),this._ltm=new FxImpl.TriggerableLifetimeManager);this.telemetryName=t.telemetryName}return t.prototype.dispose=function(){this._ltm.dispose()},Object.defineProperty(t.prototype,"lifetimeManager",{get:function(){return this._ltm},enumerable:!1,configurable:!0}),t.prototype.populateFromObject=function(n){var r=this,t=n;for(var i in t)t.hasOwnProperty(i)&&t[i]!==undefined&&(r[i]=t[i])},t.prototype._addDisposablesToCleanUp=function(n){this._ltm.registerForDispose(n)},__decorate([__metadata("fx:diagnostics",[require,"ViewModel"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object])],t)})();t.ViewModel=r})(i=t.Base||(t.Base={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=n.initObservable,r=(function(n){function t(t,r){var u=n.call(this,t,r)||this;return r===!1||r===!0?r={loading:ko.observable(r)}:(r===null||r===undefined)&&(r={}),u.disabled=i(r.disabled,!1),u.loading=i(r.loading,!1),u}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=r})(i=t.Loadable||(t.Loadable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t){var i=n.call(this,t)||this;return i.name=null,i.value=ko.observable(),i.dirty=ko.observable(),i}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=i})(t=n.EditableControl||(n.EditableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){t.DefaultDelayValidationTimeout=500;var i=(function(n){function t(t){var i=n.call(this,t)||this;return i.enableValidation=ko.observable(!0),i.delayValidationTimeout=ko.observable(0),i.validationState=ko.observable(0),i.validators=ko.observableArray(),i.validationResults=ko.observableArray(),i.valid=ko.computed(i.lifetimeManager,(function(){return!i.enableValidation()||i.validators().length===0||i.enableValidation()&&i.validators().length>0&&(i.validationState()===0||i.validationState()===2)})),i}return __extends(t,n),t})(n.EditableControl.ViewModel);t.ViewModel=i})(t=n.ValidatableControl||(n.ValidatableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i=n,r=i.ViewModels.Forms,u,f,e;(function(n){n[n.Top=0]="Top";n[n.Left=1]="Left";n[n.Hidden=2]="Hidden"})(u=t.LabelPosition||(t.LabelPosition={})),(function(n){n[n.Bottom=0]="Bottom";n[n.Right=1]="Right"})(f=t.SubLabelPosition||(t.SubLabelPosition={})),(function(t){var u;(function(t){var u=(function(t){function u(u,f){var e=t.call(this,u,f)||this;return f=f||{},e.cssClass=i.initObservable(f.cssClass,""),e.hideValidationCheck=f.hideValidationCheck||!1,e.infoBalloonContent=i.isNullOrUndefined(f.infoBalloonContent)?ko.observable():f.infoBalloonContent,e.infoBalloonLinkContent=f.infoBalloonLinkContent||ko.observable(),e.label=n.initObservable(f.label),e.labelPosition=i.isNullOrUndefined(f.labelPosition)?ko.observable(r.LabelPosition.Top):f.labelPosition,e.subLabel=i.initObservable(f.subLabel,undefined),e.subLabelPosition=i.isNullOrUndefined(f.subLabelPosition)?ko.observable(r.SubLabelPosition.Bottom):f.subLabelPosition,e.visible=i.initObservable(f.visible,!0),e._msPortalFxLeftLabelWidth=ko.observable(),e._msPortalFxRequired=ko.observable(),e._msPortalFxOldControl=!0,e}return __extends(u,t),u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(u=t.LabelAndBalloon||(t.LabelAndBalloon={}))})(e=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){function l(n,t){var i=!1;return n.length===t.length&&(i=n.every((function(n,i){return n===t[i]}))),i}var r=n,f=r.Base.Diagnostics,s=r.Base.Promises.cancelOnDispose,u=r.isNullOrUndefined,e=2,o=window.navigator.userAgent,h=!/MSIE /i.test(o)&&/Trident[\/]/i.test(o)&&!/Edge\//i.test(o),c=(function(t){function i(n,i,o,s){var h=this,c=null,a=null,v=null,l,y;return u(i)||i.valid&&i.sections?!u(i)&&i.valid&&i.sections&&(c=i):s=i,typeof o=="string"?a=o:o&&(v=o),o&&s&&s.defaultValue&&f.Log.writeEntry(e,"Forms","Both edit scope and default value are set.  Forms should only specify one of the two.  The default value will be ignored."),s=s||{},h=t.call(this,n,s)||this,l=h.lifetimeManager,h._options=s,h._msPortalFxViewModelValueChangesAreClean=!!h._options.viewModelValueChangesAreClean,h._form=c,h.controlType=0,h.enableValidation=ko.observable(!1),h.valid=ko.observable(!0),h.validate=ko.observable(0),h.delayValidationTimeout=ko.observable(r.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout),h.performValidation=ko.observable(null),h.ensureValidation=ko.observable(0),h.validations=s.validations||ko.observableArray(),h.showValidationMessagesBelowControl=s.showValidationMessagesBelowControl||!1,h.validationResults=ko.observableArray(),h.defaultValue=s.defaultValue||ko.observable(null),h.initialValue=ko.observable(null),h._previousEditScope=null,h.telemetryKeys=s.telemetryKeys,h._msPortalFxWidgetValue=ko.observable(),h.enabled=ko.observable(!h.disabled()),h.enabled.subscribe(l,(function(n){h.disabled(!n)})),h.disabled.subscribe(l,(function(n){h.enabled(!n)})),h.dirty=ko.observable(!1),h._originalDirty=h.dirty,u(c)?(y=h.defaultValue(),h.value=ko.observable(y),h.initialValue(y),h.enableValidation(!0)):a?h._setEditScopeAccessors(c._createEditScopeAccessorFromPath(a),c):v?h._setEditScopeAccessors(v,c):h.value=ko.observable(h.defaultValue()),h.createValueSubscriptions(l),h._msPortalFxClearValidation=ko.observable(),h._msPortalFxTriggerValidation=ko.observable(),h}return __extends(i,t),i.prototype.resetDirtyComputed=function(n){r.disposeDisposable(this._dirtyLifetime);this._dirtyLifetime=this.lifetimeManager.createChildLifetime();ko.computed(this._dirtyLifetime,n)},i.prototype._setEditScopeAccessors=function(n){if(u(this._editScopeAccessors))if(n.createdByBaseFormClass)this._editScopeAccessors=n,this._initializeFieldStateObservables();else{f.Log.writeEntry(e,"Forms","Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");throw new Error("Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");}else{f.Log.writeEntry(e,"Forms","Field._setEditScopeAccessors can only be called once.");throw new Error("Field._setEditScopeAccessors can only be called once.");}},i.prototype.clearValidation=function(){var n=this;return ko.ignoreDependencies((function(){var t=n._msPortalFxClearValidation();return s(n.lifetimeManager,t||Q())}))},i.prototype.triggerValidation=function(){var t=this;return n.tryImmediateResolve(n.require("FxInternal/Utils/ValidationHelper"),(function(n){return n.triggerValidation({vm:t,ltm:t.lifetimeManager,msPortalFxTriggerValidation:t._msPortalFxTriggerValidation})}))},i.prototype._initializeFieldStateObservables=function(){var n=this,i,e,o,f=this._editScopeAccessors,t=this.lifetimeManager;this.initialValue=ko.computed(t,{read:function(){i&&i.dispose();i=t.createChildLifetime();var r=f.getOriginalObservable(i);return r?r():n.defaultValue()},write:function(n){f.getOriginalObservable(i)(n)}});this.value=ko.computed(t,{read:function(){var i,r;return e&&e.dispose(),e=t.createChildLifetime(),i=f.getEditableObservable(e),n._form&&(r=n._form.editScope(),n._previousEditScope!==r&&(n.enableValidation(!1),n._previousEditScope=r)),u(i)?n.defaultValue.peek():i()},write:function(n){o&&o.dispose();o=t.createChildLifetime();var i=f.getEditableObservable(o);if(i)i(n);else if(!(h&&!n))throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.createValueSubscriptions(t);this.resetDirtyComputed((function(){n.setDirty(!r.deepEquals(n.value(),n.initialValue()))}));this._enableValidationReactor=ko.computed(t,(function(){n._form&&n._form.editScope();n.enableValidation(!!(f.getOriginalObservable(i)&&f.getEditableObservable(e)))}))},i.prototype.createValueSubscriptions=function(n){var t=this,u=!1,i=!1,f=this.value;Q.nextTick((function(){var n=t.value,i=!!t.lifetimeManager;n!==f&&i&&(r.disposeDisposable(t._newThisValueBinding),t._newThisValueBinding=n.subscribeAndRun(t.lifetimeManager,f))}));this.setValue(this.value(),this._msPortalFxWidgetValue);this.value.subscribe(n,(function(n){i?t._msPortalFxViewModelValueChangesAreClean&&i&&t.setDirty(!0):(u=!0,t.setValue(n,t._msPortalFxWidgetValue),u=!1,t._form&&t._form.viewModelValueChangesSetDefaultValues&&t.initialValue(n))}));this._msPortalFxWidgetValue.subscribe(n,(function(n){if(!u){i=!0;var r=void 0;if(ko.isComputed(t.value)&&((r=t.value())===n||Array.isArray(r)&&Array.isArray(n)&&l(r,n))){if(!t._form)try{t.setValue(n,t.value)}catch(f){}}else t.setValue(n,t.value);i=!1}}))},i.prototype.setDirty=function(n){this.dirty===this._originalDirty&&this.dirty(n)},i.prototype.setValue=function(n,t){Array.isArray(n)?t(n.slice()):t(n)},i})(t.LabelAndBalloon.ViewModel);i.ViewModel=c})(i=t.Input||(t.Input={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.empty=ko.computed(f.lifetimeManager,(function(){return!f.value()})),f}return __extends(t,n),t})(n.Input.ViewModel);t.ViewModel=i})(t=n.Nullable||(n.Nullable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.emptyValueText=f._options.emptyValueText||ko.observable(""),f.editing=ko.observable(!1),f}return __extends(t,n),t})(n.Nullable.ViewModel);t.ViewModel=i})(t=n.Editable||(n.Editable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this;return e.valueUpdateTrigger=e._options.valueUpdateTrigger||n.ViewModels.Controls.ValueUpdateTrigger.Default,e.delayValidationTimeout=e._options.delayValidationTimeout||ko.observable(500),e.onEnterPressed=e._options.onEnterPressed,e}return __extends(i,t),i})(t.Editable.ViewModel);i.ViewModel=r})(i=t.Typable||(t.Typable={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.popupAlignment=3,f.inputAlignment=10,f}return __extends(t,n),t})(n.Editable.ViewModel);t.ViewModel=i})(t=n.EditableComboBox||(n.EditableComboBox={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function h(n,t,r){r===void 0&&(r=".");var o,s,f;try{for(t=t.replace(/\[/g,r).replace(/\]/g,""),t=t.charAt(0)===r?t.substr(1):t,o=t.split(r),f=ko.unwrap(n)[o[0]],s=1;s<o.length;s++)f=ko.unwrap(f)[o[s]]}catch(h){i.invalidPath()}return(u.isNullOrUndefined(f)||!ko.isObservable(f))&&(e.writeEntry(2,"MsPortalFx.ViewModels.Forms.EditScopeAccessors.InvalidObservablePath","'observablePath' does not identify a non-null observable (observablePath: "+t+")."),i.observablePathInvalid()),f}var u=n,e=u.Base.Diagnostics.Log,c=u.Base.Diagnostics.LogEntryLevel,r="",s={invalidPath:r,observablePathInvalid:r,setOnce:r,editScopeNotSet:r,obsMissing:r},i=FxImpl.getErrorMap(s),f,o;(function(n){n[n.Original=0]="Original";n[n.Editable=1]="Editable"})(f=t.EditScopeObservableType||(t.EditScopeObservableType={}));o=(function(){function t(n,t,i){var u=this,r;this.sections=ko.observableArray();this.viewModelValueChangesSetDefaultValues=!1;t&&(this.editScope=t);this._getNestedData=i;n.registerForDispose(this);r=this._ltm=n.createChildLifetime();this.valid=ko.computed(r,(function(){return!u.sections().some((function(n){return!n.valid()}))}))}return Object.defineProperty(t.prototype,"editScope",{get:function(){return this._editScope||i.editScopeNotSet(),this._editScope},set:function(n){this._editScope&&i.setOnce();this._editScope=n},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._ltm.dispose()},t.prototype._createEditScopeAccessorFromPath=function(n){var t=function(t){return h(t,n)};return this._createEditScopeAccessorFromAccessorFunction(t,!0)},t.prototype.createEditScopeAccessor=function(n){var t,i;return n.writeToEditScope?(i=n,this._createEditScopeAccessorFromOptions(i)):(t=n,this._createEditScopeAccessorFromAccessorFunction(t,!0))},t.prototype.createCustomEditScopeAccessor=function(n){var t,i;return n.writeToEditScope?(i=n,this._createEditScopeAccessorFromOptions(i)):(t=n,this._createEditScopeAccessorFromAccessorFunction(t,!1))},t._logEditScopeAccessorError=function(n){e.writeEntry(2,"EditScopeAccessor",n)},t.prototype._createEditScopeAccessorFromAccessorFunction=function(n,t){var r=this;return{getOriginalObservable:function(t){var u=r.editScope(),e,o,s;return u&&(o=u.getOriginal(u.root),s=r._getNestedData?r._getNestedData(o):o,e=n(s,t,f.Original),e||i.obsMissing("Original")),e},getEditableObservable:function(t){var o=r.editScope(),u,e,s;return o&&(e=o.root,s=r._getNestedData?r._getNestedData(e):e,u=n(s,t,f.Editable),u||i.obsMissing("Editable")),u},createdByBaseFormClass:!0,returnsObservablesFromEditScope:t}},t.prototype._createEditScopeAccessorFromOptions=function(n){var t=this;return{getOriginalObservable:function(i){return t.editScope()?ko.computed(i,(function(){return n.readFromEditScope(t.editScope().getOriginal(t.editScope().root))})):null},getEditableObservable:function(i){return t.editScope()?ko.computed(i,{read:function(){return n.readFromEditScope(t.editScope().root)},write:function(i){n.writeToEditScope(t.editScope().root,i)}}):null},createdByBaseFormClass:!0,returnsObservablesFromEditScope:!1}},__decorate([__metadata("fx:diagnostics",[require,"ViewModel"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Function,Function])],t)})();t.ViewModel=o})(i=t.Form||(t.Form={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){var r=n,u=(function(n){function t(t,i,u,f){var e=n.call(this,t,i,u,f)||this;return e.groups=e._options.groups||ko.observableArray(),e.groups().length===0||e.groups()[0].options().length===0||r.isNullOrUndefined(e.defaultValue())&&e.defaultValue(e.groups()[0].options()[0].value),e}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=u})(i=t.Groups||(t.Groups={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.options=f._options.options||ko.observableArray(),f}return __extends(t,n),t})(n.Input.ViewModel);t.ViewModel=i})(t=n.Options||(n.Options={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){var r=n,u=(function(n){function t(t,i,u,f){var e=this,o=f||{};return r.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(o=i),e=n.call(this,t,i,u,f)||this,e.min=r.initObservable(o.min,0),e.max=r.initObservable(o.max,10),e.step=r.initObservable(o.step,1),e.showStepMarkers=r.initObservable(o.showStepMarkers,!0),e.ariaLabel=r.initObservable(o.ariaLabel),e.legends=o.legends,e.hideTextbox=r.initObservable(o.hideTextbox,!1),e.customValues=o.customValues,e}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=u})(i=t.Slider||(t.Slider={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var e=ko.pureComputed(n.wrap(!0)),r,f,u;(function(n){n[n.None=0]="None";n[n.Pending=1]="Pending";n[n.Success=2]="Success";n[n.Failure=3]="Failure"})(r=i.Status||(i.Status={}));f=(function(n){function t(t,i,u,f){var e=n.call(this,t)||this;return e.text=ko.observable(i||""),e.ariaLabel=ko.observable(),e.visible=ko.observable(!0),e.afterExecute=null,e.status=ko.observable(r.None),e.error=ko.observable(null),e.handler=ko.observable(null),e.attach(u,f),e}return __extends(t,n),t.prototype.execute=function(){var o=this,u=!1,n,f=this.error,t=this.status,i,e;try{if(f(null),t(r.Pending),i=this.handler(),!i)throw new Error("Command does not have handler.");e=i.execute();n=Q(e).then((function(){u=!0}))}catch(s){n=Q.reject(s)}return n.finally((function(n){u?t(r.Success):(f(n),t(r.Failure));var i=o.afterExecute;i&&i()}))},t.prototype.attach=function(n,t){if(n){var i=new u(n,t);this.attachHandler(i)}},t.prototype.attachHandler=function(n){this.handler(n)},t.prototype.detach=function(){this.handler(null)},t})(t.Loadable.ViewModel);i.ViewModel=f;u=(function(){function n(n,t,i){this.execute=function(){return n.call(i)};this.canExecute=t?ko.pureComputed(t,i):e}return n})();i.DelegatingHandler=u})(i=t.Command||(t.Command={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var e=n,u=n.ViewModels,f=u.Controls,o=n.isNullOrWhiteSpace,s=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Controls.DeleteAssetConfirmation"),h=e.Resources.Strings,r=h.DeleteAssetConfirmation,c=(function(t){function i(i,u){var h=t.call(this,i)||this,a,c,y,w;if(h.selectedItems=ko.observableArray(),h._gridItems=null,h._options=null,h._assetName=ko.observable(),h._assetTypeDisplayName=ko.observable(),h.affectedItemsLabel=ko.observable(r.affectedItemsLabel),h.controlType=76,h._options=u,a=h.lifetimeManager,h._assetTypeDisplayName(u.assetTypeDisplayName),c=u.grid,c){var p=c.selectableRowExtensionOptions,b=p?f.Lists.Grid.Extensions.SelectableRow:null,v=h.grid=new f.Lists.Grid.ViewModel(a,c.items,b,p);v.columns=c.columns;v.noRowsMessage=c.noRowsMessage;v.showHeader=e.isNullOrUndefined(c.showHeader)?!0:c.showHeader;p&&(h.selectedItems=v.selectableData.selectedItems);h._gridItems=v.items}return y=h._assetName,h.warning=ko.computed(a,(function(){return h._onUpdateWarningText(y())})),w=h.confirmationLabel=ko.computed(a,(function(){return h._onUpdateConfirmationLabel(h._assetTypeDisplayName())})),h.confirmationEditor=new l(a,y,w),h.valid=ko.computed(a,(function(){var n=y(),t=h.confirmationEditor.textBox.valid();return o(n)?!1:t})),n.isFeatureEnabled("deleteobsoletecontrols")&&s.error(new Error("MsPortalFx.ViewModels.Controls.DeleteAssetConfirmation.ViewModel is obsolete. Use Fx/Controls/ instead of MsPortalFx controls.")),h}return __extends(i,t),i.prototype._onUpdateWarningText=function(n){return r.warningText.format(n)},i.prototype._onUpdateConfirmationLabel=function(n){return r.confirmationLabel.format(n)},i.prototype._selectAll=function(){var n=this.grid&&this.grid.selectableData;n&&n.selectableItems().forEach((function(n){return n.isSelected(!0)}))},i})(t.Loadable.ViewModel),l=(function(){function n(n,t,i){var s=this._lifetimeManager=n.createChildLifetime(),e=this.textBox=new u.Forms.TextBox.ViewModel(n);e.disabled(!0);e.valueUpdateTrigger=f.ValueUpdateTrigger.Input;ko.computed(s,(function(){var n=t();o(n)?(e.disabled(!0),e.validations([])):(e.disabled(!1),e.validations([new u.EqualsValidation(n,r.assetNameValidationFailureMessage.format(n))]),e.value(""))}));ko.computed(s,(function(){e.ariaLabel(i())}))}return n.prototype.dispose=function(){this._lifetimeManager.dispose()},n})();i.ViewModel=c})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=(function(n){function t(t){var i=n.call(this,t)||this;return i.disabled=ko.observable(!1),i.controlType=84,i}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.BaseViewModel=i})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r=n.ViewModels.Controls.HotSpot.BaseViewModel,u=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/HotSpot/BaseViewModel"),f=(function(i){function r(r){var f=i.call(this,r)||this;return f.selectable=t.Part.createSelectableViewModel(),f.clickableDuringCustomize=!1,n.isFeatureEnabled("deleteobsoletecontrols")&&u.error(new Error("MsPortalFx.ViewModels.Controls.HotSpot.ViewModel is obsolete. Use fxclick directly in your HTML template instead.")),f}return __extends(r,i),r})(r);i.ViewModel=f})(r=i.HotSpot||(i.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.controlType=88,r.clickableLink=i?i.clickableLink:ko.observable(),r}return __extends(t,n),t})(n.ViewModels.Controls.HotSpot.BaseViewModel);t.LinkViewModel=i})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t,i){var r=n.call(this,t,!1)||this;return r.image=i?i.image:ko.observable(),r.text=i?i.text:ko.observable(),r.size=i&&i.size?i.size:ko.observable(1),r}return __extends(t,n),t})(n.Loadable.ViewModel);t.BaseViewModel=i})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,t)||this;return i.isClickable&&i.isClickable.dispose(),i.isClickable=ko.pureComputed((function(){return i.isSelected()&&!!i.selectedValue()})),i}return __extends(t,n),t})(n.ViewModels.Selectable),r=(function(n){function t(t,r,u,f){var e=n.call(this,t,f)||this;return e.controlType=78,e.selectable=new i({isSelected:r&&r.isSelected}),e}return __extends(t,n),t})(t.BaseViewModel);t.ViewModel=r})(i=t.InfoBox||(t.InfoBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.controlType=87,r.clickableLink=i?i.clickableLink:ko.observable(),r}return __extends(t,n),t})(n.BaseViewModel);n.LinkViewModel=t})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t){var i=n.call(this,t)||this;return i.header=ko.observable(""),i.title=ko.observable(""),i.description=ko.observable(""),i.callToActionText=ko.observable(""),i.callToActionUri=ko.observable(""),i.callToSecondaryActionText=ko.observable(""),i.callToSecondaryActionUri=ko.observable(""),i.imageType=ko.observable(0),i.controlType=79,i}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=i})(t=n.Notice||(n.Notice={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var u=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Controls.Wizard"),f,r;(function(n){n[n.Sequential=0]="Sequential";n[n.NonSequential=1]="NonSequential"})(f||(f={})),(function(n){n[n.Form=0]="Form";n[n.Selector=1]="Selector"})(r||(r={}));var e=(function(){function t(t,i,f,e,o){this.description=ko.observable("");this.iconUri=ko.observable();this.status=ko.observable();this.stepId=t;this.stepType=n.isNullOrUndefined(i)?r.Form:i;this.title=ko.observable(f);this.formBlade=e;this.extension=o;n.isFeatureEnabled("deleteobsoletewizardcontrols")&&u.error(new Error("MsPortalFx.ViewModels.Controls.Wizard.WizardStepBase is obsolete and no longer a supported navigation/layout model. Please redesign the affected blades for better full screen blade experiences."))}return t})(),o=(function(t){function i(i,r){var e=this,o,s;return i&&i.createChildLifetime||(o=new n.Errors.Error("MsPortalFx.ViewModels.Controls.Wizard.ViewModel's constructor first argument must be lifetimeManager."),n.Base.Diagnostics.Log.writeEntry(2,"Wizard",o),i=undefined,r=arguments[0]),e=t.call(this,i)||this,e.controlType=107,e.mode=f.Sequential,e.steps=ko.observableArray(),e.selection=ko.observable(),s=e.savedState=ko.observable(),e.currentState=ko.observable(),e.stepOutput=ko.observable(),e.beginExecuteCommand=ko.observable(),e._autoOpenFirstStep=!1,r&&r.currentState!==undefined?s(r.currentState):e._autoOpenFirstStep=!0,n.isFeatureEnabled("deleteobsoletewizardcontrols")&&u.error(new Error("MsPortalFx.ViewModels.Controls.Wizard.ViewModel is obsolete and no longer a supported navigation/layout model. Please redesign the affected blades for better full screen blade experiences.")),e}return __extends(i,t),i.prototype.initialize=function(){this._autoOpenFirstStep&&(this.savedState({stepStatuses:[]}),this._autoOpenFirstStep=!1)},i})(t.Loadable.ViewModel),s=(function(t){function i(i,f,e,o,s,h){var c=t.call(this,i,r.Form,f,e,h)||this;return c.status(o),c.isOptional=!!s,n.isFeatureEnabled("deleteobsoletewizardcontrols")&&u.error(new Error("MsPortalFx.ViewModels.Controls.Wizard.WizardStep is obsolete and no longer a supported navigation/layout model. Please redesign the affected blades for better full screen blade experiences.")),c}return __extends(i,t),i})(e),h=(function(t){function i(i,f,e,o){var s=t.call(this,i,r.Selector,f,e,o)||this;return s.value=ko.observable(),s.defaultValue=ko.observable(),s.displayText=ko.observable(""),s.locked=ko.observable(!1),s.infoBalloonText=ko.observable(""),s.lockedBalloonText=ko.observable(""),n.isFeatureEnabled("deleteobsoletewizardcontrols")&&u.error(new Error("MsPortalFx.ViewModels.Controls.Wizard.SelectorStep is obsolete and no longer a supported navigation/layout model. Please redesign the affected blades for better full screen blade experiences.")),s}return __extends(i,t),i})(e);i.SelectorStep=h;i.WizardStep=s;i.ViewModel=o;i.WizardMode=f;i.StepType=r})(i=t.Wizard||(t.Wizard={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Controls.Balloon"),f=(function(){function t(t,i){this.linkText=t||"";this.linkUri=i||"";n.isFeatureEnabled("deleteobsoletecontrols")&&r.error(new Error("MsPortalFx.ViewModels.Controls.Balloon.Link is obsolete. Use Fx/Controls/InfoBalloon.Link instead."))}return t})(),u=(function(){function t(t,i,u,f){this.top=t||0;this.left=i||0;this.width=u||0;this.height=f||0;n.isFeatureEnabled("deleteobsoletecontrols")&&r.error(new Error("MsPortalFx.ViewModels.Controls.Balloon.Box is obsolete. Use Fx/Controls/InfoBalloon.Box instead."))}return t})(),e=(function(t){function i(i,f){var e=t.call(this,i,f)||this;return e.visible=ko.observable(!1),e.box=ko.observable(new u),e.content=ko.observable(""),e.link=ko.observable(),e.appendTo="body",e.closeOtherBalloons=!1,n.isFeatureEnabled("deleteobsoletecontrols")&&r.error(new Error("MsPortalFx.ViewModels.Controls.Balloon.ViewModel is obsolete. Use Fx/Controls/InfoBalloon instead.")),e}return __extends(i,t),i})(t.Loadable.ViewModel);i.Link=f;i.ViewModel=e;i.Box=u})(i=t.Balloon||(t.Balloon={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var f=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/Internal/IFrame"),r,u;(function(n){n[n.Auto=1]="Auto";n[n.Yes=2]="Yes";n[n.No=3]="No"})(r=i.Scroll||(i.Scroll={}));u=(function(t){function i(i,u){var e=t.call(this,i)||this;return e.controlType=108,e.src=u.src,e.scrolling=u.scrolling||r.Auto,e.postMessage=u.postMessage||ko.observable("Initialized"),e.receiveMessage=u.receiveMessage||ko.observable(),e.timeoutInMs=u.loadTimeoutInMilliseconds||3e4,n.isFeatureEnabled("deleteobsoletecontrols")&&f.error(new Error("MsPortalFx.ViewModels.Controls.Internal.IFrame is obsolete. Please migrate to the AMD creation pattern using Fx/Controls/FrameControl.")),e}return __extends(i,t),i})(t.Base.ViewModel);i.ViewModel=u})(r=i.IFrame||(i.IFrame={}))})(i=t.Internal||(t.Internal={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var e=n,h=e.ViewModels,r=h.Controls.Command.ViewModel,c=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/Data/QueryBuilder"),u,f,o,s;(function(n){n[n.NotLoading=0]="NotLoading";n[n.Loading=1]="Loading";n[n.Failed=2]="Failed"})(u||(u={}));i.QueryLoadingStatus=u,(function(n){n[n.Operator=0]="Operator";n[n.Operand=1]="Operand"})(f||(f={}));i.CallbackMethodType=f;o=(function(){function n(){}return Object.defineProperty(n,"Group",{get:function(){return"group"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"Predicate",{get:function(){return"predicate"},enumerable:!1,configurable:!0}),n})();i.QueryExpressionType=o;s=(function(t){function u(u,f){var o=this,s=f&&f.schema?f.schema:f;return o=t.call(this,u)||this,o.controlType=31,o.schema=ko.observable(s),o.title=ko.observable(""),o.query=ko.observable(null),o.queryViewModel=ko.observable(),o.savedQuery=ko.observable(null),o.callback=null,o.showHeader=ko.observable(!0),o.showFooter=ko.observable(!0),o.add=new r(u),o.insert=new r(u),o.remove=new r(u),o.group=new r(u),o.ungroup=new r(u),o.save=new r(u),o.queryLoading=ko.observable({status:i.QueryLoadingStatus.NotLoading}),o._msPortalFxOperandControls=ko.observableArray(),o.ariaLabel=e.initObservable(f&&f.ariaLabel?f.ariaLabel:""),n.isFeatureEnabled("deleteobsoletecontrols")&&c.error(new Error("MsPortalFx.ViewModels.Controls.Data.QueryBuilder and its associated types are obsolete. Please use Fx/Controls/EditableGrid or custom UI instead.")),o}return __extends(u,t),u})(t.Loadable.ViewModel);i.ViewModel=s})(r=i.QueryBuilder||(i.QueryBuilder={}))})(i=t.Data||(t.Data={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var f=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Controls.DockedBalloon"),r,u;(function(n){n[n.Info=0]="Info";n[n.Validation=2]="Validation"})(r||(r={}));u=(function(t){function i(i){var u=t.call(this,i)||this;return u.type=r.Info,u.content=ko.observable(""),u.ariaLabel=ko.observable(""),u.link=ko.observable(),u.balloonVisible=ko.observable(!1),u.stopClickPropagation=ko.observable(!0),u.controlType=32,n.isFeatureEnabled("deleteobsoletedockedballooncontrols")&&f.error(new Error("MsPortalFx.ViewModels.Controls.DockedBalloon.ViewModel is deprecated. Use Fx/Controls/InfoBalloon instead.")),u}return __extends(i,t),i})(t.Loadable.ViewModel);i.Type=r;i.ViewModel=u})(i=t.DockedBalloon||(t.DockedBalloon={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){function o(n){e.push(n)}function s(){return e}var i=n.ViewModels.Controls.Command.Status,r,u,f,e;(function(t){function r(){if(i){var t=n.Helpers.Deferred();return{promise:t.promise(),resolve:function(n){t.resolve(n)},reject:function(n){t.reject(n)}}}return Q.defer()}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.defer=r})(r||(r={})),(function(n){n[n.None=0]="None";n[n.Discussion=1]="Discussion"})(u||(u={}));t.Extensions=u;f=(function(){function n(n){this.handler=ko.observable(n);this.status=ko.observable(i.None);this.error=ko.observable(null);this.errorMessage=ko.observable(null)}return n.prototype.execute=function(n){var t=r.defer(),s=this.handler(),e=this.status,o=this.error,u=this.errorMessage,f;return e(i.Pending),o(null),u(null),s?s(n).then((function(n){e(i.Success);t.resolve(n)}),(function(n){e(i.Failure);o(n);n&&(n.message?u(n.message):n.toString&&u(n.toString()));t.reject(n)})):(f=new Error("Command is not available for execution."),t.reject(f),o(f),u(f.message)),t.promise},n})();t.ObsoleteExtensionCommand=f;t.ExtensionCommand=f;e=[];t.registerExtensionSetup=o;t.getExtensionSetups=s})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i=n.ViewModels.Controls.Documents.Editor.ExtensionCommand,u=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/Documents/DiscussionThread"),f=(function(){function n(n,t,r){this.id=ko.observable(n||-1);this.lastUpdatedDate=ko.observable(null);this.publishedDate=ko.observable(null);this.parentId=ko.observable(-1);this.threadId=ko.observable(-1);this.author=ko.observable(r);this.content=ko.observable(t||"");this.canDelete=ko.observable(!1);this.isEditable=ko.observable(!1);this.save=new i}return n})(),r;t.DiscussionCommentViewModel=f;r=(function(){function t(t,r){this.id=ko.observable(t||-1);this.lastUpdatedDate=ko.observable(null);this.publishedDate=ko.observable(null);this.comments=ko.observableArray(r);this.save=new i;this.addComment=new i;this.deleteComment=new i;n.isFeatureEnabled("deleteobsoletecontrols")&&u.error("MsPortalFx.ViewModels.Controls.Documents.DiscussionThread and its associated types have been obsoleted. Please use Fx/Controls/CustomHTML instead.")}return t})();t.DiscussionThreadViewModel=r})(i=t.DiscussionThread||(t.DiscussionThread={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){var r,u,e,f;(function(t){function r(t){if(i){var r=n.Helpers.Deferred();return r.resolve(t),r.promise()}return Q.resolve(t)}function u(t){if(i){var r=n.Helpers.Deferred();return r.reject(t),r.promise()}return Q.reject(t)}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.resolve=r;t.reject=u})(r||(r={}));u=r.resolve();e=(function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.position=ko.observable(r),u}return __extends(t,n),t})(t.DiscussionThread.DiscussionThreadViewModel);i.EditorThreadViewModel=e;f=(function(){function f(n){var t=this;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this.options=n;this._attachAddThreadHandler();n.threads.subscribeArrayAdds(this._lifetimeManager,(function(n){t._addThreadHandlers(n)}));n.threads().forEach((function(n){t._addThreadHandlers(n)}))}return f.prototype.dispose=function(){this.options=null;this._lifetimeManager.dispose()},f.prototype._attachAddThreadHandler=function(){var r=this.options,f;r.addThread||(r.addThread=new n.ViewModels.Controls.Documents.Editor.ObsoleteExtensionCommand);f=function(n){var f=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",r.author()),e;return f.canDelete(!0),f.isEditable(!0),e=new i.EditorThreadViewModel(-(new Date).getTime(),[f],n),r.threads.push(e),u};r.addThread.handler(f)},f.prototype._addThreadHandlers=function(n){var t=this;this._attachSaveThreadHandler(n);this._attachAddCommentHandler(n);this._attachDeleteCommentHandler(n);n.comments().forEach((function(n){t._attachSaveCommentHandler(n)}))},f.prototype._attachSaveThreadHandler=function(n){var t=this,i=function(i){var u=t.options,f;return u.saveThread&&(f=u.saveThread(i,n,u.containerName),f)?f:r.reject("No save handler found.")};n.save.handler(i)},f.prototype._attachAddCommentHandler=function(n){var i=this,r=function(){var r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.options.author());return r.canDelete(!0),r.isEditable(!0),r.threadId(n.id()),i._attachSaveCommentHandler(r),n.comments.push(r),u};n.addComment.handler(r)},f.prototype._attachDeleteCommentHandler=function(t){var i=this,u=function(u){var f,e=n.find(t.comments(),(function(n){return n.id()===u})),o=i.options;return e&&o.deleteComment&&(f=o.deleteComment(t.id(),u),f)?f.then((function(){t.comments.remove(e)})):r.reject("No save handler found.")};t.deleteComment.handler(u)},f.prototype._attachSaveCommentHandler=function(n){var t=this,i=function(i){var f=t.options,u;return f.saveComment&&(u=f.saveComment(i,n),u)?u:r.reject("No save handler found.")};n.save.handler(i)},f})();i.DiscussionCommandHandler=f;i.registerExtensionSetup((function(n,t){var r;return(n&i.Extensions.Discussion)!==i.Extensions.None&&!!t.discussion?(r=new f(t.discussion),[r]):null}))})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var f=n.ViewModels.Controls.Command.ViewModel,o=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/Documents/Editor"),i,r,u,e;(function(n){n[n.Text=0]="Text";n[n.Custom=1]="Custom";n[n.Bat=2]="Bat";n[n.C=3]="C";n[n.CoffeeScript=4]="CoffeeScript";n[n.Cpp=5]="Cpp";n[n.CSharp=6]="CSharp";n[n.CSHtml=7]="CSHtml";n[n.Css=8]="Css";n[n.Dockerfile=9]="Dockerfile";n[n.FSharp=10]="FSharp";n[n.Go=11]="Go";n[n.Handlebars=12]="Handlebars";n[n.Html=13]="Html";n[n.Ini=14]="Ini";n[n.Pug=15]="Pug";n[n.Java=16]="Java";n[n.JavaScript=17]="JavaScript";n[n.JSHtm=18]="JSHtm";n[n.Json=19]="Json";n[n.Less=20]="Less";n[n.Lua=21]="Lua";n[n.MarkDown=22]="MarkDown";n[n.ObjectiveC=23]="ObjectiveC";n[n.Php=24]="Php";n[n.PowerShell=25]="PowerShell";n[n.Python=26]="Python";n[n.R=27]="R";n[n.Ruby=28]="Ruby";n[n.Sql=29]="Sql";n[n.Swift=30]="Swift";n[n.TypeScript=31]="TypeScript";n[n.VisualBasic=32]="VisualBasic";n[n.Xaml=33]="Xaml";n[n.Xml=34]="Xml";n[n.MySQL=35]="MySQL";n[n.PgSQL=36]="PgSQL";n[n.Kql=37]="Kql";n[n.Yaml=38]="Yaml"})(i||(i={}));t.ContentType=i,(function(n){n[n.ES5=0]="ES5";n[n.ES6=1]="ES6"})(r||(r={}));t.TypeScriptScriptTarget=r,(function(n){n[n.Ignore=0]="Ignore";n[n.Hint=1]="Hint";n[n.Info=2]="Info";n[n.Warning=3]="Warning";n[n.Error=4]="Error"})(u||(u={}));t.MarkerSeverity=u;e=(function(i){function r(r,u,e,s,h,c,l,a){s===void 0&&(s={});h===void 0&&(h=null);c===void 0&&(c=t.Extensions.None);l===void 0&&(l=null);a===void 0&&(a=null);var v=i.call(this,r)||this;return v.controlType=37,v.contentType=ko.observable(u),v.customContentType=ko.observable(h),v.content=ko.observable(e),v.contentUri=ko.observable(),v.selectedContent=ko.observable(""),v.selectedRange=ko.observable({startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}),v.markers=ko.observableArray(),v.position=ko.observable({lineNumber:1,column:1}),v.options=ko.observable(s),v.dirty=ko.observable(!1),v.visible=ko.observable(!0),v.save=new f(r,""),v.refresh=new f(r,""),v.autoSaveTimeout=ko.observable(0),v.extensions=c,v.extensionOptions=l,v.configuration=a,v.content.extend({notify:"always"}),v._setupExtensions(),n.isFeatureEnabled("deleteobsoletecontrols")&&o.error(new Error("MsPortalFx.ViewModels.Controls.Documents.Editor and its associated types are obsolete. Use Fx/Controls/Editor instead.")),v}return __extends(r,i),r.prototype._setupExtensions=function(){for(var i,r,f=t.getExtensionSetups(),n=0,u=f.length;n<u;n++)i=f[n],i&&(r=i(this.extensions,this.extensionOptions),r&&this._addDisposablesToCleanUp(r))},r})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=e})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.SortableColumn=1]="SortableColumn";n[n.SelectableRow=2]="SelectableRow";n[n.RightClickableRow=4]="RightClickableRow";n[n.Groupable=8]="Groupable";n[n.EditableRow=16]="EditableRow";n[n.Filterable=32]="Filterable";n[n.ReorderRow=64]="ReorderRow";n[n.ContextMenuShortcut=128]="ContextMenuShortcut";n[n.Pageable=256]="Pageable";n[n.Hierarchical=512]="Hierarchical";n[n.Scrollable=1024]="Scrollable";n[n.Hoverable=2048]="Hoverable";n[n.ResizableColumn=4096]="ResizableColumn"})(t=n.Extensions||(n.Extensions={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t,i;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.ShortTime=100]="ShortTime";n[n.LongTime=101]="LongTime";n[n.ShortDate=102]="ShortDate";n[n.LongDate=103]="LongDate";n[n.MonthDay=104]="MonthDay";n[n.YearMonth=105]="YearMonth";n[n.CustomDate=106]="CustomDate";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.PercentageBar=113]="PercentageBar";n[n.Number=114]="Number";n[n.HtmlBindings=1e3]="HtmlBindings"})(t=n.Format||(n.Format={})),(function(n){n[n.Default=0]="Default";n[n.CheckBox=1]="CheckBox";n[n.TextBox=2]="TextBox";n[n.CheckBoxRowSelection=4]="CheckBoxRowSelection";n[n.DropDown=5]="DropDown";n[n.GroupDropDown=6]="GroupDropDown"})(i=n.HtmlBindingsType||(n.HtmlBindingsType={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i=n,r=(function(n){function t(t,r){var u=n.call(this,t)||this;return u.value=ko.observable(),r===!1||r===!0?r={loading:ko.observable(r)}:(r===null||r===undefined)&&(r={}),u.readOnly=ko.observable(!1),u.loading=ko.observable(!1),r=r||{},u.cssClass=i.initObservable(r.cssClass,""),u.hideValidationCheck=r.hideValidationCheck||!1,u.infoBalloonContent=i.isNullOrUndefined(r.infoBalloonContent)?ko.observable():r.infoBalloonContent,u.infoBalloonLinkContent=r.infoBalloonLinkContent||ko.observable(),u.label=i.isNullOrUndefined(r.label)?ko.observable():r.label,u.labelPosition=i.isNullOrUndefined(r.labelPosition)?ko.observable(i.ViewModels.Forms.LabelPosition.Top):r.labelPosition,u.subLabel=i.initObservable(r.subLabel,undefined),u.subLabelPosition=i.isNullOrUndefined(r.subLabelPosition)?ko.observable(i.ViewModels.Forms.SubLabelPosition.Bottom):r.subLabelPosition,u.visible=i.initObservable(r.visible,!0),u._msPortalFxLeftLabelWidth=ko.observable(),u._msPortalFxRequired=ko.observable(),u.controlType=40,u.hideTextbox=r&&r.hideTextbox,u.ariaLabel=i.initObservable(r&&r.ariaLabel,""),u._msPortalFxRows=r&&r.rows||1,u.subLabel=i.initObservable(r&&r.subLabel),u}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=r})(i=t.CopyableLabel||(t.CopyableLabel={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.Default=0]="Default";n[n.DateTime=1]="DateTime";n[n.SettingListGroupOrder=9999]="SettingListGroupOrder"})(t=n.SortFunction||(n.SortFunction={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.Sequential=0]="Sequential";n[n.Pageable=1]="Pageable"})(t=n.PageableType||(n.PageableType={}))})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){function e(n,t){return t(n)}function o(n){var t=n();return t||u.blockInteractionUntilEditScopeLoads(),t}function y(n){l.Log.writeEntry(2,"Grid",n)}var r=n,l=n.Base.Diagnostics,h=n.ViewModels,i=h.Controls.Lists.Grid.Extensions,s,c;(function(t){function r(t){if(i){var r=n.Helpers.Deferred();return r.resolve(t),r.promise()}return Q.resolve(t)}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.resolve=r})(s||(s={}));var a=r.disposeDisposable,f="",v={itemsSuppliedWithEditableRow:f,editScopeRoot:f,pageableEditableRowMismatch:f,pageableScrollableMismatch:f,missingValidDataNavigator:f,itemsSuppliedWithPageableExtensionWithDataNav:f,blockInteractionUntilEditScopeLoads:f,itemsSuppliedWithScrollableExtensionWithDataNav:f,sortCallbackWithDataNav:f,loadBySkipTakeMissing:f,loadByContinuationTokenMissing:f,scrollableEditableRowMismatch:f},u=FxImpl.getErrorMap(v);c=(function(f){function c(s,c,l,a){var v=f.call(this,s)||this,y,p,et,ht,ct,w,it,ot,lt,pt,b,rt,at,vt,wt,bt;s=v.lifetimeManager;v.controlType=54;v.addEmptyRow=ko.observable();v.summary=ko.observable();v.columns=ko.observableArray();v.resetCallback=ko.observable();v.noRowsMessage=ko.observable(r.Resources.Strings.ViewModels.Controls.noRowsMessage);v.sortByList=ko.observableArray();v.showHeader=!0;v._resetHandler=null;v._addCreatedLocked=!1;v._pendingResetCallbackPromise=null;v._msPortalFxActions={};v.ariaLabel=v.summary;v.items=c||ko.observableArray();v.createdItems=ko.observableArray();y=a||{};v.extensionsOptions={};v.getRowAriaLabel=y.getRowAriaLabel;v.rowAriaLabelDependencies=y.rowAriaLabelDependencies;var kt=l&i.ContextMenuShortcut,d=l&i.EditableRow,dt=l&i.Filterable,gt=l&i.Groupable,ni=l&i.Hierarchical,ti=l&i.Hoverable,ut=l&i.Pageable,ii=l&i.ReorderRow,ft=l&i.ResizableColumn,g=l&i.RightClickableRow,nt=l&i.SelectableRow,yt=l&i.SortableColumn,ri=n.initValue(y.scrollable&&y.scrollable.horizontal,!0),tt=n.initValue(y.scrollable&&y.scrollable.vertical,!!(y.scrollable||l&i.Scrollable));if(ft||(l|=ft=i.ResizableColumn),d&&(l|=nt=i.SelectableRow,l|=g=i.RightClickableRow),kt&&(l|=g=i.RightClickableRow),g&&(l|=nt=i.SelectableRow),nt&&(l|=g=i.RightClickableRow),v.extensions=l,d&&(p=v.extensionsOptions.editableRow=r.clone(y.editableRow)),dt&&(v.extensionsOptions.filterable=r.clone(y.filterable)),gt&&(v.extensionsOptions.groupable=r.clone(y.groupable)),ni&&(v.extensionsOptions.hierarchical=r.clone(y.hierarchical)),ti&&(v.extensionsOptions.hoverable=r.clone(y.hoverable)),ut&&(et=v.extensionsOptions.pageable=r.clone(y.pageable)),ii&&(v.extensionsOptions.reorderRow=r.clone(y.reorderRow)),ft&&(ht=v.extensionsOptions.resizableColumn=r.clone(y.resizableColumn)),g&&(v.extensionsOptions.controlCommands=y.controlCommands),ct=v.extensionsOptions.scrollable={dataNavigator:y.scrollable&&y.scrollable.dataNavigator,horizontal:ri,vertical:tt},nt&&(w=v.extensionsOptions.selectableRow=r.clone(y.selectableRow),v.extensionsOptions.onRowClicked=y.onRowClicked),yt&&(it=v.extensionsOptions.sortableColumn=r.clone(y.sortableColumn)),d&&(ot=p.editScope,ot&&c&&u.itemsSuppliedWithEditableRow(),ot&&(v._editScope=ot,p.editScope=null,p.getItems||(p.getItems=function(n){return ko.isObservable(n.root)&&Array.isArray(n.root())&&"splice"in n.root||u.editScopeRoot(),n.root}),lt=function(n,t){return ko.computed(s,(function(){var i=t(),r=i?i():[];n.splice.apply(n,[0,n().length].concat(r))}))},lt(v.items,(function(){var n=v._editScope();return n&&e(n,p.getItems)})),lt(v.createdItems,(function(){var n=v._editScope();return n&&n.getCreated(e(n,p.getItems))})),pt=ko.computed(s,(function(){return!!v._editScope()})),r.extend(p,{create:function(){return v._create(o(v._editScope),p.getItems)},addCreated:function(n){v._addCreated(o(v._editScope),p.getItems,n)},markForDelete:function(n){v._markForDelete(o(v._editScope),n)},enableValidation:pt}),p.enableRowAdd!==!1&&v._addInitialCreatedRow(v._editScope,p.getItems))),ut&&(d&&u.pageableEditableRowMismatch(),tt&&u.pageableScrollableMismatch(),b=et.dataNavigator,b||u.missingValidDataNavigator(),b&&c&&u.itemsSuppliedWithPageableExtensionWithDataNav(),rt=et.type,rt!==t.PageableType.Pageable&&rt===t.PageableType.Sequential,rt!==t.PageableType.Sequential||b.loadByContinuationToken||u.loadByContinuationTokenMissing(),rt!==t.PageableType.Pageable||b.loadBySkipTake||u.loadBySkipTakeMissing(),v._resetHandler=function(){return v.reset()},b.addResetNavigationListener(v._resetHandler)),ft&&tt&&!ht.resizeToPercent&&(ht.resizeToPercent=ko.observable(!1)),yt){var k=it.dataNavigator,ui=v.sortByList,st=it.sortCallback;k||(k=it.dataNavigator=ut&&et.dataNavigator||tt&&ct.dataNavigator);k&&st&&u.sortCallbackWithDataNav();k||st||(st=it.sortCallback=function(n){var t=v.items().slice(0);n&&n.length&&t&&t.length&&t.sort((function(t,i){var u=0;return n.some((function(n){var f=t[n.itemKey],e=i[n.itemKey];return u=r.compare(f,e),u&&n.sortOrder===2&&(u=-u),u!==0})),u}));v.items(t)});v._msPortalFxActions.sort=function(n){return(ui(n),k)?k.resetNavigation():Q(st(n))}}return tt&&(d&&u.scrollableEditableRowMismatch(),ut&&u.pageableScrollableMismatch(),at=ct.dataNavigator,at&&(c&&u.itemsSuppliedWithScrollableExtensionWithDataNav(),v._resetHandler=function(){return v.reset()},at.addResetNavigationListener(v._resetHandler))),nt&&(vt=v.items,n.isUndefined(w.selectionMode)&&(w.selectionMode=1),n.isUndefined(w.leaveSelectionOnDeactivation)&&(w.leaveSelectionOnDeactivation=w.selectionMode!==1),v.createdItems&&(vt=ko.computed(s,(function(){return v.items().concat(v.createdItems())}))),v.selectableData=new h.SelectableSet(vt,w.itemMatchesSelection,w.createSelection,w.initialSelection,w.supplyCommands,!0,w.leaveSelectionOnDeactivation)),wt=v.items.map(s,(function(n,t){return ko.ignoreDependencies((function(){return v._createMetadataForItem(n,t)}))})),bt=v.createdItems.map(s,(function(n,t){return ko.ignoreDependencies((function(){return v._createMetadataForItem(n,t)}))})),v.rowMetadata=ko.observableArray(),ko.computed(s,(function(){v.rowMetadata(wt().concat(bt()))})),v}return __extends(c,f),c.prototype.getRowMetadata=function(t){return n.find(this.rowMetadata(),(function(n){return n.item===t}))},c.prototype.reset=function(){var i=this,r=this.resetCallback(),t;return r?Q(r()):(this._pendingResetCallbackPromise||(t=Q.defer(),this._pendingResetCallbackPromise=t.promise,this.resetCallback.fxAwait(this.lifetimeManager,(function(n){return!!n})).then((function(r){i._pendingResetCallbackPromise?Q(r()).then((function(n){t.resolve(n)}),(function(n){t.reject(n)})).finally((function(){i._pendingResetCallbackPromise=null})):t.reject(new n.Errors.DisposedCanceledError)}))),this._pendingResetCallbackPromise)},c.prototype.dispose=function(){if(this._resetHandler){var n=this.extensionsOptions.pageable;n&&n.dataNavigator&&n.dataNavigator.removeResetNavigationListener(this._resetHandler);this._resetHandler=null}this._pendingResetCallbackPromise&&(this._pendingResetCallbackPromise=null);a(this.selectableData);f.prototype.dispose.call(this)},c.prototype._createMetadataForItem=function(n,t){var r={item:t,cssClass:ko.observable(""),ariaLabel:ko.observable()},f,u;return this.extensions&i.EditableRow&&(f=this.extensionsOptions.editableRow,f&&(r.editState=o(this._editScope).getEditState(t))),this.extensions&i.SelectableRow&&(u=this.extensionsOptions.selectableRow,r.selected=ko.observable(!1),r.disabled=ko.observable(!1),r.activated=ko.observable(null),r.activatedInfo=ko.observable(null),r.useDefaultActivation=ko.observable(!0),u&&u.linkProvider&&(r.link=u.linkProvider(n,t))),this.extensions&i.Groupable&&(r.groupId=ko.observable("")),r},c.prototype._create=function(n,t){var i=n.create(e(n,t)),r=this.extensionsOptions.editableRow;return r&&r.created&&r.created(i),this.addEmptyRow(i),s.resolve(i)},c.prototype._addCreated=function(n,t,i){if(!this._addCreatedLocked)try{this._addCreatedLocked=!0;var r=this.createdItems().some((function(n){return n&&i&&n===i}));i&&!r&&n.addCreated(i,e(n,t))}finally{this._addCreatedLocked=!1}},c.prototype._markForDelete=function(t,i){var u=function(n){return n===i},r=n.find(this.items(),u);if(r){t.markForDelete(r);return}if(r=n.find(this.createdItems(),u),r){t.revert(r);return}y("The item marked for deletion could not be found.")},c.prototype._addInitialCreatedRow=function(n,t){var i=this,r=function(n){i._create(n,t)};n.fxOnceAndRun(this.lifetimeManager,(function(n){return r(n)}))},c})(r.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=c})(i=t.Grid||(t.Grid={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var r,f,u,e;i.log=new n.Base.Diagnostics.Log("ObsoleteControl"),(function(n){n[n.Selectable=1]="Selectable";n[n.Groupable=2]="Groupable";n[n.ContextMenu=4]="ContextMenu";n[n.Filterable=8]="Filterable"})(r||(r={})),(function(n){n[n.Collection=0]="Collection";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(f||(f={})),(function(n){n[n.Single=0]="Single";n[n.Multiple=1]="Multiple"})(u||(u={}));e=(function(t){function e(e,o,s){var h,c;return o===void 0&&(o=0),h=this,s=s||{},h=t.call(this,e)||this,h.controlType=56,c=i.log,c===null||c===void 0?void 0:c.error(new Error("The MsPortalFx.ViewModels.Controls.Lists ListView and Gallery are obsolete and will be removed.  Please migrate to the latest Portal SDK and create this experience using the Fx/Controls/ListView module instead.")),h.items=ko.observableArray(),h.events=$.noop,h.noItemsMessage=ko.observable(""),h.extensions=o,h.extensionOptions=s,h.outlineStyle=ko.observable(!0),h.ariaLabel=n.initObservable(s.ariaLabel),h.extensions&r.Selectable&&(s.selectable||(s.selectable={}),n.isNullOrUndefined(s.selectable.selectionMode)&&(s.selectable.selectionMode=u.Single),s.selectable.selectedItem||s.selectable.selectionMode!==u.Single||(s.selectable.selectedItem=ko.observable()),s.selectable.selection||(s.selectable.selection=new n.ViewModels.SelectableSet(h.items)),n.isNullOrUndefined(s.selectable.activateOnSelected)&&(s.selectable.activateOnSelected=!0)),h.extensions&r.Groupable&&(s.groupable||(s.groupable={}),s.groupable.groupKey||(s.groupable.groupKey=ko.observable("")),s.groupable.headerTemplate||(s.groupable.headerTemplate=null),s.groupable.groups||(s.groupable.groups=null),s.groupable.noGroupLabel||(s.groupable.noGroupLabel=""),s.groupable.noGroupAriaLabel||(s.groupable.noGroupAriaLabel=""),s.groupable.order||(s.groupable.order=ko.observable(f.Collection))),h}return __extends(e,t),e})(t.Loadable.ViewModel);i.Extensions=r;i.GroupOrder=f;i.SelectionMode=u;i.ViewModel=e})(r=i.ListView||(i.ListView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=n.ListView.ViewModel,r=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.controlType=55,u}return __extends(t,n),t})(i);t.ViewModel=r})(t=n.Gallery||(n.Gallery={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i=(function(t){function i(n,i,r,u){var f=t.call(this,n)||this,e=u&&u.selectable&&u.selectable.supplyCommands;return FxImpl.shellInterface(f,{CurrentCommands:ko.observableArray(),OnItemClicked:u&&u.selectable&&u.selectable.onItemClicked,SupplyCommands:e?function(n){var t=e(n);return FxImpl.shellInterface(f).CurrentCommands(t),t}:undefined}),f.reflow=FxImpl.features.isEnabled("treeviewreflow",!0),f.controlType=57,f.padding=ko.observable(16),f.alwaysExpanded=ko.observable(!1),f.ariaLabel=ko.observable(""),f.htmlTemplates=[],f.toggleNodeCallback=ko.observable(),f._tokenStorage={},f.pathSeparator="/",f.items=i||ko.observableArray(),f.extensions=r||0,f.extensionsOptions=u,f.canLoadMoreRootItems=ko.observable(!1),f._processCallBack=function(n){if(n)for(var t=0,i=n.length;t<i;t++)f._processItem(n[t])},f._processItems(f.items),f._selectableExists&&f._setupSelectable(u.selectable),f._loadableExists&&f._setupOnDemandLoadable(),f._selectableExists&&f.extensionsOptions.selectable.selectionMode===1&&f.selectableData.selectedPaths.subscribeArrayChanges(f.lifetimeManager,(function(n){f.findItemByPath(n).metadata.selected(!0)}),(function(n){f.findItemByPath(n).metadata.selected(!1)})),f}return __extends(i,t),i.prototype.loadMoreNode=function(n,t){return this.extensionsOptions.loadableByContinuationToken.loadMoreNode?this.extensionsOptions.loadableByContinuationToken.loadMoreNode(n,t):Q({items:[],continuationToken:null})},i.prototype.loadMoreRootItems=function(){var n=this;return this.extensionsOptions.loadableByContinuationToken.loadMoreRootItems?this.extensionsOptions.loadableByContinuationToken.loadMoreRootItems().then((function(t){t.length&&(n._processCallBack(t),n.items.push.apply(n.items,t))})):Q()},i.prototype.syncToken=function(n,t){this._tokenStorage[n]=t},i.prototype.getTokenByPath=function(n){return this._tokenStorage[n]},i.prototype.expandNode=function(n){this.toggleNode(n,!0)},i.prototype.collapseNode=function(n){this.toggleNode(n,!1)},i.prototype.toggleNode=function(n,t){t===undefined&&(t=!n.metadata.expanded());var i=this.toggleNodeCallback();i&&i(n,t)},i.prototype.findItemByPath=function(t){var e=this.items,i,u,o,r,f,s;if(t)for(u=t.split(this.pathSeparator),o=function(t){var r=u[t].toLowerCase();if(i=n.find(e(),(function(n){return r===n.text().toLowerCase()})),i)e=i.items||ko.observableArray();else return"break"},r=0,f=u.length;r<f;r++)if(s=o(r,f),s==="break")break;return i},Object.defineProperty(i.prototype,"_selectableExists",{get:function(){return(this.extensions&1)>0&&!!this.extensionsOptions.selectable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_loadableExists",{get:function(){return(this.extensions&2)>0&&!!this.extensionsOptions.onDemandLoadable},enumerable:!1,configurable:!0}),i.prototype._processItems=function(n){this._processCallBack(n());n.subscribeArrayBulkChanges(this.lifetimeManager,this._processCallBack)},i.prototype._processItem=function(n){var t=n.metadata||(n.metadata={});t.disabled||(t.disabled=ko.observable(!1));t.expanded||(t.expanded=ko.observable());this._selectableExists&&(t.selected||(t.selected=ko.observable(!1)),t.selectable||(t.selectable=ko.observable(!0)),t.focused||(t.focused=ko.observable(!1)));this._loadableExists&&(t.loadable||(t.loadable=ko.observable()));n.items=n.items||ko.observableArray();this._processItems(n.items)},i.prototype._setupSelectable=function(n){var t=this;this.selectableData={selectedItem:ko.observable(),selectedPath:ko.observable(),selectionMode:n.selectionMode||0,selectedItems:ko.observableArray(),selectedPaths:ko.observableArray()};this.selectableData.selectedPath.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.selectableData.selectedItem(t.extensionsOptions.selectable.createSelection(i,n))}));this.selectableData.selectedPaths.subscribe(this.lifetimeManager,(function(n){var i=n.map((function(n){var i=t.findItemByPath(n);return t.extensionsOptions.selectable.createSelection(i,n)}));t.selectableData.selectedItems(i)}))},i.prototype._setupOnDemandLoadable=function(){var t=this,n=ko.observable();n.extend({notify:"always"});n.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.extensionsOptions.onDemandLoadable.loadItem(i,n)}));this.onDemandLoadableData={loadingPath:n}},__decorate([__metadata("fx:diagnostics",[require,"ViewModel"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Function,Number,Object])],i)})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=i})(i=t.TreeView||(t.TreeView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.controlType=112,r.options=i,r}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.PartPinner||(n.PartPinner={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var u=n.initObservableArray,e=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/SpecComparisonTable"),r,f;(function(n){n[n.Orange=0]="Orange";n[n.DarkOrchid=1]="DarkOrchid";n[n.YellowGreen=2]="YellowGreen";n[n.MediumBlue=3]="MediumBlue"})(r||(r={}));i.Colors=r;f=(function(t){function i(i,r){r===void 0&&(r={});var f=t.call(this,i)||this;return f.controlType=95,f.headers=u(r.headers,[]),f.rows=u(r.rows,[]),n.isFeatureEnabled("deleteobsoletecontrols")&&e.error(new Error("MsPortalFx.ViewModels.Controls.SpecComparisonTable and its associated types are obsolete. Please use Fx/Controls/DataGrid, Fx/Controls/EditableGrid, or a custom implementation instead.")),f}return __extends(i,t),i})(t.Base.ViewModel);i.ViewModel=f})(i=t.SpecComparisonTable||(t.SpecComparisonTable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){t.escapeRegExpOperators=n.regexEscape;var i=(function(){function n(n){var t=this,i;this.message=ko.observable(n);this.validationState=ko.observable(0);this.validate=ko.observable();this.isEmptyValid=ko.observable(!1);i=this._ltm=new FxImpl.TriggerableLifetimeManager;this.valid=ko.computed(i,(function(){return t.validationState()===2}));this.validate.subscribe(i,(function(n){t.validationState(t._validate(n))}))}return n.prototype.dispose=function(){this._ltm.dispose()},n.prototype._validate=function(){return 0},n})();t.Validator=i})(i=t.Validators||(t.Validators={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.Default=0]="Default";n[n.Blur=3]="Blur";n[n.Input=4]="Input"})(t||(t={}));n.ValueUpdateTrigger=t})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var k=0,d,c,g,s,nt,tt,o,it,rt,ut,ft,et,l,ot,a,u,v,st,f,r,y,h,p,w,e,b,ht,ct,lt,at,vt,yt,pt;(function(n){n[n.All=0]="All";n[n.XSlider_Off=1]="XSlider_Off";n[n.XSlider_noCallout=2]="XSlider_noCallout";n[n.ChartArea_Off=4]="ChartArea_Off";n[n.ChartArea_noClick=8]="ChartArea_noClick";n[n.ChartArea_noHover=16]="ChartArea_noHover"})(d=i.InteractionBehavior||(i.InteractionBehavior={}));c=(function(){function n(){this.context=ko.observable(0);this.style=ko.observable(0);this.formatter=ko.observable(null)}return n})();i.DataLabel=c;g=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartItems=ko.observableArray(),t.context=ko.observable(5),t}return __extends(t,n),t})(c);i.CustomDataLabel=g;s=(function(){function t(t,i){this.name=ko.observable("");this.scale=ko.observable(0);this.reverseDomain=ko.observable(!1);this.ticks=ko.observable(0);this.position=ko.observable(3);this.positionIndex=ko.observable(0);this.showAxis=ko.observable(!0);this.autoScaleUnit=ko.observable(!0);this.showName=ko.observable(!1);this.showLabel=ko.observable(1);this.labelPadding=ko.observable(50);this.rotateLabel=ko.observable(0);this.showAxisLine=ko.observable(!1);this.showTickMarks=ko.observable(!1);this.showGridLines=ko.observable(!1);this.inputFormat=ko.observable("");this.outputFormat=ko.observable("");this.formatOptions=ko.observable(null);this.xSliderOutputFormat=ko.observable(null);this.xSliderFormatOptions=ko.observable(null);this.displayLabelFormatter=ko.observable("");this.xSliderCalloutDisplayFormatter=ko.observable("");this.min=ko.observable(null);this.max=ko.observable(null);this.unit=ko.observable(n.UnitConversion.Unit.None);this.displaySIUnit=ko.observable(!1);this.defaultAxisPadding=ko.observable(null);this.customAxisPadding=ko.observable(null);this.hideAxisLabelsOnXSliderHover=ko.observable(!1);t&&this.position(t);i&&this.scale(i)}return t})();i.Axis=s;nt=(function(){function n(n,t,i,r,u,f,e){this.years=n;this.months=t;this.days=i||0;this.hours=r||0;this.minutes=u||0;this.seconds=f||0;this.milliseconds=e||0}return n})();i.DateSpan=nt;tt=(function(){function n(n){this.value=n}return n})();i.NumberSpan=tt;o=(function(){function n(){this.type=ko.observable(0);this.name=ko.observable(String(k=k+1&65535))}return n})();i.SeriesBase=o;it=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.values=ko.observableArray(),t.xAxisName=ko.observable(""),t.yAxisName=ko.observable(""),t}return __extends(t,n),t})(o);i.Series=it;rt=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=ko.observable(3),t.startXValue=ko.observable(null),t.span=ko.observable(null),t.yValues=ko.observableArray(),t.xAxisName=ko.observable(""),t.yAxisName=ko.observable(""),t}return __extends(t,n),t})(o);i.UniformSeries=rt;ut=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=ko.observable(1),t.value=ko.observable(null),t.axisName=ko.observable(""),t}return __extends(t,n),t})(o);i.LineSeries=ut;ft=(function(){function t(n){n?this._initOptions(n):this._initLegacyDefaults()}return t.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["scope","scopeSeriesName","metrics",])},t.prototype._initLegacyDefaults=function(){this.scope=ko.observable(null);this.scopeSeriesName=ko.observable(null);this.metrics=ko.observableArray()},t})();i.MetricRule=ft;et=(function(){function t(n){n?this._initOptions(n):this._initLegacyDefaults()}return t.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["aggregationScope","aggregationType","aggregationSeriesName","showBarColor","colorCode","hatchingPattern","formatOptions","title","unit","customValue","defaultInfoBalloon",])},t.prototype._initLegacyDefaults=function(){this.aggregationScope=ko.observable(2);this.aggregationType=ko.observable(4);this.aggregationSeriesName=ko.observable(null);this.showBarColor=ko.observable(!0);this.colorCode=ko.observable(null);this.hatchingPattern=ko.observable(null);this.outputFormat=ko.observable(null);this.formatOptions=ko.observable(null);this.title=ko.observable(null);this.unit=ko.observable(null);this.customValue=ko.observable(null);this.defaultInfoBalloon=ko.observable(null)},t})();i.MetricRuleMetric=et;l=(function(){function n(){this.chartViewIndex=ko.observable(null);this.seriesViewIndex=ko.observable(null)}return n})();i.SeriesId=l;ot=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartItems=ko.observableArray(),t}return __extends(t,n),t})(l);i.SeriesSubset=ot;a=(function(){function n(){}return n})();i.Events=a;u=(function(){function n(){}return n})();i.SeriesChartEvents=u;v=(function(){function n(){}return n})();i.BarChartEvents=v;st=(function(){function n(){this.seriesName=ko.observable("");this.conditionOperator=ko.observable(0);this.interpolation=ko.observable(0)}return n})();i.RenderingCondition=st;f=(function(){function n(){this.seriesName=ko.observable("");this.displayName=ko.observable("");this.cssClass=ko.observable("");this.dataLabels=ko.observableArray();this.showTooltip=ko.observable(!1);this.tooltipFormatter=ko.observable("Series: '{0}' Point: {1} Value: {2}");this.renderingConditions=ko.observableArray();this.selectable=ko.observable(!0);this.hoverable=ko.observable(!0);this.hideFromLegend=ko.observable(!1);this.autoGenerated=!1}return n})();i.SeriesView=f;r=Object.create(null);y=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.interpolation=ko.observable(0),t.lineStyle=ko.observable(0),t.showTooltip=ko.observable(!1),t.showDataPoints=ko.observable(!0),t}return __extends(t,n),t})(f);i.LineChartSeriesView=y;h=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.interpolation=ko.observable(0),t.areaHatchingPattern=ko.observable(0),t.showTooltip=ko.observable(!1),t}return __extends(t,n),t})(f);i.AreaChartSeriesView=h;p=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(h);i.StackedAreaChartSeriesView=p;w=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.radius=ko.observable(2),t.showTooltip=ko.observable(!1),t}return __extends(t,n),t})(f);i.ScatterChartSeriesView=w;e=(function(){function n(){this.chartType=ko.observable(undefined);this.seriesView=ko.observableArray()}return n.prototype.newSeriesView=function(){return null},n})();i.View=e;b=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=ko.observable(0),t.seriesView=ko.observableArray(),t.events=new u,t}return __extends(t,n),t.prototype.newSeriesView=function(n){return r[this.chartType()](n)},t.defaultChartType=0,t})(e);i.LineChartView=b;r[b.defaultChartType]=function(n){var t=new y;return n&&t.seriesName(n.name()),t};ht=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=ko.observable(1),t.seriesView=ko.observableArray(),t.events=new u,t}return __extends(t,n),t.prototype.newSeriesView=function(n){return r[this.chartType()](n)},t.defaultChartType=1,t})(e);i.AreaChartView=ht;r[1]=function(n){var t=new h;return n&&t.seriesName(n.name()),t};ct=(function(){function n(){this.enableSparseSeries=ko.observable(!0);this.chartType=ko.observable(undefined);this.seriesView=ko.observableArray()}return n.prototype.newSeriesView=function(){return null},n})();i.StackedChartView=ct;lt=(function(){function n(){this.chartType=ko.observable(6);this.seriesView=ko.observableArray();this.events=new u;this.lineState=ko.observable(0);this.enableSparseSeries=ko.observable(!0)}return n.prototype.newSeriesView=function(n){return r[this.chartType()](n)},n.defaultChartType=6,n})();i.StackedAreaChartView=lt;r[6]=function(n){var t=new p;return n&&t.seriesName(n.name()),t};at=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.chartType=ko.observable(2),t.seriesView=ko.observableArray(),t.events=new u,t}return __extends(t,n),t.prototype.newSeriesView=function(n){return r[this.chartType()](n)},t.defaultChartType=2,t})(e);i.ScatterChartView=at;r[2]=function(n){var t=new w;return n&&t.seriesName(n.name()),t};vt=(function(n){function t(t){var i=n.call(this)||this;i.barPaddingRatio=ko.observable(.3);i.enableSparseSeries=ko.observable(!0);i.barChartType=ko.observable(0);i.xAxisSpan=ko.observable(null);i.events=new v;i.barChartType(t);switch(t){case 0:i.chartType(3);break;case 1:i.chartType(4);break;case 2:i.chartType(5)}return i}return __extends(t,n),t.prototype.newSeriesView=function(n){return r[this.chartType()](n)},t})(e);i.BarChartView=vt;r[3]=r[4]=r[5]=function(n){var t=new f;return n&&t.seriesName(n.name()),t};yt=(function(){function n(n,t){this.xValue=n;this.yValue=t}return n})();i.ChartItem=yt;pt=(function(t){function i(r){var u=t.call(this,r)||this;return u.title=ko.observable(""),u.showTitle=ko.observable(!1),u.width=ko.observable(0),u.height=ko.observable(0),u.sizeChanged=ko.observable({width:0,height:0}),u.noDataMessage=n.Resources.Strings.Chart.noDataMessage,u.series=ko.observableArray(),u.xAxis=new s,u.yAxis=new s(4,1),u.secondaryXAxes=ko.observableArray(),u.secondaryYAxes=ko.observableArray(),u.views=ko.observableArray(),u.legendPosition=ko.observable(0),u.legendWidth=ko.observable(0),u.interactionBehavior=ko.observable(d.All),u.autogenerateSeriesViews=ko.observable(!0),u.events=new a,u.showMetrics=ko.observable(!0),u.seriesSelections=ko.observableArray(),u.seriesHovers=ko.observableArray(),u.hoveredID=ko.observableArray(),u.metricsRules=ko.observableArray(),u.enableTrackXSlider=ko.observable(),u.xSliderCoordinate=ko.observable(),u.xSliderFilterHoverThreshold=ko.observable(),u.ariaLabel=ko.observable(""),u.ariaDesc=ko.observable(""),u.noData=ko.observable(!1),u._seriesHelpers=ko.observable(),u.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(r),u.controlType=63,u.xAxis.showTickMarks(!0),u.yAxis.labelPadding(i.defaultYAxisLabelPadding),ko.reactor(u.lifetimeManager,(function(){if(u.autogenerateSeriesViews()){var t=u.series()||[],r=u.views();r.forEach((function(r){var u=r.seriesView.peek(),f=u.filter((function(n){return n.autoGenerated})),e=f.filter((function(n){return t.some((function(t){return t.name.peek()===n.seriesName.peek()}))})),o=f.filter((function(n){return!e.includes(n)})),s=t.filter((function(n){var t=n.name();return!e.some((function(n){return t===n.seriesName.peek()}))}));o.forEach((function(t){return n.remove(u,t)}));s.forEach((function(n){var t=i.getDefaultSeriesViewCreator(r.chartType())(n,r);t.autoGenerated=!0;u.push(t)}));r.seriesView(u)}))}})),u}return __extends(i,t),i.getDefaultSeriesViewCreator=function(n){return r[n]},i.defaultYAxisLabelPadding=38,i})(t.Loadable.ViewModel);i.ViewModel=pt})(r=i.Chart||(i.Chart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var u=n,l=70,a=120,v=16,y=16,o,f,s,r,h,e,c;(function(n){n[n.HexagonLayout=1]="HexagonLayout"})(o=i.Extensions||(i.Extensions={}));f=(function(){function n(n,t){this.latitude=n;this.longitude=t}return n})();i.Location=f;s=(function(){function n(){this.id="";this.location=new f(0,0);this.metadata=new r}return n})();i.Item=s;r=(function(){function n(){this.icon=ko.observable({type:0,data:"",palette:0});this.iconWidth=ko.observable(y);this.iconHeight=ko.observable(v)}return n})();i.ItemMetadata=r;h=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=1,t.text=ko.observable(""),t.hasFill=ko.observable(!1),t.itemScale=ko.observable(1),t}return __extends(t,n),t})(r);i.HexagonLayoutItemMetadata=h;e=(function(){function n(){}return n})();i.Events=e;c=(function(n){function t(t,i,r,f){i===void 0&&(i=ko.observable([]));var s=this,h=0;return typeof r=="number"?(h=r,f=typeof f=="object"?f:{}):typeof r=="object"&&(f=r),i===void 0&&(i=ko.observable([])),h===void 0&&(h=0),f===void 0&&(f={}),s=n.call(this,t)||this,s.controlType=68,s.events=new e,s.width=ko.observable(505),s.height=ko.observable(319),s.items=i,s.extensions=h,s.extensionOptions=f,s.ariaLabel=u.initObservable(f&&f.ariaLabel,""),s.ariaDesc=u.initObservable(f&&f.ariaDesc,""),s.extensions&o.HexagonLayout&&(s.extensionOptions.hexagonLayout=u.extend(s._getDefaultOptions(),s.extensionOptions.hexagonLayout)),s}return __extends(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this)},t.prototype._getDefaultOptions=function(){return{showLinks:ko.observable(!1),links:ko.observable([]),rows:ko.observable(l),columns:ko.observable(a)}},t})(t.Loadable.ViewModel);i.ViewModel=c})(r=i.Map||(i.Map={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var r=n.initObservable,f=(function(t){function i(i,u){var f=t.call(this,i,u)||this;return f.controlType=0,u=u||{},f.value=n.initObservable(u.value),f.unit=n.initObservable(u.unit),f.caption=n.initObservable(u.caption),f.infoBalloon=n.initObservable(u.infoBalloon),f.hideInfoBalloon=n.initObservable(u.hideInfoBalloon,!1),f.barCssClass=r(u.barCssClass,""),f.showBarColor=r(u.showBarColor,!0),f.hatchingPattern=r(u.hatchingPattern,0),f.unitAlignment=r(u.unitAlignment,4),f.captionAlignment=r(u.captionAlignment,1),f.hide=r(u.hide,!1),f.prioritized=r(u.prioritized,!1),f.ariaLabel=r(u.ariaLabel),f.ariaLivePrefix=r(null),f._msPortalFxAriaLive=r(!1),f}return __extends(i,t),i})(t.Loadable.ViewModel),u;i.SingleMetric=f;u=(function(t){function i(i,u){var f=t.call(this,i,u)||this;return u=u||{},f.controlType=69,f.items=n.initObservableArray(u.items),f.orientation=r(u.orientation,0),f.size=r(u.size,2),f.layout=r(u.layout,1),f.visible=r(u.visible,!0),f.ariaLabel=r(u.ariaLabel),f._msPortalFxAriaLive=r(!1),f}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=u})(r=i.Metrics||(i.Metrics={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var r=n,u=0,f=(function(){function t(n){var t=$.extend(this._getDefaultOptions(),n);this._initOptions(t)}return t.prototype._getDefaultOptions=function(){return{name:String(u=u+1&65535),values:ko.observableArray()}},t.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["name","values","viewOptions"])},t})(),e=(function(t){function i(n,i){var u=t.call(this,n)||this,f;return u.controlType=97,f=$.extend(u._getDefaultOptions(),i),u._initOptions(f),u.loading=r.initObservable(f.loading,!1),u.noData=r.initObservable(f.noData,!1),u.noDataMessage=r.initObservable(f.noDataMessage,null),u.ariaLabel=r.initObservable(f.ariaLabel,""),u.ariaDesc=r.initObservable(f.ariaDesc,""),u.showMetrics=r.initObservable(f.showMetrics,!0),u}return __extends(i,t),i.prototype._getDefaultOptions=function(){return{series:ko.observableArray()}},i.prototype._initOptions=function(t){n.shallowCopyFromObject(this,t,["series","xAxis","yAxis","chartType","viewOptions","metricsRules","legendPosition"])},i})(t.Loadable.ViewModel);i.Series=f;i.ViewModel=e})(r=i.SimpleChart||(i.SimpleChart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=n.Resources.Strings,u=412,r=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})(),f=(function(){function t(t){var f=this,e,o;this.downloadStatus=ko.observable();e=t.addDefaultAuthorizationToken;e&&(this.authorizationOptions={resourceName:e!==!0?t.addDefaultAuthorizationToken.resourceName:""});this.authorizationToken=t.authorizationToken||ko.observable("");this.downloadType=t.downloadType||ko.observable(1);this.headers=t.headers||ko.observable({});this.httpMethod=t.httpMethod||ko.observable("GET");this.httpRequestContent=t.httpRequestContent||ko.observable("");this.httpRequestContentType=t.httpRequestContentType||ko.observable("application/json");this.targetFileName=t.targetFileName||ko.observable("");this.targetUri=t.targetUri||ko.observable("");this.errorMessage=t.errorMessage||ko.observable("");this.targetUriCallback=t.targetUriCallback;this.showUriCallbackConfirmationDialog=t.showUriCallbackConfirmationDialog;this.uriCallbackConfirmationDialogOptions=t.uriCallbackConfirmationDialogOptions;this.showDownloadProgressDialog=t.showDownloadProgressDialog||ko.observable(!1);this.downloadProgressDialogOptions=t.downloadProgressDialogOptions;this.onStart=t.onStart;this.onEnd=t.onEnd;this.authorizationOptions&&(o={resourceName:this.authorizationOptions.resourceName||""},n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getAuthorizationToken(o)})).then((function(n){n&&n.header?f.authorizationToken(n.header):f.downloadStatus(new r(i.FileDownloadCommand.fileDownloadErrorStatus,u,i.FileDownloadCommand.authTokenNotAvailable))}),(function(n){f.downloadStatus(new r(i.FileDownloadCommand.fileDownloadErrorStatus,u,n))})))}return t})();t.Status=r;t.Context=f})(i=t.FileDownload||(t.FileDownload={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=n.Resources.Strings.FileDownload,r=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/FileDownloadButton"),u=(function(t){function u(u,f){var e=t.call(this,u)||this;return e.controlType=82,e.type=7,e.context=f.context,e.label=n.initObservable(f.label,""),e.disabled=n.initObservable(f.disabled,!1),e.unauthorizedMessage=n.initObservable(f.unauthorizedMessage,i.unauthorizedText),e.asLink=f.asLink,e.ariaLabel=f.ariaLabel?n.initObservable(f.ariaLabel):e.label,n.isFeatureEnabled("deleteobsoletecontrols")&&r.error(new Error("MsPortalFx.ViewModels.Controls.FileDownloadButton is obsolete. Please migrate to the AMD creation pattern using Fx/Controls/FileDownload.")),e}return __extends(u,t),u.prototype.unauthorized=function(n){this.unauthorizedMessage(n||i.unauthorizedText);this.disabled(!0)},u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.FileDownloadButton||(t.FileDownloadButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){var r,u,i;(function(n){n[n.PlayReady=0]="PlayReady";n[n.Widevine=1]="Widevine";n[n.AES=2]="AES"})(r=t.ProtectionType||(t.ProtectionType={})),(function(n){n[n.Smooth=0]="Smooth";n[n.Dash=1]="Dash";n[n.HLS=2]="HLS";n[n.ProgressiveMP4=3]="ProgressiveMP4"})(u=t.StreamingFormatMimeType||(t.StreamingFormatMimeType={}));i=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.controlType=109,i=i||{source:{url:""}},r.autoplay=i.autoplay||!1,r.controls=i.controls||!0,r.poster=i.poster||"",r.logo=i.logo||{enabled:!1},r.source=i.source,r}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(i=t.AzureMediaPlayer||(t.AzureMediaPlayer={}))})(t=n.Unsupported||(n.Unsupported={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var r=ko.utils.arrayPushAll,i=(function(t){function i(i,u,f,e,o,s){var h,c;return s===void 0&&(s=null),h=t.call(this,i)||this,h.enableValidation=ko.observable(!1),h.valid=ko.observable(!0),h.validate=ko.observable(0),h.label=ko.observable(),h.labelPosition=ko.observable(),h.validations=ko.observableArray(),h.validationResults=ko.observableArray(),h.delayValidationTimeout=ko.observable(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout),h.enabled=ko.observable(!0),h.infoBalloonContent=ko.observable(o),c=h.lifetimeManager,h.initialValue=ko.computed(c,(function(){var n=u.getOriginalObservable();return n?n():s})),h.value=ko.computed(c,{read:function(){var n=u.getEditableObservable();return n?n():s},write:function(n){var t=u.getEditableObservable();if(t)t(n);else throw new Error("Form should not allow edits until an EditScope is loaded.");}}),h.label(f),h.labelPosition(n.ViewModels.Forms.LabelPosition.Top),e&&r(h.validations,e),o&&(h.infoBalloonContent=ko.observable(o)),h.dirty=ko.observable(!1),ko.computed(c,(function(){h.setDirty(h.value()!==h.initialValue())})),h._enableValidationReactor=ko.computed(c,(function(){h.enableValidation(!!(u.getOriginalObservable()&&u.getEditableObservable()))})),h.performValidation=ko.observable(null),h.ensureValidation=ko.observable(0),h._msPortalFxClearValidation=ko.observable(),h._msPortalFxTriggerValidation=ko.observable(),h}return __extends(i,t),i.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();if(n)return Q(n());Q()},i.prototype.triggerValidation=function(){var t=this;return n.require("FxInternal/Utils/ValidationHelper").then((function(n){return n.triggerValidation({vm:t,ltm:t.lifetimeManager,msPortalFxTriggerValidation:t._msPortalFxTriggerValidation})}))},i.prototype.setDirty=function(n){try{this.dirty(n)}catch(t){}},i})(n.ViewModels.Controls.Loadable.ViewModel),u,f,e,o,s,h;t.Field=i;u=(function(n){function t(t,i,r,u,f){var e=n.call(this,t,i,r,u,f)||this;return e.empty=ko.computed(e.lifetimeManager,(function(){return!e.value()})),e}return __extends(t,n),t})(i);t.NullableField=u;f=(function(n){function t(t,i,r,u,f){var e=n.call(this,t,i,r,u,f)||this;return e.editing=ko.observable(!1),e}return __extends(t,n),t})(u);t.EditableField=f;e=(function(n){function t(t,i,u,f,e,o){var s=n.call(this,t,i,u,e,o,f.length===0||f[0].options().length===0?undefined:f[0].options()[0].value)||this;return s.groups=ko.observableArray(),r(s.groups,f),s}return __extends(t,n),t})(i);t.GroupsField=e;o=(function(n){function t(t,i,u,f,e,o){var s=this;if(f.length===0)throw new Error("'values' array must contain one or more FormOption values.");return s=n.call(this,t,i,u,e,o,f[0].value)||this,s.options=ko.observableArray(),r(s.options,f),s}return __extends(t,n),t})(i);t.OptionsField=o;s=(function(n){function t(t,i,r,u,f,e,o,s,h,c){i===void 0&&(i=null);r===void 0&&(r=null);u===void 0&&(u=0);f===void 0&&(f=10);e===void 0&&(e=[]);o===void 0&&(o=!1);s===void 0&&(s=null);h===void 0&&(h=null);c===void 0&&(c=1);var l=n.call(this,t,i,r,e,s,h)||this;return l.showStepMarkers=ko.observable(o),l.min=ko.observable(u),l.max=ko.observable(f),l.step=ko.observable(c),l}return __extends(t,n),t})(i);t.SliderBaseField=s;h=(function(t){function i(i,r,u,f,e){var o=t.call(this,i,r,u,f,e)||this;return o.editing=ko.observable(!1),o.valueUpdateTrigger=n.ViewModels.Controls.ValueUpdateTrigger.Default,o}return __extends(i,t),i})(f);t.TypableField=h})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i,r,u,f,e){var o=n.call(this,t,i,r,u,e)||this;return o.emptyValueText=ko.observable(f),o.popupAlignment=3,o.inputAlignment=10,o}return __extends(t,n),t})(n.EditableField);n.EditableComboField=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t=(function(){function n(n,t){this.text=ko.isObservable(n)?n:ko.observable(n);this.value=ko.isObservable(t)?t():t}return n})(),i;n.Option=t;i=(function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return r!==undefined&&(u.disabled=ko.isObservable(r)?r:ko.observable(r)),u}return __extends(t,n),t})(t);n.DisablableOption=i})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r)||this;return u!==undefined&&(f.selected=ko.isObservable(u)?u:ko.observable(u)),f}return __extends(t,n),t})(n.DisablableOption);n.SelectableOption=t})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function t(n){var t=typeof n!="string";return t&&(n=undefined),{valid:t,message:n}}function i(n){return Q(t(n))}n.getValidationResult=t;n.getValidationResultPromise=i;var r=(function(){function n(n){this.type=n}return n})();n.Validation=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!i||typeof i=="string"||i.htmlTemplate?{message:i}:i;return r=n.call(this,t)||this,r.message=u.message,r.isEmptyValid=ko.observable(!1),r}return __extends(t,n),t})(n.Validation);n.StaticMessageValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"?{compareTo:t,message:i}:t;return r=n.call(this,22,u)||this,r.compareTo=u.compareTo,r}return __extends(t,n),t})(n.StaticMessageValidation);n.CaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"?{characters:t,message:i}:t;return r=n.call(this,6,u)||this,r.characters=u.characters,r}return __extends(t,n),t})(n.StaticMessageValidation);n.ContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"?{searchString:t,message:i}:t;return r=n.call(this,4,u)||this,r.searchString=u.searchString,r}return __extends(t,n),t})(n.StaticMessageValidation);n.ContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"||t.htmlTemplate?{message:t,validate:i}:t;return r=n.call(this,21)||this,r.message=u.message,r.validate=u.validate,r}return __extends(t,n),t})(n.Validation),i;n.CustomValidationV=t;i=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(t);n.CustomValidation=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=t&&t.hasOwnProperty("compareTo")?t:{compareTo:t,message:i};return r=n.call(this,13,u)||this,r.compareTo=u.compareTo,r}return __extends(t,n),t})(n.StaticMessageValidation);n.EqualsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,8,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasDigitValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,9,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,11,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasLowerCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,12,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasPunctuationValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,10,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.HasUpperCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,0,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.InvalidValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i,r){var u=this,f=!t||typeof t=="number"?{min:t,max:i,message:r}:t;return u=n.call(this,14,f)||this,u.min=f.min,u.max=f.max,u}return __extends(t,n),t})(n.StaticMessageValidation);n.LengthRangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"?{compareTo:t,message:i}:t;return r=n.call(this,23,u)||this,r.compareTo=u.compareTo,r}return __extends(t,n),t})(n.StaticMessageValidation);n.LocaleAwareCaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="number"?{max:t,message:i}:t;return r=n.call(this,16,u)||this,r.max=u.max,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MaxLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="number"?{max:t,message:i}:t;return r=n.call(this,20,u)||this,r.max=u.max,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MaxValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="number"?{min:t,message:i}:t;return r=n.call(this,15,u)||this,r.min=u.min,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MinLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="number"?{min:t,message:i}:t;return r=n.call(this,19,u)||this,r.min=u.min,r}return __extends(t,n),t})(n.StaticMessageValidation);n.MinValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"?{characters:t,message:i}:t;return r=n.call(this,7,u)||this,r.characters=u.characters,r}return __extends(t,n),t})(n.StaticMessageValidation);n.NotContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"?{searchString:t,message:i}:t;return r=n.call(this,5,u)||this,r.searchString=u.searchString,r}return __extends(t,n),t})(n.StaticMessageValidation);n.NotContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i,r){var u=this,f=!t||typeof t=="string"?{pattern:t,message:i,successMessage:r}:t;return u=n.call(this,3,f)||this,u.pattern=f.pattern,u.successMessage=f.successMessage||undefined,u}return __extends(t,n),t})(n.StaticMessageValidation);n.NotRegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,17,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.NumericValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i,r){var u=this,f=!t||typeof t=="number"||ko.isObservable(t)?{min:t,max:i,message:r}:t;return u=n.call(this,18,f)||this,u.min=f.min,u.max=f.max,u}return __extends(t,n),t})(n.StaticMessageValidation);n.RangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i,r){var u=this,f=!t||typeof t=="string"?{pattern:t,message:i,successMessage:r}:t;return u=n.call(this,2,f)||this,u.pattern=f.pattern,u.successMessage=f.successMessage||undefined,u}return __extends(t,n),t})(n.StaticMessageValidation);n.RegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t){var r=this,i=!t||typeof t=="string"||t.htmlTemplate?{message:t}:t;return n.call(this,1,i)||this}return __extends(t,n),t})(n.StaticMessageValidation);n.RequiredValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(t,i){var r=this,u=!t||typeof t=="string"||t.htmlTemplate?__assign(__assign({},i),{message:t}):t;return r=n.call(this,24,u)||this,r.options=u,r.requireHttps=u.requireHttps,r}return __extends(t,n),t})(n.StaticMessageValidation);n.UriValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function c(n){switch(n){case 2:return t.defaultBlobStoreUploadMaxSize;case 4:return t.defaultAppendBlobStoreUploadMaxSize;case 3:return t.defaultPageBlobStoreUploadMaxSize;case 5:return t.defaultAzureFileServiceUploadMaxSize;default:return t.defaultAppendBlobStoreUploadMaxSize}}function l(n,t,i){return FxImpl.FileUpload.getUploadInfos(n,t,i)}function a(n,t,i){return FxImpl.FileUpload.getResumableUploadInfos(n,t,i)}function v(n,t,i){return FxImpl.FileUpload.getAsyncUploadTasks(n,t,i)}function y(n,t,i){return FxImpl.FileUpload.invokeUploadAction(n,t,i)}function p(n,t,i){return FxImpl.FileUpload.getNextChunk(n,t,i)}function w(n){FxImpl.FileUpload.registerRenewSasUriCallback(n)}function b(n){FxImpl.FileUpload.registerRenewAuthorizationCallback(n)}var r,i,u,f,e,o,s,h;t.defaultFullFileUploadMaxSize=2097152;t.defaultFullFileUploadChunkSize=t.defaultFullFileUploadMaxSize;t.defaultStreamFileUploadMaxSize=10737418240;t.defaultStreamFileUploadChunkSize=1048576;t.defaultBlobStoreUploadMaxSize=524288e7;t.defaultAppendBlobStoreUploadMaxSize=2097152e5;t.defaultPageBlobStoreUploadMaxSize=1099511627776;t.defaultAzureFileServiceUploadMaxSize=1099511627776;t.defaultBlobStoreUploadChunkSize=t.defaultFullFileUploadMaxSize;t.pageBlobPageSize=512;t.defaultResumableTrackingChunkSize=t.defaultBlobStoreUploadChunkSize*4;r=n.Resources.Strings.FileUpload;t.getUploadInfos=l;t.getResumableUploadInfos=a;t.getAsyncUploadTasks=v;t.invokeUploadAction=y;t.getNextChunk=p;t.registerRenewSasUriCallback=w;t.registerRenewAuthorizationCallback=b;i=(function(){function i(i){var r=n.extend({},i);this.type=0;this.contentType=r.contentType||0;this.encoding=r.encoding||null;this.maxFileSize=r.maxFileSize||t.defaultFullFileUploadMaxSize;this.chunkSize=r.chunkSize||t.defaultFullFileUploadChunkSize;this.category=r.category||null;this.uploadTarget=r.uploadTarget||null;this.notificationBlade=r.notificationBlade||null;this.resumable=n.initValue(r.resumable,!1);this.disableNotifications=n.initValue(r.disableNotifications,!1);this.resourceStrings=r.resourceStrings||null}return i})();t.FullFileUploadContext=i;u=(function(i){function r(r){var u=this,f=n.extend({},r);return u=i.call(this,f)||this,u.type=1,u.maxFileSize=t.defaultStreamFileUploadMaxSize,u.chunkSize=t.defaultStreamFileUploadChunkSize,u.longRunning=n.initValue(f.longRunning,!1),u}return __extends(r,i),r})(i);t.StreamFileUploadContext=u;f=(function(i){function r(r){var u=i.call(this,r)||this,f=n.extend({},r);return u.type=n.initValue(f.type,2),u.maxFileSize=n.initValue(f.maxFileSize,c(u.type)),u.chunkSize=f.chunkSize||t.defaultBlobStoreUploadChunkSize,u.context=n.initObservable(f.context,null),u.addFilenameToSasUri=n.initObservable(f.addFilenameToSasUri,!1),u.useDefaultFileInfoContext=n.initObservable(f.useDefaultFileInfoContext,!0),u.sasUriCommand=n.initObservable(f.sasUriCommand,null),u.useRenewSasUriCallback=n.initValue(u.useRenewSasUriCallback,!1),u.authorizationContext=n.initValue(f.authorizationContext,null),u.accessTier=n.initValue(f.accessTier,null),u.customHeaders=n.initValue(f.customHeaders,null),u}return __extends(r,i),r})(i);t.BlobStoreFileUploadContext=f;e=(function(){function n(){this.uploadResult=ko.observable(null);this._msPortalFxUploadAction=ko.observable(0);this._msPortalFxActionTrigger=ko.observable(0)}return n.prototype.resume=function(){this._msPortalFxUploadAction(2);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.pause=function(){this._msPortalFxUploadAction(1);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.cancel=function(){this._msPortalFxUploadAction(3);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.dispose=function(){this._msPortalFxUploadAction(4);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n})();t.UploadTask=e;o=(function(){function n(n){this.uploadInfo=n}return n.prototype.resume=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},2,n)},n.prototype.pause=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},1)},n.prototype.cancel=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},3)},n.prototype.complete=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},7)},n.prototype.abort=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},8,n)},n.prototype.dispose=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},4)},n.prototype.getNextChunk=function(n,t){var i=this.uploadInfo;if(i.type()!==1)throw new Error(r.notSupported);return FxImpl.FileUpload.getNextChunk({id:i.id(),name:i.name},n,t)},n})();t.AsyncUploadTask=o;s=(function(){function t(n,t,i){this.uploadInfo=n;this._msPortalFxActionCallback=ko.observable(t);this._msPortalFxGetNextChunkCallback=ko.observable(i)}return t.prototype.resume=function(n){return this._invoke(2,n)},t.prototype.pause=function(){return this._invoke(1)},t.prototype.cancel=function(){return this._invoke(3)},t.prototype.complete=function(){return this._invoke(7)},t.prototype.abort=function(n){return this._invoke(8,n)},t.prototype.dispose=function(){return this._invoke(4)},t.prototype.getNextChunk=function(n,t){var i=this.uploadInfo;return this._execCallback(this._msPortalFxGetNextChunkCallback,{id:i.id(),name:i.name},n,t)},t.prototype._invoke=function(n,t){var i=this.uploadInfo;return this._execCallback(this._msPortalFxActionCallback,[{id:i.id(),name:i.name}],n,t)},t.prototype._execCallback=function(t){for(var u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];return n.tryImmediateResolve(Q(t()),(function(n){return n?Q(n.apply(null,u)):FxImpl.QReject(r.notReady)}))},t})();t.AsyncUploadWidgetTask=s;h=(function(){function n(n){this.id=n.id;this.name=n.name;this.mimetype=n.mimetype;this.size=n.size;this.valid=ko.observable(!0)}return n})();t.SelectedFile=h})(i=t.FileUpload||(t.FileUpload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function e(n,r,u){var f=u?{uploadKey:n,action:r,context:u}:{uploadKey:n,action:r};return t.uploadActionEndPoint.invoke(i.client,"fx",f)}function u(n,t,u){return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u}).then((function(t){return n.registerForDispose(t),t.value.uploads}))}function o(n,t,u){return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u,resumable:!0}).then((function(t){return n.registerForDispose(t),t.value.uploads}))}function s(n,t,i){return u(n,t,i).then((function(n){var t=[];return n&&n.length>0&&(t=n.map((function(n){return new f.AsyncUploadTask(n)}))),t}))}function h(t,i,r){var u;return(i!==undefined||r!==undefined)&&(u={startByte:i,chunkSize:r}),n.FileUpload.invokeUploadAction(t,9,u)}function c(n){MsPortalFx.require("FxInternal/Events").then((function(t){t.getRegistry().registerEventHandler("fileUploadSasUri",{renew:n})}))}function l(n){MsPortalFx.require("FxInternal/Events").then((function(t){t.getRegistry().registerEventHandler("fileUploadAuthorization",{renew:n})}))}var f=MsPortalFx.ViewModels.FileUpload,i=n.Rpc,r="FxImpl.FileUpload.getUploadInfos";t.getUploadInfosEndPoint=new i.ProxiedObjectTypeDefinition(r);t.uploadActionEndPoint=new i.ActionEndPointDefinition("FxImpl.FileUpload.uploadActionMethodName");t.uploadRenewSasUriEndPoint=new i.FuncEndPointDefinition("FxImpl.FileUpload.uploadRenewSasUri");t.uploadRenewAuthorizationEndPoint=new i.FuncEndPointDefinition("FxImpl.FileUpload.uploadRenewAuthorization");t.invokeUploadAction=e;t.getUploadInfos=u;t.getResumableUploadInfos=o;t.getAsyncUploadTasks=s;t.getNextChunk=h;t.registerRenewSasUriCallback=c;t.registerRenewAuthorizationCallback=l})(t=n.FileUpload||(n.FileUpload={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i=n.Resources.Strings,u=412,r=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})(),f;t.Status=r;f=(function(){function t(t){var f=this,e,o;this.downloadStatus=ko.observable();e=t.addDefaultAuthorizationToken;e&&(this.authorizationOptions={resourceName:e!==!0?t.addDefaultAuthorizationToken.resourceName:""});this.authorizationToken=t.authorizationToken||ko.observable("");this.downloadType=t.downloadType||ko.observable(1);this.headers=t.headers||ko.observable({});this.httpMethod=t.httpMethod||ko.observable("GET");this.httpRequestContent=t.httpRequestContent||ko.observable("");this.httpRequestContentType=t.httpRequestContentType||ko.observable("application/json");this.targetFileName=t.targetFileName||ko.observable("");this.targetUri=t.targetUri||ko.observable("");this.errorMessage=t.errorMessage||ko.observable("");this.targetUriCallback=t.targetUriCallback;this.showUriCallbackConfirmationDialog=t.showUriCallbackConfirmationDialog;this.uriCallbackConfirmationDialogOptions=t.uriCallbackConfirmationDialogOptions;this.showDownloadProgressDialog=t.showDownloadProgressDialog||ko.observable(!1);this.downloadProgressDialogOptions=t.downloadProgressDialogOptions;this.onStart=t.onStart;this.onEnd=t.onEnd;this.authorizationOptions&&(o={resourceName:this.authorizationOptions.resourceName||""},n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getAuthorizationToken(o)})).then((function(n){n&&n.header?f.authorizationToken(n.header):f.downloadStatus(new r(i.FileDownloadCommand.fileDownloadErrorStatus,u,i.FileDownloadCommand.authTokenNotAvailable))}),(function(n){f.downloadStatus(new r(i.FileDownloadCommand.fileDownloadErrorStatus,u,n))})))}return t})();t.Context=f})(i=t.FileDownload||(t.FileDownload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o;return e.controlType=7,o=e._options,e.inlineLabel=o.inlineLabel||!1,e.ariaLabel=n.initObservable(o.ariaLabel,""),e}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=r})(i=t.CheckBox||(t.CheckBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=n.initObservable,u=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Forms.CustomHtml"),f=(function(t){function i(i,f){var e=t.call(this,i,f)||this;return e.controlType=23,e.htmlTemplate=r(f.htmlTemplate),e.innerViewModel=f.innerViewModel,e.isolated=f.isolated!==!1,e.validate=ko.observable(0),e.valid=ko.observable(!0),e.dirty=ko.observable(!1),e.loading=ko.observable(!1),e._msPortalFxClearValidation=ko.observable(),e._msPortalFxTriggerValidation=ko.observable(),e._msPortalFxRequired=ko.observable(),n.isFeatureEnabled("deleteobsoletecontrols")&&u.error(new Error("MsPortalFx.ViewModels.Forms.CustomHtml.Viewmodel is obsolete. Please use Fx/Controls/CustomHtml instead.")),e}return __extends(i,t),i.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();return n?Q(n()):Q()},i.prototype.triggerValidation=function(){var t=this;return n.require("FxInternal/Utils/ValidationHelper").then((function(n){return n.triggerValidation({vm:t,ltm:t.lifetimeManager,msPortalFxTriggerValidation:t._msPortalFxTriggerValidation})}))},i})(t.Base.LabelAndBalloon.ViewModel);i.ViewModel=f})(i=t.CustomHtml||(t.CustomHtml={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o;return e.controlType=25,o=e._options,e.enabledDateTimeRange=o.enabledDateTimeRange||ko.observable(new n.DateUtil.DateTimeRange),e.allowEmpty=!!o.allowEmpty,e.ariaLabel=n.initObservable(o.ariaLabel,""),e}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var n=i.value(),t=i.initialValue();n||t?n&&t?i.setDirty(n.getFullYear()!==t.getFullYear()||n.getMonth()!==t.getMonth()||n.getDate()!==t.getDate()):i.setDirty(!0):i.setDirty(!1)}))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=r})(i=t.DatePicker||(t.DatePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=Math.floor,u=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o,s;return e.showSeconds=!0,e.controlType=26,o=e._options,e.enabledDateTimeRange=o.enabledDateTimeRange||ko.observable(new n.DateUtil.DateTimeRange),e.showTimezoneDropdown=n.initObservable(o.showTimezoneDropdown,!1),e.allowEmpty=!!o.allowEmpty,e.emptyTimeValueText=n.initObservable(o.emptyTimeValueText,""),e.ariaLabel=n.initObservable(o.ariaLabel,""),s=o.showSeconds,n.isNullOrUndefined(s)||(e.showSeconds=s),e}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);this._options.viewModelValueChangesAreClean||this.resetDirtyComputed((function(){var n=i.value(),t=i.initialValue();n||t?n&&t?i.setDirty(r(n.getTime()/1e3)!==r(t.getTime()/1e3)):i.setDirty(!0):i.setDirty(!1)}))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=u})(i=t.DateTimePicker||(t.DateTimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i=n.ViewModels.Forms.Base,r=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Obsolete.Forms.DropDown"),u=(function(t){function i(i,u,f,e){var o=t.call(this,i,u,f,e)||this;return o._msPortalFxLogValidation=ko.observable(),o.controlType=3,n.isFeatureEnabled("deleteobsoletecontrols")&&r.error(new Error("MsPortalFx.ViewModels.Obsolete.Forms.DropDown.ViewModel is obsolete. Use Fx/Controls/DropDown instead.")),o}return __extends(i,t),i})(i.Options.ViewModel);t.ViewModel=u;n.ViewModels.Forms.DropDown={};n.ViewModels.Forms.DropDown.ViewModel=t.ViewModel})(i=t.DropDown||(t.DropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){function k(n,t){var u=n.items();if(u.length===1){for(var i=u[0],f=[],r=[];i;)f.push(new o(i.text(),i.value)),i.children&&(r=r.concat(i.children.map((function(n){return n.text(i.text()+t+n.text()),n})))),i=r.shift();n.items(f)}}function p(n){return(n.text()||"").toLocaleLowerCase()}function d(n,t){var i=p(n),r=p(t);return i===r?0:i>r&&1||-1}function g(n){return n.sort(d)}function l(n,t,i){var r=n[i];r?r.includes(t)||r.push(t):n[i]=[t]}function a(n,t,i,r){var o,u,f,e;for(r===void 0&&(r=" "),o=t.length,u=0;u<o;u++)for(f=t[u],n.addWord(f,i),e=u+1;e<o;e++)f=f+r+t[e],n.addWord(f,i)}function nt(n,t,i,r){a(n,t.split(" "),i);a(n,t.split(r),i,r)}function tt(n){var t={},i=[];return n.forEach((function(n){var r=n.text();t.hasOwnProperty(r)||(t[r]=i.push(n))})),i}function b(n){var t;return n?(t=n.lineMatches).concat.apply(t,n.children.map(b)):[]}var y=n.ViewModels.Forms,o=(function(n){function t(t,i,r){var u=n.call(this,t,i)||this;return u.children=r||[],u}return __extends(t,n),t})(y.Option),u,f,s,e,h,w,c,r,v,i;t.HierarchicalFormOptionItem=o;u=(function(){function t(n){this.children=[];this.lineMatches=[];this._value=n&&n.toLocaleLowerCase()}return t.prototype.getChild=function(t){return n.find(this.children,(function(n){return n._value===t.toLocaleLowerCase()}))},t.prototype.matchesValue=function(n){return this._value&&this._value===n.toLocaleLowerCase()},t})();t.Node=u;f=(function(){function n(n,t,i){var r=this,u;this._filterInProgress=!1;n.registerForDispose(this);this._viewModel=t;this._filterOptions=i;u=this._ltm=n.createChildLifetime();ko.reactor(u,(function(){r._filterInProgress=!0;var n=r.filterData(t.filterText());t.filterInProgress(r._viewModel.items().length!==n.length);t.filteredItems(n);r._filterInProgress=!1}))}return n.prototype.dispose=function(){this._ltm.dispose()},n.prototype.filterData=function(n){return this._viewModel.items().filter((function(t){var i;return ko.unwrap(t.doNotFilter)||(i=t.text())&&i.toLowerCase().includes(n.toLowerCase())}))},n.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},n})();t.SearchFilter=f;s=(function(n){function t(t,i,r){var u=this,e=r.delimiter||"\\",f=t.createChildLifetime();return i.items.subscribeAndRun(f,(function(){k(i,e)})),u=n.call(this,t,i,r)||this,u._ltm.registerForDispose(f),u}return __extends(t,n),t})(f);t.TreeSearchFilter=s;e=(function(){function n(n,t,i){var u=this;this._filterInProgress=!1;this._directMatchDictionary={};this._viewModel=t;this._filterOptions=i;this._prefixTree=new r;ko.computed(n,(function(){u._filterInProgress||(u._directMatchDictionary={},u._prefixTree=new r,u._setFilteredItems(u._viewModel.items()))}));t.filterText.subscribe(n,(function(n){u._filterInProgress=!0;var i=u.filterData(n);t.filterInProgress(u._viewModel.items().length!==i.length);t.filteredItems(i);u._filterInProgress=!1}))}return n.prototype.filterData=function(n){var r=this,t=[],i={};return this._prefixTree.getMatches(n).forEach((function(n){i[n]||(t=t.concat(r._directMatchDictionary[n]),i[n]=!0)})),g(t)},n.prototype._setFilteredItems=function(n){var t=this;n.forEach((function(n){return t._addToSearchOnInitialize(n,n.text())}));this._viewModel.filteredItems(n);this._viewModel.filterText("")},n.prototype._addToSearchOnInitialize=function(n,t){l(this._directMatchDictionary,n,t);a(this._prefixTree,t.split(" "),t)},n.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},n})();t.SearchFilterPrefixTree=e;h=(function(n){function t(t,i,u){var f=n.call(this,t,i,u)||this;return f._childPrefixTree=new r,f._childMatchDictionary={},f}return __extends(t,n),t.prototype.filterData=function(n){var t=this._prefixTree.getMatches(n),i=this._childPrefixTree.getMatches(n);return tt(this._processMatches(t,i))},t.prototype._setFilteredItems=function(t){this._directMatchDictionary={};this._childMatchDictionary={};this._childPrefixTree=new r;t.length===1&&(this._filterOptions.delimiter=this._filterOptions.delimiter||"\\",t=this._flattenTree(t[0]),this._viewModel.items(t));n.prototype._setFilteredItems.call(this,t)},t.prototype._addToSearchOnInitialize=function(){},t.prototype._processMatch=function(n,t){var i=this,r=[],u=[];return n.forEach((function(n){t[n]||(r.push(i._directMatchDictionary[n]||[]),u.push(i._childMatchDictionary[n]||[]),t[n]=!0)})),{filteredResults:[].concat.apply([],r),filteredChildResults:[].concat.apply([],u),isResultProcessed:t}},t.prototype._processMatches=function(n,t){var i=this._processMatch(n,{}),r=this._processMatch(t,i.isResultProcessed);return[].concat(i.filteredResults,r.filteredResults,i.filteredChildResults,r.filteredChildResults)},t.prototype._flattenTree=function(n){for(var i=this,t=n,f=[],r=[],e=function(){var e=new o("",""),s=t===n;u._updateCurrentItem(e,e,t.text(),t.text(),s?0:1);l(s?u._directMatchDictionary:u._childMatchDictionary,e,e.text());f.push(e);t.children&&(r=r.concat(t.children.map((function(n){var r=n.text(),u=t.text()+i._filterOptions.delimiter+r;return i._updateCurrentItem(n,t,r,u,0),l(i._directMatchDictionary,e,t.text()),n}))));t=r.shift()},u=this;t;)e();return f},t.prototype._updateCurrentItem=function(n,t,i,r,u){var f=u===0&&this._prefixTree||u===1&&this._childPrefixTree;f&&nt(f,i,r,this._filterOptions.delimiter);n.text(n.value=r)},t})(e);t.TreeSearchFilterPrefixTree=h;w=[function(n,t,i){var r=i.algorithmType===1?e:f;return new r(n,t,i)},function(n,t,i){var r=i.algorithmType===1?h:s;return new r(n,t,i)}];c=(function(){function n(){}return n.prototype.getSearchFilter=function(n,t,i){i||(t.filterOptions=i={datasetType:0});var r=w[i.datasetType];return r?r(n,t,i):null},n})();t.FilterFactory=c;r=(function(){function t(){this._root=new u}return t.prototype.addWord=function(n,t){var i=this._root.lineMatches;n.split("").reduce((function(n,t){var i=n.getChild(t);return i||n.children.push(i=new u(t)),i}),this._root);i.includes(t)||i.push(t)},t.prototype.getMatches=function(t){var i=this._root,r,u=n.find(t.split(""),(function(n){return r=i.getChild(n),!r||!(i=r)}));return u?b(i):[]},t})();t.PrefixTree=r;v=(function(t){function i(n,i,r,u){var f=t.call(this,n,i,r,u)||this,e,o,s;return f._msPortalFxLogValidation=ko.observable(),f.filteredItems=ko.observableArray(),f.filterText=ko.observable(""),f.noRowsMessage=ko.observable(""),f.filterInProgress=ko.observable(!1),f.controlType=12,e=f._options,e.options||(e.options=ko.observableArray()),o=f.value(),o&&f.filterText(o),s=f._values=e.options,f.populated=ko.computed(n,(function(){return!!s().length})),(new c).getSearchFilter(n,f,f._options.filterOptions),f}return __extends(i,t),Object.defineProperty(i.prototype,"items",{get:function(){return this._values},enumerable:!1,configurable:!0}),__decorate([__metadata("fx:diagnostics",[require,"ObsoleteViewModel"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Object,Object])],i)})(y.Base.EditableComboBox.ViewModel);t.ViewModel=v;i=n.ViewModels.Forms.FilterComboBox={};i.HierarchicalFormOptionItem=o;i.Node=u;i.SearchFilter=f;i.TreeSearchFilter=s;i.SearchFilterPrefixTree=e;i.TreeSearchFilterPrefixTree=h;i.FilterFactory=c;i.PrefixTree=r;i.ViewModel=v})(i=t.FilterComboBox||(t.FilterComboBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=n,u=(function(n){function t(t,i,u,f){var e=n.call(this,t,i,u,f)||this,o;return e.controlType=13,o=e._options,e.rows=r.initObservable(o.rows,7),e.spellcheck=i&&i.spellcheck?i.spellcheck:ko.observable(!1),e.ariaLabel=r.initObservable(o.ariaLabel,""),e}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=u})(i=t.MultiLineTextBox||(t.MultiLineTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=n,u=(function(n){function t(t,i,u,f){var e=n.call(this,t,i,u,f)||this,o;return e.controlType=10,o=e._options,e.min=r.initObservable(o.min,null),e.max=r.initObservable(o.max,null),e.decimalPoint=r.initObservable(o.decimalPoint,2),e.invalidText=r.initValue(o.invalidText,r.Resources.Strings.NumericTextBox.invalidText),e.placeholder=r.initObservable(o.placeholder,null),e.allowEmpty=r.initValue(o.allowEmpty,!1),e.ariaLabel=r.initObservable(o.ariaLabel,""),e}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=u})(i=t.NumericTextBox||(t.NumericTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=n,u=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Forms/OAuthButton"),f=(function(t){function i(i,f,e,o){var s=t.call(this,i,f,e,o)||this,h;return s.controlType=29,s.showValidationMessagesBelowControl=!0,h=s._options,s.requestUrl=r.initObservable(h.requestUrl,null),s.buttonText=r.initObservable(h.buttonText,null),s.popupWidth=r.initObservable(h.popupWidth,null),s.popupHeight=r.initObservable(h.popupHeight,null),s.primary=r.initObservable(h.primary,!0),s.ariaLabel=h.ariaLabel?r.initObservable(h.ariaLabel):s.buttonText,s.beforeRequest=h.beforeRequest||Q,n.isFeatureEnabled("deleteobsoletecontrols")&&u.error(new Error("MsPortalFx.ViewModels.Forms.OAuthButton is obsolete. Please migrate to the AMD creation pattern using Fx/Controls/OAuthButton.")),s}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=f})(i=t.OAuthButton||(t.OAuthButton={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this;return e.controlType=4,e.showValidationMessagesBelowControl=!0,f=e._options,e.sizeToContent=f.sizeToContent!==undefined?f.sizeToContent:!0,e.radioButtonStyle=!!f.radioButtonStyle,e.singleItemPerLine=!!f.singleItemPerLine,e.ariaLabel=n.initObservable(f.ariaLabel,""),e}return __extends(i,t),i})(t.Base.Options.ViewModel);i.ViewModel=r})(i=t.OptionsGroup||(t.OptionsGroup={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=n,u=r.ViewModels,f=(function(n){function t(t,i,f,e){var o=n.call(this,t,i,f,e)||this;return o.controlType=5,o.emptyValueText=o._options.emptyValueText||ko.observable(),o.ariaLabel=r.initObservable(o._options.ariaLabel,""),o.showValidationsAsPopup=!!(o._options&&o._options.showValidationsAsPopup),o.showValidationsAsPopup&&(o.showValidationMessagesBelowControl=!0,o.valueUpdateTrigger=u.Controls.ValueUpdateTrigger.Input),o}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=f})(i=t.PasswordBox||(t.PasswordBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var f=n,e=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Forms.Section"),i,r,u;(function(n){n[n.Column=0]="Column";n[n.Default=1]="Default";n[n.Dependent=2]="Dependent";n[n.Row=3]="Row";n[n.Tabs=4]="Tabs";n[n.Wrapper=5]="Wrapper";n[n.SingleControl=6]="SingleControl"})(i||(i={})),(function(n){n[n.Line=0]="Line";n[n.Block=1]="Block"})(r||(r={}));u=(function(t){function u(u,o){var s=t.call(this,u)||this;return s.active=ko.observable(!1),s.children=ko.observableArray(),s.dirty=ko.observable(!1),s.name=ko.observable(),s.width=ko.observable(),s.submit=ko.observable(),s.populateSection=ko.observable(),s.style=ko.observable(i.Default),s.valid=ko.observable(!0),s.validate=null,s.tabSection=ko.observable(),s.tabHasBeenLoaded=ko.observable(!1),s.controlType=15,f.isNullOrUndefined(o)&&(o={}),s.children=o.children||s.children,s.cssClass=n.initObservable(o.cssClass,""),s.minHeight=o.minHeight,s.name=o.name||s.name,s.populateSection=o.populateSection||s.populateSection,s.style=o.style||s.style,s.submit=o.submit||s.submit,s.tabStyle=o.tabStyle||r.Line,s.visible=n.initObservable(o.visible,!0),s.width=o.width||s.width,s.telemetryName=n.initObservable(o.telemetryName),s.leftLabelPosition=o.leftLabelPosition,s.leftLabelWidth=o.leftLabelWidth,ko.computed(s.lifetimeManager,(function(){var n=s.children(),t=n.some((function(n){var t=ko.unwrap(n);return t.dirty?t.dirty():!1})),i=s.tabSection&&s.tabSection()&&s.tabSection().children().some((function(n){var t=ko.unwrap(n);return t.dirty?t.dirty():!1})),r=n.some((function(n){var t=ko.unwrap(n);return t.valid?!t.valid():!1})),u=n.some((function(n){var t=ko.unwrap(n);return t.loading?t.loading():!1}));s.dirty(!!t||!!i);s.valid(!r);s.loading(u)})),n.isFeatureEnabled("deleteobsoletecontrols")&&e.error(new Error("MsPortalFx.ViewModels.Forms.Section.ViewModel is obsolete. Please use the Fx/Controls/Section instead.")),s}return __extends(u,t),u.prototype.clearValidation=function(){return Q.all(this.children().map((function(n){return n.clearValidation?n.clearValidation():Q()})))},u.prototype.triggerValidation=function(){var t=this.children().filter((function(n){return typeof n.triggerValidation=="function"})).map((function(n){return n.triggerValidation()}));return Q.all(t).then((function(t){return t.every(n.identity)}))},u})(n.ViewModels.Controls.Loadable.ViewModel);t.SectionStyle=i;t.TabStyle=r;t.ViewModel=u})(i=t.Section||(t.Section={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var r;(function(r){var u=(function(t){function i(i,r,u,f){var e=t.call(this,i,r,u,f)||this,o;return e.controlType=11,o=e._options,e.showValue=n.initObservable(o.showValue,!0),e.displayText=n.initObservable(o.displayText,""),e.icon=n.initObservable(o.icon),e.locked=n.initObservable(o.locked,!1),e.infoBalloonText=n.initObservable(o.infoBalloonText,""),e.lockedBalloonText=n.initObservable(o.lockedBalloonText,""),e.infoBalloonLink=n.initObservable(o.infoBalloonLink,new n.ViewModels.Controls.Balloon.Link),e.ariaLabel=n.initObservable(o.ariaLabel),e.isDefault=ko.computed(i,(function(){return e.defaultValue()===e.value()})),e}return __extends(i,t),i})(i.Base.Editable.ViewModel),f;r.ViewModelBase=u;f=(function(i){function r(r,u,f,e){var s=i.call(this,r,u,f,e)||this,o=s._options;return o&&o.onClick?s._msPortalFxOnClick=function(){return o.onClick()}:s.selectable=new t.Selectable({allowUnselect:!1,selectedValue:o.selectedValue||!0,isSelected:o.initialState&&o.initialState.selectable&&o.initialState.selectable.isSelected,isActivated:o.initialState&&o.initialState.selectable&&o.initialState.selectable.isActivated}),s._options.viewModelValueChangesAreClean||s.resetDirtyComputed((function(){s.setDirty(!n.deepEquals(s.value(),s.initialValue()))})),s}return __extends(r,i),r})(u);r.ViewModel=f})(r=i.Selector||(i.Selector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,e=n.ViewModels,o=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Forms.CreatorAndSelectorV2"),r,f;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(r||(r={}));f=(function(t){function i(i,f,s,h){var c=this,a,l;return f||(h={defaultValue:ko.observable({value:"",createNew:!0})}),!f||f.valid&&f.sections||(a=f.defaultValue,a?a()||a({value:"",createNew:!0}):a=ko.observable({value:"",createNew:!0})),c=t.call(this,i,f,s,h)||this,c.controlType=85,f.valid&&f.sections&&!c._msPortalFxViewModelValueChangesAreClean&&c.resetDirtyComputed((function(){var n=c.value(),t=c.initialValue();n&&t?c.setDirty(t.value!==n.value||t.createNew!==n.createNew):c.setDirty(n!==t)})),l=c._options,c.textBoxLabel=l.textBoxLabel||ko.observable(""),c.selectExistingLinkDisplayText=l.selectExistingLinkDisplayText||ko.observable(u.selectExisting),c.createNewLinkDisplayText=l.createNewLinkDisplayText||ko.observable(u.createNew),c.displayMode=l.displayMode||ko.observable(r.CreateOrSelect),c.valueUpdateTrigger=l.valueUpdateTrigger||e.Controls.ValueUpdateTrigger.Input,n.isFeatureEnabled("deleteobsoletecontrols")&&o.error(new Error("MsPortalFx.ViewModels.Forms.CreatorAndSelectorV2.ViewModel is obsolete.")),c}return __extends(i,t),i})(t.Selector.ViewModel);i.Mode=r;i.ViewModel=f})(i=t.CreatorAndSelectorV2||(t.CreatorAndSelectorV2={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;return f.controlType=6,f}return __extends(t,n),t})(n.Base.Slider.ViewModel);t.ViewModel=i})(t=n.Slider||(n.Slider={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.Forms.StaticSection"),r=(function(t){function r(r,u){var f=t.call(this,r)||this,e;return f.disabled=ko.observable(!1),f.loading=ko.observable(!1),f.controlType=1,f.validate=ko.observable(0),f.fields=ko.observableArray(),e=f.lifetimeManager,f.dirty=ko.computed(e,(function(){return f.fields().some((function(n){return n.dirty()}))})),f.valid=ko.computed(e,(function(){return!f.fields().some((function(n){return!n.valid()}))})),f.validate.subscribe(e,(function(n){f.fields().forEach((function(t){t.validate(n)}))})),u&&ko.utils.arrayPushAll(f.fields,u),n.isFeatureEnabled("deleteobsoletecontrols")&&i.error(new Error("MsPortalFx.ViewModels.Forms.StaticSection.ViewModel is obsolete. Use Fx/Controls/Section instead.")),f}return __extends(r,t),r.prototype.clearValidation=function(){return Q.all(this.fields().map((function(n){return n.clearValidation()})))},r.prototype.triggerValidation=function(){return Q.all(this.fields().map((function(n){return n.triggerValidation()}))).then((function(t){return t.every(n.identity)}))},r})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=r})(i=t.StaticSection||(t.StaticSection={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r=n,u=r.ViewModels,f=(function(n){function t(t,i,f,e){var o=n.call(this,t,i,f,e)||this;return o.controlType=2,o.readOnly=o._options.readOnly||!1,o.actionHandler=e?e.actionHandler:i?i.actionHandler:null,o.actionsEnabled=ko.observable(!0),o.ariaLabel=r.initObservable(o._options.ariaLabel,""),o.showValidationsAsPopup=!!(o._options&&o._options.showValidationsAsPopup),o.spellcheck=i&&i.spellcheck?i.spellcheck:ko.observable(!1),o.onEnterPressed=e?e.onEnterPressed:i?i.onEnterPressed:null,o.showValidationsAsPopup&&(o.showValidationMessagesBelowControl=!0,o.valueUpdateTrigger=u.Controls.ValueUpdateTrigger.Input),o}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=f})(i=t.TextBox||(t.TextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){function r(t,i,r){return n.tryImmediateResolve(Q(t),(function(n){if(!n)return FxImpl.QReject(e.notReady);var t=i.map((function(n){return{id:n.id,name:n.name}}));return n(t,r)}))}var f=n.isNullOrUndefined,e=n.Resources.Strings.FileUpload,o=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Forms/AsyncFileUpload"),u;i.execUpload=r;u=(function(t){function i(i,r,u,e){var s=t.call(this,i,r,u,e)||this,h;return s.controlType=106,h=s._options,s.accept=h.accept||null,s.allowedFileExtensions=h.allowedFileExtensions||null,s.maxFiles=h.maxFiles||1,s.uploadContext=h.uploadContext||ko.observable(),s.selectedFiles=ko.observableArray(),s.uploadTasks=ko.observableArray(),s.autoAddUploadTasks=n.isNullOrUndefined(h.autoAddUploadTasks)?!0:h.autoAddUploadTasks,s.ariaLabel=n.initObservable(h.ariaLabel),s._msPortalFxUploadActionCallback=ko.observable(null),f(r)||r.valid&&r.sections||s._options.viewModelValueChangesAreClean||s.resetDirtyComputed((function(){s.setDirty(!n.deepEquals(s.value(),s.initialValue()))})),n.isFeatureEnabled("deleteobsoletecontrols")&&o.error(new Error("MsPortalFx.ViewModels.Forms.AsyncFileUpload is obsolete. Please migrate to the AMD creation pattern using Fx/Controls/FileUpload.")),s}return __extends(i,t),i.prototype.addUploadTasks=function(n){return r(this._msPortalFxUploadActionCallback(),n,5)},i.prototype.resetUploadTasks=function(){return r(this._msPortalFxUploadActionCallback(),[],6)},i})(t.Base.Editable.ViewModel);i.ViewModel=u})(i=t.AsyncFileUpload||(t.AsyncFileUpload={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var e=n.ViewModels,tt=e.FileDownload,o=n.Base.Images,r=n.initObservable,h=n.Resources.Strings.ViewModels.Toolbar,s=(function(){function n(n,t){t===void 0&&(t={});this.type=n;this.name=t.name||"";this.disabled=typeof ko.unwrap(t.disabled)=="string"?r(t.disabled,""):r(t.disabled,!1);this.ariaLabel=r(t.ariaLabel,undefined);this.tooltip=r(t.tooltip,undefined);this.unauthorizedMessage=r(t.unauthorizedMessage,undefined)}return n.prototype.unauthorized=function(n){var t;t=typeof n=="boolean"?n?h.noAccess:null:n?n:h.noAccess;this.unauthorizedMessage(t)},n})(),c,l,u,a,f,v,y,p,w,b,k,d,g,nt;i.ToolbarItem=s;c=(function(n){function t(t,i){i===void 0&&(i={});var u=n.call(this,t,i)||this;return u.controlType=62,u.showLabels=r(i.showLabels,!1),u.items=ko.observableArray(),u}return __extends(t,n),t.prototype.setItems=function(n){this.items(n)},t})(t.Controls.Loadable.ViewModel);i.Toolbar=c;l=(function(){function n(){this.type=12}return n})();i.Separator=l;u=(function(n){function t(t,i){i===void 0&&(i={});var u=n.call(this,t,i)||this;return u.label=r(i.label,""),u.icon=r(i.icon,{type:0}),u}return __extends(t,n),t})(s);i.ToolbarButton=u;a=(function(n){function t(t){var i=n.call(this,1)||this;return i.items=t,i}return __extends(t,n),t})(s);i.ToolbarGroup=a;f=(function(n){function t(t,i){i===void 0&&(i={});var r=n.call(this,t,i)||this;return r.command=i.command,r}return __extends(t,n),t})(u);i.ExecutableButtonBase=f;v=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,4,t)||this;return i.commandContext=t.commandContext||ko.observable(),i}return __extends(t,n),t})(f);i.CommandButton=v;y=(function(n){function t(t){var i=this,u;return u=typeof t=="string"?{optionGroupName:t}:t||{},i=n.call(this,6,u)||this,i.optionGroupName=u.optionGroupName||"",i.checked=r(u.checked,!1),i.commandContext=u.commandContext||ko.observable(),i}return __extends(t,n),t})(f);i.ToggleButton=y;p=(function(n){function t(t){var r=this,i;return typeof t=="number"?i={type:t}:(i=t||{},i.type=i.type||5),r=n.call(this,i.type,i)||this,r.dialogOptions=i.dialogOptions,r}return __extends(t,n),t})(f);i.DialogButton=p;w=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,8,t)||this;return i.icon=r(t.icon,o.Upload()),i.accept=t.accept||"",i.maxFiles=t.maxFiles||1,i.uploadContext=t.uploadContext||ko.observable(new e.FileUpload.FullFileUploadContext),i.cancelAllUploads=t.cancelAllUploads||ko.observable(!1),i.cancelAllUploadsOnFileSelection=t.cancelAllUploadsOnFileSelection||ko.observable(!0),i.uploadTasks=ko.observableArray(),i}return __extends(t,n),t})(u);i.FileUploadButton=w;b=(function(n){function t(t){var i=n.call(this,7,t)||this;return i.icon=r(t.icon,o.Download()),i.context=ko.observable(new tt.Context(t)),i}return __extends(t,n),t})(u);i.FileDownloadButton=b;k=(function(n){function t(t){t===void 0&&(t={});var i=n.call(this,9,t)||this;return i.icon=r(t.icon,o.Link()),i.requestUrl=r(t.requestUrl,null),i.popupWidth=r(t.popupWidth,800),i.popupHeight=r(t.popupHeight,600),i}return __extends(t,n),t})(u);i.OAuthButton=k;d=(function(n){function t(t){var i=n.call(this,3,t)||this,r=i.selectable=new e.Selectable(t);return t||r.selectedValue()!==undefined||r.selectedValue(null),i}return __extends(t,n),t})(u);i.OpenBladeButton=d;g=(function(n){function t(t){var i=n.call(this,10,t)||this;return t&&(i.id=t.id,i.selectable=new FxImpl.Composition.Selectable.Selectable2(t)),i}return __extends(t,n),t})(u);i.OpenBladeButton2=g;nt=(function(n){function i(i,r){var f=this,u;return typeof i=="string"?u={uri:i,target:r||"_blank"}:(u=i,u.target=u.target||"_blank"),f=n.call(this,2,u)||this,f.clickableLink=new t.ClickableLink(ko.observable(u.uri),ko.observable(u.target)),f}return __extends(i,n),i})(u);i.OpenLinkButton=nt})(i=t.Toolbars||(t.Toolbars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var u,r,f,e,o,s,h,c,l;(function(n){n[n.Unstyled=0]="Unstyled";n[n.BottomBanner=1]="BottomBanner"})(u||(u={})),(function(n){function i(n){return!!n&&n.status===3&&(n.action===2||n.action===4)}n.isCompleted=i;var r=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.valid=ko.observable(),t.input=ko.observable(),t.output=ko.observable({status:1,action:0}),t}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.input(n.input),n.valid!==undefined&&this.valid(n.valid),Q()},t})(t.Controls.Loadable.ViewModel);n.ViewModel=r})(r=i.Base||(i.Base={})),(function(n){var t=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.enableErrorInfoBox=ko.observable(!0),t._msPortalFxClearGroupValidationMessage=ko.observable((function(){})),t.asyncValidations=[],t}return __extends(t,n),t.prototype.clearGroupValidationMessage=function(){this._msPortalFxClearGroupValidationMessage()()},t})(r.ViewModel);n.ViewModel=t})(f=i.ErrorInfoBoxActionBar||(i.ErrorInfoBoxActionBar={})),(function(t){var i=(function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.deleteButtonClick=function(){this._onButtonClicked(!0)},i.prototype.cancelButtonClick=function(){this._onButtonClicked(!1)},i.prototype._onButtonClicked=function(t){this.output({status:t?3:0,action:t?4:5,userActionId:n.getUniqueId()})},i})(r.ViewModel);t.ViewModel=i})(e=i.DeleteActionBar||(i.DeleteActionBar={})),(function(n){var t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.saveButtonClick=function(){},t.prototype.discardButtonClick=function(){},t})(r.ViewModel);n.ViewModel=t})(o=i.FormActionBar||(i.FormActionBar={})),(function(n){var t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.updateButtonClick=function(){},t.prototype.resetButtonClick=function(){},t})(r.ViewModel);n.ViewModel=t})(s=i.FilterActionBar||(i.FilterActionBar={})),(function(n){var t=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.enableErrorInfoBox=ko.observable(!1),t.actionButtonLabel=ko.observable(),t.actionButtonUri=ko.observable(),t.actionButtonUriWindowFeatures=ko.observable(),t.actionSummaryHtml=ko.observable(),t.allowToggleProvisioningLocation=ko.observable(!1),t.secondaryLinkDisplayText=ko.observable(),t.secondaryLinkTriggerValidation=ko.observable(!1),t.secondaryLinkStyle=ko.observable(0),t}return __extends(t,n),t.prototype.actionButtonClick=function(){},t.prototype.onInputsSet=function(t){var i=this;return n.prototype.onInputsSet.call(this,t).then((function(){t.actionButtonLabel&&i.actionButtonLabel(t.actionButtonLabel);t.actionSummaryHtml&&i.actionSummaryHtml(t.actionSummaryHtml);t.allowToggleProvisioningLocation&&i.allowToggleProvisioningLocation(t.allowToggleProvisioningLocation);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.secondaryLinkStyle!==undefined&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t})(f.ViewModel);n.ViewModel=t})(h=i.GenericActionBar||(i.GenericActionBar={})),(function(n){n.SecondaryLinkStyle=u;var t=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.actionInProgress=ko.observable(!1),r.input=ko.observable(),r.isProvisioningBlade=ko.observable(),r.provisionOnStartboardPart=ko.observable(),r.masterIsProvisioningPart=ko.observable(!1),r.eula=ko.observable(),r.secondaryLinkDisplayText=ko.observable(),r.secondaryLinkTriggerValidation=ko.observable(!1),r.secondaryLinkStyle=ko.observable(0),r.disablePrimaryButton=ko.observable(!0),r.triggerSelectAction=ko.observable(""),r.forceInProgressStatus=ko.observable(),r.dropDown=ko.observable(),r.showActionBar=ko.observable(!0),r.actionButtonUri=ko.observable(),r.actionButtonLabel=ko.observable(0),i&&typeof i.hideActionBar=="boolean"&&r.showActionBar(!i.hideActionBar),r}return __extends(t,n),t.prototype.onInputsSet=function(t){var i=this;return"actionInProgress"in t&&this.actionInProgress(!!t.actionInProgress),n.prototype.onInputsSet.call(this,t).then((function(){i.eula(t.eula);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.isProvisioningBlade&&i.isProvisioningBlade(t.isProvisioningBlade);i.masterIsProvisioningPart(t.input&&!!t.input.masterIsProvisioningPart);i.forceInProgressStatus(t.forceInProgressStatus);t.suppressErrorInfoBox&&i.enableErrorInfoBox(!1);i.disablePrimaryButton(!!t.disablePrimaryButton);u[t.secondaryLinkStyle]&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.dropDown&&i.dropDown(t.dropDown);t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t})(f.ViewModel);n.ViewModel=t})(c=i.CreateActionBar||(i.CreateActionBar={})),(function(n){var t=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.triggerSelectAction=ko.observable(""),t.eula=ko.observable(),t.showSelectButton=ko.observable(),t.selectButtonText=ko.observable(),t}return __extends(t,n),t.prototype.onInputsSet=function(t){"triggerSelectAction"in t&&this.triggerSelectAction(t.triggerSelectAction);"eula"in t&&this.eula(t.eula);"selectButtonText"in t&&this.selectButtonText(t.selectButtonText);var i=this.showSelectButton;return"showSelectButton"in t?i(!!t.showSelectButton):i()===undefined&&i(!0),n.prototype.onInputsSet.call(this,t)},t})(r.ViewModel);n.ViewModel=t})(l=i.PickerActionBar||(i.PickerActionBar={}))})(i=t.ActionBars||(t.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t=(function(){function n(n){this.type=0;this.title=n}return n})(),i,r,u,f;n.Dialog=t;i=(function(n){function t(t,i,r){var u=n.call(this,t)||this;return u.type=1,u.text=i,u.buttons=r,u}return __extends(t,n),t})(t);n.MessageBox=i;r=(function(n){function t(t,i,r){var u=n.call(this,t)||this;return u.text=ko.observable(""),u.completionPercentage=ko.observable(-1),u.type=2,u.text(i),r!==undefined&&u.completionPercentage(r),u}return __extends(t,n),t})(t);n.ProgressBox=r;u=(function(n){function t(t){var i=n.call(this,t)||this;return i.description=ko.observable(),i.type=3,i}return __extends(t,n),t})(t);n.FormDialog=u;f=(function(n){function t(){var t=n.call(this,"")||this;return t.listItems=ko.observableArray(),t.selectedItem=ko.observable(),t.type=4,t}return __extends(t,n),t})(t);n.ListPopup=f})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function h(){u.client.registerRpcEndPoint(r.submitProvisionerTelemetry,{allowedOrigin:null,handler:function(n,t){n.extension=t.srcWindowId;s.trace(n)}})}function f(n){u.client.invokeRpc(r.submitProvisionerTelemetry,o.Shell,n)}function e(n,t){t||(t={});t.source="Provisioner";t.action=n;var i=t.data||{},r=i.launchingContext||{};return r.telemetryId&&(i.telemetryId=r.telemetryId),f(t),t}function c(n){return e("ProvisioningStarted",n)}function l(n){return e("ProvisioningEnded",n)}var i=MsPortalFx.Base,o=i.Constants,r=n.Constants.RpcMethods,u=n.Rpc,s=i.Diagnostics.Telemetry;t.ActionModifier={Failed:"Failed",Succeeded:"Succeeded"};t.ProvisioningStatus={NoPromise:"NoPromise",Resolved:"Resolved",UnknownFailure:"UnknownFailure"};t.registerTelemetrySubmissionHandler=h;t.traceDeployment=f;t.traceProvisioningStarted=c;t.traceProvisioningEnded=l})(t=n.ProvisioningTelemetry||(n.ProvisioningTelemetry={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var u=n,p=u.Base,s=u.Services.Gallery,h=s.Constants,f=FxImpl.ProvisioningTelemetry,i,a,v,r,y;(function(t){function r(){if(i){var t=n.Helpers.Deferred();return{promise:t.promise(),resolve:function(n){t.resolve(n)},reject:function(n){t.reject(n)}}}return Q.defer()}function u(t){if(i){var r=n.Helpers.Deferred();return r.reject(t),r.promise()}return Q.reject(t)}function f(n){return Q.isPromise(n)?n.isPending():n.state()==="pending"}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.defer=r;t.reject=u;t.isPending=f})(i||(i={}));var c=new p.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/Internal/Provisioner"),w=h.GalleryParametersKey,e=h.GalleryOptionsKey,o="",b={provEntityUndefined:o,notEnabled:o,unableToLocatePart:o},l=FxImpl.getErrorMap(b),k=(function(){function n(){this.inputs=ko.observable();this.errors=ko.observable([])}return n})();t.CollectorBindingInternals=k;a=(function(){function n(){this.outputs=ko.observable();this.commit=ko.observable()}return n})();t.ProviderBindingInternals=a;v=(function(){function t(t){var u=this,r;this._provisioningEntity=undefined;this._data=undefined;this._options=undefined;this._executionDeferred=undefined;this._mappedOutputs=undefined;t||l.provEntityUndefined();this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this._provisioningEntity=t;r=this._executionDeferred=i.defer();Q(r.promise).finally((function(){u.dispose()})).catch(n.noop)}return Object.defineProperty(t.prototype,"mappedOutputs",{get:function(){return this._mappedOutputs},enumerable:!1,configurable:!0}),t.prototype.executeProvisioning=function(n,t){var h=this,r=this._provisioningEntity,a,p,u,f;if(r.enableProvisioning()||l.notEnabled(),a=n,r.executeProvisioning&&r.mapOutputsForProvisioning)return u=FxImpl.createError("You can only override 'executeCustomProvisioning' or 'mapOutputsForProvisioning', but not both."),c.error(u),i.reject(u);if(!r.executeProvisioning){var v=t&&t[e],o=v&&v.galleryItem,y=o&&o.categoryIds||[];if(y.length>0&&(p=y.some((function(n){return n.toLowerCase()===s.noSubCreateCategoryId})),p))return u=FxImpl.createError("The gallery item '"+o.itemDisplayName+"' requires no subscriptions, which requires custom provisioning. Override 'executeProvisioning'"),c.error(u),i.reject(u)}return(r.mapOutputsForProvisioning&&(n=r.mapOutputsForProvisioning(a)),r.executeProvisioning)?(this._traceProvisioningStarted(),f=r.executeProvisioning(n),f?f.then((function(){h._traceProvisioningEnded(!0)}),(function(){h._traceProvisioningEnded(!1)})):this._traceProvisioningEnded(undefined),f):this._beginExecution(n,t)},t.prototype.dispose=function(){this._lifetimeManager.dispose()},t.prototype._beginExecution=function(n,t){var s=this,o=this._executionDeferred,f,e;return i.isPending(o.promise)&&(this._data=n,this._options=t,f=this._provisioningEntity.privatePcPrBI,e=this._lifetimeManager,e&&(f.provisioningCommand.fxOnce(e,(function(n){n.status(r.Idle);s._executeProvisioning(n)})),f.triggerProvisioningCommand(u.getUniqueId()))),o.promise},t.prototype._executeProvisioning=function(n){var t=this,u,i;n.status(r.InProgress);this._traceProvisioningStarted();u=n.execute({options:this._options,data:this._data});i=this._executionDeferred;u?u.then((function(u){t.deploymentResponse=u;t._provisioningEntity.privatePcPrBI.provisioningStarted({galleryParameters:t._data.outputParameters[w],configurationOptions:t._options[e],deploymentResponse:u});n.status(r.Succeeded);t._traceProvisioningEnded(!0);i.resolve()}),(function(){n.status(r.Failed);t._traceProvisioningEnded(!1);i.reject()})):(this._traceProvisioningEnded(undefined),i.resolve())},t.prototype._createEventBase=function(){var i=this._options,r=i&&i[e],n=r&&r.launchingContext,t={name:undefined,data:{oldCreateApi:!0}};return n&&(t.name=n.galleryItemId,t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(){return f.traceProvisioningStarted(this._createEventBase())},t.prototype._traceProvisioningEnded=function(n){var r=this._createEventBase(),u=f.ActionModifier,e=f.ProvisioningStatus,t,i;return n===undefined?(t=u.Succeeded,i=e.NoPromise):n?(t=u.Succeeded,i=e.Resolved):(t=u.Failed,i=e.UnknownFailure),r.actionModifier=t,r.data.provisioningStatus=i,f.traceProvisioningEnded(r)},__decorate([__metadata("fx:diagnostics",[require,"Provisioner"]),u.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object])],t)})();t.Provisioner=v,(function(n){n[n.Idle=0]="Idle";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed"})(r=t.ProvisioningCommandStatus||(t.ProvisioningCommandStatus={}));y=(function(){function n(){this.triggerProvisioningCommand=ko.observable();this.provisioningPartExtensionName=ko.observable();this.provisioningPartName=ko.observable();this.triggerProvisioningInStartboardPart=ko.observable();this.masterIsProvisioningPart=ko.observable(!1);this.forceDiscardJourney=ko.observable(!0);this.provisioningCommand=ko.observable();this.provisioningAttempted=ko.observable();this.provisioningStarted=ko.observable();this.provisioningCompleted=ko.observable()}return n})();t.ProvisioningEntityBindingInternals=y})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var y=n.Base,p=y.Images,w=n.Resources.Strings,u="error",f=412,e=FxImpl.getErrorMap({hasNotBeenImplemented:""}),b=(function(){function n(){}return n})(),i,o,s,h,c,l,r,a,v,k;t.CommandContainerContract=b;i=(function(){function n(){this.enabled=ko.observable(!0);this.icon=ko.observable();this.text=ko.observable();this.ariaLabel=ko.observable();this.tooltip=ko.observable()}return n})();t.CommandBase=i;o=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.status=ko.observable(0),t.dialog=ko.observable(),t}return __extends(t,n),t.prototype.execute=function(){e.hasNotBeenImplemented("execute")},t.prototype.dialogClick=function(){e.hasNotBeenImplemented("dialogClick")},t})(i);t.Command=o;s=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.navigateUri=ko.observable(""),t.navigateTarget=ko.observable("_blank"),t}return __extends(t,n),t})(i);t.UriCommand=s;h=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.navigateUri=ko.observable(""),t.navigateUriCallback=ko.observable(null),t.navigateTarget=ko.observable("_blank"),t.showUriCallbackConfirmationDialog=ko.observable(!1),t}return __extends(t,n),t})(i);t.UriCallbackCommand=h;c=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.listItems=ko.observableArray(),t.selectedItem=ko.observable(""),t}return __extends(t,n),t})(i);t.ListCommand=c;l=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.viewModel=ko.observable(null),t}return __extends(t,n),t})(i);t.DynamicCommand=l;r=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})();t.FileDownloadStatus=r;a=(function(t){function i(i){var e=t.call(this)||this,o,s;return e.targetUri=ko.observable(""),e.targetUriCallback=ko.observable(null),e.httpMethod=ko.observable("GET"),e.httpRequestContent=ko.observable(""),e.httpRequestContentType=ko.observable("application/json"),e.headers=ko.observable({}),e.authorizationToken=ko.observable(null),e.targetFileName=ko.observable(""),e.errorMessage=ko.observable(""),e.downloadType=ko.observable(1),e.downloadStatus=ko.observable(),e.showUriCallbackConfirmationDialog=ko.observable(!1),e.uriCallbackConfirmationDialogOptions=null,e.showDownloadProgressDialog=ko.observable(!1),e.downloadProgressDialogOptions=null,e.icon(p.Download()),i===!0?o={resourceName:""}:i&&(o=i.authorizationOptions),o&&(s={resourceName:o.resourceName},n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getAuthorizationToken(s)})).then((function(n){n&&n.header?e.authorizationToken(n.header):e.downloadStatus(new r(u,f,w.FileDownloadCommand.authTokenNotAvailable))}),(function(n){e.downloadStatus(new r(u,f,n))}))),e}return __extends(i,t),i})(i);t.FileDownloadCommand=a;v=(function(n){function i(t){var u=n.call(this)||this,r=t.selectable;return r&&r.selectedValue||(t.selectable=i.createSelectableViewModel()),u}return __extends(i,n),i.createSelectableViewModel=function(n){return new t.Selectable({selectedValue:arguments.length===1?n:{}})},i})(i);t.OpenBladeCommand=v,(function(t){var i;(function(t){function r(n){n.enabled(null);(n.icon||u)(null);(n.text||u)(null)}var i=n.ViewModels,u=ko.observable(""),h=(function(n){function t(t){var i=n.call(this,t)||this;return r(i),i}return __extends(t,n),t})(i.OpenBladeCommand),f,e,o,s;t.OpenBladeCommand=h;f=(function(n){function t(){var t=n.call(this)||this;return r(t),t}return __extends(t,n),t})(i.FileDownloadCommand);t.FileDownloadCommand=f;e=(function(n){function t(){var t=n.call(this)||this;return r(t),t}return __extends(t,n),t})(i.Command);t.ExecutableCommand=e;o=(function(n){function t(){var t=n.call(this)||this;return r(t),t}return __extends(t,n),t})(i.UriCallbackCommand);t.UriCallbackCommand=o;s=(function(n){function t(){var t=n.call(this)||this;return r(t),t}return __extends(t,n),t})(i.UriCommand);t.UriCommand=s})(i=t.Dynamic||(t.Dynamic={}))})(k=t.Commands||(t.Commands={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=(function(){function t(){this.title=ko.observable();this.shortTitle=ko.observable();this.description=ko.observable();this.icon=ko.observable(n.Base.Images.Polychromatic.DefaultBlade());this.size=ko.observable(1)}return t})();t.ButtonPart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var r=(function(){function n(){this.inputParameters={};this.inputMetadata={};this.options={}}return n})(),t,i;n.ParameterCollectionInput=r;t=(function(){function n(){this.outputParameters={}}return n})();n.ParameterCollectionOutput=t;i=(function(){function n(){}return n.modelToParameters=function(n){var i={},t,r;for(t in n){t in i||(i[t]={});for(r in n[t])i[t][r]=n[t][r]()||""}return i},n.parametersToModel=function(n){var r={},t,i;for(t in n)for(i in n[t]){if(t in r||(r[t]={}),ko.isObservable(n[t][i])||ko.isComputed(n[t][i]))throw new Error("Parameters cannot be knockout observables.");r[t][i]?r[t][i](n[t][i]):r[t][i]=ko.observable(n[t][i])}return r},n})();n.Models=i})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t="",r={onProviderCommitMissing:t,onCommitSuccessActionMissing:t,onCommitFailedActionMissing:t},i=FxImpl.getErrorMap(r),u=(function(){function n(n){this._provisioner=null;this._previousOutputs=null;this._previousCommit="";this._previousDetailBladeOutput=null;this._provisioner=n}return n.prototype.onProviderBindingInternalsReceived=function(n,t,r,u,f,e){var l=this,h;if(u||i.onProviderCommitMissing(),f||i.onCommitSuccessActionMissing(),e||i.onCommitFailedActionMissing(),n){var s=ko.unwrap(n.commit),o=ko.unwrap(n.outputs),c=function(){f();l._provisioner.executeProvisioning(o,t)};!s||s===this._previousCommit||!o||o===this._previousOutputs||!r||r===this._previousDetailBladeOutput||(this._previousOutputs=o,this._previousCommit=s,h=u(null,o),h?h.then((function(n){n?c():e()}),(function(){e()})):c())}},n})();n.CollectorBase=u})(t=n.Internal||(n.Internal={}))})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function f(n,t,i){var r=n&&n.stepStatuses,u=r&&r.length?r[0].status:0;return ko.observable({stepId:"NoWizardStep",status:u,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:i})}var r=MsPortalFx.ViewModels,u=MsPortalFx.ViewModels.ParameterCollection.Internal,i=" is not implemented",e=(function(t){function r(i,r,e,o){var s=t.call(this)||this,c;s.editScopeId=ko.observable();s._commit=ko.observable();s._baseButtonContainer=null;s._baseProviderCommit=null;s._initialLoadComplete=!1;c=r&&r.container;i.selectable=new n.ViewModels.ObsoleteSelectable({selectedValue:!0,isSelected:!!c&&c.selectable.isSelected});var h={stepStatuses:[]},l=r&&r.content,a=l&&l.currentState;return a&&(h=a),s.beginExecuteCommand=ko.observable(!1),s.savedState=ko.observable(h),s.currentState=ko.observable(h),s.stepInput=f(h,e!==!1,o),s.stepOutput=ko.observable(),s.parameterCollectionErrors=ko.observable(),s.privateFcTpBI=new u.CollectorBindingInternals,s._baseButtonContainer=i,s._ltm=i.createChildLifetime(),s}return __extends(r,t),r.prototype.onInputsSet=function(n){var t=this,o=this.privateFcTpBI,r,u,i,s,f,e;return o.inputs(this.getProviderInputs(null)),this._initialLoadComplete||(r=this._ltm,this.parameterCollectionErrors.subscribe(r,(function(n){var t=o.errors;t(n);t([])})),this.stepOutput.subscribe(r,(function(n){t._processStepOutput(n)})),this._baseButtonContainer.selectable.isSelected.subscribe(r,(function(){t.savedState(t.currentState())})),this._initialLoadComplete=!0),u=n.fromProviderBindingInternals,u&&(i=u.commit,!i||i===this._baseProviderCommit||(this._baseProviderCommit=i,s=this.onProviderCommit(null,u.outputs),s.then((function(n){n?(t._baseButtonContainer.selectable.isSelected(!1),t._commit(i)):t.parameterCollectionErrors([{errorMessage:"Parameter Collection failed!"}])})))),f=n.stepOutput,f&&this.stepOutput(f),e=this.savedState,e()||e(n.savedState),null},r.prototype.getProviderInputs=function(){throw new Error("'getProviderInputs'"+i);},r.prototype.onProviderCommit=function(){throw new Error("'onProviderCommit'"+i);},r.prototype.dispose=function(){this._ltm.dispose()},r.prototype._processStepOutput=function(n){n&&(this.currentState({stepStatuses:[{stepId:n.stepId,status:n.status}],selectedStepId:n.stepId}),this.beginExecuteCommand(n.status===3))},r})(r.ButtonPart);t.BaseGalleryButtonPartViewModel=e})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){n.BaseGalleryButtonPartViewModel=FxImpl.ViewModels.ParameterCollection.BaseGalleryButtonPartViewModel})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function d(n,t){var i,r,u=function(){i={};r=0};return u(),function(f){var e=i[f];return e===undefined&&(e=n(f),r++==1e3&&Q.nextTick(u),i[f]=e),t(e)}}function f(n){return d((function(t){return JSON.stringify(n(t))}),JSON.parse)}function i(t){return d((function(n){return t.test(n)}),n.identity)}function tt(n){return g(n)||nt(n)}function e(n,i){if(!n||typeof n!="string")return!1;var r=it(n)||t.isSubscriptionId(n)||t.isResourceGroupId(n);return i?r:r||tt(n)||t.isTagId(n)}function u(n){return n.toLowerCase()}function vt(n){var s="/providers/Microsoft.Resources"+n,u=ct.exec(s),i;if(u){for(var t={resourceMap:{}},f=[],e=[],o=t.provider=u[1],h=u[2],r=void 0;r=lt.exec(h);){if(!r)return;f.push(t.type=r[1]);e.push(t.resource=r[2]);o+="/"+t.type;t.resourceMap[o]=t.resource}return t.types=f,t.resources=e,i=at.exec(n),i&&i.length&&(t.subscription=i[1],t.resourceGroup=i[2]),t}}function ut(n){return f((function(t){var i;return n(t)&&(i=vt(t))||r.invalidId(),i}))}function yt(t){return e(t)?n.sanitizeMessage(t):"_REDACTED_"}function pt(n,t,i){return s(n,t)+("/providers/Microsoft.Resources/deployments/"+i)}function wt(n){return o(n.subscription)}function c(n){return o(n.subscription)}function l(n){var t=n.subscription;return t?o(t):""}function bt(n){return c(t.parseResourceGroupDescriptor(n))}function kt(n){return l(t.parseResourceDescriptor(n))}function o(n){return"/subscriptions/"+n}function dt(n){return s(n.subscription,n.resourceGroup)}function a(n){return s(n.subscription,n.resourceGroup)}function gt(n){return a(t.parseResourceDescriptor(n))}function s(n,t){return n?"/subscriptions/"+n+(t?"/resourceGroups/"+t:""):""}function ft(n){var t=n.provider;return rt(t,rt.apply(void 0,n.types||[]))}function et(n){return function(t){return ft(n(t))}}function ot(n){for(var i="/subscriptions/"+n.subscription+"/resourceGroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,u=n.resources,t=0;t<r.length;t++)i+="/"+r[t]+"/"+u[t];return i}function ni(n){return"/subscriptions/"+n.subscription+"/resourceGroups/"+n.resourceGroup+"/providers/"+n.provider+"/"+n.types[0]+"/"+n.resources[0]}function ti(n){var t;n.types.length<2&&r.notForNestedResource();var i="/subscriptions/"+n.subscription+"/resourceGroups/"+n.resourceGroup+"/providers/"+n.provider,u=n.types,f=n.resources;for(t=0;t<u.length-1;t++)i+="/"+u[t]+"/"+f[t];return i}function ii(t,i){var r=u(t)+"/";return n.startsWith(u(i),r)}function st(n,t){return n+":"+ot(t)}function ht(n){return function(i){return st(n,t.parseResourceDescriptor(i))}}function h(n){return function(t,i){return t&&i?t===i||n(t)&&u(t)===u(i):!t==!i}}function v(n){return function(t){return n(t),u(t)}}function ri(n){return e(n)?u(n):null}function ui(n,i){return n&&i&&t.compareSubscriptionId(n,c(t.parseResourceGroupDescriptor(i)))}function fi(n,i){return n&&i&&t.compareSubscriptionId(n,l(t.parseResourceDescriptor(i)))}function ei(n,i){return n&&i&&t.compareResourceGroupId(n,a(t.parseResourceDescriptor(i)))}var ct=/(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((:?\/[^\/]+\/[^\/]+)*)$/i,lt=/\/([^\/]+)\/([^\/]+)/ig,at=/\/subscriptions\/([^\/\s]+)(?:\/resourceGroups\/([^\/\s]+))?/i,y=/^\/subscriptions\/([^\/\s]+)$/i,p=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)$/i,w=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)\/deployments\/([^\/]+)$/i,b=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)\/providers\/microsoft.resources\/deployments\/([^\/]+)$/i,k=/^\/subscriptions\/([^\/\s]+)\/tagNames\/([^\/]+)(?:\/tagValues\/([^\/]+))?$/i,g,nt,it;t.isTenantResource=i(/^(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i);t.isSubscriptionId=i(y);t.isResourceGroupId=i(p);t.isResourceId=i(/^(?:\/subscriptions\/[^\/\s]+(\/resourceGroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)+)$/i);g=i(b);nt=i(w);t.isDeploymentId=tt;t.isTagId=i(k);it=i(/^(?:\/subscriptions\/[^\/\s]+(\/resourceGroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i);t.isResourceManagerId=e;var rt=n.getJoinFunc("/"),r=FxImpl.getErrorMap({invalidDeployment:"",invalidId:"",invalidRG:"",invalidSub:"",invalidTag:"",notForNestedResource:""});t.sanitizeId=yt;t.parseSubscriptionDescriptor=f((function(n){t.isSubscriptionId(n)||r.invalidSub();var i=y.exec(n);return i&&i.length===2||r.invalidSub(),{subscription:i[1]}}));t.parseResourceGroupDescriptor=f((function(n){t.isResourceGroupId(n)||r.invalidRG();var i=p.exec(n);return i&&i.length===3||r.invalidRG(),{subscription:i[1],resourceGroup:i[2]}}));t.parseResourceDescriptor=ut(t.isResourceId);t.parseResourceManagerDescriptor=ut(e);t.parseDeploymentDescriptor=f((function(n){var t=b.exec(n);return t&&t.length===4||(t=w.exec(n)),t&&t.length===4||r.invalidDeployment(),{subscription:t[1],resourceGroup:t[2],deploymentName:t[3]}}));t.parseTagDescriptor=f((function(n){var t=k.exec(n);return t&&t.length===4||r.invalidTag(),{subscription:t[1],tagName:t[2],tagValue:t[3]}}));t.buildDeploymentId=pt;t.buildSubscriptionIdFromDescriptor=wt;t.buildSubscriptionIdFromResourceGroupDescriptor=c;t.buildSubscriptionIdFromResourceDescriptor=l;t.buildSubscriptionIdFromResourceGroupId=bt;t.buildSubscriptionIdFromResourceId=kt;t.buildSubscriptionIdFromSubscriptionName=o;t.buildResourceGroupIdFromDescriptor=dt;t.buildResourceGroupIdFromResourceDescriptor=a;t.buildResourceGroupIdFromResourceId=gt;t.buildResourceGroupIdFromSubscriptionAndResourceGroupName=s;t.buildSubscriptionFromId=o;t.buildResourceTypeFromResourceDescriptor=ft;t.buildResourceTypeFromResourceId=et(t.parseResourceDescriptor);t.buildResourceTypeFromResourceManagerId=et(t.parseResourceManagerDescriptor);t.buildResourceIdFromDescriptor=ot;t.buildTopmostParentResourceIdFromDescriptor=ni;t.buildParentResourceIdFromDescriptor=ti;t.isParentResource=ii;t.buildTagName=st;t.buildRelatedTagName=ht("hidden-related");t.buildLinkTagName=ht("hidden-link");t.compareSubscriptionId=h(t.isSubscriptionId);t.compareResourceGroupId=h(t.isResourceGroupId);t.compareResourceId=h(t.isResourceId);t.compareResourceManagerId=h(e);t.buildLowerCaseResourceGroupId=v(t.parseResourceGroupDescriptor);t.buildLowerCaseSubscriptionId=v(t.parseSubscriptionDescriptor);t.buildLowerCaseResourceId=v(t.parseResourceDescriptor);t.tryBuildResourceManagerKey=ri;t.subscriptionContainsResourceGroup=ui;t.subscriptionContainsResource=fi;t.resourceGroupContainsResource=ei})(i=t.ResourceTypes||(t.ResourceTypes={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=(function(){function n(){this.refreshPacket=ko.observable(null)}return n.prototype.signalResourceGroupRefresh=function(n){this.refreshPacket({resourceGroupId:n})},n.prototype.signalResourceRefresh=function(n){this.refreshPacket({resourceId:n})},n.prototype.signalAssetRefresh=function(n,t,i){this.refreshPacket({assetOwner:n,assetType:t,assetId:i})},n})();n.ResourcePartExtender=t})(t=n.ResourceTypes||(n.ResourceTypes={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(){function n(){this.assetType=ko.observable();this.assetName=ko.observable();this.icon=ko.observable();this.assetId=ko.observable();this.status=ko.observable();this.state=ko.observable();this.size=ko.observable(1)}return n})();n.AssetPart=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=t.Controls.Visualization.Chart.InteractionBehavior,r=(function(t){function r(r){var u=t.call(this,r)||this,f,e;return u.size=ko.observable(1),u.editButtonText=ko.observable(n.Resources.Strings.Part.Chart.editButtonText),f=u.size,e=u.interactionBehavior,f.subscribe(r,(function(n){switch(n){case 2:case 1:case 3:e(i.ChartArea_Off|i.XSlider_Off);break;default:e(i.All)}})),f.notifySubscribers(f()),u}return __extends(r,t),r})(n.ViewModels.Controls.Visualization.Chart.ViewModel);t.ChartPart=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function a(n,t,i){var r;switch(n){case 8:case 9:case 7:r=l;break;case 6:r=c;break;case 10:case 5:case 4:r=h;break;case 3:case 2:default:r=s}return r=t?r-1:r,i?r-1:r}function v(n){return n===0||n===1}function y(n){return n===2||n===3}var u=n,o=u.ViewModels,f=o.Controls.Lists.Grid,s=3,h=9,c=14,l=20,i,r,e;(function(n){n[n.None=0]="None";n[n.Data=1]="Data";n[n.Rollup=2]="Rollup"})(i=t.GridMode||(t.GridMode={}));r=[];[0,1,2,3,4,10,5,6,11,99,].forEach((function(n){r[n]=!0}));e=(function(){function n(n,t){var r=this,e;this.size=ko.observable(2);this.alwaysShowRollupCount=ko.observable(!1);this.rollupCount=ko.observable();this.rollupCountIconUri=ko.observable();this.rollupCountIcon=ko.observable();this.rollupCountLabel=ko.observable();this._options=null;this._container=null;this._container=n;this._options=t;this.gridMode=ko.observable(i.None);this.hasMoreData=ko.observable(!1);e=t.selectableRowExtensionOptions?f.Extensions.SelectableRow:null;this.grid=new f.ViewModel(n,ko.observableArray(),e,__assign({scrollable:{horizontal:!1,vertical:!1}},t.selectableRowExtensionOptions));this.grid.showHeader=!!t.showHeader;this.grid.columns=ko.observableArray();n.registerForDispose(this.grid);this.emptyGrid=ko.observable(!0);this.noRowsHtml=t.noRowsHtml?t.noRowsHtml:ko.observable(null);t.noRowsMessage&&(this.grid.noRowsMessage||(this.grid.noRowsMessage=ko.observable()),ko.computed(n,(function(){r.grid.noRowsMessage(t.noRowsMessage())})));this.selectableData=this.grid.selectableData;this._reactToDataChange(n,t.data,(function(n){return n===i.Data}));this._reactToDataChange(n,t.rollupData,(function(n){return n===i.Rollup}));this._reactToSizeChange();this.noRollupCount=ko.computed(n,(function(){return u.isNullOrUndefined(r.rollupCount())}))}return n.prototype._reactToDataChange=function(n,t,i){var r=this;t&&(t.items.subscribe(n,(function(n){r.emptyGrid(!n.length);i(r.gridMode())&&r._updateGrid(t)})),ko.computed(n,(function(){if(i(r.gridMode())){var n=t.columns();r.grid.columns(n)}})))},n.prototype._reactToSizeChange=function(){var n=this;ko.computed(this._container,(function(){var t=n._options,r=n.size();n.alwaysShowRollupCount();!v(r)&&(t.data||t.rollupData)?t.rollupData&&y(r)||t.rollupData&&!t.data?n.gridMode(i.Rollup):t.data&&n.gridMode(i.Data):n.gridMode(i.None);ko.ignoreDependencies((function(){switch(n.gridMode()){case i.Data:n._updateGrid(t.data);break;case i.Rollup:n._updateGrid(t.rollupData)}}))}))},n.prototype._updateGrid=function(n){if(n){var t=n.items(),u=this.size(),o=r[u],f=o?a(u,this._options.showHeader,this.alwaysShowRollupCount()):t.length;this.hasMoreData(t.length>f);var i=t.slice(0,f),e=this.grid.items.peek(),s=e.length!==i.length||ko.utils.compareArrays(e,i,{sparse:!0}).length>0;s&&this.grid.items(i)}},n})();t.ViewModel=e})(i=t.Collection||(t.Collection={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=(function(){function t(){this.resourceCount=ko.observable(0);this.countIsMinimum=ko.observable(!1);this.description=ko.observable("");this.icon=ko.observable(n.Base.Images.Polychromatic.DefaultBlade());this.label=ko.observable("");this.size=ko.observable(2)}return t})();t.CollectionSummary=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.createName=ko.observable(""),t}return __extends(t,n),t})(n.ButtonPart);n.CreatePart=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=n.ViewModels.Controls.Documents.Editor,r=(function(n){function t(t,r,u,f,e,o,s){e===void 0&&(e={});o===void 0&&(o=i.Extensions.None);s===void 0&&(s=null);var h=n.call(this,t,r,f,e,null,o,s)||this;return h.controlType=33,h.originalContent=ko.observable(u),h.originalContent.extend({notify:"always"}),h}return __extends(t,n),t})(i.ViewModel),u=(function(n){function t(t){var r=n.call(this,t,i.ContentType.Text,null,null)||this;return r.size=ko.observable(2),r}return __extends(t,n),t})(r);t.ViewModel=u})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=(function(){function t(t){this.groupInfos=ko.observableArray();this.itemsDataArray=ko.observableArray();this.itemSetting=ko.observable();this.valueInitialized=!1;this.total=ko.observable(null);this.startOffset=ko.observable(-90);this.totalFormat=ko.observable("{0}");this.unitFormat=ko.observable("");this.infoFormat=ko.observable("");this.numberFormatOptions=ko.observable({minimumFractionDigits:0,maximumFractionDigits:1});this.hoveredUnit=ko.observable("%");this.hoverInfoFormat=ko.observable("{0} {1}{2}");this.selectedInfoFormat=ko.observable("{0}/{1}{2}");this.disableSelectOnClick=ko.observable(!1);this.ariaLabel=ko.observable(null);this.ariaDesc=ko.observable(null);this.showLegend=ko.observable(!0);this.size=ko.observable(2);this._msPortalFxRerenderTrigger=ko.observable(0);this.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(t)}return t.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},t})();t.ViewModel=i})(i=t.Donut||(t.Donut={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=n.ViewModels.Controls.Documents.Editor,r=(function(n){function t(t){var r=n.call(this,t,i.ContentType.Text,null)||this;return r.size=ko.observable(2),r}return __extends(t,n),t})(i.ViewModel);t.ViewModel=r})(i=t.Editor||(t.Editor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=ko.utils.wrap,u="string",r=(function(){function n(n,t){this.text=i(n);typeof t===u||ko.isObservable(t)&&typeof t()===u?this.uri=i(t):this.bladeSelection=i(t)}return n})(),f;t.Link=r;f=(function(){function t(t){this.sections=ko.observableArray();this.bladeLinks=ko.observableArray();this.selection=new n.ViewModels.SelectableSet(this.bladeLinks,function(n,t){return n.bladeSelection().detailBlade===t.detailBlade},function(n){return n.bladeSelection()},t&&t.content&&t.content.selection)}return t.prototype.dispose=function(){this.selection.dispose()},t.prototype.addSection=function(n,t,u,f){var o=this,e;e=Array.isArray(u)?new r("",undefined):new r("",u);this.sections.push({title:i(n),description:i(t),selection:e,links:Array.isArray(u)?u:null,icon:f});(Array.isArray(u)?u:[e]).forEach((function(n){n.bladeSelection&&o.bladeLinks.push(n)}))},t})();t.ViewModel=f})(i=t.InfoList||(t.InfoList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function u(n){return typeof n=="object"}var f=n,k=f.Base,e=f.ViewModels,h=e.equalDynamicSelections,o=e.SelectableSet,i=ko.utils.wrap,c="_msPortalFxPropertiesPartSelectionKey",d=f.Resources.Strings.Part.PropertiesPart,g=new k.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.PropertiesPart"),nt=(function(){function t(n){this._openBladeProperties=null;this._openBladeAsyncProperties=null;this._moveResourceProperties=null;this.properties=ko.observableArray();this._openBladeProperties=ko.observableArray();this.selection=new o(this._openBladeProperties,function(n,t){return h(n.bladeSelection(),t)},function(n){return n.bladeSelection()},n&&n.content&&n.content.selection);this._moveResourceProperties=ko.observableArray();this.moveResourceSelection=new o(this._moveResourceProperties,function(n,t){var i=ko.unwrap(n.editBlade.bladeSelection);return h(i,t)},function(n){return ko.unwrap(n.editBlade.bladeSelection)},n&&n.content&&n.content.moveResourceSelection);var t=function(n){return n.label},i=function(n,i){n[c]=t(i)},r=function(n){return n[c]};this._openBladeAsyncProperties=ko.observableArray();this.asyncSelection=new o(this._openBladeAsyncProperties,function(n,i){return r(i)===t(n)},function(){return null},n&&n.content&&n.content.asyncSelection);FxImpl.ViewModels.SelectableSet.setCreateDelayedBladeSelection(this.asyncSelection,(function(n){return{bladeWidth:1,selectedValuePromise:n.resolveBlade().then((function(t){return i(t,n),t}))}}))}return t.prototype.setProperties=function(n){var t=[],r=[],i=[];n.forEach((function(n){switch(n.getType()){case 7:n.bladeLinks().forEach((function(n){t.push(n)}));break;case 8:r.push(n);n.editBlade&&n.editBlade.editType===1&&i.push(n);break;default:n.bladeSelection&&t.push(n);n.editBlade&&n.editBlade.editType===1&&i.push(n)}}));this.properties(n);this._openBladeProperties(t);this._openBladeAsyncProperties(r);this._moveResourceProperties(i)},t.prototype.removeAllProperties=function(){this._openBladeAsyncProperties([]);this._moveResourceProperties([]);n.disposeDisposable(this.properties());this.properties([]);this._openBladeProperties([])},t.prototype.dispose=function(){this.removeAllProperties();this.selection.dispose();this.moveResourceSelection.dispose()},t})(),r,l,a,v,y,s,p,w,b;t.ViewModel=nt;r=(function(){function n(n){var e=this,t,u,f,r;this.displayValue=ko.observable("");this.editBladeText=d.changeLabel;this.label=n.label;this.value=i(n.value);t=n.blade;u=t&&t.displayValue;this.displayValue=u?i(u):i(n.displayValue);this.copyableValue=i(n.copyableValue);this.visible=i(n.visible===undefined?!0:n.visible);this.wrappable=i(n.wrappable===undefined?!1:n.wrappable);f=t&&t.bladeSelection;this.bladeSelection=f?i(f):null;this.infoBalloon=n.infoBalloon;this.editBlade=n.editBlade;r=n.isLoading;this.isLoading=ko.pureComputed((function(){return r&&r()}));this._supportsIsLoading=!!r;this.type=this.getType();var o=this._lifetimeManager=new FxImpl.TriggerableLifetimeManager,s=this.hasValidBladeSelection=ko.computed(o,(function(){var n=e.bladeSelection;return!!(n&&n())||e.type===8})),h=s();s.subscribe(o,(function(n){h&&!n&&g.error("A property's bladeSelection should never be updated from a non-null/non-empty value to a null/empty value.");h=n}))}return Object.defineProperty(n.prototype,"lifetimeManager",{get:function(){return this._lifetimeManager},enumerable:!1,configurable:!0}),n.prototype.getType=function(){throw new Error("Subclass needs to provide the property type.");},n.prototype.dispose=function(){this._lifetimeManager.dispose()},n})();t.Property=r;l=(function(n){function t(t,r){var e=this,f;return f=u(t)?t:{label:t,value:r},f.copyableValue=f.value,e=n.call(this,f)||this,e.icon=i(f.icon),e}return __extends(t,n),t.prototype.getType=function(){return 0},t})(r);t.TextProperty=l;a=(function(t){function i(i,r,f){var o=this,e;return u(i)?(e=i,e.displayValue||(e.displayValue=e.value)):e={label:i,value:r,displayValue:f?f:r,target:"_blank"},o=t.call(this,e)||this,o.target=e&&e.target||"_blank",o.copyableValue=ko.pureComputed((function(){var t=ko.unwrap(o.displayValue),i=ko.unwrap(o.value);return n.isNullOrWhiteSpace(t)?i:i&&t.toLowerCase()===i.toLowerCase()?t:t+" <"+i+">"})),o}return __extends(i,t),i.prototype.getType=function(){return 1},i})(r);t.LinkProperty=a;v=(function(n){function t(t,i,r){var f=this,o,h=new FxImpl.TriggerableLifetimeManager,s;return o=u(i)?i:{label:i,value:r},s=new e.Controls.Forms.CopyableLabel.ViewModel(h),s.readOnly(!0),o.copyableValue=o.value,f=n.call(this,o)||this,ko.computed(h,(function(){var n=ko.unwrap(o.value);s.value(n)})),f.value=s,f.lifetimeManager.registerForDispose(h),t.registerForDispose(f),f}return __extends(t,n),t.prototype.getType=function(){return 2},t})(r);t.CopyFieldProperty=v;y=(function(n){function t(t,r,f,e){var o=this,s;return s=u(t)?t:{label:t,displayValue:r,callback:f,icon:e},s.copyableValue=s.displayValue,o=n.call(this,s)||this,o.callback=s.callback,o.icon=i(s.icon),o.callbackWrapper=function(){return o.callback(),!1},o}return __extends(t,n),t.prototype.getType=function(){return 3},t})(r);t.CallbackProperty=y;s=(function(t){function r(r,f,e){var s=this,o,h;return o=u(r)?r:{label:r,displayValue:f,bladeSelection:e},h=n.extend2({blade:{displayValue:o.displayValue,bladeSelection:o.bladeSelection}},o),s=t.call(this,h)||this,s.copyableValue=i(o.displayValue),s}return __extends(r,t),r.prototype.getType=function(){return 4},r})(r);t.OpenBladeProperty=s;p=(function(n){function t(t,i,r){var f=this,e,o,h;return e=u(i)?i:{label:i,bladeLinks:r},f=n.call(this,e)||this,o=f.lifetimeManager,f.bladeLinks=ko.observableArray(),h=e.bladeLinks.map(o,(function(n,t){return new s({label:"",displayValue:t.displayValue,bladeSelection:t.bladeSelection})})),h.subscribeAndRun(o,f.bladeLinks),t.registerForDispose(f),f}return __extends(t,n),t.prototype.getType=function(){return 7},t})(r);t.MultiOpenBladeProperty=p;w=(function(n){function t(t,i){var r=this,f;return f=u(t)?t:{label:t,links:i},r=n.call(this,f)||this,r.links=f.links,r}return __extends(t,n),t.prototype.getType=function(){return 5},t})(r);t.MultiLinksProperty=w;b=(function(n){function t(t,r){var f=this,e;return e=u(t)?t:{label:t,icon:r},f=n.call(this,e)||this,f.icon=i(e.icon),f}return __extends(t,n),t.prototype.getType=function(){return 6},t})(r);t.ImageProperty=b})(i=t.Properties||(t.Properties={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=MsPortalFx.ViewModels.Parts.Properties,i=ko.utils.wrap,r=(function(n){function t(t){var r=this,u=MsPortalFx.extend2({blade:{displayValue:t.displayValue,resolveBlade:t.resolveBlade}},t);return r=n.call(this,u)||this,r.resolveBlade=t.resolveBlade,r.copyableValue=i(t.displayValue),r}return __extends(t,n),t.prototype.getType=function(){return 8},t})(t.Property);n.OpenBladeAsyncProperty=r})(t=n.Properties||(n.Properties={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i=MsPortalFx.Base.Images,r=MsPortalFx.Resources.Strings.Part.Provisioning.description,u=(function(n){function t(t,u,f){var e=n.call(this,t,u,f!==!1,!0)||this;return e._partContainer=null,e.title=ko.observable(""),e.description=ko.observable(r),e.icon=ko.observable(i.Polychromatic.DefaultBlade()),e.errorMessage=ko.observable(),e._partContainer=t,e.icon=ko.observable(i.Gear()),e}return __extends(t,n),t.prototype.onInputsSet=function(t){return n.prototype.onInputsSet.call(this,t)},t.prototype.mutate=function(n){this._partContainer.mutate({containerModel:n})},t})(n.ViewModels.ParameterCollection.BaseGalleryButtonPartViewModel);t.ContentViewModel=u})(i=t.ProvisioningPart||(t.ProvisioningPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){n.ContentViewModel=FxImpl.ViewModels.ProvisioningPart.ContentViewModel})(t=n.ProvisioningPart||(n.ProvisioningPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=(function(t){function i(){var i=t.call(this)||this;return i.backgroundColor=n.Parts.PartColor.Theme,i.title(n.Resources.Strings.Part.Quickstart.title),i.icon(n.Base.Images.AzureQuickstart()),i}return __extends(i,t),i})(t.ButtonPart);t.QuickStartPart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t,i;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground";n[n.TotalValue=3]="TotalValue"})(t||(t={}));i=(function(){function n(){this.instance=ko.observable(0);this.total=ko.observable(0);this.instanceQuota=ko.observable(100);this.totalQuota=ko.observable(100);this.unit=ko.observable("");this.hideTotal=ko.observable(!1);this.hideQuota=ko.observable(!1);this.hideTick=ko.observable(!1);this.maximum=ko.observable(100);this.startOffset=ko.observable(-90);this.totalArc=ko.observable(355);this.captionDisplayFormat=ko.observable("{2}");this.valueDisplayFormat=ko.observable("{0}");this.metrics=ko.observableArray();this.size=ko.observable(2)}return n})();n.MetricColorBarKind=t;n.ViewModel=i})(t=n.QuotaGauge||(n.QuotaGauge={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function r(n,t,i,r){return{key:n,extension:t,name:i,name2:r}}function lt(n){return ii.test(n)}function ci(n){return ri.test(n)}function li(n){return si.test(n)}function ai(n){return hi.test(n)}function vi(n){var t=ei.exec(n);if(t){for(var i=void 0,u=t[1],f=t[2],r=[];i=oi.exec(f);){if(!i)throw new Error("Invalid resource ID");r.push(i[1])}return ct(u,ct.apply(void 0,r))}throw new Error("Invalid resource ID");}function yi(n){var t=fi.exec(n);if(t)return{resourceGroup:t[2],resourceGroupId:"/subscriptions/"+t[1]+"/resourceGroups/"+t[2]};throw new Error("Invalid ID");}function pi(n){var t=ui.exec(n);if(t)return{subscription:t[1],subscriptionId:"/subscription/"+t[1]};throw new Error("Invalid ID");}function w(n){return ht.some((function(t){return n.key===t.key}))}function bi(n){var i="<div data-bind='image: {0}' style='height: {1}px; width: {1}px; padding: {2};' alt=''/>",t=function(n,t,i){var r=s.Format.HtmlBindings,u={htmlBindingsTemplate:t};return{itemKey:n,template:t,format:r,formatOptions:u,filterableFormat:r,filterableFormatOptions:u,width:i?ko.observable(i):null}},r=[t("icon",i.format("value",15,0),"25px"),t("displayText","<div data-bind='text: value' class='msportalfx-text-small msportalfx-text-ellipsis'/>"),t("",i.format("MsPortalFx.Base.Images.Chevron()",14,"8px 0 9px 3px"),"30px"),];return n&&r.unshift(t("__placeholder__","","1px")),r}function b(t){n.isNullOrWhiteSpace(t.group())&&t.group(p.general)}function vt(n,t){var i=n[g];ko.reactor(t,(function(){var t=n.displayText()+" "+n.group()+" "+(n.keywords()||[]).join(" ");i(t)}))}var f=n,a=f.Base,wt=a.Constants,v=f.ViewModels,k=v.Selectable,s=v.Controls.Lists.Grid,y=s.Extensions,bt=a.Diagnostics.Telemetry,u=a.Images,kt=u.Polychromatic,e=f.isNullOrUndefined,h=ko.utils,dt=wt.ResourceTypes.ResourceGroups,gt=FxImpl.Azure,i=f.Resources.Strings.Part.SettingList,p=i.Group,o=i.Keywords,d=h.arrayFirst,ni=3,g="aggregatedKeywords",ti=n.isFeatureEnabled("linknewquesttosupportblade"),nt=r("__users","Microsoft_Azure_AD","UserAssignmentsBlade"),tt=r("__tags","HubsExtension","ResourceTagsBlade"),it=r("__locks","HubsExtension","LocksBlade"),rt=r("__exportTemplate","HubsExtension","ResourceGroupTemplateViewer"),ut=r("__troubleshoot","Microsoft_Azure_Support","TroubleshootBlade"),ft=r("__troubleshootV2","Microsoft_Azure_Support","TroubleshootV2Blade"),et=r("__supportRequest","Microsoft_Azure_Support",ti?"HelpAndSupportBlade":"NewSupportRequestBlade"),ot=r("__resourceHealth","Microsoft_Azure_Support","ResourceHealthDetailBlade"),st=r("__eventLogs","Microsoft_Azure_ActivityLog","ActivityLogBlade"),ht=[nt,tt,it,rt,ut,ft,et,ot,st],ii=/^\/subscriptions\/([^\/\s]+)$/i,ri=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)$/i,ui=/^\/subscriptions\/([^\/\s]+)/i,fi=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)/i,ei=/(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((:?\/[^\/]+\/[^\/]+)*)$/i,oi=/\/([^\/]+)\/([^\/]+)/ig,si=/^(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i,hi=/^(?:\/subscriptions\/[^\/\s]+(\/resourceGroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)+)$/i,ct=n.getJoinFunc("/"),c=n.isFeatureEnabled("hidesupport"),wi=n.isFeatureEnabled("hidehealthcheck"),at=(function(){function t(n,t,i,r,u){this.displayText=ko.observable("");this.icon=ko.observable();this.keywords=ko.observableArray();this.group=ko.observable(" ");this.aggregatedKeywords=ko.observable("");this._key=n;this._blade=h.wrap(t);this._bladeInputs=i;this._extension=h.wrap(r);this._options=u}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),t.prototype.getOptions=function(){return this._options},t.prototype.toSelection=function(){var n=this._options;return{key:this._key,detailBlade:this._blade.peek(),detailBladeInputs:this._bladeInputs.peek(),extension:this._extension.peek(),isParameterCollector:!!(n&&n.parameterCollector)}},__decorate([__metadata("fx:diagnostics",[require,"Setting"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[String,Object,Function,Object,Object])],t)})(),l,yt,pt;t.Setting=at;l=(function(){function t(t,r,u,f){var c=this,ut=this.resourceId=ko.observable(),l,nt,v,p,o,a,k;this.searchBoxPlaceholder=ko.observable(i.searchBoxPlaceholder);l=h.wrapArray(u);f=f||{};v=function(){c._updateSettings(t,l,f,nt);c._processSettings(t)};ut.subscribe(t,(function(t){p=(p||Q()).then((function(){var r=lt(t),i=Q();return r&&(i=n.Azure.getSubscriptionInfo(pi(t).subscription).then((function(n){nt=n}),(function(){}))),i.then(v)}))}));var tt=y.SelectableRow|y.Filterable,ft=this._searchText=ko.observable(""),it={selectableRow:{selectionMode:1,itemMatchesSelection:function(n,t){return n.key===t.key},createSelection:function(n){return n.toSelection()},activateOnSelected:ko.observable(!0),initialSelection:r&&r.content&&r.content.settingList&&r.content.settingList.selectableData},filterable:{searchableColumns:ko.observableArray([g]),searchBoxCloseButtonVisible:ko.observable(!1),searchBoxPlaceholder:this.searchBoxPlaceholder,queryString:ft}},rt=f&&!e(f.groupable)?f.groupable:!0;rt&&(tt|=y.Groupable,it.groupable={groupKey:ko.observable("group"),sortFunction:s.SortFunction.SettingListGroupOrder},l().forEach((function(n){b(n)})));o=new s.ViewModel(t,l,tt,it);this.settingList=o;o.columns=ko.observableArray(bi(rt));o.showHeader=!1;o.selectableData.activatedItems.subscribe(t,(function(n){if(n&&n.length>0){var t=n[0];c._trace(t)}}));a=o.items;k=[];a.subscribe(t,(function(n){k=n}),null,"beforeChange");a.subscribe(t,(function(n){(p||Q()).then((function(){var t=!e(d(k,w)),i=!e(d(n,w));t&&!i&&v()}))}));a.subscribeArrayChanges(t,(function(n){c._removeSetting(n)||(vt(n,t),b(n))}),null);this._processSettings(t)}return t.prototype.isPCv3=function(){return!1},t.prototype._updateSettings=function(t,r,s,h){var k=r().slice(),l=this.resourceId();if(f.remove(k,w),!e(l)){var vt=li(l),b=lt(l),d=ci(l),g=ai(l),y=b||d||g&&!vt,wt=d?l:g?yi(l).resourceGroupId:null,ht=d?dt:g?vi(l):null,yt=ht&&ht.toLowerCase().startsWith("microsoft.classic"),bt=ko.observable({scope:l}),ct=ko.observable({resourceId:l}),pt=ko.observable({assetId:l}),v=!e(s),ti=b&&h&&gt.isZeroCapSubscription(h),a=function(n,t,i,r,u,f,e,o){var s=new at(n.key,n.name,f,n.extension,o);return s.displayText(r),s.icon(i),s.group(t?p.support:p.resourceManagement),s.keywords([u]),k[e?"unshift":"push"](s),s};!this.isPCv3()||c||v&&s.enableSupportHelpRequest===!1||a(et,!0,u.Support(),i.helpRequest,o.helpRequest,pt,!1,{parameterCollector:{supplyInitialData:n.wrap(""),receiveResult:n.wrap({}),supplyProviderConfig:n.wrap({provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}})}});!c&&!wi&&v&&s.enableSupportResourceHealth&&a(ot,!0,u.HeartPulse(),i.resourceHealth,o.resourceHealth,ct,!0);y&&(!v||s.enableSupportEventLogs!==!1)&&a(st,!0,kt.Log(),i.eventLogs,o.eventLogs,ko.observable({queryInputs:{id:l}}),!0);y&&!yt&&v&&s.enableTags&&a(tt,!1,u.Polychromatic.Tags(),i.tags,"",ct,!1);y&&!ti&&a(it,!1,u.Lock(),b?i.locksForSubscriptions:i.locks,"",ct,!1);(y||vt)&&(!v||s.enableRbac!==!1)&&a(nt,!1,u.PersonWithFriend({palette:ni}),i.users,i.access,bt,!1);!y||yt||b||s.enableExportTemplate===!1||a(rt,!1,u.Polychromatic.Download(),i.exportTemplate,o.exportTemplate,ko.observable({options:{resourceGroup:wt,telemetryId:ht}}),!1);!c&&v&&(s.enableSupportTroubleshoot||s.enableSupportTroubleshootV2)&&a(s.enableSupportTroubleshootV2?ft:ut,!0,u.Tools(),i.troubleshoot,o.troubleshoot,pt,!0);r(k)}},t.prototype._processSettings=function(n){var t=this;this.settingList.items().slice().forEach((function(i){t._removeSetting(i)||(vt(i,n),b(i))}))},t.prototype._removeSetting=function(n){var f=this,t=n.toSelection(),i=t.extension,r=t.detailBlade,e=t.key,u=!1;return ht.forEach((function(t){var o=f.settingList.items,s=o().some((function(n){return n.key===t.key}));(c&&i==="Microsoft_Azure_Support"||i===t.extension&&(r===t.name||r===t.name2)&&e!==t.key&&s)&&(o.remove(n),u=!0)})),u},t.prototype._trace=function(t){var i={extension:t.extension,detailBlade:t.detailBlade},r=this._searchText.peek();n.isNullOrWhiteSpace(r)||(i.searchText=r);bt.trace({source:"MsPortalFx.ViewModels.Parts.SettingList",action:"OpenSetting",name:t.key,data:i})},t})();t.BaseViewModel=l;yt=(function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return __extends(t,n),t})(l);t.ViewModel=yt;pt=(function(t){function i(n,i,r,u){var f=t.call(this,n,i,r,u)||this,o=f.selectable=new k,s=f.pcSelectable=new k,e;return f.settingList.selectableData.selectedItems.subscribe(n,(function(n){var r=f.pcSelectable,u=f.selectable,t,i;n.length<1?(u.isSelected(!1),r.isSelected(!1)):(t=n[0],i=t.isParameterCollector?r:u,i.selectedValue(t),i.isSelected(!0))})),e=function(){var n=f.settingList.selectableData;n.selectedItems([]);n.activatedItems([])},o.isSelected.subscribe(n,(function(n){n||e()})),s.isSelected.subscribe(n,(function(n){n||e()})),f._initParameterCollector(n),f}return __extends(i,t),i.prototype.isPCv3=function(){return!0},i.prototype._initParameterCollector=function(t){var i=this,r=function(t){var r=t.selectedValue.peek();return n.find(i.settingList.items.peek(),(function(n){return n.key===r.key}))},u={selectable:this.pcSelectable,supplyInitialData:function(){var n=r(i.pcSelectable);return n.getOptions().parameterCollector.supplyInitialData()},receiveResult:function(n){var t=r(i.pcSelectable);t.getOptions().parameterCollector.receiveResult(n)},supplyProviderConfig:function(){var t=r(i.pcSelectable),n=t.getOptions().parameterCollector;return n.supplyProviderConfig?n.supplyProviderConfig():null}};this.parameterCollector=new v.ParameterCollector(t,u)},i})(l);t.ViewModelV2=pt})(i=t.SettingList||(t.SettingList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i=MsPortalFx.ViewModels.ParameterCollection.Internal,r=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.SetupPart"),u=MsPortalFx.Services.Gallery.Constants.GalleryOptionsKey,f=(function(n){function t(t,r){var u=n.call(this,t,r,!1)||this;return u._setupPartContainer=null,u._previousCommit=null,u._outputs=null,u._setupPartContainer=t,u.provisioningEntity={enableProvisioning:ko.observable(!0),privatePcPrBI:new i.ProvisioningEntityBindingInternals},u}return __extends(t,n),t.prototype.onInputsSet=function(t){return this._loadContent(),n.prototype.onInputsSet.call(this,t)},t.prototype.mutateOnLoad=function(){return null},t.prototype.mutate=function(n,t){this._setupPartContainer.mutate({partName:n,extensionName:t})},t.prototype.onProviderCommit=function(n,t){return this._outputs=t,Q(!0)},t.prototype._loadContent=function(){var i=this,n=this._setupPartContainer,u=this.mutateOnLoad(),t=function(){i._commit.subscribe(n,(function(n){i._executeProvisioningIfApplicable(n)}))};u?u.then((function(i){i?typeof i=="string"?n.mutate({partName:i}):n.mutate(i):t()}),(function(){r.error("mutateOnLoad() returned a failed promise");t()})):t()},t.prototype._executeProvisioningIfApplicable=function(n){var h=this,f,t;if(this._outputs&&(f=this._previousCommit,this._previousCommit=n,!MsPortalFx.deepEquals(f,n)&&MsPortalFx.ViewModels.ActionBars.Base.isCompleted(this.stepOutput()))){t=this._setupPartContainer;t.selectable.isSelected(!1);t.contentState(0);var c=new i.Provisioner(this.provisioningEntity),l=this._outputs,e=this.privateFcTpBI.inputs().options,o=c.executeProvisioning(l,e);t.operations.add(o,{blockUi:!0});var a=e[u].uiDefinition,s=a.markup.reference,v=s.partName,y=s.partExtension;o.then((function(){t.mutate({partName:v,extensionName:y})}),(function(){r.error("executeProvisioning callback failed.");t.contentState(3);h.beginExecuteCommand(!1)}))}},t})(n.ViewModels.ProvisioningPart.ContentViewModel);t.Content=f})(i=t.SetupPart||(t.SetupPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){n.Content=FxImpl.ViewModels.SetupPart.Content})(t=n.SetupPart||(n.SetupPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function u(){return{size:ko.observable(5),editButtonText:n.Resources.Strings.Part.Chart.editButtonText}}var i=n.ViewModels.Controls.Visualization.SimpleChart,r=i.ViewModel,f=(function(t){function i(n,i){var r=this,f=$.extend(u(),i);return r=t.call(this,n,f)||this,r._initSimpleChartPartOptions(f),r}return __extends(i,t),i.prototype._initSimpleChartPartOptions=function(t){var i=this,r=t;n.shallowCopyFromObject(i,r,["size","editButtonSelectable","editButtonText"])},i})(r);t.SimpleChartPart=f})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t,i;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground"})(t||(t={}));i=(function(){function n(){this.maximum=ko.observable(100);this.current=ko.observable(0);this.unit=ko.observable("");this.metrics=ko.observableArray();this.size=ko.observable(2)}return n})();n.MetricColorBarKind=t;n.ViewModel=i})(t=n.SingleValueGauge||(n.SingleValueGauge={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var e=n.Data,i=FxImpl.fromSerializableObject,r=FxImpl.isSerializedObject,u="",o={bothCallbacks:u,alreadySubscribed:u},f=FxImpl.getErrorMap(o),s=(function(){function u(n,t){this.defaultActionBarInput=ko.observable({isLastStep:!0,allowToggleProvisioningLocation:!0,status:null});this._configFromCollector=ko.observable();this._hasSentResult=!1;this._getResultSubscribers=[];!t.mapIncomingDataForEditScope==!t.mapIncomingDataForEditScopeAsync&&f.bothCallbacks();this._options=t;this._prepareEditScopeWithInitialData(n);this._setUpActionBarWatcher(n)}return Object.defineProperty(u.prototype,"editScope",{get:function(){return this._editScopeView.editScope},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"configFromCollector",{get:function(){return this._configFromCollector},enumerable:!1,configurable:!0}),u.prototype.getResultsBeforeCommit=function(n){var t=this._getResultSubscribers.some((function(t){return t===n}));t&&f.alreadySubscribed();this._getResultSubscribers.push(n)},u.prototype.getResults=function(){var n=this._editScopeView.editScope&&this._editScopeView.editScope(),t;return n&&(t=this._options.mapOutgoingDataForCollector(n.root)),t},u.prototype._prepareEditScopeWithInitialData=function(n){var u=this,o,s,h,f;this.bladeCallable=new t.Internal.BladeCallable(n,{receiveParams:function(n){var t=n.initialData,f=n.providerConfig;r(t)&&(t=i(t));r(f)&&(f=i(f));u._configFromCollector(f);u._options.mapIncomingDataForEditScope?(s=u._options.mapIncomingDataForEditScope(t),o=Q({})):o=u._options.mapIncomingDataForEditScopeAsync(t).then((function(n){s=n}))}});h=this._editScopeCache=e.EditScopeCache.createNew({entityTypeName:this._options.editScopeMetadataType,supplyNewData:function(){return s}});n.registerForDispose(h);this._editScopeView=h.createView(n);n.onInputsSetCallbacks.add((function(t){if(t.editScopeId&&t.editScopeId!==u._editScopeId){u._editScopeId=t.editScopeId;f=o.then((function(){return u._editScopeView.fetchForNewData(u._editScopeId)}));var i=n;typeof i.revealContent=="function"&&(f=f.then((function(){i.revealContent()})))}return f}))},u.prototype._setUpActionBarWatcher=function(n){var t=this,i=function(n){n&&n.status===3&&(t._hasSentResult||(t._hasSentResult=!0,t._discardEditScopeAndSendResult({actionBarOutput:n})))};n.onInputsSetCallbacks.add((function(n){i(n.internal_parameterProviderActionBarOutput);return}));ko.reactor(n,(function(){if(ko.isObservable(n._actionBar)){var t=n._actionBar();t&&i(t.output())}}))},u.prototype._discardEditScopeAndSendResult=function(n){var t=this._editScopeView,i=t.editScope&&t.editScope(),r,u,f;i&&(r=this._options.commitResult,r&&r(i.root),u=this._options.mapOutgoingDataForCollector(i.root,n),this.bladeCallable.sendResult({resultData:FxImpl.toSerializableObject(u)}),this._getResultSubscribers.forEach((function(n){n.receiveResult(u)})),f=this._editScopeCache,f.disposeAndDiscardEdits(this._editScopeId,t))},__decorate([__metadata("fx:diagnostics",[require,"ParameterProvider"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.ContainerContract,Object])],u)})();t.ParameterProvider=s})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t="",r={missingSelectable:t,bothSelectables:t,fieldAccessorAndCallbacks:t,missingCallbacks:t},i=FxImpl.getErrorMap(r),u=(function(){function t(t,r){var u=r.selectable,f=r.selectableSet?null:u||t.selectable;f||r.selectableSet||i.missingSelectable();u&&r.selectableSet&&i.bothSelectables();r.formFieldValueAccessor?(r.receiveResult||r.supplyInitialData)&&i.fieldAccessorAndCallbacks():r.receiveResult||i.missingCallbacks();this.bladeCaller=new n.Internal.BladeCaller(t,{forceInvocation:r.fxInternalFI,invokeOnSelectable:f,invokeOnSelectableSet:r.selectableSet,supplyParams:function(n){var i=null,u;return r.supplyInitialData?i=r.supplyInitialData(n):r.formFieldValueAccessor&&(u=r.formFieldValueAccessor.getEditableObservable(t),i=u()),{initialData:FxImpl.toSerializableObject(i),providerConfig:r.supplyProviderConfig?r.supplyProviderConfig(n):null}},receiveResult:function(n,i){var u=FxImpl.fromSerializableObject(n.resultData),f;r.receiveResult?r.receiveResult(u,i):(f=r.formFieldValueAccessor.getEditableObservable(t),f(u))}})}return t})();n.ParameterCollector=u})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function e(i,r){return t.getProvisioningOperationEndPoint.acquireObject(r?r:u.client,f.Constants.Shell,i).then((function(t){var r=t&&t.value,u;if(r)return u=r.provisioningPromise,u?(u.finally((function(){t.dispose()})),Q(r)):(t.dispose(),n.QReject("The provisioning operation was invalid.",{data:{refkey:i}}))}))}var f=MsPortalFx.Base,u=n.Rpc,i=n.Constants.RpcMethods,r=u.ProxiedObjectTypeDefinition;t.initiateProvisioningRequestEndPoint=new r(i.initiateProvisioningRequest);t.getProvisioningRequestEndPoint=new r(i.getProvisioningRequest);t.getProvisioningOperationEndPoint=new r(i.getProvisioningOperation);t.getProvisioningOperation=e})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){function u(n){return typeof n=="function"}function p(n){n||r.optionsMissing();u(n.supplyProvisioningPromise)||r.supplyProvisioningPromiseMissing();u(n.supplyStartboardInfo)||r.supplyStartboardInfoMissing();var t=n.parameterProvider;(n.actionBar?t:!t)||r.providerAndActionBar()}var s=n.Base,c=FxImpl.ViewModels.ParameterCollectionV3,a=FxImpl.Rpc,v=s.Diagnostics.Telemetry,e=FxImpl.ProvisioningTelemetry,l=e.ActionModifier,h=e.ProvisioningStatus,f=undefined,i="",y={optionsMissing:i,supplyProvisioningPromiseMissing:i,supplyStartboardInfoMissing:i,providerAndActionBar:i,automaticProvisioning:i,invalidStarboardInfo:i,badStarboardInfo:i,requestAlreadyExists:i,refKeyDoesntMatch:i,provisionerIdMissing:i,provisionerNotFound:i,refKeyMissing:i,requestNotFound:i},r=FxImpl.getErrorMap(y),w=(function(){function t(i,r){var h=this,f,o,c,l,e,s;this.provisioningConfig=ko.observable();this.provisioningPromise=ko.observable();this.provisionOnStartboard=ko.observable(!1);this._isCustomProvisioning=!0;this._actionBarSupportsForceInProgressStatus=!1;this._actionBarSupportsIsProvisioningBlade=!1;this._actionBarSupportsProvisionOnStartboardPart=!1;this._actionBarSupportsSecondaryLinkDisplayText=!1;this._actionBarSupportsSecondaryLinkValidation=!1;this._actionBarSupportsShowActionBar=!1;this._validationEvents=[];p(r);Object.defineProperty(this,"_launchingContext",{get:ko.computed(i,(function(){var n=h.provisioningConfig(),t=n&&n.galleryCreateOptions;return t&&t.launchingContext||{}}))});this._options=r;f=this._actionBar=r&&r.actionBar;o=!1;f&&(o=this._actionBarSupportsIsProvisioningBlade=u(f.isProvisioningBlade),this._actionBarSupportsForceInProgressStatus=u(f.forceInProgressStatus),this._actionBarSupportsProvisionOnStartboardPart=u(f.provisionOnStartboardPart),this._actionBarSupportsSecondaryLinkDisplayText=u(f.secondaryLinkDisplayText),this._actionBarSupportsSecondaryLinkValidation=u(f.secondaryLinkTriggerValidation),this._actionBarSupportsShowActionBar=u(f.showActionBar));c=this._provisionerId=n.getUniqueId();t.provisionersList[c]=this;l=v.Context.getPartContext();e=r.parameterProvider;e&&(e.getResultsBeforeCommit(this),s=function(t){var i=t&&t.provisioningConfig,u,r;i&&(i=n.clone(i,!0),u=i.galleryCreateOptions,r=u&&u.launchingContext,r&&(r.extVersion=n.getEnvironmentValue("version"),r.bladeInstanceId=l.bladeInstanceId),h.provisioningConfig(i),o&&f.isProvisioningBlade(t.provisioningConfig.provisioningEnabled))},s(e.configFromCollector()),e.configFromCollector.subscribe(i,s));t._registerRpcCallbacks()}return Object.defineProperty(t.prototype,"_telemetryId",{get:function(){var n=this._launchingContext;return n&&n.telemetryId},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._validationEvents.length&&e.traceDeployment(n.extend2(this._createEventBase(),{validationEvents:this._validationEvents}));delete t.provisionersList[this._provisionerId]},t.prototype.startProvisioning=function(n){this._actionBar&&r.automaticProvisioning();var t=this._options.supplyStartboardInfo(n);return t&&!o.isValid(t)&&r.invalidStarboardInfo(),this.provisionOnStartboard(!!t),this._initiateProvisioningRequest(n,t)},t.prototype._traceValidation=function(n){var t={source:f,action:n};this._validationEvents.push(t)},t.prototype.receiveResult=function(n){var t=this.provisioningConfig()||{};t.provisioningEnabled&&this._beginProvisioning(n)},t.prototype._beginProvisioning=function(n){var t,i=this._actionBarSupportsProvisionOnStartboardPart&&this._actionBar.provisionOnStartboardPart();return this.provisionOnStartboard(i),i&&(t=this._options.supplyStartboardInfo(n)||this.provisioningConfig().startboardProvisioningInfo,o.isValid(t)||r.badStarboardInfo()),console.log("_beginProvisioning"),console.log(n),this._initiateProvisioningRequest(n,t)},t.prototype._initiateProvisioningRequest=function(i,u){var l=this,h,e,o,a;return this._postProvisioningInputsDeferred=Q.defer(),h=this._launchingContext||{},h.telemetryId||(h.telemetryId=n.newGuid()),h.extVersion||(h.extVersion=n.getEnvironmentValue("version")),this._traceProvisioningStarted(this._createEventBase()),e=this._options.supplyProvisioningPromise(i),this.provisioningPromise(e),e?(e.then((function(n){l._traceProvisioningEnded(n,!0,l._createEventBase())}),(function(n){l._traceProvisioningEnded(n,!1,l._createEventBase())})),o=n.getUniqueId(),t.provisioningRequestsLookup[o]&&r.requestAlreadyExists(),a={provisioningConfig:n.extend({postProvisioningBladeInputs:this._postProvisioningInputsDeferred.promise},this.provisioningConfig()),provisioningRefKey:o,provisioningPromise:e,startboardInfo:u},t.provisioningRequestsLookup[o]=a,FxImpl.internalEnv.isShell?Q.spread([n.require("Fx/DependencyInjection"),n.require("MsPortalImpl/Services/Services.ShellProvisioner"),],(function(n,t){t.create(n.container).processProvisioningRequest(a)})):c.initiateProvisioningRequestEndPoint.acquireObject(t.rpcClient,s.Constants.Shell,{provisionerId:this._provisionerId,provisioningRefKey:o}).then((function(n){n.value.provisioningRefKey!==o&&r.refKeyDoesntMatch();n.dispose()}))):this._traceProvisioningEnded(f,f,this._createEventBase()),e},t._registerRpcCallbacks=function(){t._rpcRegistered||(c.getProvisioningRequestEndPoint.registerObjectFactory(t.rpcClient,{allowedOrigin:[s.Constants.Shell],allowRemoteChanges:!0,handler:function(n){var i=n.provisionerId,u;if(i||r.provisionerIdMissing(),u=t.provisionersList[i],u)return Q(u.getProvisioningRequest(n.provisioningRefKey));r.provisionerNotFound(i)}}),t._rpcRegistered=!0)},t.prototype.getProvisioningRequest=function(n){var i,u;return n||r.refKeyMissing(),i=t.provisioningRequestsLookup[n],i||r.requestNotFound(n),u=i.provisioningPromise,u&&u.finally((function(){delete t.provisioningRequestsLookup[n]})),i},t.prototype._createEventBase=function(){var n=this._launchingContext,t={source:f,action:f,name:n&&n.galleryItemId,data:{isCustomProvisioning:this._isCustomProvisioning,provisionOnStartboard:this.provisionOnStartboard()}};return n&&(t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(t){return this._validationEvents.length&&(t.data=n.extend2(t.data,{validationEvents:this._validationEvents}),this._validationEvents=[]),e.traceProvisioningStarted(t)},t.prototype._traceProvisioningEnded=function(n,t,i){var r=i||{};return r.actionModifier||(r.actionModifier=t===f||t?l.Succeeded:l.Failed),r.data||(r.data={}),r.data.provisioningStatus||(r.data.provisioningStatus=t===f?h.NoPromise:t?h.Resolved:h.UnknownFailure),e.traceProvisioningEnded(r)},t.rpcClient=a.client,t.provisioningRequestsLookup={},t.provisionersList={},t._rpcRegistered=!1,t})(),o;t.Provisioner=w;o=(function(){function n(){}return n.isValid=function(n){n=n||{};var t=n.provisioningPart||{},i=n.startboardPart||{};return!!t.name&&!!t.extension&&!!i.name&&!!i.extension&&!!n.startboardPartKeyId},n})();t.StartboardInfo=o})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){n.pollingInterval=2e3;n.pollingRetries=10})(t=n.ParameterCollectionV3||(n.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(i){function f(n){return typeof n=="function"}function e(n,t){return t===void 0&&(t=r.pollingRetries),r.getProvisioningOperation(n).catch((function(i){return--t?Q.delay(r.pollingInterval).then((function(){return e(n,t)})):Q.reject(i)}))}var r=FxImpl.ViewModels.ParameterCollectionV3,o=new n.Base.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),u=n.clone,s=(function(i){function r(r,u){var e=i.call(this)||this,s,h,o;return e.description=ko.observable(""),e.errorMessage=ko.observable(),e.icon=ko.observable(n.Base.Images.Polychromatic.DefaultBlade()),e.initialData=ko.observable(),e.updatedData=ko.observable(),e.provisioningPromise=ko.observable(),e.provisioningStarted=ko.observable(!1),e.statusUnknown=ko.observable(!1),e.title=ko.observable(""),e._shouldBlockUiWhenProvisioning=!0,e._provisioningConfig=ko.observable(),e._delayPromise=Q.delay(2e3),s=u&&u.container||{},h=s.selectable&&s.selectable.selectedValue||!0,r.selectable=t.Part.createSelectableViewModel(u,h),e._partContainer=r,e.icon=ko.observable(n.Base.Images.Gear()),o=u&&u.content||{},e.initialData(o.initialData),e.updatedData(o.updatedData),e.statusUnknown(o.statusUnknown),e.errorMessage(o.errorMessage),e.provisioningPromise.subscribe(r,(function(n){if(n)if(e._shouldBlockUiWhenProvisioning&&r.operations.add(n,{blockUi:!0}),f(e.onProvisioningPromiseAcquired))e.onProvisioningPromiseAcquired(n);else n.then((function(n){e.mutateIntoStartboardPart(n)}),(function(n){if(f(e.onProvisioningPromiseError))e.onProvisioningPromiseError(n);else e.errorMessage(n)}))})),e}return __extends(r,i),Object.defineProperty(r.prototype,"provisioningConfig",{get:function(){if(!this._provisioningConfig()){var n=this.initialData();this._provisioningConfig(u(n&&n.provisioningConfig))}return this._provisioningConfig()},set:function(n){this._provisioningConfig(u(n))},enumerable:!1,configurable:!0}),r.prototype.onInputsSet=function(n){n&&n.initialData&&(this.initialData(n.initialData),this.provisioningPromise()||this.errorMessage()||this.statusUnknown()||(this.provisioningStarted(!0),this._fetchProvisioningPromise()));return},r.prototype.mutateIntoStartboardPart=function(n){var u=this,t=this.initialData(),i,r;if(!t||!t.startboardPart){this.errorMessage("Could not mutate into target part");throw new Error("Initial data was not persisted correctly to the part's viewstate. Make sure the 'initialData' property is added to your Part.ViewStateProperties in your PDL.");}i=t.startboardPart;r={partName:i.name,extensionName:i.extension,containerModel:n};this._delayPromise.then((function(){u._partContainer.mutate(r)}))},r.prototype._fetchProvisioningPromise=function(){var n=this,t=this.initialData().provisioningRefKey;t&&e(t).then((function(t){var i=t.provisioningPromise;if(i)n.updatedData(t.data),n.provisioningPromise(i);else throw new Error("Provisioning operation missing promise");})).catch((function(t){n.statusUnknown(!0);o.warning(t)}))},__decorate([__metadata("fx:diagnostics",[require,"ProvisioningPart"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.PartContainerContract,Object])],r)})(t.ButtonPart);i.ProvisioningPart=s})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var r;(function(i){function f(n){return typeof n=="function"}var e=n.Base,u=n.ViewModels,s=e.Diagnostics,r=u.Controls.Lists.Grid,o=s.Log.writeEntry,h=(function(i){function s(n,t,r){var e=i.call(this,n)||this,o,s;if(e.showSelectButton=ko.observable(!1),e.triggerSelectAction=ko.observable(""),e.showInfoBox=ko.observable(!1),e._basicTemplate="<div style='height: 40px; margin-top: 10px'><!-- ko if: settings.item.icon --><div style='width: 30px; height: 30px; float: left; margin-right: 10px;' data-bind='image: settings.item.icon'><\/div><!-- /ko --><div><div><div data-bind='text: value()' class='msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow'><\/div><\/div><div><!-- ko if: settings.item.subtitle --><div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' data-bind='text: settings.item.subtitle' style='max-width: 60%; float: left'><\/div><!-- /ko --><!-- ko if: settings.item.detail --><div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' style='max-width: 20%; float: right' data-bind='text: settings.item.detail'><\/div><!-- /ko --><\/div><\/div><\/div>",!r.dataNavigator==!r.items)throw new Error("For PickerBase options, specify dataNavigator or items (not both).");return e.showSelectButton(r.allowMultiSelect||!1),o=r.createNewOptions,e.showCreateAction=ko.observable(o&&!!o.title&&!!o.dynamicBladeSelection),e._buildAddNewGrid(n,o),e._buildPickerGrid(n,r),e.pickerGrid.selectableData.selectedItems.subscribe(n,(function(n){var t=e.showSelectButton(),i,u,f;n&&n.length>0?(e.addNewGrid&&e.addNewGrid.selectableData&&e.addNewGrid.selectableData.selectedItems&&e.addNewGrid.selectableData.selectedItems([]),i=void 0,t||(u=n[0],i=e.dataModel&&!r.isItemInDataModel(u,e.dataModel())),(i||t)&&(f=r.mapItemsToDataModel(n),e._saveToEditScope(f))):t&&e._saveToEditScope(null)})),e.pickerGrid.items.subscribeArrayAdds(n,(function(n){n.disabled&&n.disabled()?e._disableGridItem(n):e.dataModel&&r.isItemInDataModel(n,e.dataModel())&&e._selectGridItem(n)})),e.parameterProvider=new u.ParameterProvider(n,{mapIncomingDataForEditScope:function(n){return{pickedItems:ko.observable(r.mapIncomingDataToDataModel(n))}},mapOutgoingDataForCollector:function(n){return n.pickedItems()}}),e.addNewItemCollector=new u.ParameterCollector(n,{supplyInitialData:function(){return f(o.supplyInitialData)?o.supplyInitialData():{}},receiveResult:function(n){f(o.receiveResults)&&o.receiveResults(n);e.addNewGrid.selectableData.selectedItems([]);e._saveToEditScope(n)},supplyProviderConfig:function(){if(f(o.supplyProviderConfig))return o.supplyProviderConfig()},selectableSet:e.addNewGrid.selectableData}),e.addNewGrid.selectableData&&e.addNewGrid.selectableData.selectedItems&&e.addNewGrid.selectableData.selectedItems.subscribe(n,(function(n){n&&n.length>0&&e.pickerGrid.selectableData.selectedItems([])})),s=n.createChildLifetime(),ko.computed(s,(function(){if(e.parameterProvider.editScope()){var n=e.parameterProvider.configFromCollector();r.loadPickerItems(n||{},e.dataModel());s.dispose()}})).extend({throttle:50}),e}return __extends(s,i),s.prototype.openCreateNewBlade=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.selected(!0))},s.prototype.disableCreateNewOption=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.disabled(!0))},s.prototype._saveToEditScope=function(t){this.dataModel(t);this.showSelectButton()||this.triggerSelectAction(n.getUniqueId())},s.prototype._buildPickerGrid=function(t,i){var e=[{name:ko.observable(""),itemKey:"title",format:r.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},{itemKey:"infoBalloon",format:r.Format.HtmlBindings,width:ko.observable("35px"),formatOptions:{htmlBindingsTemplate:"<!-- ko if: value --><div data-bind='pcDockedBalloon:value'><\/div><!-- /ko -->"}},],f={selectionMode:i.allowMultiSelect?2:1},u;u=i.dataNavigator?this.pickerGrid=new r.ViewModel(t,null,r.Extensions.SelectableRow|r.Extensions.Pageable,{selectableRow:f,pageable:{type:r.PageableType.Sequential,dataNavigator:i.dataNavigator}}):this.pickerGrid=new r.ViewModel(t,i.items,r.Extensions.SelectableRow,{selectableRow:f});u.columns=ko.observableArray(e);u.showHeader=!1;u.noRowsMessage(n.Resources.Strings.ViewModels.Controls.noRowsMessage)},s.prototype._buildAddNewGrid=function(t,i){var u,f={activateOnSelected:ko.observable(!0),selectionMode:1},s=ko.observableArray(),o;!i||!i.title||!i.dynamicBladeSelection||(u=[{name:ko.observable(""),itemKey:"title",format:r.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},],s([{title:ko.observable(i.title),icon:ko.observable(e.Images.Add()),item:null},]),f=n.extend(f,{itemMatchesSelection:function(){return!0},createSelection:function(){return i.dynamicBladeSelection}}));o=this.addNewGrid=new r.ViewModel(t,s,r.Extensions.SelectableRow,{selectableRow:f});u&&(o.columns=ko.observableArray(u));o.showHeader=!1},Object.defineProperty(s.prototype,"dataModel",{get:function(){var n=this.parameterProvider.editScope();return n&&n.root&&n.root.pickedItems},enumerable:!1,configurable:!0}),s.prototype._selectGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?t.selected()||t.selected(!0):o(1,"Pickers","Metadata is null. Unable to set selected flag.")}},s.prototype._disableGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?(t.disabled(!0),t.selected()&&t.selected(!1)):o(1,"Pickers","Metadata is null. Unable to set disabled flag.")}},__decorate([__metadata("fx:diagnostics",[require,"PickerBase"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.PartContainerContract,Object,Object])],s)})(u.Controls.Loadable.ViewModel);i.PickerBase=h})(r=i.Pickers||(i.Pickers={}))})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i=n.Base,f=FxImpl.Rpc,e=n.Base.Diagnostics.Telemetry.trace,o=new i.Diagnostics.Log("MsPortalFx/Hubs/Notifications"),r="Only one of asset/blade/uri can be specified",s=["status","title","notificationId","description","descriptionAsHtml","percentComplete","asset","uri","linkedBlade","additionalProperties"],h=n.isFeatureEnabled("allowresourceidstolinks"),c=new RegExp('[/]{1}subscriptions[/]{1}[a-zA-Z0-9-_.]+[/]{1}resourcegroups[/]{1}[a-zA-Z0-9-_.()]+[/]{1}providers[/]{1}[a-zA-Z0-9.]+[/]{1}[a-zA-Z0-9-_.]+[/]{1}[^/s"]+',"gi"),l,u;(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(l=t.NotificationStatus||(t.NotificationStatus={}));u=(function(){function t(n){var f=this,u,i;if(n.asset&&n.linkedBlade)throw new Error(r);s.forEach((function(t){f[t]=n[t]}));u=t.generateClientNotificationId();this.notificationId||(this.notificationId=u);this.correlationIds=[u];i=n.correlationIds;i&&i.length&&Array.prototype.push.apply(this.correlationIds,i)}return t.prototype.validate=function(){if((this.title||"").trim()&&(this.description||"").trim())return!0;o.error("Missing title/description")},t.prototype.package=function(){return h&&(e({source:"NotificationHub",action:"ResourceIdLinkConversion",actionModifier:"NotificationApi",data:{descriptionAsHtml:this.descriptionAsHtml}}),this.descriptionAsHtml===undefined&&(this.description=t.transformResourceIdUrisToLinks(this.description),this.descriptionAsHtml=!0)),{timestamp:new Date,notificationId:this.notificationId,status:this.status,title:this.title,description:this.description,descriptionAsHtml:this.descriptionAsHtml||!1,correlationIds:this.correlationIds,percentComplete:this.percentComplete,asset:this.asset,isRecommendation:!1,uri:this.uri,linkedBlade:this.linkedBlade,additionalProperties:this.additionalProperties}},t.generateClientNotificationId=function(){return"clientNotification-"+n.getUniqueId()},t.transformResourceIdUrisToLinks=function(n){var t=n,i=n.match(c)||[];return i.forEach((function(n){var i=n.substring(n.indexOf("/subscriptions/")+1),r=i.substring(i.lastIndexOf("/")+1);t=t.replace(n,'<a href="#resource/'+i+'" target="_blank">'+r+"<\/a>")})),t},t.prototype.publish=function(){if(this.validate()){if(this.asset&&this.linkedBlade)throw new Error(r);FxImpl.Hubs.Notifications.addClientNotificationDefinition.invoke(f.client,i.Constants.Shell,this.package())}},t.publish=function(n){var i=new t(n);return i.publish(),i},t})();t.ClientNotification=u})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var e=MsPortalFx.Base,r=n.Rpc,o=MsPortalFx.Hubs.Notifications,u=n.Constants.RpcMethods,i=r.FuncEndPointDefinition,s,f;t.addClientNotificationDefinition=new i(u.addClientNotification);t.addClientNotificationsDefinition=new i(u.addClientNotifications),(function(n){n[n.NavigatePortal=0]="NavigatePortal";n[n.OpenInNewTab=1]="OpenInNewTab";n[n.OpenInCurrentTab=2]="OpenInCurrentTab"})(s=t.ClientNotificationUriAction||(t.ClientNotificationUriAction={}));t.showModalNotification=new i("showModalNotification");f=(function(n){function i(t){var i=n.call(this,t)||this;return i.inlineForm=t.inlineForm,i.toastDuration=t.toastDuration,i.irisNotificationDetails=t.irisNotificationDetails,i.caller=t.caller,i.uriAction=t.uriAction,i}return __extends(i,n),i.prototype.publish=function(){if(this.validate()){var n=this.package();return n.isServerEvent=!1,n.inlineForm=this.inlineForm,n.toastDuration=this.toastDuration,n.irisNotificationDetails=this.irisNotificationDetails,n.caller=this.caller,t.addClientNotificationDefinition.invoke(r.client,e.Constants.Shell,n),n.timestamp}},i.internalPublish=function(n){var t=new i(n);return t.publish(),t},i})(o.ClientNotification);t.InternalClientNotification=f})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){function t(n){return typeof n=="string"}function u(n){return typeof n=="object"}function e(n){if(n)return MsPortalFx.forEachKey(n,(function(n,i,r){var f=i;try{f=JSON.parse(f)}catch(o){}f&&(r[t(n)&&n.toLowerCase()||n]=u(f)&&e(f)||f)}),{})}function o(n,i,e){var v,y,l;u(n.message)&&!n.details&&(n.message.error&&(n.message.error.target||MsPortalFx.extend(n.message.error,{target:n.target})),n=n.message.error||n);var h=n.message,p=MsPortalFx.map(n.details||[],(function(n){return[n]})),a=[],s,c;if(h&&(v=h.error||{},s=v.message||h.message,c=v.code||h.code,s||t(h)?s&&!t(s)&&(s=JSON.stringify(s)):s=JSON.stringify(h)),p.length&&(a=p.map((function(n){return o(n,i,e-1)}))),s=s||h,c=c||n.code,y=n.target,l=i?c||"NoCode":c&&(y?r.errorMessageWithTarget:f).format(s,c,y)||s,a.length){if(e>1)return{error:l,details:a};l=l.concat(" "+a.join(", "))}return l}function s(n,t,i){var u;if(n){(i<=0||!i)&&(i=1);var r=e(n),s=t?r.code:r.code&&f.format(r.message,r.code)||r.message,h=$.map(r.details,(function(n){return[n]})),c=(h||[]).map((function(n){return o(n,t,i)}));u={error:s,details:c}}return u}function h(n,t){var i=s(n),r=i.error||t||"";return MsPortalFx.forEachKey(i.details,(function(n,t){r+=" "+t})),r}function c(n,t,i){var r=MsPortalFx.extend({message:t},{name:n.name,stack:n.stack,code:i||n.code,readyState:n.readyState,status:MsPortalFx.isNumeric(n.status)?n.status:n.httpStatusCode,statusText:n.statusText});return r.readyState!==0||r.status||(r.status=0,r.statusText="ajax readyState was zero"),r}function l(n){var i,e,f=n.responseJSON||n.content,u=f&&(f.error||f.Error||f),s=u&&(u.message||u.Message),o;if(s)i=h(u),e=u.code;else if(n.message)i=n.message;else{if(n instanceof Error)return n;if(t(n))try{o=JSON.parse(n);i=JSON.parse(o.jqXHR.responseText).message}catch(l){i=n}else i=r.unknownErrorOccured}return c(n,i,e)}function i(n){return n&&u(n)&&(n=Object.getOwnPropertyNames(n).reduce((function(t,i){return n[i]!==undefined&&(t[i]=n[i]),t}),Array.isArray(n)?[]:{}),delete n.message,n.error?n.error=i(n.error):n.details||n.code||(n.code="NoCode"),Array.isArray(n.details)?n.details=n.details.map(i):n.details&&(n.details=i(n.details))),n}function a(n){return i(n)}var r=MsPortalFx.Resources.Strings.Azure,f=r.errorMessageWithCode;n.parseArmError=s;n.parseArmErrorToMessage=h;n.buildSimplifiedError=l;n.scrubError=a})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function i(n){return typeof n=="function"}var s=MsPortalFx.Base,e=MsPortalFx.ViewModels,l=e.Obsolete.Forms.FilterComboBox,h=MsPortalFx.Resources.Strings.Azure.BaseResourceDropDown,o=new s.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),f=e.getValidationResultPromise,c=MsPortalFx.localeCompareIgnoreCase,r="",a={optionsUndefined:r,formUndefined:r,accessorUndefined:r,configUndefined:r,fetchItemsUndefined:r,filterObjUndefined:r,mapItemUndefined:r,cannotWriteValidate:r},u=n.getErrorMap(a),v=(function(){function n(n,t,r){var o=this,y,p,c,s,a,b,v,w,k;this._itemsObs=ko.observableArray();this._firstLoad=!0;t||u.optionsUndefined();t.form||u.formUndefined();t.accessor||u.accessorUndefined();r||u.configUndefined();i(r.fetchItems)||u.fetchItemsUndefined();i(r.filterObjectByName)||u.filterObjUndefined();i(r.itemToHierarchicalFormOption)||u.mapItemUndefined();this._bContainer=n;this._loadingDeferred=Q.defer();this._loading=ko.observable(!0);y={options:ko.observableArray(),filterOptions:{datasetType:0},validations:ko.observableArray()};MsPortalFx.extend(y,t);this._bOptions=y;this._setOptions=y.options;p={allowCreateNew:!1,blockLoadingItems:ko.observable(!1),nameForInitialValue:ko.observable(),getSortedListForInitialSelection:function(){return o._items},fetchItems:undefined,filterObjectByName:undefined,itemToHierarchicalFormOption:undefined};MsPortalFx.extend(p,r);this._bConfig=p;this._bConfig.allowCreateNew||this._bOptions.validations.push(new e.CustomValidation(h.creatingResourcedDisabledValidationMessage,function(n){var t=!o.getObjectByName(n);return f(t&&h.creatingResourcedDisabledValidationMessage)}));c=i(r.filterComboBoxCreateCallback)?r.filterComboBoxCreateCallback(this._bOptions):{filterComboBox:new l.ViewModel(n,this._bOptions),control:null};s=this._filterCombo=c.filterComboBox;this.control=r.control||c.control||c.filterComboBox;b=r.optionsFilter;ko.reactor(n,(function(){var n=o._itemsObs();o._setOptions((b?b(n):n).map(r.itemToHierarchicalFormOption));s.value.peek()&&o.triggerValidation()}));v=!1;ko.reactor(n,(function(){var n=r.createNewOption&&r.createNewOption(),t=n?null:s.value();n=n||o.getObjectByName(t)||p.nullValue;(!t||~s.items.peek().map((function(n){return n.text.peek()})).indexOf(t))&&!v&&a&&a(n)}));this.value=ko.observable();this.value.subscribe(n,(function(n){if(v||n!==a()){var i=n&&o._bConfig.itemToHierarchicalFormOption(n),t=i&&i.text(),r=o.getObjectByName(t)||o.getObjectByName(i&&i.value);(t=r&&o._bConfig.itemToHierarchicalFormOption(r).text()||t,s.value()!==t)&&s.value(t)}}));ko.pureComputed((function(){return!!t.form.editScope()&&!o._bConfig.blockLoadingItems()})).fxOnceAndRun(n,(function(){a=t.accessor.getEditableObservable(n);a.subscribe(n,(function(n){try{v=!0;o.value(n)}finally{v=!1}}));o._loadItems()}),(function(n){return n}));i(s.valid)&&(this.valid=ko.computed(n,{read:function(){return c.valid?c.valid():s.valid()},write:function(){u.cannotWriteValidate()}}));i(s.enabled)&&(w=ko.observable(!0),this.enabled=ko.computed(n,{read:function(){return s.enabled()},write:function(n){w(n);w.valueHasMutated()}}),ko.computed(n,(function(){s.enabled(w())})),ko.computed(n,(function(){s.loading(o._loading())})));i(s.infoBalloonContent)&&(this.infoBalloonContent=ko.computed(n,{read:function(){return s.infoBalloonContent()},write:function(n){s.infoBalloonContent(n)}}));k=function(){return o._loadingDeferred.promise.then((function(){n.onInputsSetCallbacks.remove(k)}))};n.onInputsSetCallbacks.add(k)}return Object.defineProperty(n.prototype,"_items",{get:function(){return this._itemsObs.peek()},set:function(n){this._itemsObs(n)},enumerable:!1,configurable:!0}),n.prototype.clearValidation=function(){var n=this._filterCombo;return n&&i(n.clearValidation)?Q(n.clearValidation()):Q()},n.prototype.triggerValidation=function(){var n=this._filterCombo;return!this._firstLoad&&n&&i(n.triggerValidation)?n.triggerValidation():Q(!0)},n.prototype.getObjectByName=function(n){var t=this;return MsPortalFx.find(this._items,(function(i){return t._bConfig.filterObjectByName(i,n)}))},n.prototype._loadItems=function(){var n=this,r=function(t){var r=n._bOptions.validations,u=i(r)&&r()||[],f=u.map((function(n){var r=n.validate;return i(r)&&r(t)||undefined}));return Q.all(f).then((function(n){return n.every((function(n){return!n||n.valid}))}),(function(){return o.warning("Failed to validate '"+t+"'. Assuming valid."),!0}))},t=function(i,u){if(u=u||0,u<i.length){var f=i[u],o=n._bConfig.itemToHierarchicalFormOption(f),e=o.text();return n._filterCombo.items().some((function(n){return n.text()===e}))?r(e).then((function(n){return n?f:t(i,u+1)}),(function(){return undefined})):t(i,u+1)}return Q(undefined)},u=function(t){if(t){var i=n._bOptions.form.editScope();i.isDisposed||i.resetValue(n._bOptions.accessor,{newInputValue:t})}},f=function(){var f,e=n._bConfig,l=e.itemToHierarchicalFormOption,a=n._filterCombo,o=e.createNewOption,k=o&&o(),v=!1,d,y,w,nt,h,b;if(n._firstLoad?(d=n._bOptions.form.editScope(),d.isDisposed||(y=n._bOptions.accessor.getEditableObservable(n._bContainer),f=y&&y()),MsPortalFx.keysLength(f)||(f=undefined)):f=n.value(),f){var s=l(f),p=s&&s.text(),g=s&&s.value;f=(p||g)&&MsPortalFx.find(a.items(),(function(n){return!c(n.value,g)||!c(n.text(),p)}))&&n.getObjectByName(p)||k?(v=!0)&&f:undefined}return!n._firstLoad&&f?Q():(n._firstLoad&&!f&&(w=i(e.nameForInitialValue)?e.nameForInitialValue():undefined,f=!!w&&n.getObjectByName(w)||undefined),!f&&!f&&e.allowCreateNew&&i(o))?(a.value(""),n._firstLoad&&Q.nextTick((function(){u(f=k)})),Q()):(nt=f,b=n._items,Q().then((function(){if(!v)return f?(h=l(f),r(h.text()).then((function(n){n||(f=undefined)}))):void 0})).then((function(){if(!f&&b.length)return t(e.getSortedListForInitialSelection()).then((function(n){f=n}))})).finally((function(){f||(f=nt||b[0]);u(f);f&&(v?o&&o(f):(h=l(f),a.value(h.text())))})))};this._loading(!0);this._bConfig.fetchItems().catch((function(n){return o.warning("Failed to fetch items: "+n.message),[]})).then((function(t){t===void 0&&(t=[]);n._items=t;var i=n._bOptions.form.editScope();i.isDisposed||f().finally((function(){n._firstLoad=!1;n._loading(!1);n._loadingDeferred.resolve();n.triggerValidation()}))}))},n.prototype._hasPermission=function(n,t,r){var e=i(t)&&t(),u=e&&e.actions||[];return u.length<1?f():s.Security.hasPermission(n,u).then((function(n){return f(!n&&(e.message||r||"{0}").format(u.toString()))}),(function(){return o.warning("Failed to get permissions on ["+u.toString()+"] over scope '"+n+"'."),f()}))},n})();t.BaseResourceDropDown=v})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function e(n,r){return t.getLocationsForCreateEndPoint.invoke(n,i.Constants.Shell,r)}function o(n){return t.getLocationDisplayNamesEndPoint.invoke(n,"fxw",undefined)}function s(n){return t.ResourceManager.readUserSettingsEndPoint.invoke(n,i.Constants.Shell,[t.lastUsedLocationsKey]).then((function(n){var i=n[t.lastUsedLocationsKey]||{};return Object.keys(i).sort((function(n,t){var r=i[n],u=i[t];return r<u?1:r>u?-1:0}))}))}function h(n,t){return n.displayName.toLowerCase().localeCompare(t.displayName.toLowerCase())}var i=MsPortalFx.Base,f=n.Rpc,r=n.Constants.RpcMethods,u=f.FuncEndPointDefinition;t.getLocationsForCreateEndPoint=new u(r.getLocationsForCreate);t.getLocationsEndPoint=new u(r.getLocations);t.lastUsedLocationsKey="deployments_lastUsed_locations";t.getLocationsForCreate=e;t.getLocationDisplayNames=o;t.getLastUsedLocations=s;t.locationsComparer=h})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){function r(){return i.getLocationDisplayNames(t.client)}var t=FxImpl.Rpc,i=FxImpl.Azure;n.getLocations=r})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){function f(n,i,r){return t.getResourceGroupsFromSubscriptionEndPoint.invoke(n,"HubsExtension",{subscriptionIds:i,uniqueResourceGroups:r})}var i=n.Rpc,r=n.Constants.RpcMethods,u=i.FuncEndPointDefinition;t.getResourceGroupsFromSubscriptionEndPoint=new u(r.hubsGetResourceGroupsFromSubscription);t.getResourceGroupsFromSubscription=f})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var r=n.ViewModels,i=r.getValidationResult,u;(function(t){function p(n,t,i,r,u){return e.validateResourceGroupName(n,t,i,r,u)}function w(n){return(n=n||"",n.length>t.NameMaxLength)?i(r.lengthValidationMessage):n&&!v.test(n)?i(r.invalidMessage):i()}var o=n.Azure,s=n.Base,h=s.Diagnostics,c=n.ViewModels,l,a,r;(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew"})(l=t.Mode||(t.Mode={})),(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew";n[n.Both=2]="Both"})(a=t.AllowedMode||(t.AllowedMode={}));r=n.Resources.Strings.ResourceGroup.Validation;t.NameMaxLength=90;var u="\\s~!@#$%^&*+=<>,`\\?/\\\\\\:;'\"\\[\\]\\{\\}\\|",v=new RegExp("^[^"+u+"]*[^."+u+"]$","i"),y=1,f="subscriptions",e;(function(t){function u(t,u,e,s,l){if(!t)return Q(i());var a=w(t);return a.valid?u?Q(o.getSubscriptionInfo(u)).then((function(n){return n&&n.uniqueDisplayName||u})).then((function(o){var a=l||n.Base.Security.hasPermission("/"+f+"/"+u,["Microsoft.Resources/"+f+"/resourcegroups/write"]).then((function(n){return n?i():i(r.subscriptionHasNoPermissionsMessage.format(o))}),(function(){return h.Log.writeEntry(y,"ResourceGroupValidation","Error checking resource group create permissions. Defaulting to true."),i()})),c;return c=e?~e.map((function(n){return n.toLocaleLowerCase()})).indexOf((t||"").toLocaleLowerCase())?i(r.alreadyExistsMessage.format(o)):i():s?s():i(),Q.all([a,c]).spread((function(n,t){return n.valid?t:n}))})):c.getValidationResultPromise():Q(a)}t.validateResourceGroupName=u})(e=t.Internal||(t.Internal={}));t.validateResourceGroupName=p})(u=t.ResourceGroups||(t.ResourceGroups={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var u=MsPortalFx.Base,t=n.Rpc,i,r;(function(i){i.getSasUriForQueueEndPoint=new t.FuncEndPointDefinition(n.Constants.RpcMethods.getSasUriForQueue)})(i=n.InternalAzure||(n.InternalAzure={})),(function(n){var r;(function(n){function r(n){return i.getSasUriForQueueEndPoint.invoke(t.client,u.Constants.Shell,n)}n.getSasUriForQueue=r})(r=n.Storage||(n.Storage={}))})(r=n.Azure||(n.Azure={}));
define("MsPortalFx/Azure/Storage",r.Storage)})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function f(n,t){return t===void 0&&(t=[]),Q.spread([MsPortalFx.require("Fx/DependencyInjection"),MsPortalFx.require("FxInternal/ResourceManagement/ArmTemplate"),],(function(i,r){return r.canRegisterSubscriptionWithRPs(i.container,n,t)}))}function i(n,t,i){var r=(n&&n.subscriptionPolicies&&n.subscriptionPolicies.quotaId||"").toLowerCase();return i?r.startsWith(t):t===r}var r=n.Rpc,u=r.FuncEndPointDefinition;t.setInSessionSelectedSubscriptionsEndPoint=new r.ActionEndPointDefinition("setInSessionSelectedSubscriptions");t.searchForSubscriptionsEndPoint=new u("searchForSubscriptions");t.canRegisterSubscriptionWithRPs=f;t.isFreeTrialSubscription=function(n){return i(n,"freetrial_",!0)};t.isDreamSparkSubscription=function(n){return i(n,"dreamspark_",!0)};t.isBizSparkSubscription=function(n){return i(n,"bizspark_",!0)};t.isZeroCapSubscription=function(n){return i(n,"aad_2015-09-01",!1)}})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){function c(t){return t?e.getSubscriptionInfoEndPoint.invoke(u.client,n.getEnvironmentValue("extensionName")===r.Shell?r.Shell:"fxw",t):Q.reject("Invalid subscription ID.")}function l(){var t=s?f.start({source:"MsPortalFx.Azure.Subscriptions.GetSelectedSubscriptions",action:"InvokeRpc"}):"",n=e.getInSessionSelectedSubscriptionsEndPoint.invoke(u.client,"fxw",null);return n.then((function(n){s&&f.completeTrace(t,{selectedSubscriptionsCount:n.length})})),n}var i=n.Base,r=i.Constants,u=FxImpl.Rpc,f=i.Diagnostics.Telemetry,e=FxImpl.Azure,o=n.localeCompareIgnoreCase,s=n.isFeatureEnabled("getselectedsubstelemetry"),h;(function(n){function t(n,t){return!o(n.subscriptionId,t)||!o(n.uniqueDisplayName,t)}function i(n){return{text:ko.observable(n.uniqueDisplayName),value:n.subscriptionId}}n.filterObjectByName=t;n.itemToHierarchicalFormOption=i})(h=t.Subscriptions||(t.Subscriptions={}));t.getSubscriptionInfo=c;t.getSelectedSubscriptions=l})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n.ViewModels,r;(function(n){var t=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.subscriptionsFiltered=ko.observable(!1),r.selectedTypes=ko.observable([]),r.selectedSubscriptions=ko.observable([]),r.selectedResourceGroups=ko.observable([]),r.invertResourceGroupFilter=ko.observable(),r.selectedLocations=ko.observable([]),r.filterText=ko.observable(""),i=i||{},r.controlType=114,r.showTextFilter=i.showTextFilter||ko.observable(!1),r.showTypeFilter=i.showTypeFilter||ko.observable(!1),r.showSubscriptionFilter=i.showSubscriptionFilter||ko.observable(!1),r.showResourceGroupFilter=i.showResourceGroupFilter||ko.observable(!1),r.showLocationFilter=i.showLocationFilter||ko.observable(!1),r.showSubscriptionSummary=i.showSubscriptionSummary||ko.observable(!0),r.showTenantLevelSubscriptionSummary=i.showTenantLevelSubscriptionSummary||ko.observable(!1),r.selectedSubscriptionId=i.selectedSubscriptionId||ko.observable(),r.textFilterPlaceholder=i.textFilterPlaceholder||ko.observable(),r.assetTypes=i.assetTypes||ko.observableArray([]),r.actionHandler=i.actionHandler,r.context=i.context||ko.observable(),r._msPortalFxSectionOptions=i.sectionOptions,r.autoSelectAllResourceGroups=i.autoSelectAllResourceGroups||ko.observable(!0),r.isPersistentSubscriptionFilter=!!ko.unwrap(i.isPersistentSubscriptionFilter),r.showAllSubscriptions=!!i.showAllSubscriptions,r.showDirectoryFilter=!!i.showDirectoryFilter,r.deferSelectedSubscriptionsUpdate=i.deferSelectedSubscriptionsUpdate,r.isSubscriptionPopupOpen=ko.observable(!1),r.subscriptionsLoaded=ko.observable(!1),r}return __extends(t,n),t})(i.Controls.Base.ViewModel);n.ViewModel=t})(r=t.ResourceFilter||(t.ResourceFilter={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var r=n,u=r.Base,f=u.Net2,e=r.ViewModels,o=e.CustomValidation,s=r.Resources.Strings.Azure.Validators,i=e.getValidationResult,c=(function(n){function t(t){return n.call(this,{validate:function(n){return Q(t(n)).then((function(n){if(!n)return i();var t=Q.defer(),r;return u.Security.hasPermission(n.entityId,n.actions).then((function(t){t||(r=i((n.message||s.RequiredPermission.message).format(n.actions.join(", "))))})).finally((function(){t.resolve(r||i())})),t.promise}))}})||this}return __extends(t,n),t})(o),h;t.RequiredPermissionsValidator=c;h=(function(n){function t(t,r,u){return n.call(this,{validate:function(n){if(!n)return Q(i());var e=Q.defer(),o,h=u||f.Internal.getArmEndpoint();return f.postJSON({uri:h+"providers/microsoft.resources/checkresourcename?api-version=2015-01-01",setAuthorizationHeader:!0},{name:n,type:t}).then((function(t){t&&(t.status||"").toLowerCase()==="reserved"&&(o=i((r||t.error&&t.error.message||s.ReservedResourceName.message).format(n)))})).finally((function(){e.resolve(o||i())})),e.promise}})||this}return __extends(t,n),t})(o);t.ReservedResourceNameValidator=h})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t,i;(function(n){n[n.Windows=0]="Windows";n[n.Linux=1]="Linux"})(t=n.FirstPartyOperatingSystem||(n.FirstPartyOperatingSystem={})),(function(n){n[n.Default=0]="Default";n[n.TemplateDeployment=1]="TemplateDeployment";n[n.RequestPricingInformation=2]="RequestPricingInformation";n[n.ProgrammaticAccess=3]="ProgrammaticAccess"})(i=n.LegalTermsLanguageEnum||(n.LegalTermsLanguageEnum={}))})(t=n.Legal||(n.Legal={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function u(n,t){if(!n)throw new Error("Can't move resource without resource id.");return{bladeSelection:f(n,t),displayValue:t===1?i.changeResourceGroupLabel:i.changeSubscriptionLabel,editType:1}}function f(t,i){return r.getBladeSelection("HubsExtension",n.isFeatureEnabled("moveresourcesreact")?"MoveResources.ReactView":"MoveResourceBlade",{resourceId:t,moveType:i})}var r=n.ViewModels,i=n.Resources.Strings.Part.PropertiesPart,e;t.getMoveResourceBlade=u,(function(n){var t;(function(n){n[n.NotSet=0]="NotSet";n[n.Allowed=1]="Allowed";n[n.NotAllowed=2]="NotAllowed"})(t=n.GalleryItemAccess||(n.GalleryItemAccess={}))})(e=t.Internal||(t.Internal={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i=n.Rpc;t.lastDeployedGalleryItemsMaxCount=10;t.lastUsedLocationsMaxCount=5;t.readUserSettingsEndPoint=new i.FuncEndPointDefinition("HubsExtension.readUserSettings")})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){function u(n){return n.deploymentStatusCode===r.Success?Q(n):FxImpl.QReject("Deploy failed with deploymentStatusCode ("+r[n.deploymentStatusCode]+")",{data:n})}function o(n){return i().then((function(t){return t.deployTemplate(n)})).then(u)}function s(n){return i().then((function(t){return t.pollForDeployment(n)})).then(u)}function h(n){return i().then((function(t){return t.validateTemplate(n)}))}var f,e,r,i,c;(function(n){n[n.InitialSetup=0]="InitialSetup";n[n.SanityCheck=1]="SanityCheck";n[n.FulfillPrerequisites=2]="FulfillPrerequisites";n[n.ProvisionResourceGroup=3]="ProvisionResourceGroup";n[n.RegisterResourceProviders=4]="RegisterResourceProviders";n[n.GetDeploymentName=5]="GetDeploymentName";n[n.ValidateTemplate=6]="ValidateTemplate";n[n.SubmitDeploymentRequest=7]="SubmitDeploymentRequest";n[n.GetDeploymentStatus=8]="GetDeploymentStatus"})(f=t.DeploymentStages||(t.DeploymentStages={})),(function(n){n.Accepted="accepted";n.Succeeded="succeeded";n.Failed="failed";n.Canceled="canceled";n.Running="running";n.Deploying="deploying";n.Waiting="waiting";n.Deleting="deleting";n.Deleted="deleted"})(e=t.DeploymentStates||(t.DeploymentStates={})),(function(n){n[n.Failure=-1]="Failure";n[n.Success=0]="Success";n[n.DeploymentRequestFailed=1]="DeploymentRequestFailed";n[n.DeploymentFailed=2]="DeploymentFailed";n[n.DeploymentStatusUnknown=3]="DeploymentStatusUnknown";n[n.ErrorProvisioningResourceGroup=4]="ErrorProvisioningResourceGroup";n[n.ErrorSubmittingDeploymentRequest=5]="ErrorSubmittingDeploymentRequest";n[n.ErrorGettingDeploymentStatus=6]="ErrorGettingDeploymentStatus";n[n.InvalidArgs=7]="InvalidArgs";n[n.ErrorRegisteringResourceProviders=8]="ErrorRegisteringResourceProviders";n[n.DeploymentCanceled=9]="DeploymentCanceled";n[n.UnknownError=10]="UnknownError"})(r=t.DeploymentStatusCode||(t.DeploymentStatusCode={}));i=function(){return n.require("FxInternal/ResourceManagement/ArmTemplate")};t.deployTemplate=o;t.pollForDeployment=s;t.validateTemplate=h,(function(n){function t(n){return i().then((function(t){return t.deployTemplate(n)}))}function r(n){return i().then((function(t){return t.pollForDeployment(n)}))}function u(n){return i().then((function(t){return t.validateTemplate(n)}))}n.deployTemplate=t;n.pollForDeployment=r;n.validateTemplate=u})(c=t.Deployments||(t.Deployments={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=MsPortalFx.ViewModels,i=(function(){function n(n,i,r,u){var f=this;this.collector=new t.ParameterCollector(n,{supplyInitialData:function(){var n=u.supplyInitialData(),i=r(),t;return i&&(t=i.selectedSpecId,n.selectedSpecId=t,n.selectedSpecIds=[t]),n.originControl=f.controlType,{fromCollectorToProvider:n,fromProviderToCollector:null}},receiveResult:function(n){var t=n.fromProviderToCollector;r(t);typeof u.receiveResult=="function"&&u.receiveResult(t)},selectable:i})}return n})();n.CollectorControl=i})(t=n.Specs||(n.Specs={}))})(t=n.Pickers||(n.Pickers={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i=FxImpl.Azure.ResourceManager.Pickers.Specs,r=n.ViewModels,u=r.Forms,f=(function(t){function i(i,r){var e=this,f;return r=n.extend({label:ko.observable(n.Resources.Strings.Pickers.Specs.pricingTier),validations:ko.observableArray(),displayText:ko.pureComputed((function(){var n=f.value();return n?n.selectedSpecIds&&n.selectedSpecIds.join(", ")||n.selectedSpecId:""}))},r),f=new u.Selector.ViewModel(i,r.form,r.pathOrAccessor,r),e=t.call(this,i,f.selectable,f.value,r)||this,e.controlType=2,e.control=f,e}return __extends(i,t),i})(i.CollectorControl);t.Selector=f})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i=n.ViewModels.Controls,r=FxImpl.Azure.ResourceManager.Pickers.Specs,u=(function(t){function r(r,u){var f=this,o=ko.observable(),e=new i.InfoBox.ViewModel(r,{},!1,u);return e.selectable=n.ViewModels.Part.createSelectableViewModel(),f=t.call(this,r,e.selectable,o,u)||this,f.controlType=3,f.value=o,f.control=e,f}return __extends(r,t),r})(r.CollectorControl);t.InfoBox=u})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function f(n){return typeof n=="function"}function tt(t,i){i===void 0&&(i={});var r=new n.ViewModels.ObsoleteSelectable({allowUnselect:!1,selectedValue:i.selectedValue,isSelected:i.isSelected,isActivated:i.isActivated});return t.registerForDispose(r),r}function ht(n){n||u.optionsUndefined();f(n.supplyTemplateDeploymentOptions)||u.supplyTemplateUndefined();n.createFeatures&&(n.createFeatures&1||n.createFeatures&2)&&!f(n.supplyPricingConfig)&&u.supplyPricingUndefined()}var i=MsPortalFx,it=i.Base,e=i.ViewModels,rt=e.ActionBars.Base,ut=e.ParameterCollectionV3,ft=HubsExtension.Azure.Pricing,p=n.ProvisioningTelemetry,o=it.Diagnostics.Telemetry,l=p.ProvisioningStatus,w=p.ActionModifier,b=MsPortalFx.Azure.ResourceManager.Deployments,h=MsPortalFx.Azure.ResourceManager.DeploymentStatusCode,c=i.Resources.Strings.Azure.ResourceManager.Provisioner,k=c.ArmValidation,s=e.getValidationResult,y;t.armValidateFeatureForced=!1;var et=["microsoft_azure_datacatalog","microsoft_azure_mobileengagement",],a=w.Succeeded,v=w.Failed,d=ft.Constants,g=d.PricingSummaryBlade,nt=d.LegalTermsBlade,ot=1,r="",st={canNotProvision:r,invalidGalleryOptions:r,launchPricingBladeFailure:r,legalTermsUnsupported:r,optionsUndefined:r,secondaryLinksUnsupported:r,supplyPricingUndefined:r,supplyTemplateUndefined:r},u=n.getErrorMap(st);y=(function(r){function y(n,t,e){var o=this,s,h,c;return ht(e),s=e.actionBar,o=r.call(this,n,{supplyProvisioningPromise:function(t){return o._supplyProvisioningPromise(t,n)},supplyStartboardInfo:function(n){return o._supplyStartboardInfo(n)},actionBar:s,parameterProvider:e.parameterProvider})||this,o.deploymentStartedPromise=ko.observable(),o._armOptions=e,o._showPricingSummary=ko.observable(!1),o._showAutomationOptions=ko.observable(!1),o._legalTermsBladeShown=o._purchaseInProgress=o._isCustomProvisioning=!1,h=t&&t.content||{},o.pricingSelectable=tt(n,h.pricingSelectable),o.errorsSelectable=tt(n,h.errorsSelectable),o.pricingSelectable.isSelected.subscribe(n,(function(n){n||o._purchaseInProgress||o._setActionBarProgress(!1)})),s&&(o._setUpActionBarWatcher(n),o._setUpActionBarValidation(n,e)),c=function(){var n=e.createFeatures,t=!!(n&1),r=!!(n&2),f=n&8,h=!!(n&4)||!f&&i.isFeatureEnabled("seetemplate");s&&(o._actionBarSupportsSecondaryLinkDisplayText?(o._showPricingSummary(t),o._showAutomationOptions(h)):t&&u.secondaryLinksUnsupported(),o._actionBarSupportsForceInProgressStatus?s.forceInProgressStatus(r):r&&u.legalTermsUnsupported())},o._parameterProvider=e.parameterProvider,e.parameterProvider&&e.parameterProvider.configFromCollector.subscribe(n,c),c(),f(n.registerSelectable)&&(n.registerSelectable(n.createChildLifetime(),i.newGuid(),o.pricingSelectable),n.registerSelectable(n.createChildLifetime(),i.newGuid(),o.errorsSelectable,{openInContextPane:!0,persistentContextPane:!0})),o}__extends(y,r);p=y;Object.defineProperty(y.prototype,"armProvisioningConfig",{get:function(){return this.provisioningConfig()},enumerable:!1,configurable:!0});y.prototype.startProvisioning=function(n){f(this._armOptions.supplyGalleryCreateOptions)||u.canNotProvision();var t=this._armOptions.supplyGalleryCreateOptions(),e=i.clone(this.provisioningConfig())||{},o=t&&t.galleryItem;return o&&o.itemDisplayName?(i.extend(e,{galleryCreateOptions:t}),this.provisioningConfig(e)):u.invalidGalleryOptions(),r.prototype.startProvisioning.call(this,n)};y.prototype.validateTemplate=function(n){return this._validateTemplate(n)};y.prototype._deployTemplate=function(n){var t=this,i=b.deployTemplate(n);return i.progress((function(i){if(t._postProvisioningInputsDeferred&&i){var r=t.armProvisioningConfig.galleryCreateOptions.galleryItem,u=i.deployment&&i.deployment.id||"/subscriptions/"+n.subscriptionId+("/resourceGroups/"+n.resourceGroupName)+("/providers/Microsoft.Resources/deployments/"+n.deploymentName),f=n.resourceId;i=i||{};t.deploymentStartedPromise(Q({correlationId:i.correlationId,resourceId:i.resourceId,deploymentId:i.deployment&&i.deployment.id,provisioningState:i.provisioningState}));n.deploymentName?t._postProvisioningInputsDeferred.resolve({deploymentId:u,primaryResourceId:f,galleryItemId:t._launchingContext.galleryItemId,galleryItemIconUri:r&&r.mediumIconUri,provisioningHash:n.provisioningHash,createBlade:{bladeName:t._launchingContext.createBlade,extension:MsPortalFx.getEnvironmentValue("extensionName")}}):t._postProvisioningInputsDeferred.reject("deploymentName not supplied")}return i})),i};y.prototype._validateTemplate=function(n){return b.validateTemplate(n)};y.prototype._supplyProvisioningPromise=function(n,t){var i=this,r=this._deploymentOptions?Q(this._deploymentOptions):Q(this._armOptions.supplyTemplateDeploymentOptions(n,0));return Q.promise((function(u,f){requirejs(["FxInternal/ResourceManagement/ArmProvisioner"],(function(e){return p.prototype._supplyProvisioningPromise=e.supplyProvisioning,e.supplyProvisioning.call(i,n,t,r).then(u).catch(f)}))}))};y.prototype._supplyStartboardInfo=function(n){var t=this._armOptions.supplyStartboardInfo;if(f(t))return t(n)};y.prototype._setUpActionBarValidation=function(r,u){var e=this,h=u.actionBar,c=!!(u.createFeatures&16),l=!!(u.createFeatures&32),y=ko.isObservable(h.showActionBar),w=et.some((function(n){return MsPortalFx.getEnvironmentValue("extensionName")===n})),b=!c&&(l||t.armValidateFeatureForced||!w),d={delayExecution:!0,validate:function(t){if(!(e.armProvisioningConfig||{}).provisioningEnabled||y&&!h.showActionBar())return Q(s());var c=e._launchingContext,u={telemetryId:c.telemetryId,bladeInstanceId:c.bladeInstanceId,galleryItemId:c.galleryItemId,createBlade:c.createBlade},w=o.startTrace({source:"ArmProvisioner",action:"ValidateArmTemplate",data:u}),b=function(t){o.endTrace(w,v,i.extend2(u,{error:n.Azure.scrubError(t)}));var r=t.error||t;return r.status===0||t.status===0?s(k.networkFailure):{valid:!1,message:k.validationFailed,blade:{extension:"HubsExtension",detailBlade:"ArmErrorsBlade",detailBladeInputs:{errors:i.extend2(u,t.details||t)}}}},l,d,g,nt=Q().then((function(){return h.infoBoxSelectable.isSelected(!1),e._armOptions.supplyTemplateDeploymentOptions(g=e._parameterProvider.getResults(),2)})).then((function(n){d=n.suppressDefaultNotifications;n.suppressDefaultNotifications=!0;n.launchingContext=c;var t=e._validateTemplate(n).then((function(n){return Q(f(e._armOptions.postValidationCallback)?e._armOptions.postValidationCallback(n.validationResult||n):s()).then((function(t){return l=i.clone(n),o.endTrace(w,a,u),t}))})).catch(b);return Q.timeout(t,p.armValidationTimeout).catch((function(n){return i.extend(u,{error:{message:n.message,code:n.code}}),o.endTrace(w,v,u),s()}))})).then((function(n){if(!l||t!==0)return n;var u=e._getPinToDashboardArgs(g,l);return i.extend(l,{suppressDefaultNotifications:!0,skipPreflight:!0,submitDeployment:!0,validateTemplate:!1,pollForUpdates:!1,notifications:{pinToDashboard:u}}),e._deployTemplate(l,r).then((function(t){return e._deploymentOptions=i.clone(t),e._deploymentOptions.suppressDefaultNotifications=d,n})).catch(b)})).catch((function(n){return o.cancelTrace(w,MsPortalFx.extend2(u,{error:n.message})),s()}));return r.operations&&r.operations.add(nt,{blockUi:!0,shieldType:ot}),nt}};b&&(h.infoBoxSelectable=this.errorsSelectable,h.asyncValidations.push(d))};y.prototype._setActionBarProgress=function(n){ko.isObservable(this._actionBar.actionInProgress)&&this._actionBar.actionInProgress(n)};y.prototype._getPinToDashboardArgs=function(n,t){var f,i,r=this._supplyStartboardInfo(n)||(i=this.provisioningConfig()).startboardProvisioningInfo,u=i&&i.supplyDashboardPartReference&&i.supplyDashboardPartReference(t.resourceId);return u?{name:u.partName,extension:u.options.extensionName,parameters:u.parameters}:r?{name:r.startboardPart.name,extension:r.startboardPart.extension,parameters:(f={},f[r.startboardPartKeyId]=t.resourceId,f)}:void 0};y.prototype._setUpActionBarWatcher=function(n){var t=this,r=this._armOptions.supplyPricingConfig,u=r&&r(),f=u&&u.showPricingSummaryLink,i=this._actionBar;ko.computed(n,(function(){if(t._actionBarSupportsSecondaryLinkDisplayText){var u=t._showPricingSummary()&&(f?ko.unwrap(f):!0),n=null,r=!1;u?n=c.pricingSummaryLinkLabel:t._showAutomationOptions()&&(n=c.seeTemplateLink,r=!0);i.secondaryLinkDisplayText(n);t._actionBarSupportsSecondaryLinkValidation&&i.secondaryLinkTriggerValidation(r)}}));ko.reactor(n,(function(){var n=i.output(),e=n&&t._actionBarSupportsForceInProgressStatus&&i.forceInProgressStatus()&&n.status===1&&n.action===4,r=n&&n.commitId;if(e&&t._legalTermsCommitId!==r)return t._legalTermsCommitId=r,t._legalTermsBladeShown=!0,t._setActionBarProgress(!0),t._launchPricingSelectable(nt.bladeExtension,nt.bladeName),null;var u=i.secondaryLinkDisplayText(),f=n&&n.secondaryLinkClicked,o=n&&t._actionBarSupportsSecondaryLinkDisplayText&&!!f&&f===u;o&&t._pricingSummaryCommitId!==r&&(t._pricingSummaryCommitId=r,t._setActionBarProgress(!1),u===c.seeTemplateLink?t._launchTemplateViewerBlade():t._launchPricingSelectable(g.bladeExtension,g.bladeName))}));n.onInputsSetCallbacks.add((function(n){if(t.pricingSelectable.isSelected()&&rt.isCompleted(n.pricingOutput)&&n.pricingOutput.actionButtonClicked){if(t._legalTermsBladeShown){t._legalTermsBladeShown=!1;t._purchaseInProgress=!0;var r=n.pricingOutput.pinToStartboard;t._actionBarSupportsShowActionBar&&!i.showActionBar()&&typeof r=="boolean"&&i.provisionOnStartboardPart(r);i.forceInProgressStatus(!1);i.triggerSelectAction(MsPortalFx.getUniqueId())}t.pricingSelectable.isSelected(!1)}return}))};y.prototype._launchTemplateViewerBlade=function(){var r=this,t=this._parameterProvider.getResults(),i,n;t&&(i=this._armOptions.supplyTemplateDeploymentOptions(t,1).then((function(n){var i=r.armProvisioningConfig.galleryCreateOptions,t=i.galleryItem;return e.getBladeSelection("HubsExtension","TemplateViewerBlade",{options:{templateLink:n.templateLinkUri,templateJson:n.templateJson,parameters:n.parameters,telemetryId:t&&t.id}})})),n=this.pricingSelectable,n.delayedBladeSelection({bladeWidth:2,selectedValuePromise:i}),n.isSelected(!0))};y.prototype._launchPricingSelectable=function(n,t){this.pricingSelectable.selectedValue(e.getBladeSelection(n,t,this._getPricingBladeInputs()));this.pricingSelectable.isSelected(!0)};y.prototype._getPricingBladeInputs=function(){var o=this._armOptions.supplyPricingConfig(),t=o&&o.supplyPricingInfo(),n,r,e;return t||u.launchPricingBladeFailure(),n=(this.armProvisioningConfig.galleryCreateOptions||{}).galleryItem,r=this._armOptions.supplyGalleryCreateOptions,!n&&f(r)&&(e=r(),n=e&&e.galleryItem),n=n&&i.clone(n)||{categoryIds:[],products:[],productsWithNoPricing:[]},n.products=n.products.concat(t.products||[]),n.productsWithNoPricing=n.productsWithNoPricing.concat(t.productsWithNoPricing||[]),{galleryPricingInfo:t,galleryItem:n}};y.prototype._traceProvisioningStarted=function(){return r.prototype._traceProvisioningStarted.call(this,this._createEventBase())};y.prototype._traceProvisioningEnded=function(n,t){var f=this._createEventBase(),e=v,u=l.UnknownFailure,i;return t&&(n?(i=n.deploymentStatusCode,i&&i!==h.Success?u=h[i]:(e=a,u=i===h.Success?h[i]:l.Resolved)):(e=a,u=l.Resolved)),f.actionModifier=e,f.data.provisioningStatus=u,r.prototype._traceProvisioningEnded.call(this,n,t,f)};var p;return p=__decorate([__metadata("fx:diagnostics",[require,"2"]),i.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[e.ContainerContract,Object,Object])],y)})(ut.Provisioner);t.Provisioner=y,(function(n){n.armValidationTimeout=1e4;n.azureResourceManagerProvisioningPart={name:"AzureResourceManagerProvisioningPart",extension:"HubsExtension"}})(y=t.Provisioner||(t.Provisioner={}))})(i=t.Provisioner||(t.Provisioner={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i=n.Azure,r=i.Provisioner.Provisioner,u=(function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return __extends(t,n),t.prototype.traceValidation=function(n){this._traceValidation(n)},t})(r);t.Provisioner=u})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(n){var t;(function(n){n.armValidateFeatureForced=FxImpl.Azure.Provisioner.armValidateFeatureForced;n.Provisioner=FxImpl.Azure.Provisioner.Provisioner})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var r;(function(i){function pt(n){return ct.test(n)}function wt(n){var t=vt.exec(n);if(t){for(var i=void 0,u=t[1],f=t[2],r=[];i=yt.exec(f);){if(!i)throw new Error("Invalid resource ID");r.push(i[1])}return b(u,b.apply(void 0,r))}throw new Error("Invalid resource ID");}function bt(n){var t=at.exec(n);if(t)return{resourceGroup:t[2],resourceGroupId:"/subscriptions/"+t[1]+"/resourceGroups/"+t[2]};throw new Error("Invalid ID");}function kt(n){var t=lt.exec(n);if(t)return{subscription:t[1],subscriptionId:"/subscriptions/"+t[1]};throw new Error("Invalid ID");}function k(t,u){if(!pt(t))try{var e=wt(t),f=i.includedResourceTypes[e.toLowerCase()];return f?f===u||f===3:n.isFeatureEnabled("autoenablemove")}catch(o){return r.error("Failed to get resource type from the resource id"),!1}return!0}function gt(n){var t={resourceGroup:null,resourceGroupId:null,success:!1},i;try{i=bt(n);t.resourceGroup=i.resourceGroup;t.resourceGroupId=i.resourceGroupId;t.success=!0}catch(u){r.error("Error getting RG name from resource id '"+n+"'.")}return t}function s(n,i){return new t.Selectable({isSelected:!!(n&&n[i]&&n[i].isSelected)})}function d(n,t){n.builtInPropertyKind=t}function c(n,t,i){d(i,t);n[t]=i}function nt(n){return g.includes(n.getType())?!0:(r.error("Only Callback, Link, OpenBlade and Text properties are allowed on resource summary."),!1)}var l=n.ViewModels,it=n.Base.Constants,rt=it.BladeNames.Hubs,o=l.Parts.Properties,ut=FxImpl.ViewModels,ft=ut.Parts.Properties,et=n.Base,ot=n.Assets,st=FxImpl,ht=n.Azure,y=n.Azure.ResourceManager,p=n.Resources.Strings.Part,r=new et.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.ResourceSummaryPart"),e=p.ResourceSummary,a=new o.TextProperty("",""),w=p.PropertiesPart,h="MsPortalFx.Parts.ResourceSummary.ViewModel2",g,v,tt;i.includedResourceTypes={};["microsoft.classiccompute/domainnames","microsoft.compute/availabilitysets","microsoft.containerservice/containerservices","microsoft.devices/iothubs","microsoft.network/dnszones","microsoft.network/trafficmanagerprofiles","microsoft.servicefabric/clusters","microsoft.classicnetwork/networksecuritygroups","microsoft.classicnetwork/reservedips","microsoft.classicnetwork/virtualnetworks","microsoft.certificateregistration/certificateorders","microsoft.compute/disks","microsoft.compute/virtualmachinescalesets","microsoft.db.mysql/servers","microsoft.db.postgresql/servers","microsoft.insights/components","microsoft.insights/eventdetail","microsoft.insights/webtests","microsoft.network/applicationgateways","microsoft.network/connections","microsoft.network/expressroutecircuits","microsoft.network/localnetworkgateways","microsoft.network/networkwatchers","microsoft.network/virtualnetworkgateways","microsoft.recoveryservices/vaults","microsoft.servermanagement/gateways","microsoft.servermanagement/nodes",].forEach((function(n){i.includedResourceTypes[n]=3}));var ct=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)$/i,lt=/^\/subscriptions\/([^\/\s]+)/i,at=/^\/subscriptions\/([^\/\s]+)\/resourceGroups\/([^\/\s]+)/i,vt=/(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((:?\/[^\/]+\/[^\/]+)*)$/i,yt=/\/([^\/]+)\/([^\/]+)/ig,b=n.getJoinFunc("/");var u="",dt={onlyStatic:u,propertyReused:u,setPropertiesNotAvail:u,noResourceGroupWithLayout:u,statusMissing:u,noSubId:u,maxColumns:u,missingProperties:u,maxProperties:u},f=FxImpl.getErrorMap(dt);g=[3,1,4,8,0,];v=(function(t){function i(n,i,u){var f=t.call(this,n)||this,c,e,o,h;return f._editRg=ko.observable(),f._currentResourceId=ko.observable(),f._partContainer=u,f._options=i,f.collapsed=ko.observable(undefined),f.tagsVisible=ko.observable(!0),f.hasQuickStart=ko.observable(!!i.getQuickStartSelection),f.hasKeys=ko.observable(!!i.getKeysSelection),f.hasSettings=ko.observable(!!i.getSettingsSelection),f.noTags=ko.observable(!!i.noTags),f.noRbac=ko.observable(!!i.noRbac),c=i.supportsResourceMove,f._editRg(c===1||c===3),f.title=ko.observable(""),f.settingsLabel=ko.observable(""),e="Selectable",f.resourceGroupSelectable=s(n,"resourceGroup"+e),f.quickStartSelectable=s(n,"quickStart"+e),f.settingsSelectable=s(n,"settings"+e),f.accessSelectable=s(n,"access"+e),f.tagsSelectable=s(n,"tags"+e),f.keysSelectable=s(n,"keys"+e),u?(o=u,f.collapsed.subscribe(o,(function(n){f._updateDataLoading(u,n)}))):o=new st.TriggerableLifetimeManager,f._ensureRGProperty=function(){return h||(h=f._createResourceGroupProperty(o),d(h,0)),h},i.noResourceGroup||t.prototype.setProperties.call(f,[f._ensureRGProperty()]),i.hasOwnProperty("staticProperties")||r.warning("MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel is deprecated.  Please use MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel2."),f}return __extends(i,t),i.prototype.onInputsSet=function(t){var i=this._options,s,u,f,h,e,o;return(arguments.length<2&&(s="OnInputsSet method of resource summary viewmodel requires the second *settings* argument.",r.error(s)),t.actionBarOutput)?(this.moveResourceSelection.activatedItems([]),Q()):(this._inputs=t,u=t.resourceId,u!==this._currentResourceId()&&this._startRebind(u),i.noRbac||this.accessSelectable.selectedValue(l.getBladeSelection("Microsoft_Azure_AD","UserAssignmentsBlade",{scope:u})),i.noTags||this.tagsSelectable.selectedValue(l.getBladeSelection("HubsExtension","ResourceTagsBlade",{resourceId:u})),i.getSettingsSelection&&this.settingsSelectable.selectedValue(i.getSettingsSelection(t)),i.getQuickStartSelection&&this.quickStartSelectable.selectedValue(i.getQuickStartSelection(t)),i.getKeysSelection&&this.keysSelectable.selectedValue(i.getKeysSelection(t)),f=this.collapsed,h=f.peek(),n.isNullOrUndefined(f())&&f(i.collapsed),e=this._partContainer,o=f.peek(),e&&h===o&&this._updateDataLoading(e,o),Q())},i.prototype.onExpanded=function(){return Q()},i.prototype.setProperties=function(n){var f=!this._options.noResourceGroup,u=10-(f?1:0),i;n.length>u&&r.error("Resource summary cannot have more than "+u+" properties");i=[];f&&i.push(this._ensureRGProperty());n.slice(0,u).forEach((function(n){nt(n)&&i.push(n)}));t.prototype.setProperties.call(this,i)},i.prototype._setProperties=function(n){t.prototype.setProperties.call(this,n)},i.prototype._startRebind=function(n){this._currentResourceId(n)},i.prototype._updateDataLoading=function(n,t){var i,u,r;this._resetLoadingState(n);i=this._inputs;!t&&i&&(u=this._loadingLM=n.createChildLifetime(),r=this._loadingPromise=this.onExpanded(u,i),r&&n.operations.add(r,{blockUi:!0}))},i.prototype._resetLoadingState=function(n){var i=this._loadingPromise,t;i&&(n.operations.remove(i),this._loadingPromise=null);t=this._loadingLM;t&&(t.dispose(),this._loadingLM=null)},i.prototype._createResourceGroupProperty=function(n){var t=this,r=ko.observable(),u=ko.observable(),f=ko.observable(),i;return ko.reactor(n,(function(){var n=t._currentResourceId(),e,i,o;n&&(e=t._editRg(),t._editRg(e?e:k(n,1)),i=gt(n),i.success&&(r(i.resourceGroup),u(l.getBladeSelection("HubsExtension",rt.ResourceMenuBlade,{id:i.resourceGroupId})),t._editRg()&&(o=y.getMoveResourceBlade(n,1).bladeSelection,f(o))))})),i={label:e.resourceGroupPropertyLabel,displayValue:r,bladeSelection:u},i.editBlade={bladeSelection:f,editType:1,displayValue:w.changeResourceGroupLabel,showLink:!0},new o.OpenBladeProperty(i)},i})(o.ViewModel);i.ViewModel=v;tt=(function(t){function i(i,r,u){var e=t.call(this,i,r,u)||this,s,o,c,l;return e._dynamicProperties=ko.observable([]),e._editSub=ko.observable(),e._dependencies={getLocation:function(t){return n.require("FxInternal/ExtensionRuntime").then((function(n){return n.getInnerRuntime().getResource(t,"resourcesummarypartviewmodel")})).then((function(n){return n.locationString}))},getSubscriptionName:function(n){return ht.getSubscriptionInfo(n).then((function(n){return n.displayName}))},getSubscriptionBlade:function(n){return ot.mapResourceIdToDynamicSelection("/subscriptions/"+n)}},s=e._options.supportsResourceMove,e._editSub(s===0||s===3),o=e._createBuiltInProperties(u,r),c=r.staticProperties||[],c.forEach((function(n){if(!n._supportsIsLoading)f.onlyStatic(h)})),l=u,ko.reactor(l,(function(){var n=e._dynamicProperties(),t=e._layoutProperties(o,c,n,r.layout);e._setProperties(t)})),ko.reactor(l,(function(){var t=o[4],i=o[0],r=(!i||i.displayValue())&&(!t||t.value()),n;r&&(n=e._loadingPromise,n?u.operations.update(n,{blockUi:!1}):u.revealContent())})),e}return __extends(i,t),i.prototype.setDynamicProperties=function(n){var i=n||[],r=this._dynamicProperties(),t=[];i.forEach((function(n){!n._supportsIsLoading&&r.includes(n)?f.propertyReused(h):nt(n)&&t.push(n)}));this._dynamicProperties(t)},i.prototype.setProperties=function(){f.setPropertiesNotAvail(h)},i.prototype._createBuiltInProperties=function(t,i){var u=this,s,rt,a,l,v,p,b,ut,d,it;if(i.layout?(i.noResourceGroup&&f.noResourceGroupWithLayout(h),rt=[i.layout.left||[],i.layout.right||[]],s=n.unique(n.mapMany(rt,(function(n){return n.filter((function(n){return typeof n=="number"}))})))):(s=[],i.noResourceGroup||s.push(0),i.status&&s.push(1),s.push(2),s.push(3),s.push(4)),a=function(n){return s.includes(n)},l={},a(0)&&c(l,0,this._ensureRGProperty()),a(1)&&(i.status||f.statusMissing(h),c(l,1,new o.TextProperty({label:e.statusPropertyLabel,value:i.status.value,isLoading:i.status.isLoading}))),a(2)&&(v=ko.observable(),p=ko.observable(),ko.reactor(t,(function(){var t,n;u.collapsed()||(t=u._currentResourceId(),t)&&(p(!0),n=b=u._dependencies.getLocation(t),n.then((function(t){n===b&&v(t)})).catch((function(i){n===b&&(r.warning("Failed to get location for resource id '"+t+"'. '"+i+"'"),v(e.notAvailable))})).finally((function(){n===b&&p(!1)})))})),ut=ko.computed(t,(function(){return i.location&&i.location()||v()})),c(l,2,new o.TextProperty({label:e.locationPropertyLabel,value:ut,isLoading:p}))),d=ko.computed(t,(function(){var n=u._currentResourceId(),t;if(!n)return"";try{t=kt(n).subscription}catch(i){r.error("Failed to get subscription name from the resource id '"+n+"'.")}return t})),a(4)&&c(l,4,new o.TextProperty(e.subscriptionIdPropertyLabel,d)),a(3)){var nt=ko.observable(),tt=ko.observable(),g,et=ko.observable(),ot=this._currentResourceId();ko.reactor(t,(function(){var n,t,f,o,i;u.collapsed()||(n=u._currentResourceId(),n&&n!==ot)&&(ot=n,t=d(),t)&&(f=u._editSub(),u._editSub(f?f:k(n,0)),u._editSub()&&(o=y.getMoveResourceBlade(n,0).bladeSelection,et(o)),tt(!0),i=g=u._dependencies.getSubscriptionName(t).then((function(n){i===g&&nt(n)})).catch((function(){i===g&&(r.error("Failed to get the subscription name for the subscription id '"+t+"'."),nt(e.notAvailable))})).finally((function(){i===g&&tt(!1)})))}));it={label:e.subscriptionNamePropertyLabel,displayValue:nt,resolveBlade:function(){var n=d(),t;return n||(t=u._currentResourceId(),f.noSubId(t)),u._dependencies.getSubscriptionBlade(n)},isLoading:tt};it.editBlade={bladeSelection:et,editType:1,displayValue:w.changeSubscriptionLabel,showLink:!0};c(l,3,new ft.OpenBladeAsyncProperty(it))}return l},i.prototype._layoutProperties=function(n,t,i,r){var u=[],e=0,h,c,s,o,y;if(r){h=r.left||[];c=r.right||[];(h.length>5||c.length+i.length>5)&&f.maxColumns(5);for(var l=0,v=0,p=function(r){var o,y=r?h:c,s;(r?l:v)<y.length?(s=y[r?l++:v++],typeof s=="number"?o=n[s]:(o=s,t.includes(o)||f.missingProperties())):o=!r&&e<i.length?i[e++]:a;u.push(o)},w=0;w++<5&&(l<h.length||v<c.length||e<i.length);)p(!0),p(!1)}else for(t.length+i.length>5&&f.maxProperties(5),s=0,o=function(){var n;n=s<t.length?t[s++]:e<i.length?i[e++]:a;u.push(n)},this._options.noResourceGroup||(u.push(n[0]),o()),y=n[1],y&&(u.push(y),o()),u.push(n[2]),o(),u.push(n[3]),o(),u.push(n[4]),o();s+e<5&&(s<t.length||e<i.length);)u.push(a),o();return u},i.prototype._startRebind=function(n){t.prototype._startRebind.call(this,n);this._dynamicProperties([])},i})(v);i.ViewModel2=tt})(r=i.ResourceSummary||(i.ResourceSummary={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){function t(n,t){var i=n._dependencies;t.getLocation&&(i.getLocation=t.getLocation);t.getSubscriptionName&&(i.getSubscriptionName=t.getSubscriptionName);t.getSubscriptionBlade&&(i.getSubscriptionBlade=t.getSubscriptionBlade)}n.setDependencies=t})(t=n.ResourceSummary||(n.ResourceSummary={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var u=n.Services,f=(function(){function n(){var n=this;this.initialized=ko.observable(!1);this.results=ko.observableArray();this.canceled=ko.observable(!1);this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this.canceled.subscribe(this._lifetimeManager,(function(t){t&&(n.results([]),n._releaseDataSub())}))}return n.prototype.dispose=function(){this._lifetimeManager.dispose()},n.prototype.onInputsSet=function(){return this._releaseDataSub(),this.initialized(!1),this.canceled(!1),this.results([]),null},n.prototype.connectDataSource=function(n,t){this._releaseDataSub();var i=this._dataLifetime=this._lifetimeManager.createChildLifetime();return u.DataSetAssetExpansionMapper.connectDataSet(i,n,this.results,t),this.initialized(!0),null},n.prototype._releaseDataSub=function(){this._dataLifetime&&this._dataLifetime.dispose()},n})(),i,r;t.Service=f;i=(function(){function n(){}return n.serialize=function(n,t,i){t===void 0&&(t=!1);i===void 0&&(i=null);var r={browseCriteria:n,newBrowse:t,useBrowseKey:i};return JSON.stringify(r)},n.deserialize=function(n){var t=JSON.parse(n);return{browseCriteria:t.browseCriteria,newBrowse:t.newBrowse,useBrowseKey:t.useBrowseKey}},n})();t.BrowseSerializer=i;r=(function(){function n(n,t){this.initialized=ko.observable(!1);this.results=ko.observableArray();this.browseCriteria=n;this.results(t)}return n})();t.ResultsViewModel=r})(i=t.Browse||(t.Browse={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){function u(n,t,r,u){var e=function(){return i.getAssetSelection(r,u,{id:t})},o=function(){var u=n.bladeName();return u?i.getBladeSelection(n.extensionName()||r,u,{id:t}):e()},f;return n&&(f=void 0,typeof n.onInputsSet=="function"&&(f=n.onInputsSet({assetId:t})),f)?f.then((function(){return o()})):Q(e())}var i=n.ViewModels,r=(function(){function n(){this.extensionName=ko.observable(null);this.bladeName=ko.observable(null)}return n})();t.Service=r;t.prepareDynamicSelection=u})(i=t.DynamicBlade||(t.DynamicBlade={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=n.Services.AssetExpansion,r=n.Resources.Strings.Services.AssetHandler,f=(function(){function n(){}return Object.defineProperty(n,"base",{get:function(){return[{id:"title",name:ko.observable(r.titleGridColumn),itemKey:i.titlePropertyName},{id:"assetType",name:ko.observable(r.assetTypeGridColumn),itemKey:i.assetTypeStringPropertyName},]},enumerable:!1,configurable:!0}),n})(),u;t.BaseColumns=f;u=(function(){function n(){this.includeAssetIcon=ko.observable(!0);this.columns=ko.observable([])}return n})();t.Service=u})(i=t.GridColumns||(t.GridColumns={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=(function(){function n(){this.properties=ko.observableArray()}return n.prototype.setProperty=function(n,t){var i=this.properties,r=i().some((function(i){return i.property===n?(i.value=t,!0):!1}));r||i.push({property:n,value:t})},n})();n.Service=t})(t=n.PropertyProvider||(n.PropertyProvider={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=(function(){function n(){this.actions=ko.observableArray()}return n})();n.Service=t})(t=n.Security||(n.Security={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){function r(n,t,r){i().then((function(i){i.notifyAssetDeleted(n,t,r)}))}function u(n){i().then((function(t){t.notifyAssetDeletedBulk(n)}))}function f(n){i().then((function(t){t.notifyResourceDeleted(n)}))}var i=function(){return n.require("FxInternal/ResourceManagement/ArmEvents")};t.notifyAssetDeleted=r;t.notifyAssetDeletedBulk=u;t.notifyResourceDeleted=f})(i=t.AssetManager||(t.AssetManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t=new n.Rpc.ActionEndPointDefinition("OpenFeedbackPane");n.feedbackEndPoint=t})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var u=n.Rpc,i="MsPortalFx.UI.NotificationManager",r=u.ActionEndPointDefinition;t.addNotificationsEndPoint=new r(i+".AddNotifications");t.addNotification2EndPoint=new r(i+".AddNotifications2");t.updateNotificationEndPoint=new r(i+".UpdateNotification")})(t=n.NotificationManager||(n.NotificationManager={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(t){function u(n,t,r){i.updateNotificationEndPoint.invoke(i.rpcClient,"fx",{id:n,propertyName:t,propertyValue:r})}function s(n){return new r(n)}function c(n){e([n])}function e(n){n&&n.length&&i.addNotificationsEndPoint.invoke(i.rpcClient,"fx",{notifications:n})}var o=FxImpl.Rpc,i=FxImpl.NotificationManager,r,h,f;i.rpcClient=o.client;r=(function(){function t(t){this._id=n.getUniqueId();this._name=t}return t.prototype.raise=function(n,t,r){i.addNotification2EndPoint.invoke(i.rpcClient,"fx",{id:this._id,name:this._name,status:n.status,subStatus:n.subStatus,assetId:t,properties:r})},t.prototype.updateCorrelationId=function(n){u(this._id,"correlationId",n)},t.prototype.reportProgress=function(n){u(this._id,"percentComplete",n)},t})();t.Notification2=r;t.create=s,(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(h=t.NotificationState||(t.NotificationState={}));f=(function(){function n(n,t,i,r,u,f,e,o){if(i===undefined)throw new Error("Invalid state arg.");if(f&&!u)throw new Error("Sub id must be specified when operation id is specified.");this.source=n;this.eventType=t;this.state=i;this.timestamp=new Date;this.descriptionArgs=r;this.subscriptionId=u;this.operationId=f;this.percentOperationComplete=e;this.assetId=o}return n})();t.Notification=f;t.addNotification=c;t.addNotifications=e})(i=t.NotificationManager||(t.NotificationManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n.Base,r=(function(){function n(){this.title=ko.observable();this.subtitle=ko.observable();this.description=ko.observable();this.helpUri=ko.observable();this.icon=ko.observable(i.Images.Polychromatic.DefaultBlade());this.titleImageUri=ko.observable();this.statusBar=null;this.contentState=ko.observable(0);this.contentStateDisplayText=ko.observable()}return n})();t.Blade=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){function u(n){return n.startsWith("internal_bladeCall")}var r=1,t,i;n.isBladeCallerInput=u;t=(function(){function n(n,t){var f=this,i,u;if(this.internal_bladeCallId=ko.observable(),this.internal_bladeCallerParams=ko.observable(),i=t.invokeOnSelectable,u=t.invokeOnSelectableSet,!!i==!!u)throw new Error("Specify 'invokeOnSelectable' or 'invokeOnSelectableSet', but not both.");var e=undefined,o=function(n){if(e=(function(){if(i)return i.value();if(u){var n=u.activatedItems();return n?n[0]:null}return null})(),n){f.internal_bladeCallId(undefined);var o=t.supplyParams(e);f.internal_bladeCallerParams(o)}f.internal_bladeCallId(r++)},s=!1;n.onInputsSetCallbacks.add((function(r){var c,l,h;return s||(s=!0,c=function(){if(i)return i.isSelected();if(u){var n=u.activatedItems().length;if(n>1)throw new Error("Multiselection is not supported with parameter collectors.");return n>0}},c()&&o(t.forceInvocation),l=function(){c()&&o(!0)},i?i.isSelected.subscribe(n,l):u&&u.activatedItems.subscribe(n,l)),r&&(h=r.internal_bladeCallerResult,h&&h.bladeCallId===f.internal_bladeCallId()&&(f.internal_bladeCallId(undefined),t.receiveResult(h.result,e),i?i.isSelected(!1):u&&u.activatedItems([]))),null}),!0)}return n})();n.BladeCaller=t;i=(function(){function n(n,t){var i=this,r;this.internal_bladeCallerResult=ko.observable();n.onInputsSetCallbacks.add((function(n){if(i._bladeCallId||(i._bladeCallId=n.internal_bladeCallId),n.internal_bladeCallerParams!==undefined){var u=ko.toJSON(n.internal_bladeCallerParams);u!==r&&i._bladeCallId&&i._bladeCallId===n.internal_bladeCallId&&(r=u,t.receiveParams(n.internal_bladeCallerParams))}return null}))}return n.prototype.sendResult=function(n){this.internal_bladeCallerResult({bladeCallId:this._bladeCallId,result:n})},n})();n.BladeCallable=i})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var u=n.ViewModels,f=n.Base,e=(function(){function n(n,t){this.signature="FxAppBlade";this.kind=n;this.data=t}return n})(),i,r;t.Message=e;i=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.controlIsReady=ko.observable(!1),r.controlType=113,r.src=i.src,r.postMessage=i.postMessage||ko.observable(),r.receiveMessage=i.receiveMessage||ko.observable(),r}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);r=(function(n){function t(t,r){var u=n.call(this)||this,f;return u._handlers={},u._queue=[],f=u.iFrame=new i(t,{src:r.source}),f.controlIsReady.subscribe(t,(function(n){n&&u._queue.forEach((function(n){u.iFrame.postMessage(n)}))})),f.receiveMessage.subscribe(t,(function(n){var t=u._handlers[n.kind];t&&t.fire(n.data)})),u}return __extends(t,n),t.prototype.postMessage=function(n){var t=this.iFrame;t.controlIsReady()?t.postMessage(n):this._queue.push(n)},t.prototype.on=function(n,t){var r=this._handlers,i=r[n];i||(i=r[n]=new f.Callbacks);i.add(t)},t.prototype.off=function(n,t){var i=this._handlers[n];i&&i.remove(t)},t})(u.Blade);t.ViewModel=r})(i=t.AppBlade||(t.AppBlade={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var r=n.UI,u=r.NotificationManager,i=n.ViewModels,e=i.Controls,o=n.Resources.Strings,f=new n.Base.Diagnostics.Log("MsPortalFx.ViewModels.DeleteAssetConfirmation"),s=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.data=ko.observable(),t}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.data;return this.data(t),this.title(this._onGetTitle(t)),Q.resolve(null)},t.prototype._onGetTitle=function(n){return o.DeleteAssetConfirmation.bladeTitle.format(n.assetName)},t})(i.Blade),h=(function(t){function i(i,e){var o=t.call(this,i)||this;return o.data=ko.observable(),o.result=ko.observable(0),o._container=null,o._assetType=null,o._data=null,o._selectedItems=null,o._previousUserActionId="",o._container=i,o._assetType=e,ko.computed(i,(function(){var n=o.data();o.enabled(o._onValidateCommand(n))})),o.result.subscribe(i,(function(n){if(n===1)r.AssetManager.notifyAssetDeleted(o._assetType,o._data.assetId);else if(n===2){var t=o._onSendErrorNotification(o._data,o._selectedItems);t.state=u.NotificationState.Error;u.addNotification(t)}})),o.enabled(!1),o.icon(n.Base.Images.Delete()),n.isFeatureEnabled("deleteobsoletecontrols")&&f.error(new Error("MsPortalFx.ViewModels.DeleteAssetConfirmation.CommandViewModel is obsolete. Use Fx/Controls/ instead of MsPortalFx controls.")),o}return __extends(i,t),i.prototype.onInputsSet=function(n){var i=n.data,r=n.selectedItems,t=n.actionBarOutput;return this.data(i),t&&((t.action===4||t.action===5)&&this._container.selectable.isSelected(!1),t.action===4&&t.userActionId&&this._previousUserActionId!==t.userActionId&&(this._previousUserActionId=t.userActionId,this._data=i,this._selectedItems=r,this._onDelete(i,r))),Q.resolve(null)},i.prototype._onValidateCommand=function(t){return!n.isNullOrUndefined(t)},i})(i.OpenBladeCommand),c=(function(t){function i(i,r){var u=t.call(this,i,r)||this;return u.data=ko.observable(),u._data=null,u.data.subscribe(u.lifetimeManager,(function(t){!n.deepEquals(u._data,t)&&u._options.grid&&(u._onPopulateGrid(t),u._selectAll());u._data=t})),n.isFeatureEnabled("deleteobsoletecontrols")&&f.error(new Error("MsPortalFx.ViewModels.DeleteAssetConfirmation.PartViewModel is obsolete. Use Fx/Controls/ instead of MsPortalFx controls.")),u}return __extends(i,t),i.prototype.onInputsSet=function(t){var i=t.data;return this._assetName(i.assetName),n.isNullOrWhiteSpace(i.assetTypeDisplayName)||this._assetTypeDisplayName(i.assetTypeDisplayName),this.data(i),Q.resolve(null)},i})(e.DeleteAssetConfirmation.ViewModel);t.BladeViewModel=s;t.CommandViewModel=h;t.PartViewModel=c})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=n,r=i.UI.NotificationManager,u=i.ViewModels,f=u.Dialogs,e=i.Resources.Strings.DeleteCommand,o=e.Confirmation,s=e.Failure,h=(function(n){function t(t,u){var e=n.call(this)||this;return e._assetType=null,e._confirmationDialog=null,e._errorDialog=null,e._data=null,e._assetType=u,e.data=ko.observable(),e.result=ko.observable(0),ko.computed(t,(function(){var n=e.data(),t=e._onValidateCommand(n);e.enabled(t)})),e.result.subscribe(t,(function(n){var u=e._data,t;n===1?(i.UI.AssetManager.notifyAssetDeleted(e._assetType,e._onGetAssetId(u)),e.status(0)):n===2&&(t=e._onSendErrorNotification(u),t&&(t.state=r.NotificationState.Error,r.addNotification(t)),setTimeout((function(){var n=e._onShowError(u);e._errorDialog=new f.MessageBox(n.title,n.message,3);e.dialog(e._errorDialog)}),100))})),e.icon(i.Base.Images.Delete()),e}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.data(n.data),Q.resolve(null)},t.prototype.execute=function(){this._data=this.data();var n=this._onShowConfirmation(this._data);this._confirmationDialog=new f.MessageBox(n.title,n.message,4);this.dialog(this._confirmationDialog)},t.prototype.dialogClick=function(n){var t=this.dialog();t===this._confirmationDialog&&n===6||t===this._errorDialog&&n===5?(this.result(0),this._onDelete(this._data)):this.status(0)},t.prototype._onShowConfirmation=function(){return{title:o.title,message:o.message}},t.prototype._onShowError=function(){return{title:s.title,message:s.message}},t.prototype._onValidateCommand=function(n){return!i.isNullOrUndefined(n)},t})(u.Command);t.DeleteAssetCommand=h})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i=(function(){function t(t){this.lifetime=t.lifetime;this.asyncStore=t.asyncStore;this.functionProxy=t.functionProxy;var i=this.functionProxy,r=function(t){return function(i){return n.require("Fx/Ajax").then((function(n){return n[t](i)}))}};i.register("___ajax___getEndpoints",r("getEndpoints"));i.register("___ajax___batch",r("batch"));i.register("___ajax___batchMultiple",r("batchMultiple"));i.register("___ajax___ajax",(function(n){return r("ajax")(n).catch((function(n){throw{textStatus:n.textStatus,data:n.data,message:n.message,errorThrown:n.errorThrown,responseText:n.jqXHR.responseText,responseJSON:n.jqXHR.responseJSON};}))}));i.register("___resources___getContentUri",(function(t){return n.Base.Resources.getContentUri(t,!0)}));i.register("___resources___getAbsoluteUri",(function(t){return n.Base.Resources.getAbsoluteUri(t)}));i.register("___experiments___getAssignments",(function(){return t.getExperimentation().then((function(n){return n.getAssignments().then((function(n){return n._data}))})).catch((function(){return{flights:[],variables:{},assignmentContext:""}}))}));i.register("___runtime___waitForExtensionIdle",(function(i){FxImpl.Extension.waitForExtensionIdleEndPoint.invoke(t.diContainer.get(FxImpl.Rpc.Client),n.getEnvironmentValue("extensionName"),i)}));i.register("___runtime___onInteractive",(function(i){FxImpl.Extension.onReactViewInteractiveEndPoint.invoke(t.diContainer.get(FxImpl.Rpc.Client),n.getEnvironmentValue("extensionName"),i)}));i.register("___ajax___trace",(function(n){FxImpl.NetDiagnostics.traceReactViewAjax(n)}))}return t})();t.React=i})(t=n.Models||(n.Models={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(i){function e(n){return typeof n=="function"}var a=n.Base,y=n.Data,p=n.ViewModels,w=n.Services.Gallery,o=FxImpl.ProvisioningTelemetry,b=n.getUniqueId,f,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,h;(function(t){function r(){if(i){var t=n.Helpers.Deferred();return{promise:t.promise(),resolve:function(n){t.resolve(n)},reject:function(n){t.reject(n)}}}return Q.defer()}function u(t){if(i){var r=n.Helpers.Deferred();return r.resolve(t),r.promise()}return Q.resolve(t)}function f(t){if(i){var r=n.Helpers.Deferred();return r.reject(t),r.promise()}return Q.reject(t)}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.defer=r;t.resolve=u;t.reject=f})(f||(f={}));var ct=new a.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollectionV2/Internal/ParameterCollectorImpl"),c="enableProvisioning",k=w.Constants,v=k.GalleryOptionsKey,lt=k.GalleryParametersKey,l=new a.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollectionV2/Internal/ProvisionerImpl"),s="parameterCollection",d="preserveJourney",at="previousOutputParameters",vt=new a.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollectionV2/Internal/ParameterProviderImpl"),u="",yt={lifetimeManagerMissing:u,inputsMissing:u,overrideInputParametersMissing:u,dataModelTypeNotRegistered:u,provisionerMissing:u,provBindingInternalsMissing:u,provisioningEntityDisabled:u,insufficientInformation:u,provisionerBindingMissing:u,editScopeImplMissing:u,collectorCallbacksMissing:u,providerAlreadyRegistered:u,noCallbacks:u,overrideOutputParametersRejected:u,optionsMissing:u,privateFpTcBIMissing:u,privatePcPrBIMissing:u},r=FxImpl.getErrorMap(yt);g=(function(){function n(){}return n.createEditScope=function(n,t,i,r){return new nt(n,t,i,r)},n})();i.EditScopeFactory=g;nt=(function(){function i(n,t,i,u){this._editScopeCache=null;this._editScopeView=null;this._editScopeFetchPromise=null;this._haveEditScopeIdPromise=null;this._editScopeId=null;this._initializeMethod=null;this._providerRole=null;this._stubDataModel=null;t||r.lifetimeManagerMissing();this._providerRole=n;this._lifetimeManager=t;u&&(this._editScopeView=u);this._initializeMethod=i}return Object.defineProperty(i.prototype,"editScope",{get:function(){return this._getEditScopeView().editScope},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dataModel",{get:function(){var r=this._getEditScopeView().editScope(),n,i;return!!this._editScopeId&&r?r.root:(n=this.collectorInputs,i=n&&n.inputParameters,i)?(this._stubDataModel||(this._stubDataModel=t.Utilities.parametersToModel(i)),this._stubDataModel):null},enumerable:!1,configurable:!0}),i.prototype.processInputs=function(n){this._editScopeId=n.editScopeId;var t=n.privateFcTpBI,i=t&&t.inputs;return i&&(this.collectorInputs=JSON.parse(JSON.stringify(i))),this._haveEditScopeIdPromise&&this._editScopeId&&this._haveEditScopeIdPromise.resolve(),null},i.prototype.initializeEditScope=function(){this._getEditScopeView()},i.prototype.fetchEditScope=function(){var n=this;return this._editScopeFetchPromise||(this._editScopeFetchPromise=Q(!0).then((function(){return n._editScopeId||(n._haveEditScopeIdPromise=Q.defer()),n._haveEditScopeIdPromise})).then((function(){return n._editScopeView.fetchForExistingData(n._editScopeId,n.collectorInputs)})).then((function(){return e(n._initializeMethod)&&n._initializeMethod()}))),this._editScopeFetchPromise},i.prototype.initializeDataModel=function(n,t){var o=this,i,u,e;return n||r.inputsMissing(),t||r.overrideInputParametersMissing(),i=f.defer(),u=function(t){var r=o._createEditScopeModelFromInputs(t,n.inputMetadata);i.resolve(r)},t?(e=t(n.inputParameters,n.inputMetadata,n.options),e?e.then((function(n){o.collectorInputs=n;u(n.inputParameters)}),(function(){i.reject()})):u(n.inputParameters)):u(n.inputParameters),i.promise},i.prototype.discardEditScopeEdits=function(){var n=this._editScopeCache;n&&n.disposeAndDiscardEdits(this._editScopeId,this._editScopeView)},i.prototype._getEditScopeCache=function(){var i=this,n,t;return this._editScopeCache||(n=this._providerRole,t=n&&n.dataModelTypeName,!t||y.Metadata.getTypeMetadata(t)||r.dataModelTypeNotRegistered(t),this._editScopeCache=new FxImpl.Data.EditScopeCacheOld({entityTypeName:t,supplyExistingData:function(t){return i.initializeDataModel(t,(function(){return n&&e(n.overrideInputParameters)?n.overrideInputParameters(t.inputParameters,t.inputMetadata,t.options):f.resolve(t)}))},serializeParams:function(){return"#"}}),this._lifetimeManager.registerForDispose(this._editScopeCache)),this._editScopeCache},i.prototype._getEditScopeView=function(){return this._editScopeView||(this._editScopeView=this._getEditScopeCache().createView(this._lifetimeManager)),this._editScopeView},i.prototype._createEditScopeModelFromInputs=function(n,t){var u={},i,r,f;for(i in n){u[i]={};for(r in n[i])f=n&&n[i]&&n[i][r]||t&&t[i]&&t[i][r]&&t[i][r].defaultValue||"",u[i][r]=ko.observable(f)}return u},__decorate([__metadata("fx:diagnostics",[require,"EditScopeImpl"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[Object,Object,Function,y.EditScopeView])],i)})();tt=(function(){function n(){this.inputs=ko.observable();this.errors=ko.observable([])}return n})();i.CollectorBindingInternals=tt;it=(function(){function n(){this.outputs=ko.observable();this.commit=ko.observable()}return n})();i.ProviderBindingInternals=it;rt=(function(){function n(){this.triggerProvisioningCommand=ko.observable();this.provisioningPartExtensionName=ko.observable();this.provisioningPartName=ko.observable();this.triggerProvisioningInStartboardPart=ko.observable();this.masterIsProvisioningPart=ko.observable(!1);this.forceDiscardJourney=ko.observable(!0);this.provisioningCommand=ko.observable();this.provisioningAttempted=ko.observable();this.provisioningStarted=ko.observable();this.provisioningCompleted=ko.observable()}return n})();i.ProvisionerBindingInternals=rt;ut=(function(){function n(){}return n.createParameterCollector=function(n,t,i,r,u){return new ft(n,t,i,r,u)},n.confirmCommitSuffix="{0}_confirmCommit",n.tryCommitSuffix="_tryCommit",n})();i.ParameterCollectorFactory=ut;ft=(function(){function t(n,t,i,u,f){this._providerCallbacks={};this._collectorRole=null;this._lifetimeManager=null;this._options=null;this._privateFcTpBI=null;this._providerCommitSignal=null;this._commitSignalReceived=!1;this._providerOutputsCache=null;i||r.provisionerBindingMissing();t||r.editScopeImplMissing();u||r.lifetimeManagerMissing();this._collectorRole=n;this._privateFcTpBI=i;this._lifetimeManager=u;this._options=f||{commitWhenSignaled:!1,commitAction:null};this._providerCommitSignal=ko.observable();this._providerOutputsCache={}}return t.prototype.processInputs=function(n){var t,i;return n.privateFpTcBI&&(t=n.privateFpTcBI.commit),n.fromProviderBindingInternals&&(t=n.fromProviderBindingInternals.commit),!t||t===this._providerCommitSignal()||(i=p.ParameterCollectionV2.Internal.ParameterCollectorFactory.confirmCommitSuffix,t===i.format(this._providerCommitSignal())?this._deferredProviderDismiss&&(this._deferredProviderDismiss.resolve(),this._deferredProviderDismiss=undefined,this._commitSignalReceived=!1):(this.providerOutputs=n.privateFpTcBI&&n.privateFpTcBI.outputs||n.fromProviderBindingInternals&&n.fromProviderBindingInternals.outputs,this._commitSignalReceived=!0,this._providerCommitSignal(t),this._options.commitWhenSignaled&&this.commitProviderOutputs(null).then(this._options.commitAction))),f.resolve()},t.prototype.addProvider=function(n,t){t||r.collectorCallbacksMissing();this._providerCallbacks[n]&&r.providerAlreadyRegistered(n);this._providerCallbacks[n]=t},t.prototype.removeProvider=function(n){this._providerCallbacks[n]&&delete this._providerCallbacks[n]},t.prototype.sendInputsToProvider=function(n){var t;this._providerCallbacks[n]&&e(this._providerCallbacks[n].createInputParameters)?t=this._providerCallbacks[n].createInputParameters():this._collectorRole?t=this._collectorRole.createInputParameters(n):r.noCallbacks(n);n in this._providerOutputsCache&&(s in t.options||(t.options[s]={}),t.options[s][at]=this._providerOutputsCache[n]);this._privateFcTpBI.inputs(t)},t.prototype.commitProviderOutputs=function(n){var t=this,i=Q.defer(),r,f=p.ParameterCollectionV2.Internal.ParameterCollectorFactory.tryCommitSuffix,u=function(){t._commitSignalReceived=!1;t._providerOutputsCache[n]=t.providerOutputs;t._validateProviderOutputs(n).then((function(){return t._saveProviderOutputs(n)})).then((function(){t._providerCommitSignal().indexOf(f)>-1?(t._deferredProviderDismiss=i,t._privateFcTpBI.errors([{errorMessage:null,parameterName:t._providerCommitSignal()}]),t._privateFcTpBI.errors([])):i.resolve()})).catch((function(n){i.reject(n)}));r&&r.dispose()};return this._commitSignalReceived?u():r=this._providerCommitSignal.subscribe(this._lifetimeManager,(function(){u()})),i.promise},t.prototype._validateProviderOutputs=function(n){var r=this,t,u=this._providerCallbacks[n],f=u&&u.validateOutputParameters,o=this.providerOutputs.outputParameters,i=this._collectorRole;return e(f)?t=f(o):i&&e(i.validateOutputParameters)&&(t=i.validateOutputParameters(n,o)),Q(t).then((function(t){if(t&&t.length>0)return r._privateFcTpBI.errors(t),r._privateFcTpBI.errors([]),FxImpl.QReject("Validation End with validation Errors",{data:{id:n,validationErrors:t}})}),(function(t){var i=FxImpl.createError("A rejected promise was returned by the 'validateOutputParameters' method.Resolve with the validation errors instead.",{data:{id:n},innerErrors:t});return ct.error(i),Q.reject(i)}))},t.prototype._saveProviderOutputs=function(t){var i=this;return n.tryImmediateResolve(Q(t),(function(n){var t,u=i._providerCallbacks[n],f=u&&u.saveOutputParameters,o=i.providerOutputs.outputParameters;return e(f)?t=f(o):i._collectorRole?t=i._collectorRole.saveOutputParameters(n,o):r.noCallbacks(n),t?Q(t):void 0}))},t})();et=(function(){function n(){}return n.createParameterProvider=function(n,t){return new ot(n,t)},n})();i.ParameterProviderFactory=et;ot=(function(){function i(n,t){this._editScopeImpl=null;this._providerRole=null;this._lastCommitSignal="";t||r.lifetimeManagerMissing();this._providerRole=n;this._editScopeImpl=t}return i.prototype.processInputs=function(t){var f=null,i,r,e,u;return t.privateFcTpBI&&(i=t.privateFcTpBI.errors,i&&i.length>0&&(r=this._lastCommitSignal,e=n.find(i,(function(n){return n.parameterName===r})),i.length===1&&e&&(u=this._lastDiscardEdits,u&&(u(),this._lastDiscardEdits=undefined),this._privateFpTcBI.commit(r+"_confirmCommit"))),f=this._editScopeImpl.fetchEditScope()),f},i.prototype.getOutputsToCommit=function(){var o=t.Utilities.modelToParameters(this._editScopeImpl.dataModel),i=this._providerRole,n=i&&i.overrideOutputParameters,u;return e(n)?(n=n.bind(i),u=Q.defer(),n(o).then((function(n){u.resolve({outputParameters:n})}),(function(){r.overrideOutputParametersRejected()})),u.promise):f.resolve({outputParameters:o})},i.prototype.commitOutputs=function(n){var i=this,f,e,s;n||r.optionsMissing();n.privateFpTcBI||r.privateFpTcBIMissing();var t=n.provisioner,u=t&&t.provisionOnStartboardPart,o=t&&t.enableProvisioning();o&&u&&!u()&&!n.privatePcPrBI&&r.privatePcPrBIMissing();f=function(){var r=n.privateFpTcBI;i._lastCommitSignal=b()+"_tryCommit";i._lastDiscardEdits=n.discardEdits;i._privateFpTcBI=r;r.commit(undefined);r.outputs(t&&t.mappedOutputs||n.provisionerData);r.commit(i._lastCommitSignal);o&&u&&!u()&&n.privatePcPrBI.provisioningAttempted({commitId:b()})};o?(e=t.executeProvisioning(n.provisionerData,this._editScopeImpl.collectorInputs.options,this._editScopeImpl),s=n.progressAction,s&&s(e),e?e.then((function(){f()}),(function(){vt.error("Provisioning action failed.")})):f()):f()},i})();st=(function(){function n(){}return n.createProvisioner=function(n,t){return new ht(n,t)},n})();i.ProvisionerFactory=st;ht=(function(){function t(t,i){var e=this,u;this.enableProvisioning=ko.observable(!1);this.provisionOnStartboardPart=ko.observable(!0);this._data=null;this._executionDeferred=null;this._options=null;this._privatePcPrBI=null;this._provisionerRole=null;t||r.provisionerMissing();i||r.provBindingInternalsMissing();this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this._provisionerRole=t;this._privatePcPrBI=i;u=this._executionDeferred=f.defer();Q(u.promise).finally((function(){e._lifetimeManager.dispose()})).catch(n.noop)}return t.prototype.processInputs=function(n){var r,t,i;return this.provisionOnStartboardPart(n.provisionOnStartboardPart),this._privatePcPrBI.masterIsProvisioningPart(n.masterIsProvisioningPart),r=n.privateFcTpBI,t=r&&r.inputs,t&&(s in t.options&&t.options[s]&&(i=t.options[s],c in i&&i[c]&&this.enableProvisioning(!0),this.provisionOnStartboardPart(!1),this._privatePcPrBI.masterIsProvisioningPart(!1),d in i&&this._privatePcPrBI.forceDiscardJourney(!i[d])),c in t.options&&t.options[c]&&this.enableProvisioning(!0)),null},t.prototype.executeProvisioning=function(n,t,i){var s=this,o,d,u,y;this.enableProvisioning()||r.provisioningEntityDisabled();var h=this._provisionerRole,g=n,p=e(h.executeCustomProvisioning),b=e(h.mapOutputsForProvisioning);if(p&&b)return u=FxImpl.createError("You can only override 'executeCustomProvisioning' or 'mapOutputsForProvisioning', but not both."),l.error(u),f.reject(u);if(p)return this._traceProvisioningStarted(),o=h.executeCustomProvisioning(n.outputParameters,t),o?o.then((function(){s._traceProvisioningEnded(!0)}),(function(){s._traceProvisioningEnded(!1)})):this._traceProvisioningEnded(undefined),o;var k=t&&t[v],c=k&&k.galleryItem,a=c&&c.categoryIds;return a&&a.length>0&&(d=a.some((function(n){return n.toLowerCase()===w.noSubCreateCategoryId})),d)?(u=FxImpl.createError("No custom provisioning is implemented. The gallery item '"+c.itemDisplayName+"' requires no subscriptions, which requires custom provisioning. You need to override 'executeCustomProvisioning'"),l.error(u),f.reject(u)):b?(i&&i.discardEditScopeEdits(),y=this._provisionerRole.mapOutputsForProvisioning(g.outputParameters,t),Q.promise((function(i,r){y?y.then((function(u){n.outputParameters=u;s._beginExecution(n,t).then(i,r)}),(function(){l.error("The promise returned by 'mapOutputsForProvisioning' should not be rejected.");r(undefined)})):(l.error("'mapOutputsForProvisioning' did not return a promise."),r(undefined))}))):this._beginExecution(n,t)},t.prototype._beginExecution=function(t,i){var u=this,r;return this._data=t,this._options=i,r=this._lifetimeManager,r?(this._privatePcPrBI.provisioningCommand.fxOnce(r,(function(n){n.status(h.Idle);u._executeProvisioning(n)})),this._privatePcPrBI.triggerProvisioningCommand(n.getUniqueId()),this._executionDeferred.promise):f.reject(FxImpl.createError("This ProvisionerV2 object is already disposed."))},t.prototype._executeProvisioning=function(n){var t=this,i;n.status(h.InProgress);this._traceProvisioningStarted();i=n.execute({options:this._options,data:this._data});i?i.then((function(i){t.deploymentResponse=i;t._privatePcPrBI.provisioningStarted({galleryParameters:t._data.outputParameters[lt],configurationOptions:t._options[v],deploymentResponse:i});n.status(h.Succeeded);t._traceProvisioningEnded(!0);t._executionDeferred.resolve()}),(function(){n.status(h.Failed);t._traceProvisioningEnded(!1);t._executionDeferred.reject()})):(this._traceProvisioningEnded(undefined),this._executionDeferred.resolve())},t.prototype._createEventBase=function(){var i=this._options&&this._options[v],n=i&&i.launchingContext,t={name:undefined,data:{oldCreateApi:!0}};return n&&(t.name=n.galleryItemId,t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(){return o.traceProvisioningStarted(this._createEventBase())},t.prototype._traceProvisioningEnded=function(n){var r=this._createEventBase(),t,i;return n===undefined?(t=o.ActionModifier.Succeeded,i=o.ProvisioningStatus.NoPromise):n?(t=o.ActionModifier.Succeeded,i=o.ProvisioningStatus.Resolved):(t=o.ActionModifier.Failed,i=o.ProvisioningStatus.UnknownFailure),r.actionModifier=t,r.data.provisioningStatus=i,o.traceProvisioningEnded(r)},t})(),(function(n){n[n.Idle=0]="Idle";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed"})(h=i.ProvisioningCommandStatus||(i.ProvisioningCommandStatus={}))})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var e=n.Base,u;(function(t){function r(){if(i){var t=n.Helpers.Deferred();return{promise:t.promise(),resolve:function(n){t.resolve(n)},reject:function(n){t.reject(n)}}}return Q.defer()}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.defer=r})(u||(u={}));var f=n.getUniqueId,o=new e.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/ParameterProvider"),i="",s={collectorInputsMissing:i,editScopeIdMissing:i,editScopeViewMissing:i,inputsMissing:i,onInputsReceivedMissing:i,optionsMissing:i,overrideInputParametersMissing:i,privateFpTcBIMissing:i,privatePcPrBIMissing:i,provisionerMissing:i},r=FxImpl.getErrorMap(s),h=(function(){function t(n){FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollection.ProviderBase");n||r.editScopeViewMissing();this._editScopeView=n}return t.prototype.fetchEditScope=function(n,t){var i=this;return this._editScopeFetchPromise||(this._editScopeFetchPromise=this._editScopeView.fetchForExistingData(n,t).finally((function(){i._editScopeFetchPromise=undefined}))),this._editScopeFetchPromise},t.prototype.initializeDataModel=function(n,t){n||r.inputsMissing();t||r.overrideInputParametersMissing();var i=u.defer();return t(n.inputParameters).then((function(t){var f={},r,u,e;for(r in t){f[r]={};for(u in t[r])e=t&&t[r]&&t[r][u]||n.inputMetadata&&n.inputMetadata[r]&&n.inputMetadata[r][u]&&n.inputMetadata[r][u].defaultValue||"",f[r][u]=ko.observable(e)}i.resolve(f)}),(function(){i.reject()})),i.promise},t.prototype.onCollectorBindingsReceived=function(t,i,f){var o=this;t||r.collectorInputsMissing();i||r.editScopeIdMissing();f||r.onInputsReceivedMissing();var s="enableProvisioning",e=u.defer(),h={enableProvisioning:!1,promise:e.promise},c=t.options;return s in c&&c[s]&&(h.enableProvisioning=!0),this.fetchEditScope(i,t).then((function(){try{n.deepEquals(o._previousCollectorInputs,t)||(o._previousCollectorInputs=t,o._onInputsReceivedPromise=f(t));var i=o._onInputsReceivedPromise;i?i.then((function(){e.resolve()}),(function(){e.reject()})).finally((function(){o._onInputsReceivedPromise=undefined})):e.resolve()}catch(r){e.reject()}}),(function(){e.reject()})),h},t.prototype.commitProvider=function(n){var t,i,u,e,s;n||r.optionsMissing();n.privateFpTcBI||r.privateFpTcBIMissing();t=n.provisioner;n.enableProvisioning&&!t&&r.provisionerMissing();i=n.enableProvisioning;!i||n.provisionOnStartboardPart||n.privatePcPrBI||r.privatePcPrBIMissing();u=function(){var u=n.privateFpTcBI,r;u.outputs(t&&t.mappedOutputs||n.provisionerData);n.privateFpTcBI.commit(f());i&&!n.provisionOnStartboardPart&&n.privatePcPrBI.provisioningAttempted({commitId:f()});r=n.discardEdits;r&&r()};i?(e=t.executeProvisioning(n.provisionerData,n.provisionerOptions),s=n.progressAction,s&&s(e),e?e.then((function(){u()}),(function(){o.error("Provisioning action has failed.")})):u()):u()},t})();t.ProviderBase=h})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){function e(n,t,i){var r=n&&n.stepStatuses,u=r&&r.length?r[0].status:0;return{stepId:"NoWizardStep",status:u,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:i}}var o=n.ViewModels,r=i.Internal,u=" is not implemented",f=(function(t){function i(n,i){var u=t.call(this,n)||this;u.parameterCollectionErrors=ko.observable();u.privateFcTpBI=new r.CollectorBindingInternals;u.savedState=ko.observable();u.currentState=ko.observable();u.stepInput=ko.observable();u._collectorBase=null;u._container=null;FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollection.BaseCommandViewModel");var o=u.currentState,f={stepStatuses:[]},s=i&&i.content,h=s&&s.savedState;return h&&(f=h),o(f),n.selectable.isSelected.subscribe(n,(function(){u.savedState(o())})),u.stepInput(e(f,!1,!0)),u._container=n,u._collectorBase=new r.CollectorBase(new r.Provisioner(u)),u.privatePcPrBI=new r.ProvisioningEntityBindingInternals,u.enableProvisioning=ko.observable(!0),u}return __extends(i,t),i.prototype.onInputsSet=function(t){var r=this,i=this.getProviderInputs(null);this.privateFcTpBI.inputs(i);this._collectorBase.onProviderBindingInternalsReceived(t.fromProviderBindingInternals,i&&i.options,t.stepOutput,(function(n,t){return r.onProviderCommit(n,t)}),(function(){r._container.selectable.isSelected(!1)}),n.noop)},i.prototype.getProviderInputs=function(){throw new Error("'getProviderInputs'"+u);},i.prototype.onProviderCommit=function(){throw new Error("'onProviderCommit'"+u);},i})(t.OpenBladeCommand);i.BaseCommandViewModel=f})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var o=n,i=o.ViewModels,c=i.ActionBars.Base,u=t.Internal,v=i.ParameterCollectionV2.Internal,y=o.Helpers,r=HubsExtension.Azure.Pricing.Constants,s=o.deepEquals,h;(function(t){function r(){if(i){var t=n.Helpers.Deferred();return{promise:t.promise(),resolve:function(n){t.resolve(n)},reject:function(n){t.reject(n)}}}return Q.defer()}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.defer=r})(h||(h={}));var l=v.ParameterCollectorFactory,p=l.confirmCommitSuffix,w=l.tryCommitSuffix,a=o.forEachKey,f="",b={multipleSelectors:f,getProviderInputs:f,onProviderCommit:f,onInputsReceived:f,onCommitError:f},e=FxImpl.getErrorMap(b),k=(function(f){function o(n,t,e){var o=f.call(this,n)||this,h;o.editScopeId=ko.observable();o.actionInProgress=ko.observable(!1);o.eula=ko.observable("");o.secondaryLinkDisplayText=ko.observable("");o.galleryPricingInfo=ko.observable();o._providerBase=null;o._actionBarOutput=null;o._actionInProgressLock=!1;o._baseCollectorInputs=null;o._baseFormContainer=null;o._baseProviderCommit=null;o._baseProviderOutputs=null;o._deferredProviderDismiss=null;o._hotSpotItems=ko.observableArray();o._initialSelectedValue=null;o._previousOutput=null;o._provisionerInstance=null;o._savedProviderOutputs=null;o._selectableMap={};o._galleryItem=ko.observable(null);o._editScopeCache=null;o._editScopeView=null;FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollection.BaseFormViewModel");h=o._ltm;o._editScopeCache=new FxImpl.Data.EditScopeCacheOld({entityTypeName:e,supplyExistingData:function(n){return o._providerBase.initializeDataModel(n,(function(n){return o.overrideInputParameters(n)}))},serializeParams:function(){return"#"}});h.registerForDispose(o._editScopeCache);o._editScopeView=o._editScopeCache.createView(h);o._providerBase=new u.ProviderBase(o._editScopeView);o.privateFcTpBI=new u.CollectorBindingInternals;o.privateFpTcBI=new u.ProviderBindingInternals;o.privatePcPrBI=new u.ProvisioningEntityBindingInternals;o.editScope=o._editScopeView.editScope;o.enableProvisioning=ko.observable(!1);o.provisionOnStartboardPart=ko.observable(!0);o.parameterCollectionErrors=ko.observable();o.stepInput=ko.observable();o.stepOutput=ko.observable();var l=t&&t.content||{},a=l.selectable||{},v=l.secondaryLinkSelectable||{};return o._initialSelectedValue=a.selectedValue,o.selectable=new i.Selectable({allowUnselect:!1,selectedValue:o._initialSelectedValue,isSelected:a.isSelected,isActivated:a.isActivated}),h.registerForDispose(o.selectable),o.secondaryLinkSelectable=new i.Selectable({allowUnselect:!1,selectedValue:v.selectedValue,isSelected:v.isSelected,isActivated:v.isActivated}),h.registerForDispose(o.secondaryLinkSelectable),o.hotSpot=new i.SelectableSet(o._hotSpotItems,function(n,t){return n.selectedValue()===t},function(n){return n.selectedValue()},l.hotSpot),h.registerForDispose(o.hotSpot),o._actionBarOutput=ko.observable(),o._baseProviderCommit=ko.observable(),o._baseFormContainer=n,o._provisionerInstance=new u.Provisioner(o),o._savedProviderOutputs={},o._actionBarOutput.subscribe(h,(function(n){var u,f,t;c.isCompleted(n)&&(u=function(){o.actionInProgress(!0);var n=o.getOutputsToCommit(),t=function(){var n=o._editScopeCache;n.disposeAndDiscardEdits(o.editScopeId(),o._editScopeView)};o._providerBase.commitProvider({enableProvisioning:o.enableProvisioning(),provisioner:o._provisionerInstance,provisionerData:n,provisionerOptions:o._baseCollectorInputs.options,progressAction:function(n){o._baseFormContainer.operations.add(n,{blockUi:!0})},discardEdits:t,privateFpTcBI:o.privateFpTcBI,privatePcPrBI:o.privatePcPrBI,provisionOnStartboardPart:o.provisionOnStartboardPart()})},n.actionButtonClicked&&o.secondaryLinkSelectable.isSelected()?o.secondaryLinkSelectable.selectedValue().detailBlade===r.LegalTermsBlade.bladeName?(o._actionInProgressLock=!0,o.secondaryLinkSelectable.isSelected(!1),u()):o.secondaryLinkSelectable.isSelected(!1):(f=o.galleryPricingInfo(),t=o._galleryItem(),o.enableProvisioning()&&f&&t&&(t.products.length>0||t.productsWithNoPricing.length>0)?(o.secondaryLinkSelectable.selectedValue(i.getBladeSelection(r.LegalTermsBlade.bladeExtension,r.LegalTermsBlade.bladeName,{galleryPricingInfo:f,galleryItem:t})),o.actionInProgress(!0),o.secondaryLinkSelectable.isSelected(!0)):u()))})),o.selectable.isSelected.subscribe(h,(function(n){n||o._unselectFields()})),o.secondaryLinkSelectable.isSelected.subscribe(h,(function(n){n||o._actionInProgressLock||o.actionInProgress(!1)})),o.selectable.value.subscribe(h,(function(n){o._resetSelectionStateOfSelectors(n)})),o.parameterCollectionErrors.subscribe(h,(function(n){n&&(o.privateFcTpBI.errors(n),o.privateFcTpBI.errors([]))})),o.stepOutput.subscribe(h,(function(n){var t=o._previousOutput;o._previousOutput=n;!s(t,n)&&c.isCompleted(n)&&o._onSelectorComplete(n.stepId).then((function(){o.selectable.isSelected(!1)}))})),ko.computed(h,(function(){o.galleryPricingInfo()&&o._galleryItem()?o.secondaryLinkDisplayText(r.PricingSummaryBlade.displayText):o.secondaryLinkDisplayText(null)})),o}return __extends(o,f),Object.defineProperty(o.prototype,"dataModel",{get:function(){var n=this.editScope();return n&&n.root},enumerable:!1,configurable:!0}),o.prototype.onInputsSet=function(n){var k=this,y=null,e,u,l,o,h,f,a,v,t,c;if(this.editScopeId(n.editScopeId),this.provisionOnStartboardPart(n.provisionOnStartboardPart),this.privatePcPrBI.masterIsProvisioningPart(n.masterIsProvisioningPart),e=n.privateFcTpBI,e){if(u=e.inputs,u){this._baseCollectorInputs=u;l=this._providerBase.onCollectorBindingsReceived(u,this.editScopeId(),(function(n){return k.onInputsReceived(n)}));this.enableProvisioning(l.enableProvisioning);y=l.promise;var w=u.options,b=w&&w.galleryOptions,d=b&&b.galleryItem;this._galleryItem(d||null)}if(o=e.errors,o&&o.length>0){this.onCommitError(o);this.onCommitError([])}}return h=n.privateFpTcBI,h&&(f=h.commit,!f||f===this._baseProviderCommit()||(f===p.format(this._baseProviderCommit())?(a=this._deferredProviderDismiss,a&&(a.resolve(),this._deferredProviderDismiss=undefined)):(this._baseProviderOutputs=h.outputs,this._baseProviderCommit(f)))),v=n.stepOutput,v&&this.stepOutput(v),t=n.output,t&&(c=t&&t.secondaryLinkClicked,!c||c!==this.secondaryLinkDisplayText()||this._previousSecondaryLinkCommitId===t.commitId||(this._previousSecondaryLinkCommitId=t.commitId,this.actionInProgress(!1),this.secondaryLinkSelectable.selectedValue(i.getBladeSelection(r.PricingSummaryBlade.bladeExtension,r.PricingSummaryBlade.bladeName,{galleryPricingInfo:this.galleryPricingInfo(),galleryItem:this._galleryItem()})),this.secondaryLinkSelectable.isSelected(!0)),!t.status||c||s(t,this._actionBarOutput())||this._actionBarOutput(t)),y},o.prototype.registerHotSpot=function(t){var i=t.selectable||t,r;this._hotSpotItems.push(i);r=n.find(this.hotSpot.selectableItems(),(function(n){return n.data===i}));ko.utils.twoWayBinding(this._ltm,i.isSelected,r.isActivated)},o.prototype.registerSelector=function(n,t){var r=this,i;this._selectableMap[n]&&e.multipleSelectors();i=t.selectable;this._selectableMap[n]=i;this._initialSelectedValue!==undefined&&s(this._initialSelectedValue,i.selectedValue())&&i.isSelected(this.selectable.isSelected());i.isSelected.subscribe(this._ltm,(function(t){t&&(r._unselectFields(i),r.selectable.selectedValue(i.selectedValue()),r.stepInput({stepId:n,status:0,isLastStep:!1}),r.selectable.isSelected(!0),r._onSelectorLoad(n))}))},o.prototype.overrideInputParameters=function(n){return y.resolve(n)},o.prototype.getProviderInputs=function(){return e.getProviderInputs()},o.prototype.onProviderCommit=function(){return e.onProviderCommit()},o.prototype.onInputsReceived=function(){return e.onInputsReceived()},o.prototype.getOutputsToCommit=function(){var n=t.Models.modelToParameters(this.dataModel);return{outputParameters:n}},o.prototype.onCommitError=function(){return e.onCommitError()},o.prototype._unselectFields=function(n){a(this._selectableMap,(function(t,i){n&&n===i||i.isSelected(!1)}))},o.prototype._resetSelectionStateOfSelectors=function(n){var t,i;(a(this._selectableMap,(function(r,u){u.isSelected()&&(i=u);s(u.selectedValue(),n)&&(t=u)})),t!==i)&&(i&&i.isSelected(!1),t&&t.isSelected(!0))},o.prototype._onSelectorLoad=function(n){var i=this,t=h.defer();return this._providerBase.fetchEditScope(this.editScopeId(),this._baseCollectorInputs).then((function(){var r=i.getProviderInputs(n);i.privateFcTpBI.inputs(r);t.resolve()}),(function(){t.reject()})),t.promise},o.prototype._onSelectorComplete=function(n){var t=this,i=h.defer(),r=this._ltm.createChildLifetime();return this._baseProviderCommit.subscribe(r,(function(){t._savedProviderOutputs[n]=t._baseProviderOutputs;t.onProviderCommit(n,t._baseProviderOutputs).then((function(n){n?t._baseProviderCommit().indexOf(w)>-1?(t._deferredProviderDismiss=i,t.privateFcTpBI.errors([{errorMessage:null,parameterName:t._baseProviderCommit()}]),t.privateFcTpBI.errors([])):i.resolve():i.reject()}));r.dispose()})),i.promise},__decorate([__metadata("fx:diagnostics",[require,"BaseFormViewModel"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[i.PartContainerContract,Object,String])],o)})(i.Forms.Form.ViewModel);t.BaseFormViewModel=k})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var c=n.ViewModels,o=c.Controls,f=o.Lists.Grid,a=c.Forms.Selector.ViewModel,s=i.Internal,l=n.getUniqueId,h;(function(t){function r(t){if(i){var r=n.Helpers.Deferred();return r.resolve(t),r.promise()}return Q.resolve(t)}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.resolve=r})(h||(h={}));var e="infoBalloon",r="",v={getMatchingItemIndex:r,getColumns:r,itemMatchesSelection:r,createSelection:r,onProviderCommit:r,onInputsReceived:r,onCommitError:r},u=FxImpl.getErrorMap(v),y=(function(r){function c(i,u,e,o,h){var c,l,v,a,y;return o===void 0&&(o=!1),h===void 0&&(h=null),c=r.call(this,i)||this,c.editScopeId=ko.observable(),c.triggerSelectAction=ko.observable(""),c.multiselectEnabled=ko.observable(!1),c.valid=ko.observable(!1),c.showCreateAction=ko.observable(!1),c.eula=ko.observable(""),c.filterPickerItemsParameterName="filterPickerItems",c.pickerItemsParameterName="pickerItems",c.listHeader=ko.observable(),c.listSubHeader=ko.observable(),c.isCreateActionResult=ko.observable(!1),c._createActionOutputs=null,c.pickerActivationBladeOpener=ko.observable(undefined),c.createActionBladeOpener=ko.observable(undefined),c.itemSelectedByDefault=ko.observable(),c.filterItems=ko.observable(),c._filteredItems=[],c._editScopeCache=null,c._editScopeView=null,c._providerBase=null,c._pickerInputCollections=null,c._createActionProviderCommited=null,c._actionBarOutput=null,c._createSelectorField=null,c._selectorOriginalValue=ko.observable(),c._selectorEditableValue=ko.observable(),c._createSelectorBladeName=null,c._createSelectorBladeExtension=null,c._throttleUnselectSelectorFieldHandle=null,c.filters=ko.observableArray(),FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollection.BasePickerListViewModel"),l=c.lifetimeManager,c.controlType=80,c.multiselectEnabled(o),v=c._editScopeCache=new FxImpl.Data.EditScopeCacheOld({supplyExistingData:function(n){return c._providerBase.initializeDataModel(n,(function(n){return c.overrideInputParameters(n)}))},serializeParams:function(){return"#"}}),l.registerForDispose(v),c._editScopeView=v.createView(l),c._providerBase=new s.ProviderBase(c._editScopeView),c.privateFcTpBI=new s.CollectorBindingInternals,c.privateFpTcBI=new s.ProviderBindingInternals,c.parameterCollectionErrors=ko.observable(),c.stepInput=ko.observable(),c.createActionSelectorField=ko.observable(),c._createActionProviderCommited=!1,c.isCreateActionResult(!1),c._actionBarOutput=ko.observable(),a=f.Extensions.SelectableRow,y=c._getGridExtensionOptions(),h?(a=a|f.Extensions.Pageable,n.extend(y,{pageable:{type:f.PageableType.Sequential,dataNavigator:h}}),c.itemsGridViewModel=new f.ViewModel(l,null,a,y)):c.itemsGridViewModel=new f.ViewModel(l,e,a,y),c.itemsGridViewModel.showHeader=!0,c.itemsGridViewModel.columns=c.getColumns(),l.registerForDispose(c.itemsGridViewModel),c._initializeCreateActionSelector(l),c._actionBarOutput.subscribe(l,(function(n){if(t.ActionBars.Base.isCompleted(n)){var r=c.getOutputsToCommit(),u=function(){var n=v;n.disposeAndDiscardEdits(c.editScopeId(),c._editScopeView)};setTimeout((function(){c._providerBase.commitProvider({enableProvisioning:!1,provisioner:null,provisionerData:r,provisionerOptions:c._pickerInputCollections.options,progressAction:function(n){i.operations.add(n,{blockUi:!0})},discardEdits:u,privateFpTcBI:c.privateFpTcBI})}),100)}})),c.itemSelectedByDefault.subscribe(l,(function(n){if(c.multiselectEnabled()&&Array.isArray(n))n.forEach((function(n){var t=c.getMatchingItemIndex(n);c._selectGridItem(t)}));else if(n){var t=c.getMatchingItemIndex(n);c._selectGridItem(t)}})),c.filterItems.subscribe(l,(function(n){c._filterGridItems(n)})),c.itemsGridViewModel.items.subscribe(l,(function(n){var t,i;c._filterGridItems(c.filterItems());c._runFilters(n);h&&(t=c.itemSelectedByDefault()||[],t&&Array.isArray(t)?t.forEach((function(n){var t=c.getMatchingItemIndex(n);c._selectGridItem(t)})):t&&(i=c.getMatchingItemIndex(t),c._selectGridItem(i)))})),c.parameterCollectionErrors.subscribe(l,(function(n){c.privateFcTpBI.errors(n)})),c.itemsGridViewModel.selectableData.selectedItems.subscribe(l,(function(n){c._onSelectedItemsChanged(n)})),c.createActionBladeOpener.subscribe(l,(function(n){n?(c._clearThrottleUnselectSelectorFieldHandle(),c.itemsGridViewModel.selectableData.selectedItems([]),c.createActionSelectorField().selectable.isSelected(!0)):c._closeBlade(c.itemsGridViewModel.selectableData.selectedItems())})),c}return __extends(c,r),c.prototype.initializeCreateSelector=function(n,t,i,r,u){this._selectorOriginalValue(n);this._selectorEditableValue(n);this._createSelectorField.label(t);this._createSelectorBladeName=i;this._createSelectorBladeExtension=r;u&&ko.utils.arrayPushAll(this._createSelectorField.validations,u)},c.prototype.onInputsSet=function(t){var i=this,e=null,o,r,f,u;if(this.editScopeId(t.editScopeId),t&&t.privateFcTpBI&&t.privateFcTpBI.inputs&&(this._pickerInputCollections=t.privateFcTpBI.inputs,this.stepInput(t.stepInput),o=this._providerBase.onCollectorBindingsReceived(t.privateFcTpBI.inputs,this.editScopeId(),(function(n){return i.onInputsReceived(n)})),e=o.promise),t&&t.privateFcTpBI&&t.privateFcTpBI.errors&&t.privateFcTpBI.errors.length>0)this.onCommitError(t.privateFcTpBI.errors);return r=t.privateFpTcBI,f=r&&r.commit,f&&f!==this._createActionProviderCommited&&(this.onProviderCommit(null,r.outputs).then((function(n){n&&(i.isCreateActionResult(!0),i.createActionSelectorField().selectable.isSelected(!1),i._createActionOutputs=r.outputs,i.itemsGridViewModel.selectableData.selectedItems([]),i.valid(!0),i.triggerSelectAction(l()))})),this._createActionProviderCommited=f),u=t.output,u&&u.status&&!n.deepEquals(u,this._actionBarOutput())&&this._actionBarOutput(u),e},c.prototype.overrideInputParameters=function(n){return h.resolve(n)},c.prototype.getParameter=function(n,t,i){return t in i&&n in i[t]?i[t][n]:null},c.prototype.dispose=function(){this._clearThrottleUnselectSelectorFieldHandle();r.prototype.dispose.call(this)},Object.defineProperty(c.prototype,"dataModel",{get:function(){var n=this._editScopeView.editScope();if(n&&!n.isDisposed)return n.root},enumerable:!1,configurable:!0}),c.prototype.getMatchingItemIndex=function(){return u.getMatchingItemIndex()},c.prototype.getColumns=function(){return u.getColumns()},c.prototype.itemMatchesSelection=function(){return u.itemMatchesSelection()},c.prototype.createSelection=function(){return u.createSelection()},c.prototype.getProviderInputs=function(){return this._pickerInputCollections},c.prototype.onProviderCommit=function(){return u.onProviderCommit()},c.prototype.onInputsReceived=function(){return u.onInputsReceived()},c.prototype.getOutputsToCommit=function(){var n=i.Models.modelToParameters(this.dataModel);return{outputParameters:n}},c.prototype.onCommitError=function(){u.onCommitError()},c.prototype._onSelectedItemsChanged=function(n){var t=n&&n.length>0,i;if(t){if(this.isCreateActionResult(!1),i=this._runFilters(n),i){this.valid(!1);return}this._closeBlade(n)}this.valid(t)},c.prototype._findGridMatchItem=function(t){var i=this;return n.find(this.itemsGridViewModel.items(),(function(n){return i.itemMatchesSelection(t,n)}))},c.prototype._runFilters=function(n){var t=this,r,i;return!n||n.length<1?!1:(r=!1,i=this.filters&&this.filters(),i&&i.length>0&&i.forEach((function(i){i.getDisabledItems(n).then((function(n){n.forEach((function(n){var i=t._findGridMatchItem(n.item);i&&(t._disableGridItem(i,n.disabledReason),t.itemsGridViewModel.selectableData.selectedItems.remove(i),r=!0,t._filteredItems.push(n))}))}))})),r)},c.prototype._closeBlade=function(n){var t=this,i;this._clearThrottleUnselectSelectorFieldHandle();this._throttleUnselectSelectorFieldHandle=setTimeout((function(){t.createActionSelectorField()&&t.createActionSelectorField().selectable.isSelected(!1)}),0);this.multiselectEnabled()||n.length!==1||(i=this.itemSelectedByDefault()&&this.itemMatchesSelection(this.itemsGridViewModel.items()[this.getMatchingItemIndex(this.itemSelectedByDefault())],n[0]),i||this.triggerSelectAction(l()))},c.prototype._clearThrottleUnselectSelectorFieldHandle=function(){this._throttleUnselectSelectorFieldHandle&&(clearTimeout(this._throttleUnselectSelectorFieldHandle),this._throttleUnselectSelectorFieldHandle=null)},c.prototype._getGridExtensionOptions=function(){var n=this;return{selectableRow:{selectionMode:this.multiselectEnabled()?2:1,itemMatchesSelection:function(t,i){return n.itemMatchesSelection(t,i)},createSelection:function(t){return n.createSelection(t)}}}},c.prototype._selectGridItem=function(n){if(n!==-1){var t=this.itemsGridViewModel.getRowMetadata(this.itemsGridViewModel.items()[n]);t.selected(!0)}},c.prototype._disableGridItem=function(n,t){if(n){var i=this.itemsGridViewModel.getRowMetadata(n);i.disabled(!0);i.selected(!1);t&&n.hasOwnProperty(e)&&(n[e]||(n[e]=new o.DockedBalloon.ViewModel(this.lifetimeManager)),n[e].content(t))}},c.prototype._initializeCreateActionSelector=function(n){var t=this;this._createSelectorField=new a(n,{defaultValue:this._selectorOriginalValue});this._createSelectorField.value=this._selectorEditableValue;this.createActionSelectorField(this._createSelectorField);this._createSelectorField.selectable.isSelected.subscribe(n,(function(n){n?t._launchCreateActionBlade():t.createActionBladeOpener(undefined)}))},c.prototype._launchCreateActionBlade=function(){var n=this.getProviderInputs(null);this.privateFcTpBI.inputs(n);this.itemsGridViewModel.selectableData.selectedItems([]);this.createActionBladeOpener({detailBlade:this._createSelectorBladeName,extension:this._createSelectorBladeExtension,detailBladeInputs:{}})},c.prototype._filterGridItems=function(n){var t=this,r=this.itemsGridViewModel.items(),i=this._filteredItems;n&&n.forEach((function(n){var i=t.getMatchingItemIndex(n.id);i!==-1&&t._disableGridItem(r[i],n.reason)}));i&&i.length>0&&i.forEach((function(n){var i=t._findGridMatchItem(n.item);i&&t._disableGridItem(i,n.disabledReason)}))},__decorate([__metadata("fx:diagnostics",[require,"BasePickerListViewModel"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.PartContainerContract,Object,Function,Boolean,n.Data.DataNavigatorBase])],c)})(o.Loadable.ViewModel);i.BasePickerListViewModel=y})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var h=n.Base,c=n.Helpers,o=n.ViewModels,l=o.Controls.Wizard,r=i.Internal,u;(function(t){function r(){if(i){var t=n.Helpers.Deferred();return{promise:t.promise(),resolve:function(n){t.resolve(n)},reject:function(n){t.reject(n)}}}return Q.defer()}var i=FxImpl.features.isEnabled("jquerypromises",!1);t.defer=r})(u||(u={}));var a=n.ViewModels.Controls.Wizard,f="",v={getProviderInputs:f,onProviderCommit:f,onInputsReceived:f,onCommitError:f},e=FxImpl.getErrorMap(v),s=o.ParameterCollectionV2.Internal.ParameterCollectorFactory,y=s.confirmCommitSuffix,p=s.tryCommitSuffix,w=(function(f){function s(n,i,u){var e=f.call(this,n,i&&i.content)||this,o,s;return e.editScopeId=ko.observable(),e.eula=ko.observable(""),e._editScopeCache=null,e._editScopeView=null,e._actionBarOutput=null,e._baseCollectorInputs=null,e._baseProviderCommit=null,e._baseProviderOutputs=null,e._baseWizardContainer=null,e._deferredProviderDismiss=null,e._providerBase=null,e._provisionerInstance=null,e._savedProviderOutputs=null,FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollection.BaseWizardViewModel"),o=e.lifetimeManager,e.valid=ko.computed(o,(function(){return e.steps().every((function(n){return n.isOptional||n.status()===3}))})),s=e._editScopeCache=new FxImpl.Data.EditScopeCacheOld({entityTypeName:u,supplyExistingData:function(n){return e._providerBase.initializeDataModel(n,(function(n){return e.overrideInputParameters(n)}))},serializeParams:function(){return"#"}}),n.registerForDispose(s),e._editScopeView=s.createView(o),e._providerBase=new r.ProviderBase(e._editScopeView),e.enableProvisioning=ko.observable(!1),e.provisionOnStartboardPart=ko.observable(!0),e.parameterCollectionErrors=ko.observable(),e.privateFcTpBI=new r.CollectorBindingInternals,e.privateFpTcBI=new r.ProviderBindingInternals,e.privatePcPrBI=new r.ProvisioningEntityBindingInternals,e._actionBarOutput=ko.observable(),e._baseProviderCommit=ko.observable(),e._baseWizardContainer=n,e._provisionerInstance=new r.Provisioner(e),e._savedProviderOutputs={},e.complete=function(){return},e._actionBarOutput.subscribe(o,(function(n){if(t.ActionBars.Base.isCompleted(n)){var i=e.getOutputsToCommit(),r=function(){var n=e._editScopeCache;n.disposeAndDiscardEdits(e.editScopeId(),e._editScopeView)};e._providerBase.commitProvider({enableProvisioning:e.enableProvisioning(),provisioner:e._provisionerInstance,provisionerData:i,provisionerOptions:e._baseCollectorInputs.options,progressAction:function(n){e._baseWizardContainer.operations.add(n,{blockUi:!0})},discardEdits:r,privateFpTcBI:e.privateFpTcBI,privatePcPrBI:e.privatePcPrBI,provisionOnStartboardPart:e.provisionOnStartboardPart()})}})),e.parameterCollectionErrors.subscribe(o,(function(n){e.privateFcTpBI.errors(n)})),e}return __extends(s,f),Object.defineProperty(s.prototype,"dataModel",{get:function(){var n=this._editScopeView.editScope();return n&&n.root},enumerable:!1,configurable:!0}),s.prototype.onInputsSet=function(t){var a=this,l=null,u,f,o,e,s,i,h,c,r;if(this.editScopeId(t.editScopeId),this.provisionOnStartboardPart(t.provisionOnStartboardPart),this.privatePcPrBI.masterIsProvisioningPart(t.masterIsProvisioningPart),u=t.privateFcTpBI,u&&(f=u.inputs,f&&(this._baseCollectorInputs=f,o=this._providerBase.onCollectorBindingsReceived(f,this.editScopeId(),(function(n){return a.onInputsReceived(n)})),this.enableProvisioning(o.enableProvisioning),l=o.promise),e=u.errors,e&&e.length>0)){this.onCommitError(e);this.onCommitError([])}return s=t.privateFpTcBI,t.privateFpTcBI&&(i=s.commit,!i||i===this._baseProviderCommit()||(i===y.format(this._baseProviderCommit())?(h=this._deferredProviderDismiss,h&&(h.resolve(),this._deferredProviderDismiss=undefined)):(this._baseProviderOutputs=s.outputs,this._baseProviderCommit(i)))),this.initialize(),c=t.stepOutput,c&&this.stepOutput(c),this.savedState()||this.savedState(t.savedState),r=t.output,r&&r.status&&!n.deepEquals(r,this._actionBarOutput())&&this._actionBarOutput(r),l},s.prototype.overrideInputParameters=function(n){return c.resolve(n)},s.prototype.getProviderInputs=function(){return e.getProviderInputs()},s.prototype.onProviderCommit=function(){return e.onProviderCommit()},s.prototype.onInputsReceived=function(){return e.onInputsReceived()},s.prototype.getOutputsToCommit=function(){var n=i.Models.modelToParameters(this.dataModel);return{outputParameters:n}},s.prototype.onCommitError=function(){return e.onCommitError()},s.prototype.addWizardStep=function(n,t,i,r,u,f,e){this.insertWizardStep(null,n,t,i,r,u,f,e)},s.prototype.insertWizardStep=function(n,t,i,r,f,e,o,s){var c=this,l=new a.WizardStep(t,i,r,o,e,s);l.description(f);l.stepLoad=function(n){var t=u.defer();return c._providerBase.fetchEditScope(c.editScopeId(),c._baseCollectorInputs).then((function(){var i=c.getProviderInputs(n.stepId);n.stepId in c._savedProviderOutputs&&h.ProxiedObservables.data(i.options,"lastOutputParameters",c._savedProviderOutputs[n.stepId]);c.privateFcTpBI.inputs(i);t.resolve()})),t.promise};l.stepComplete=function(n){var t=u.defer(),i=c.lifetimeManager.createChildLifetime();return c._baseProviderCommit.subscribe(i,(function(){c._savedProviderOutputs[n.stepId]=c._baseProviderOutputs;c.onProviderCommit(n.stepId,c._baseProviderOutputs).then((function(n){n?c._baseProviderCommit().indexOf(p)>-1?(c._deferredProviderDismiss=t,c.privateFcTpBI.errors([{errorMessage:null,parameterName:c._baseProviderCommit()}]),c.privateFcTpBI.errors([])):t.resolve():t.reject()}));i.dispose()})),t.promise};typeof n=="number"?this.steps.splice(n,0,l):this.steps.push(l)},s.prototype.removeWizardStep=function(n){this.steps.remove(n)},s.prototype.removeWizardStepAt=function(n){return this.steps.splice(n,1)[0]},__decorate([__metadata("fx:diagnostics",[require,"BaseWizardViewModel"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[o.PartContainerContract,Object,String])],s)})(l.ViewModel);i.BaseWizardViewModel=w})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var i=(function(){function n(){this.inputParameters={};this.inputMetadata={};this.options={}}return n})(),t;n.ParameterCollectionInput=i;t=(function(){function n(){this.outputParameters={}}return n})();n.ParameterCollectionOutput=t})(t=n.ParameterCollectionV2||(n.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){var t;(function(n){var t="parameterCollection",i="previousOutputParameters",r;(function(n){function r(n){var i={},t,r;for(t in n){t in i||(i[t]={});for(r in n[t])i[t][r]=n[t][r]()||""}return i}function u(n){var r={},t,i;for(t in n)for(i in n[t]){if(t in r||(r[t]={}),ko.isObservable(n[t][i])||ko.isComputed(n[t][i]))throw new Error("Parameters cannot be knockout observables.");r[t][i]?r[t][i](n[t][i]):r[t][i]=ko.observable(n[t][i])}return r}function f(n){return n&&t in n&&i in n[t]&&!!n[t][i]?n[t][i]:null}n.modelToParameters=r;n.parametersToModel=u;n.getPreviousOutputsFromOptions=f})(r=n.Utilities||(n.Utilities={}))})(t=n.ParameterCollectionV2||(n.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(n){function i(n){t===undefined&&(t=MsPortalFx.isFeatureEnabled("obsolete0logging")?new MsPortalFx.Base.Diagnostics.Log("Obsolete0 Bundle"):null);t&&t.error(new Error(n+" is obsolete. Please upgrade to ParameterCollection V3 and remove usage of the Obsolete0 bundle."))}var t=undefined;n.logObsoleteUsageError=i})(t=n.Obsolete0||(n.Obsolete0={}))})(FxImpl||(FxImpl={})),
(function(n){var t;(function(t){var i;(function(i){function o(n,t){return{stepId:"CommandStep",status:0,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:n,masterIsProvisioningPart:t}}var f=n.ViewModels,h=f.ActionBars,r="",e={unsetRole:r,setOnce:r,collectorMissing:r},u=FxImpl.getErrorMap(e),s=(function(n){function t(t){var r=n.call(this,t)||this;return r.stepInput=ko.observable(),r._collectorImpl=null,r._provisionerImpl=null,r._rolesSet=!1,r._baseCommandContainer=null,FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollectionV2.Command"),r.privateFcTpBI=new i.Internal.CollectorBindingInternals,r.privatePcPrBI=new i.Internal.ProvisionerBindingInternals,r._baseCommandContainer=t,r.enableProvisioning=ko.observable(!0),r.stepInput(o(!1,!0)),t.selectable.isSelected.subscribe(t,(function(n){n&&r._collectorImpl.sendInputsToProvider(null)})),r}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=this,i=[];return this._rolesSet||u.unsetRole(),this._collectorImpl&&i.push(this._collectorImpl.processInputs(n)),this._provisionerImpl&&i.push(this._provisionerImpl.processInputs(n)),Q.all(i).then((function(){t._provisionerImpl&&t.enableProvisioning(t._provisionerImpl.enableProvisioning())}))},t.prototype.initializeParameterCollectionRoles=function(n){this._rolesSet&&u.setOnce();this._extractCommandRoles(n,this._baseCommandContainer);this._rolesSet=!0},t.prototype._extractCommandRoles=function(n,t){var r=this,f=!!n&&n.parameterCollector,e=!!n&&n.provisioner,o;f||u.collectorMissing();o={commitWhenSignaled:!0,commitAction:function(){if(r._provisionerImpl){var n=function(){var n=r.privateFcTpBI.inputs();r._provisionerImpl.executeProvisioning(r._collectorImpl.providerOutputs,n&&n.options)},i={privateFcTpBI:{inputs:r.privateFcTpBI.inputs()}},t=r._provisionerImpl.processInputs(i);t?t.then(n):n()}r._baseCommandContainer.selectable.isSelected(!1)}};this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(f,{},this.privateFcTpBI,t,o);e&&(this._provisionerImpl=i.Internal.ProvisionerFactory.createProvisioner(e,this.privatePcPrBI))},t})(t.OpenBladeCommand);i.Command=s})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var u=n.ViewModels,h=u.ActionBars.Base,c=HubsExtension.Azure.Pricing,r=n.deepEquals,f=c.Constants.LegalTermsBlade,e=c.Constants.PricingSummaryBlade,l=n.forEachKey,o="",a={setOnce:o,rejected:o,multipleSelectors:o},s=FxImpl.getErrorMap(a),v=(function(o){function c(n,s){var c=o.call(this,n)||this,a,v,y,l;return c.editScopeId=ko.observable(),c.actionInProgress=ko.observable(!1),c.enableProvisioning=ko.observable(!1),c.eula=ko.observable(""),c.secondaryLinkDisplayText=ko.observable(""),c.galleryPricingInfo=ko.observable(),c._collectorImpl=null,c._providerImpl=null,c._provisionerImpl=null,c._parameterCollectionRolesSet=!1,c._actionBarOutput=null,c._actionInProgressLock=!1,c._baseFormInitialState=null,c._hotSpotItems=ko.observableArray(),c._initialSelectedValue=null,c._previousOutput=null,c._selectableMap={},c._isValid=ko.observable(!1),c._galleryItem=ko.observable(null),FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollectionV2.Form"),a=s&&s.content&&s.content.selectable,v=s&&s.content&&s.content.secondaryLinkSelectable,c._editScopeImpl||(c._editScopeImpl=null),c.privateFcTpBI=new i.Internal.CollectorBindingInternals,c.privateFpTcBI=new i.Internal.ProviderBindingInternals,c.privatePcPrBI=new i.Internal.ProvisionerBindingInternals,c._baseFormInitialState=s,c._initialSelectedValue=a&&a.selectedValue,c._actionBarOutput=ko.observable(),c.stepInput=ko.observable(),c.stepOutput=ko.observable(),y=c.valid,l=c._ltm,c.valid=ko.computed(l,(function(){return c._isValid()&&y()})),c.selectable=new t.Selectable({allowUnselect:!1,selectedValue:c._initialSelectedValue,isSelected:a&&a.isSelected,isActivated:a&&a.isActivated}),l.registerForDispose(c.selectable),c.secondaryLinkSelectable=new t.Selectable({allowUnselect:!1,selectedValue:v&&v.selectedValue,isSelected:v&&v.isSelected,isActivated:v&&v.isActivated}),l.registerForDispose(c.secondaryLinkSelectable),c.hotSpot=new t.SelectableSet(c._hotSpotItems,function(n,t){return n.selectedValue()===t},function(n){return n.selectedValue()},s&&s.content&&s.content.hotSpot),l.registerForDispose(c.hotSpot),c._actionBarOutput.subscribe(l,(function(t){var r,e,i;h.isCompleted(t)&&(r=function(){c.actionInProgress(!0);c._providerImpl.getOutputsToCommit().then((function(t){c._providerImpl.commitOutputs({provisioner:c._provisionerImpl,provisionerData:t,progressAction:function(t){n.operations.add(t,{blockUi:!0})},discardEdits:function(){return c._editScopeImpl.discardEditScopeEdits()},privateFpTcBI:c.privateFpTcBI,privatePcPrBI:c.privatePcPrBI})}))},t.actionButtonClicked&&c.secondaryLinkSelectable.isSelected()?c.secondaryLinkSelectable.selectedValue().detailBlade===f.bladeName?(c._actionInProgressLock=!0,c.secondaryLinkSelectable.isSelected(!1),r()):c.secondaryLinkSelectable.isSelected(!1):(e=c.galleryPricingInfo(),i=c._galleryItem(),c.enableProvisioning()&&e&&i&&(i.products.length>0||i.productsWithNoPricing.length>0)?(c.secondaryLinkSelectable.selectedValue(u.getBladeSelection(f.bladeExtension,f.bladeName,{galleryPricingInfo:e,galleryItem:i})),c.actionInProgress(!0),c.secondaryLinkSelectable.isSelected(!0)):r()))})),c.selectable.isSelected.subscribe(l,(function(n){n||c._unselectFields()})),c.secondaryLinkSelectable.isSelected.subscribe(l,(function(n){n||c._actionInProgressLock||c.actionInProgress(!1)})),c.stepOutput.subscribe(l,(function(n){var t=c._previousOutput;c._previousOutput=n;!r(t,n)&&h.isCompleted(n)&&c._onSelectorComplete(n.stepId).then((function(){c.selectable.isSelected(!1)}))})),ko.computed(l,(function(){c.galleryPricingInfo()&&c._galleryItem()?c.secondaryLinkDisplayText(e.displayText):c.secondaryLinkDisplayText(null)})),c}return __extends(c,o),c.prototype.initializeParameterCollectionRoles=function(n){this._parameterCollectionRolesSet&&s.setOnce();this._extractFormRoles(n,this._ltm);this._parameterCollectionRolesSet=!0},Object.defineProperty(c.prototype,"dataModel",{get:function(){var n=this._editScopeImpl;return n&&n.dataModel||null},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"inputMetadata",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs,i=t&&t.inputMetadata;return i||null},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"parameterCollectionOptions",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs,i=t&&t.options;return i||null},enumerable:!1,configurable:!0}),c.prototype.onFormInputsSet=function(){return null},c.prototype.onInputsSet=function(n){var t=this,i=[],v,c,l,o,a,h;this.editScopeId(n.editScopeId);var f=this._editScopeImpl,y=f&&f.collectorInputs,p=y&&y.inputParameters;p&&(v=p);f&&i.push(f.processInputs(n));c=this._collectorImpl;c&&i.push(c.processInputs(n));l=this._providerImpl;l&&i.push(l.processInputs(n));o=this._provisionerImpl;o&&i.push(o.processInputs(n));a=n.stepOutput;a&&this.stepOutput(a);var w=n.privateFcTpBI,b=w&&w.inputs,k=b&&b.options,d=k&&k.galleryOptions;return this._galleryItem(d&&d.galleryItem||null),n.output&&(h=n.output&&n.output.secondaryLinkClicked,!h||h!==this.secondaryLinkDisplayText()||this._previousSecondaryLinkCommitId===n.output.commitId||(this._previousSecondaryLinkCommitId=n.output.commitId,this.actionInProgress(!1),this.secondaryLinkSelectable.selectedValue(u.getBladeSelection(e.bladeExtension,e.bladeName,{galleryPricingInfo:this.galleryPricingInfo(),galleryItem:this._galleryItem()})),this.secondaryLinkSelectable.isSelected(!0)),!n.output.status||h||r(n.output,this._actionBarOutput())||this._actionBarOutput(n.output)),Q.all(i).then((function(){if(o&&t.enableProvisioning(o.enableProvisioning()),!r(v,f.collectorInputs.inputParameters)){var n=t.onFormInputsSet(t._ltm,t._baseFormInitialState);if(n)return n.then((function(){t._isValid(!0)}),(function(){s.rejected()}));t._isValid(!0)}}))},c.prototype.dispose=function(){o.prototype.dispose.call(this)},c.prototype.registerHotSpot=function(t){var i=t.selectable||t,r;this._hotSpotItems.push(i);r=n.find(this.hotSpot.selectableItems(),(function(n){return n.data===i}));ko.utils.twoWayBinding(this._ltm,i.isSelected,r.isActivated)},c.prototype.registerSelector=function(n,t,i){i&&this._collectorImpl&&this._collectorImpl.addProvider(n,i);this._registerSelectable(n,t.selectable)},c.prototype.registerInfoBox=function(n,t,i){i&&this._collectorImpl&&this._collectorImpl.addProvider(n,i);this._registerSelectable(n,t.selectable)},c.prototype._registerSelectable=function(n,t){var i=this,u;this._selectableMap[n]&&s.multipleSelectors();this._selectableMap[n]=t;u=this._initialSelectedValue;u!==undefined&&r(u,t.selectedValue())&&t.isSelected(this.selectable.isSelected());t.isSelected.subscribe(this._ltm,(function(r){r&&(i._unselectFields(t),i.selectable.selectedValue(t.selectedValue()),i.stepInput({stepId:n,status:0,isLastStep:!1}),i.selectable.isSelected(!0),i._onSelectorLoad(n))}))},c.prototype._extractFormRoles=function(n,t){var e=!!n&&n.parameterCollector,u=!!n&&n.parameterProvider,f=!!n&&n.provisioner,r=this._editScopeImpl;r||(r=this._editScopeImpl=i.Internal.EditScopeFactory.createEditScope(u,t));this.editScope=this._editScopeImpl.editScope;this._providerImpl=i.Internal.ParameterProviderFactory.createParameterProvider(u,r);this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(e,r,this.privateFcTpBI,t);f&&(this._provisionerImpl=i.Internal.ProvisionerFactory.createProvisioner(f,this.privatePcPrBI))},c.prototype._unselectFields=function(n){l(this._selectableMap,(function(t,i){n&&n===i||i.isSelected(!1)}))},c.prototype._onSelectorLoad=function(n){var t=this;return this._editScopeImpl.fetchEditScope().then((function(){var i=t._collectorImpl;i&&i.sendInputsToProvider(n)}))},c.prototype._onSelectorComplete=function(n){var t=this._collectorImpl;return t?t.commitProviderOutputs(n):Q()},__decorate([__metadata("fx:diagnostics",[require,"Form"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.PartContainerContract,Object])],c)})(t.Forms.Form.ViewModel);i.Form=v})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var f=n.ViewModels,u=f.Controls,e=u.Lists.Grid,o=n.deepEquals,s=n.getUniqueId,h=i.Internal.ParameterProviderFactory,r=" is not implemented",c=(function(c){function l(n,r,u,f){var o,s,v,y,a,l;f===void 0&&(f=!1);o=c.call(this,n)||this;o.editScopeId=ko.observable();o.eula=ko.observable("");o.listHeader=ko.observable();o.listSubHeader=ko.observable();o.multiselectEnabled=ko.observable(!1);o.showCreateAction=ko.observable(!1);o.triggerSelectAction=ko.observable("");o.valid=ko.observable(!1);o.isCreateActionResult=ko.observable(!1);o.pickerActivationBladeOpener=ko.observable();o.createActionBladeOpener=ko.observable();o.itemSelectedByDefault=ko.observable();o.filterItems=ko.observable();o.filters=ko.observableArray();o._filteredItems=[];o._createSelectorField=null;o._selectorOriginalValue=ko.observable();o._selectorEditableValue=ko.observable();o._createSelectorBladeName=null;o._createSelectorBladeExtension=null;o._throttleUnselectSelectorFieldHandle=null;o._collectorImpl=null;o._providerImpl=null;o._parameterCollectionRolesSet=!1;o._basePickerInitialState=null;o._actionBarOutput=null;FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollectionV2.Picker");s=o.lifetimeManager;o.controlType=80;o._editScopeImpl||(o._editScopeImpl=null);o.privateFcTpBI=new i.Internal.CollectorBindingInternals;o.privateFpTcBI=new i.Internal.ProviderBindingInternals;o.multiselectEnabled(f);o._basePickerInitialState=r;v=o._actionBarOutput=ko.observable();y=o.createActionSelectorField=ko.observable();o.isCreateActionResult(!1);o.stepInput=ko.observable();var p=e.Extensions.SelectableRow,w=o._getGridExtensionOptions(),h=o.itemsGridViewModel=new e.ViewModel(s,u,p,w);return h.showHeader=!0,h.columns=o.getColumns(),o._initializeCreateActionSelector(s),v.subscribe(s,(function(i){if(t.ActionBars.Base.isCompleted(i)){var r=o._providerImpl;r.getOutputsToCommit().then((function(t){r.commitOutputs({provisioner:null,provisionerData:t,progressAction:function(t){n.operations.add(t,{blockUi:!0})},discardEdits:function(){return o._editScopeImpl.discardEditScopeEdits()},privateFpTcBI:o.privateFpTcBI,privatePcPrBI:null})}))}})),a=function(n){var t=o.getMatchingItemIndex(n);o._selectGridItem(t)},o.itemSelectedByDefault.subscribe(s,(function(n){o.multiselectEnabled()?n.forEach(a):n&&a(n)})),o.filters.subscribeAndRun(s,(function(){o._filterGridItems(o.filterItems())})),o.filterItems.subscribe(s,(function(n){o._filterGridItems(n)})),h.items.subscribe(s,(function(n){o._filterGridItems(o.filterItems());o._runFilters(n)})),l=h.selectableData.selectedItems,l.subscribe(s,(function(n){o._onSelectedItemsChanged(n)})),o.createActionBladeOpener.subscribe(s,(function(n){n?(o._clearThrottleUnselectSelectorFieldHandle(),l([]),y().selectable.isSelected(!0)):o._closeBlade(l())})),o}return __extends(l,c),l.prototype.initializeCreateSelector=function(n,t,i,r,u,f){this._selectorOriginalValue(n);this._selectorEditableValue(n);this._createSelectorField.label(t);this._createSelectorBladeName=i;this._createSelectorBladeExtension=r;u&&this._collectorImpl&&this._collectorImpl.addProvider(t,u);f&&ko.utils.arrayPushAll(this._createSelectorField.validations,f)},l.prototype.onPickerInputsSet=function(){return null},l.prototype.onInputsSet=function(n){var f=this,i=[],e,t,r,u;return this.editScopeId(n.editScopeId),t=this._editScopeImpl,t&&(r=t.collectorInputs,r&&r.inputParameters&&(e=r.inputParameters),i.push(t.processInputs(n))),this._collectorImpl&&i.push(this._collectorImpl.processInputs(n)),this._providerImpl&&i.push(this._providerImpl.processInputs(n)),this.stepInput(n.stepInput),u=n.output||{},u.status&&!o(u,this._actionBarOutput())&&this._actionBarOutput(u),Q.all(i).then((function(){if(!o(e,t.collectorInputs.inputParameters))return Q(f.onPickerInputsSet(f.lifetimeManager,f._basePickerInitialState))}))},l.prototype.initializeParameterCollectionRoles=function(n){if(this._parameterCollectionRolesSet)throw new Error("The 'parameterCollectionRoles' property should be only set once.");this._extractPickerRoles(n,this.lifetimeManager);this._parameterCollectionRolesSet=!0},Object.defineProperty(l.prototype,"dataModel",{get:function(){return this._editScopeImpl?this._editScopeImpl.dataModel:null},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"inputMetadata",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs;return t&&t.inputMetadata},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parameterCollectionOptions",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs;return t&&t.options},enumerable:!1,configurable:!0}),l.prototype.getParameter=function(n,t,i){return t in i&&n in i[t]?i[t][n]:null},l.prototype.dispose=function(){this._clearThrottleUnselectSelectorFieldHandle();c.prototype.dispose.call(this)},l.prototype.getMatchingItemIndex=function(){throw new Error("'getMatchingItemIndex'"+r);},l.prototype.getColumns=function(){throw new Error("'getColumns'"+r);},l.prototype.itemMatchesSelection=function(){throw new Error("'itemMatchesSelection'"+r);},l.prototype.createSelection=function(){throw new Error("'createSelection'"+r);},l.prototype._extractPickerRoles=function(n,t){var r=this,u=!!n&&n.parameterCollector,f=!!n&&n.parameterProvider,e;this._editScopeImpl||(this._editScopeImpl=i.Internal.EditScopeFactory.createEditScope(f,t,(function(){return r.onPickerInputsSet(r.lifetimeManager,r._basePickerInitialState)})));this._editScopeImpl.initializeEditScope();e={commitWhenSignaled:!0,commitAction:function(){r.isCreateActionResult(!0);r.createActionSelectorField().selectable.isSelected(!1);r.itemsGridViewModel.selectableData.selectedItems([]);r.valid(!0);r.triggerSelectAction(s())}};this._providerImpl=h.createParameterProvider(f,this._editScopeImpl);u&&(this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(u,this._editScopeImpl,this.privateFcTpBI,t,e))},l.prototype._onSelectedItemsChanged=function(n){var t=n&&n.length>0,i;if(t){if(this.isCreateActionResult(!1),i=this._runFilters(n),i){this.valid(!1);return}this._closeBlade(n)}this.valid(t)},l.prototype._runFilters=function(t){var i=this,r,u,f;if(t&&t.length){var e=!1,o=this.filters,s=o&&o();return s&&(r=[],u=[],s.forEach((function(f){f.getDisabledItems(t).then((function(t){t.forEach((function(t){var f=n.find(i.itemsGridViewModel.items(),(function(n){return i.itemMatchesSelection(t.item,n)}));f&&(i._disableGridItem(f,t.disabledReason),u.push(f),e=!0,r.push(t))}))}))})),f=this._filteredItems,f.push.apply(f,r),this.itemsGridViewModel.selectableData.selectedItems.removeAll(u)),e}return!1},l.prototype._closeBlade=function(n){var r=this,t,i;this._clearThrottleUnselectSelectorFieldHandle();this._throttleUnselectSelectorFieldHandle=setTimeout((function(){var n=r.createActionSelectorField();n&&n.selectable.isSelected(!1)}),0);this.multiselectEnabled()||n.length!==1||(t=this.itemSelectedByDefault(),i=t&&this.itemMatchesSelection(this.itemsGridViewModel.items()[this.getMatchingItemIndex(t)],n[0]),i||this.triggerSelectAction(s()))},l.prototype._clearThrottleUnselectSelectorFieldHandle=function(){var n=this._throttleUnselectSelectorFieldHandle;n&&(clearTimeout(n),this._throttleUnselectSelectorFieldHandle=null)},l.prototype._getGridExtensionOptions=function(){return{selectableRow:{selectionMode:this.multiselectEnabled()?2:1,itemMatchesSelection:this.itemMatchesSelection,createSelection:this.createSelection}}},l.prototype._selectGridItem=function(n){if(n!==-1){var t=this.itemsGridViewModel,i=t.getRowMetadata(t.items()[n]);i.selected(!0)}},l.prototype._disableGridItem=function(n,t){var i,r;n&&(i=this.itemsGridViewModel.getRowMetadata(n),i.disabled(!0),t&&n.hasOwnProperty("infoBalloon")&&(r=n.infoBalloon||(n.infoBalloon=new u.DockedBalloon.ViewModel(this.lifetimeManager)),r.content(t)))},l.prototype._initializeCreateActionSelector=function(n){var i=this,t=this._createSelectorField=new f.Forms.Selector.ViewModel(n,{defaultValue:this._selectorOriginalValue});t.value=this._selectorEditableValue;this.createActionSelectorField(t);t.selectable.isSelected.subscribe(n,(function(n){n?i._launchCreateActionBlade():i.createActionBladeOpener(undefined)}))},l.prototype._launchCreateActionBlade=function(){this._collectorImpl.sendInputsToProvider(null);this.itemsGridViewModel.selectableData.selectedItems([]);this.createActionBladeOpener({detailBlade:this._createSelectorBladeName,extension:this._createSelectorBladeExtension,detailBladeInputs:{}})},l.prototype._filterGridItems=function(t){var i=this,u=this.itemsGridViewModel.items,r;t&&t.forEach((function(n){var t=i.getMatchingItemIndex(n.id);t!==-1&&i._disableGridItem(u()[t],n.reason)}));r=this._filteredItems;r&&r.forEach((function(t){var r=n.find(u(),(function(n){return i.itemMatchesSelection(t.item,n)}));r&&i._disableGridItem(r,t.disabledReason)}))},l.filterPickerItemsParameterName="filterPickerItems",l.pickerItemsParameterName="pickerItems",__decorate([__metadata("fx:diagnostics",[require,"Picker"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.PartContainerContract,Object,Function,Boolean])],l)})(u.Loadable.ViewModel);i.Picker=c})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(t){var i=n.Base,r=n.Resources.Strings.Pickers.AccessDenied,u=(function(){function n(n,t){this._requiredPermission=t;this._mapItemToResourceId=n}return n.prototype.getDisabledItems=function(n){var t=this,u=[],f=[],e=Q.defer();return n.forEach((function(n){f.push(i.Security.hasPermission(t._mapItemToResourceId(n),[t._requiredPermission]).then((function(t){t||u.push({item:n,disabledReason:r.reasonMessage})})))})),Q.allSettled(f).then((function(){return e.resolve(u)})),e.promise},n})();t.ArmRbacFilter=u})(i=t.PickerFilter||(t.PickerFilter={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){var i;(function(i){var u=n.deepEquals,o=n.ViewModels.Controls.Wizard,r=null,f="",s={missingRoles:f,setOnce:f},e=FxImpl.getErrorMap(s),h=(function(f){function s(n,u){var e=f.call(this,n,u&&u.content)||this,o;return e.editScopeId=ko.observable(),e.enableProvisioning=ko.observable(!1),e.eula=ko.observable(""),e.provisionOnStartboardPart=ko.observable(!0),e._collectorImpl=r,e._providerImpl=r,e._provisionerImpl=r,e._parameterCollectionRolesSet=!1,e._actionBarOutput=r,e._baseWizardContainer=r,e._baseWizardInitialState=r,FxImpl.Obsolete0.logObsoleteUsageError("MsPortalFx.ViewModels.ParameterCollectionV2.Wizard"),o=e.lifetimeManager,e._editScopeImpl||(e._editScopeImpl=r),e.privateFcTpBI=new i.Internal.CollectorBindingInternals,e.privateFpTcBI=new i.Internal.ProviderBindingInternals,e.privatePcPrBI=new i.Internal.ProvisionerBindingInternals,e._baseWizardContainer=n,e._baseWizardInitialState=u,e.complete=function(){return},e.valid=ko.computed(o,(function(){return e.steps().every((function(n){return n.isOptional||n.status()===3}))})),e._actionBarOutput=ko.observable(),e._actionBarOutput.subscribe(o,(function(n){t.ActionBars.Base.isCompleted(n)&&e._providerImpl.getOutputsToCommit().then((function(n){e._providerImpl.commitOutputs({provisioner:e._provisionerImpl,provisionerData:n,progressAction:function(n){e._baseWizardContainer.operations.add(n,{blockUi:!0})},discardEdits:function(){return e._editScopeImpl.discardEditScopeEdits()},privateFpTcBI:e.privateFpTcBI,privatePcPrBI:e.privatePcPrBI})}))})),e}return __extends(s,f),s.prototype.onWizardInputsSet=function(){return},s.prototype.onInputsSet=function(n){var t=this,i=[],o,f,r;return this._parameterCollectionRolesSet||e.missingRoles(),this.editScopeId(n.editScopeId),f=this._editScopeImpl&&this._editScopeImpl.collectorInputs||{},f.inputParameters&&(o=f.inputParameters),this._editScopeImpl&&i.push(this._editScopeImpl.processInputs(n)),this._collectorImpl&&i.push(this._collectorImpl.processInputs(n)),this._providerImpl&&i.push(this._providerImpl.processInputs(n)),this._provisionerImpl&&i.push(this._provisionerImpl.processInputs(n)),n.stepOutput&&this.stepOutput(n.stepOutput),this.savedState()||this.savedState(n.savedState),r=n.output||{},r.status&&!u(r,this._actionBarOutput())&&this._actionBarOutput(r),Q.all(i).then((function(){t._provisionerImpl&&t.enableProvisioning(t._provisionerImpl.enableProvisioning());var n;return u(o,t._editScopeImpl.collectorInputs.inputParameters)||(n=Q(t.onWizardInputsSet(t._baseWizardContainer,t._baseWizardInitialState))),t.initialize(),Q(n)}))},s.prototype.initializeParameterCollectionRoles=function(n){this._parameterCollectionRolesSet&&e.setOnce();this._extractWizardRoles(n,this._baseWizardContainer);this._parameterCollectionRolesSet=!0},Object.defineProperty(s.prototype,"dataModel",{get:function(){if(this._editScopeImpl)return this._editScopeImpl.dataModel},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"inputMetadata",{get:function(){var n=this._editScopeImpl&&this._editScopeImpl.collectorInputs||{};return n.inputMetadata},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"parameterCollectionOptions",{get:function(){var n=this._editScopeImpl&&this._editScopeImpl.collectorInputs||{};return n.options},enumerable:!1,configurable:!0}),s.prototype.addWizardStep=function(n,t,i,u,f,e,o,s){this.insertWizardStep(r,n,t,i,u,f,e,o,s)},s.prototype.insertWizardStep=function(n,t,i,r,u,f,e,s,h){var c=this,l=new o.WizardStep(t,i,r,s,e,h);l.description(u);l.stepLoad=function(n){return c._editScopeImpl.fetchEditScope().then((function(){c._collectorImpl&&c._collectorImpl.sendInputsToProvider(n.stepId)}))};l.stepComplete=function(n){return c._collectorImpl?c._collectorImpl.commitProviderOutputs(n.stepId):Q()};typeof n=="number"?this.steps.splice(n,0,l):this.steps.push(l);f&&this._collectorImpl&&this._collectorImpl.addProvider(t,f)},s.prototype.removeWizardStep=function(n){this._collectorImpl&&this._collectorImpl.removeProvider(n.stepId);this.steps.remove(n)},s.prototype.removeWizardStepAt=function(n){return this._collectorImpl&&this._collectorImpl.removeProvider(this.steps()[n].stepId),this.steps.splice(n,1)[0]},s.prototype._extractWizardRoles=function(n,t){var f=!!n&&n.parameterCollector,r=!!n&&n.parameterProvider,u=!!n&&n.provisioner;this._editScopeImpl||(this._editScopeImpl=i.Internal.EditScopeFactory.createEditScope(r,t));this._editScopeImpl.initializeEditScope();this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(f,this._editScopeImpl,this.privateFcTpBI,t);this._providerImpl=i.Internal.ParameterProviderFactory.createParameterProvider(r,this._editScopeImpl);u&&(this._provisionerImpl=i.Internal.ProvisionerFactory.createProvisioner(u,this.privatePcPrBI))},__decorate([__metadata("fx:diagnostics",[require,"Wizard"]),n.Composition.ProxyCompatibilityMode,__metadata("design:paramtypes",[t.PartContainerContract,Object])],s)})(t.Controls.Wizard.ViewModel);i.Wizard=h})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){n.RequireMetadata={"Fx/Composition/Pdl/MenuBlade":["MsPortalImpl.Controls/Controls/Lists/Menu",]}})(FxImpl||(FxImpl={})),
(function(n,t){var i={},u="object",r,f;(function(){function f(n,t){n&&Object.keys(n).forEach((function(i){t(i,n[i])}))}function r(n,t){return typeof n===u&&typeof t===u&&f(t,(function(t,i){var u=n[t];u?r(u,i):n[t]=i})),n}r(n,{Resources:{getResources:function(){}}});f(t,(function(n,t){var u=i[n];u||(u=i[n]={});r(u,t)}))})();r=n.Resources;f=r.getResources;r.getResources=function(n){return f(n)||i[n]}})(this,{"fx.culture":{formats:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],ampm:["AM","PM"],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM d, yyyy",F:"dddd, MMMM d, yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM yyyy",Y:"MMMM yyyy"},firstDayOfWeek:0,agoStrings:null}}}),
(function(n){function s(t){t.onNodeCreated=t.onNodeCreated||function(t,i,r,u){t.setAttribute("crossorigin","anonymous");n.Diagnostics.addScriptErrorListener(6,t,u,r)};t.getPathFallback=function(n,t){if(t){var i=new MsPortalFx.Base.UriBuilder(t),u=i.query.getParameter("retryAttempt");if(!u)return r.warning("Retrying download",0,n,t),Object.keys(i.query.getParameters()).length||(i.path+=".js"),i.query.setParameter("retryAttempt",1),i.toString();r.error("Download failed even after retry: "+n,0,n,t)}};n.addLoggingToRequireConfig(t,r)}function f(t){return n.reshapeRequireConfigCore(t,n.features)}function e(t,r){s(t);i.config(f(t));i.configureMetadata&&i.configureMetadata(n.RequireMetadata,r);n.internalEnv.isShell&&u.resolve()}function h(){var r,e;return n.setEnvironment(),r=MsPortalFx.getEnvironmentValue("typesMetadata"),r&&MsPortalFx.Data.Metadata.setTypesMetadata(r),e=MsPortalFx.getEnvironmentValue("requireConfig"),n.toAbsoluteUrisRequire(e),t.fx.bootstrapTelemetry.fxScriptsEnd=t.fx.getTimestamp(),o.mark("MsPortalFxEnd"),i.config(f(e)),u.resolve(),MsPortalFx.Base.Diagnostics.Telemetry.Internal.initialize({extensionName:n.postBootEnv.extensionName,userQuery:n.postBootEnv.userQuery}),n.bootEnv.shellRequireConfig?MsPortalFx.require("FxInternal/ExtensionRuntime").then((function(n){return n.ensureInitialized()})):Q()}var t=window,r=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/MsPortalFxEnd"),o=t.performance,i=t.requirejs,u=Q.defer();n.requireReady=u.promise;n.injectShellScripts=e;n.requireExtension=h;n.bootEnv.shellRequireConfig&&(e(MsPortalFx.clone(n.internalEnv.fxRequireConfig),n.bootEnv.shellRequireConfig),MsPortalFx.require("FxInternal/ExtensionRuntime"));ko.tasks.scheduler=Q.nextTick})(FxImpl||(FxImpl={}))