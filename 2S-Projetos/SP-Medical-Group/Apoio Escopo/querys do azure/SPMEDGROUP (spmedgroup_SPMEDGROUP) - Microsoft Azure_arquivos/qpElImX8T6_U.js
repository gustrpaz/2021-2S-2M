define("MsPortalImpl/Commands/Commands.OAuthCommand",["require","exports","MsPortalImpl/Base/Base.BrowserDetection"],(function(n,t,i){"use strict";function u(n,u,f,e){var s=r.screen,c=f||Math.max(s.width/2,1060),l=e||s.height/2,v,a;c=c>=s.width?s.width:c;l=l>=s.height?s.height:l;var y=s.height/2-l/2,p=s.width/2-c/2,w="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes,"+(" resizable=yes, copyhistory=no, width="+c+", height="+l+", top="+y+", left="+p),o=null,h=function(){delete r[t.oauthCallbackName];document.cookie=t.oauthCookieName+"=; expires="+new Date(0).toUTCString()+"; path=/";clearInterval(v);(i.isIe11||i.isEdge)&&clearInterval(a);o&&!o.closed&&o.close();o=null};return r[t.oauthCallbackName]=function(t){try{o.document}catch(i){return}n(t);h()},v=setInterval((function(){var u=document.cookie.match(new RegExp(t.oauthCookieName+"=(.*?)($|;)")),f=u&&u[1];if(f){n(f);h();return}if(!i.isIe11&&!i.isEdge&&o&&o.closed){h();return}if(!r[t.oauthCallbackName]){h();return}}),500),a=0,(i.isIe11||i.isEdge)&&(a=setInterval((function(){if(o&&o.closed){h();return}}),9e5)),o=window.open(u,"",w),o||h(),o}Object.defineProperty(t,"__esModule",{value:!0});t.executeOAuthCommand=t.oauthCookieName=t.oauthCallbackName=void 0;var r=window;t.oauthCallbackName="oauthbuttonCallback";t.oauthCookieName="oAuthToken";t.executeOAuthCommand=u}))