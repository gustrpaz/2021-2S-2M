define("_generated/MsPortalImpl/Svg/Library/Controls/PillRemove.svg",["require","exports"],(function(){"use strict";return{type:1,data:"<svg viewBox='0 0 12.7 12.7' class='msportalfx-svg-placeholder' role='presentation' focusable='false' xmlns:svg='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g><title><\/title><path d='M12.8.8L12 0 6.4 5.7.8 0 0 .8l5.7 5.6L0 12l.8.8 5.6-5.7 5.6 5.7.8-.8-5.7-5.6z'/><\/g><\/svg>"}}));
define("MsPortalImpl/Controls/Controls.Pill.Component",["require","exports","Weave/DirectMode","Weave","MsPortalImpl/Weave/Components","_generated/MsPortalImpl/Svg/Library/Loading/EllipsisSquare.svg","_generated/MsPortalImpl/Svg/Library/Controls/PillRemove.svg","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl.Controls/Controls/DockedBalloon","FxInternal/Weave/Util","MsPortalImpl/Weave/Util","Fx/Weave"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";function a(a){var v=a.vm,y=a.state,p=y.showDisplayText,w=y.pillHover,b=y.removeIconHover,k=l.toComputation(v.readOnly),d=l.toComputation(v.ariaLabel);return i(r.GetContext,{fn:function(a){var nt=c.aggregateContext(a,v,y),g=nt.disabled,tt=nt.tabIndex;return i(r.SetContext,{disabled:g,tabIndex:tt},i("div",{className:[t.widgetClass,{"fxc-pill-readOnly":k,"fxc-pill-edit-mode":l.toComputation(v.editMode),"fxc-pill-disabled":g,"fxc-pill-inline-edit":p.compose((function(n){return!n})),"fxc-pill-dialog":y.editorType.compose((function(n){return n==="Dialog"})),"fxc-pill-hover":r.composeComputation([w,b],(function(n,t){return n&&!t}))}],role:"gridcell","aria-label":r.composeComputation([d,k,l.toComputation(v.displayText.key),l.toComputation(v.displayText.operator),l.toComputation(v.displayText.value)],(function(n,t,i,r,u){var f="{0} {1} {2}".format(i||"",r||"",u||""),e;return f=(n||f.trim())+",",e=t?o.Controls.Pill.readOnlyModeLabel:o.Controls.Pill.editModeLabel,[f,e].join(" ")})),"aria-disabled":g,tabindex:l.toComputation(y.tabIndex)},i(r.If,{condition:l.toComputation(v.icon),concealmentBehavior:"remove",trueFn:function(){return i("div",{className:"fxc-pill-icon",image:l.toComputation(v.icon).compose((function(n){return MsPortalFx.Base.Images.CustomImageWithOptions(n,{customClass:"fxt-pill-custom-icon"})}))})}}),i("span",{className:[t.widgetContentClass,{"fxc-pill-content-with-icon":l.toComputation(v.icon),"fxc-pill-content-no-remove-button":l.toComputation(v.showRemoveButton).compose((function(n){return!n})),"fxc-pill-read-mode":p}]},i("span",{className:"fxc-pill-inner-content"},i("div",{className:"fxc-pill-read-container",style:{height:p.compose((function(n){return n?"auto":"0"})),opacity:p.compose((function(n){return n?"1":"0"}))}},i("span",{className:"fxc-pill-content-key"},l.toComputation(v.displayText.key)),i("span",{className:["fxc-pill-content-operator",{"fxs-display-none":v.displayText.operator?l.toComputation(v.displayText.operator).compose(h.negation):null}]},l.toComputation(v.displayText.operator)),i("b",{className:"fxc-pill-content-value"},l.toComputation(v.displayText.value))),i(r.If,{condition:r.composeComputation([p,y.editorContent],(function(n,t){return!n&&!t})),trueFn:function(){return i("div",{className:"fxc-pill-content-loading",image:f})}}),i(r.If,{condition:p,concealmentBehavior:"remove",falseFn:function(){return i("div",{className:t.widgetEditorClass},i(u.HtmlOrKo,{content:y.editorContent,require:n}))}}))),l.toComputation(y.tooltip).compose((function(n){return n?i(s.DockedBalloon,{className:"fxc-pill-tooltip",vm:n}):null})),i(r.If,{condition:l.toComputation(v.showRemoveButton),trueFn:function(){return i("div",{role:"button",className:["fxc-pill-close fxt-pill-close-icon",{"fxc-pill-close-hover":r.composeComputation([w,b],(function(n,t){return n||t}))}],"aria-label":o.Controls.Pill.deleteItem,title:o.Controls.Pill.deleteItem,tabindex:l.toComputation(y.tabIndex),image:MsPortalFx.Base.Images.CustomImageWithOptions(e,{palette:99})})}})))}})}Object.defineProperty(t,"__esModule",{value:!0});t.PillInner=t.widgetEditorClass=t.widgetContentClass=t.widgetClass=void 0;t.widgetClass="fxc-pill";t.widgetContentClass="fxc-pill-content";t.widgetEditorClass="fxc-pill-editor";t.PillInner=a}));
define("_generated/Less/MsPortalImpl/Controls/Controls.Pill.css",["module"],(function(n){"use strict";return{css:".fxc-pill{align-items:center;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:24px;font-size:13px;line-height:1.385;border-radius:16px;box-sizing:border-box;vertical-align:middle;position:relative;border:1px solid;cursor:pointer;max-width:100%}.fxc-pill .fxc-pill-tooltip.azc-control{position:absolute}.fxc-pill-inline-edit{height:auto !important;margin-top:-3px}.fxc-pill-inline-edit .fxc-pill-content{height:auto !important}.fxc-pill-theme-filter .fxc-pill-collection-item,.fxc-pill-theme-filter .fxc-pill-content{height:24px}.fxc-pill-theme-filter .fxc-pill-content-no-remove-button{margin-right:14px}.fxc-pill-theme-tag .fxc-pill-collection-item{margin:5px 4px}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill{border-color:transparent;border-radius:2px;background-color:#e6f2fb;font-size:13px;height:24px}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill:hover{background-color:#cce4f6}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill:active,.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill:focus{background-color:#b3d7f2}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill-read-container{color:#000}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill-content{margin-left:0;height:19px}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill-inner-content{margin:3px 8px 4px}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill-content-value{font-weight:normal}.fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill-collection-exceed{vertical-align:top}.fxc-pill-theme-tag .fxc-pill-collection-add-button-container{margin:0 2px}.fxc-pill-theme-tag .fxc-pill-collection-add{margin:4px 0}.fxc-pill-theme-tag .fxc-pill-collection-add-button{border:0;padding:0}.fxc-pill-theme-tag .fxc-pill-collection-add-button:focus{outline:#015cda 1px solid !important}.fxc-pill-theme-tag .fxc-pill-collection-add-icon{width:12px;height:12px;padding:0 6px}.fxc-pill-theme-tag .fxt-pill-custom-icon,.fxc-pill-theme-tag .fxt-pill-close-icon{fill:#000}.fxs-mode-dark .fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill{background-color:rgba(85,179,255,.4)}.fxs-mode-dark .fxc-pill-theme-tag .fxc-pill-collection-item .fxc-pill-read-container{color:#f3f2f1}.fxc-pill-disabled{pointer-events:none;cursor:default}.fxc-pill-tooltip{pointer-events:none;top:0;left:calc(50% - 10px)}.fxc-pill-tooltip .azc-dockedballoon-anchor{visibility:hidden}.fxc-pill-icon{flex:0 0 auto;justify-content:center;border-radius:50%;padding:4px;width:14px;height:14px;block-size:14px;margin:0}.fxc-pill-content{display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;margin-left:10px;min-width:0}.fxc-pill-content.fxc-pill-content-with-icon{margin-left:5px}.fxc-pill-editor{overflow:hidden;margin-top:-3px}.fxc-pill-content-loading{width:16px;height:16px;display:block;margin:0 auto}.fxc-pill-inner-content{max-width:400px;margin:6px 5px;height:19px;width:100%}.fxc-pill-read-container{max-width:400px;height:17px}.fxc-pill-edit-mode .fxc-pill-content{width:auto}.fxc-pill-edit-mode .fxc-pill-content.fxc-pill-content-with-icon{margin-left:5px}.fxc-pill-content-key{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1 1 auto;display:inline-block;vertical-align:top;min-width:0}.fxc-pill-content-operator{flex:0 0 auto;box-sizing:border-box;padding:0 4px;text-align:center;display:inline-block;vertical-align:top}.fxc-pill-content-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1 1 auto;display:inline-block;vertical-align:top}.fxc-pill-close{display:flex;flex:0 0 auto;justify-content:center;border-radius:50%;text-align:center;position:relative;width:24px;height:22px}.fxc-pill-close:focus{outline-offset:0}.fxt-pill-close-icon>svg{height:12px;width:12px;display:block;margin:auto;position:absolute;left:6px;top:50%;transform:translate(0,-50%)}.fxc-pill-collection{display:inline-block;width:100%}.fxc-pill-collection-item{display:inline-block;margin:5px;vertical-align:top;max-width:100%}.fxc-pill-collection-exceed{padding:0 4px}.fxc-pill-collection-add{display:inline-block;vertical-align:middle}.fxc-pill-collection-add-button-container{display:inline-block;margin:5px}.fxc-pill-collection-add-icon{padding:4px 0 4px 2px;width:18px;height:17px}.fxc-pill-collection-add-button{padding:0 8px 1px}.fxc-pill-collection-add-button:focus{border-color:#015cda}.fxc-pill-collection-add-button .fxc-pill-collection-add-label{height:auto}.fxc-pill-collection-add-label{font-size:13px;line-height:1.385;margin-left:5px;margin-right:10px}.fxc-pill-collection-disabled{pointer-events:none}.fxc-pill-collection-moreOrLess{display:inline-block;margin:5px;vertical-align:top;height:17px;float:right;cursor:pointer}.fxc-pill-collection-moreOrLess .fxc-pill-collection-moreOrLessIcon{height:12px;width:12px;display:inline-block}.fxc-pill-collection-moreOrLess .fxc-pill-collection-moreOrLessText{font-family:az_ea_font,'Segoe UI',az_font,system-ui,-apple-system,BlinkMacSystemFont,Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:13px;line-height:1.385;padding-left:5px}.fxs-mode-light .fxc-pill{border-color:#e6f2fb;background-color:#e6f2fb}.fxs-mode-light .fxc-pill.fxc-pill-collection-add-button:hover,.fxs-mode-light .fxc-pill.fxc-pill-hover{border-color:#cce4f6;background-color:#cce4f6}.fxs-mode-light .fxc-pill:focus{border-color:#015cda;background-color:#b3d7f2;outline:none}.fxs-mode-light .fxc-pill:focus .fxc-pill-close{border-color:#015cda;background-color:#b3d7f2}.fxs-mode-light .fxc-pill-dialog.fxc-pill-edit-mode{border-color:#b3d7f2;background-color:#b3d7f2}.fxs-mode-light .fxc-pill-dialog.fxc-pill-edit-mode .fxc-pill-close{border-color:#b3d7f2;background-color:#b3d7f2}.fxs-mode-light .fxc-pill-read-container{display:flex;color:#161616}.fxs-mode-light .fxc-pill-editor{color:#161616}.fxs-mode-light .fxc-pill-disabled{border-color:rgba(127,127,127,.7);background-color:rgba(127,127,127,.3);color:rgba(127,127,127,.7);opacity:.5}.fxs-mode-light .fxc-pill-disabled .fxc-pill-read-container{color:rgba(127,127,127,.7)}.fxs-mode-light .fxc-pill-close{background-color:#e6f2fb}.fxs-mode-light .fxc-pill-close.fxc-pill-close-hover{background-color:#cce4f6}.fxs-mode-light .fxc-pill-close.fxc-pill-close-hover.fxt-pill-close-icon{fill:#605e5c}.fxs-mode-light .fxt-pill-close-icon{fill:#605e5c}.fxs-mode-light .fxc-pill-collection-add-button:focus{border-color:#015cda}.fxs-mode-light .fxt-pill-custom-icon,.fxs-mode-light .fxt-pill-collection-add-icon{fill:#015cda}.fxs-mode-light .fxc-pill-collection-add-label{color:#161616}.fxs-mode-light .fxc-pill-collection-moreOrLessIcon,.fxs-mode-light .fxc-pill-collection-moreOrLessText{fill:#161616;color:#161616}.fxs-mode-light .fxc-pill-collection-moreOrLessIcon,.fxs-mode-light .fxc-pill-collection-moreOrLessText{fill:#0078d4;color:#0078d4}.fxs-highcontrast-light .fxc-pill{border-color:#000;background-color:#fff}.fxs-highcontrast-light .fxc-pill.fxc-pill-collection-add-button:hover,.fxs-highcontrast-light .fxc-pill.fxc-pill-hover{border-color:#fff;background-color:#800080}.fxs-highcontrast-light .fxc-pill:focus{border-color:#015cda;background-color:#800080;outline:none}.fxs-highcontrast-light .fxc-pill:focus .fxc-pill-close{border-color:#015cda;background-color:#800080}.fxs-highcontrast-light .fxc-pill-dialog.fxc-pill-edit-mode{border-color:#fff;background-color:#800080}.fxs-highcontrast-light .fxc-pill-dialog.fxc-pill-edit-mode .fxc-pill-close{border-color:#fff;background-color:#800080}.fxs-highcontrast-light .fxc-pill-read-container{display:flex;color:#161616}.fxs-highcontrast-light .fxc-pill-editor{color:#161616}.fxs-highcontrast-light .fxc-pill-disabled{border-color:rgba(127,127,127,.7);background-color:rgba(127,127,127,.3);color:rgba(127,127,127,.7);opacity:.5}.fxs-highcontrast-light .fxc-pill-disabled .fxc-pill-read-container{color:rgba(127,127,127,.7)}.fxs-highcontrast-light .fxc-pill-close{background-color:#fff}.fxs-highcontrast-light .fxc-pill-close.fxc-pill-close-hover{background-color:#800080}.fxs-highcontrast-light .fxc-pill-close.fxc-pill-close-hover.fxt-pill-close-icon{fill:#fff}.fxs-highcontrast-light .fxt-pill-close-icon{fill:#605e5c}.fxs-highcontrast-light .fxc-pill-collection-add-button:focus{border-color:#015cda}.fxs-highcontrast-light .fxt-pill-custom-icon,.fxs-highcontrast-light .fxt-pill-collection-add-icon{fill:#000}.fxs-highcontrast-light .fxc-pill-collection-add-label{color:#161616}.fxs-highcontrast-light .fxc-pill-collection-moreOrLessIcon,.fxs-highcontrast-light .fxc-pill-collection-moreOrLessText{fill:#161616;color:#161616}.fxs-highcontrast-light .fxc-pill-dialog.fxc-pill-edit-mode .fxt-pill-custom-icon,.fxs-highcontrast-light .fxc-pill-hover .fxt-pill-custom-icon,.fxs-highcontrast-light .fxc-pill:active .fxt-pill-custom-icon,.fxs-highcontrast-light .fxc-pill:focus .fxt-pill-custom-icon,.fxs-highcontrast-light .fxc-pill-dialog.fxc-pill-edit-mode .fxt-pill-close-icon,.fxs-highcontrast-light .fxc-pill-hover .fxt-pill-close-icon,.fxs-highcontrast-light .fxc-pill:active .fxt-pill-close-icon,.fxs-highcontrast-light .fxc-pill:focus .fxt-pill-close-icon{fill:#fff}.fxs-highcontrast-light .fxc-pill-dialog.fxc-pill-edit-mode .fxc-pill-read-container,.fxs-highcontrast-light .fxc-pill-hover .fxc-pill-read-container,.fxs-highcontrast-light .fxc-pill:active .fxc-pill-read-container,.fxs-highcontrast-light .fxc-pill:focus .fxc-pill-read-container{color:#f3f2f1}.fxs-highcontrast-light .fxc-pill-close{background-color:#fff}.fxs-highcontrast-light .fxc-pill-close.fxc-pill-close-hover{background-color:#800080}.fxs-highcontrast-light .fxc-pill-close.fxc-pill-close-hover.fxt-pill-close-icon{fill:#fff}.fxs-mode-dark .fxc-pill{border-color:rgba(127,127,127,.7);background-color:#323130}.fxs-mode-dark .fxc-pill.fxc-pill-collection-add-button:hover,.fxs-mode-dark .fxc-pill.fxc-pill-hover{border-color:#7f7f7f;background-color:#484644}.fxs-mode-dark .fxc-pill:focus{border-color:#4894fe;background-color:#72716e;outline:none}.fxs-mode-dark .fxc-pill:focus .fxc-pill-close{border-color:#4894fe;background-color:#72716e}.fxs-mode-dark .fxc-pill-dialog.fxc-pill-edit-mode{border-color:rgba(127,127,127,.7);background-color:#72716e}.fxs-mode-dark .fxc-pill-dialog.fxc-pill-edit-mode .fxc-pill-close{border-color:rgba(127,127,127,.7);background-color:#72716e}.fxs-mode-dark .fxc-pill-read-container{display:flex;color:#f3f2f1}.fxs-mode-dark .fxc-pill-editor{color:#f3f2f1}.fxs-mode-dark .fxc-pill-disabled{border-color:rgba(127,127,127,.7);background-color:rgba(127,127,127,.3);color:rgba(127,127,127,.7);opacity:.5}.fxs-mode-dark .fxc-pill-disabled .fxc-pill-read-container{color:rgba(127,127,127,.7)}.fxs-mode-dark .fxc-pill-close{background-color:#323130}.fxs-mode-dark .fxc-pill-close.fxc-pill-close-hover{background-color:#484644}.fxs-mode-dark .fxc-pill-close.fxc-pill-close-hover.fxt-pill-close-icon{fill:#faf9f8}.fxs-mode-dark .fxt-pill-close-icon{fill:#f3f2f1}.fxs-mode-dark .fxc-pill-collection-add-button:focus{border-color:#4894fe}.fxs-mode-dark .fxt-pill-custom-icon,.fxs-mode-dark .fxt-pill-collection-add-icon{fill:#f3f2f1}.fxs-mode-dark .fxc-pill-collection-add-label{color:#f3f2f1}.fxs-mode-dark .fxc-pill-collection-moreOrLessIcon,.fxs-mode-dark .fxc-pill-collection-moreOrLessText{fill:#f3f2f1;color:#f3f2f1}.fxs-highcontrast-dark .fxc-pill{border-color:#fff;background-color:#000}.fxs-highcontrast-dark .fxc-pill.fxc-pill-collection-add-button:hover,.fxs-highcontrast-dark .fxc-pill.fxc-pill-hover{border-color:#f3f2f1;background-color:#0ff}.fxs-highcontrast-dark .fxc-pill:focus{border-color:#4894fe;background-color:#0ff;outline:none}.fxs-highcontrast-dark .fxc-pill:focus .fxc-pill-close{border-color:#4894fe;background-color:#0ff}.fxs-highcontrast-dark .fxc-pill-dialog.fxc-pill-edit-mode{border-color:#f3f2f1;background-color:#0ff}.fxs-highcontrast-dark .fxc-pill-dialog.fxc-pill-edit-mode .fxc-pill-close{border-color:#f3f2f1;background-color:#0ff}.fxs-highcontrast-dark .fxc-pill-read-container{display:flex;color:#f3f2f1}.fxs-highcontrast-dark .fxc-pill-editor{color:#f3f2f1}.fxs-highcontrast-dark .fxc-pill-disabled{border-color:#0f0;background-color:rgba(127,127,127,.3);color:#0f0;opacity:1}.fxs-highcontrast-dark .fxc-pill-disabled .fxc-pill-read-container{color:#0f0}.fxs-highcontrast-dark .fxc-pill-close{background-color:#323130}.fxs-highcontrast-dark .fxc-pill-close.fxc-pill-close-hover{background-color:#0ff}.fxs-highcontrast-dark .fxc-pill-close.fxc-pill-close-hover.fxt-pill-close-icon{fill:#484644}.fxs-highcontrast-dark .fxt-pill-close-icon{fill:#f3f2f1}.fxs-highcontrast-dark .fxc-pill-collection-add-button:focus{border-color:#4894fe}.fxs-highcontrast-dark .fxt-pill-custom-icon,.fxs-highcontrast-dark .fxt-pill-collection-add-icon{fill:#f3f2f1}.fxs-highcontrast-dark .fxc-pill-collection-add-label{color:#f3f2f1}.fxs-highcontrast-dark .fxc-pill-collection-moreOrLessIcon,.fxs-highcontrast-dark .fxc-pill-collection-moreOrLessText{fill:#f3f2f1;color:#f3f2f1}.fxs-highcontrast-dark .fxc-pill-dialog.fxc-pill-edit-mode .fxt-pill-custom-icon,.fxs-highcontrast-dark .fxc-pill-hover .fxt-pill-custom-icon,.fxs-highcontrast-dark .fxc-pill:active .fxt-pill-custom-icon,.fxs-highcontrast-dark .fxc-pill:focus .fxt-pill-custom-icon,.fxs-highcontrast-dark .fxc-pill-dialog.fxc-pill-edit-mode .fxt-pill-close-icon,.fxs-highcontrast-dark .fxc-pill-hover .fxt-pill-close-icon,.fxs-highcontrast-dark .fxc-pill:active .fxt-pill-close-icon,.fxs-highcontrast-dark .fxc-pill:focus .fxt-pill-close-icon{fill:#484644}.fxs-highcontrast-dark .fxc-pill-dialog.fxc-pill-edit-mode .fxc-pill-read-container,.fxs-highcontrast-dark .fxc-pill-hover .fxc-pill-read-container,.fxs-highcontrast-dark .fxc-pill:active .fxc-pill-read-container,.fxs-highcontrast-dark .fxc-pill:focus .fxc-pill-read-container{color:#161616}.fxs-highcontrast-dark .fxc-pill-close{background-color:#323130}.fxs-highcontrast-dark .fxc-pill-close.fxc-pill-close-hover{background-color:#0ff}.fxs-highcontrast-dark .fxc-pill-close.fxc-pill-close-hover.fxt-pill-close-icon{fill:#484644}",moduleId:n.id}}));
define("MsPortalImpl/Controls/Controls.Pill",["require","exports","MsPortalImpl/UI/Commands/UI.CommandManager","MsPortalImpl.Controls/Controls/Base/OptionsBase","MsPortalImpl.Controls/Fields/Base/FormValidation","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Interactions/Interactions.KeyboardNavigation","MsPortalImpl/UI/UI.DialogManager","MsPortalImpl/UI/UI.LinkHandler","MsPortalImpl/Base/Base.Selectable2","MsPortalImpl/Interactions/Interactions.DismissHandler","MsPortalImpl/Base/Base.ImplUtils","Fx/Controls/InfoBalloon","MsPortalImpl/Controls/Controls.Pill.Component","MsPortalImpl.Controls/Controls/Base/Base","Weave","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Weave/Util","FxInternal/Composition/ContainerViewModel","FxInternal/Css","_generated/Less/MsPortalImpl/Controls/Controls.Pill.css","FxInternal/Weave/Util","Fx/Weave"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){"use strict";function ht(n){return!!(n&&n.controlType)}function ct(n){return!!(n&&n.htmlTemplate)}var et,ut,ft;Object.defineProperty(t,"__esModule",{value:!0});t.Pill=t.Widget=t.WidgetUIState=t.InnerTsxComponent=void 0;et=h.getFxClickSelectable;d.injectCss(g);var lt=MsPortalFx.Base.Diagnostics,it=".fxc-pill",rt=".fxc-pill-close",ot="pillcontrol",st=0;t.InnerTsxComponent=v.PillInner;ut=(function(n){function t(t){var i=n.call(this)||this,r,u;return i.showDisplayText=p.makeWritableComputation(!0),i.editorType=p.makeWritableComputation(null),i.editorContent=p.makeWritableComputation(null),i.removeIconHover=p.makeWritableComputation(!1),i.pillHover=p.makeWritableComputation(!1),r=t.vm,i.tooltip=ko.computed(i._ltm,[r.infoBalloonContent],(function(n){return u||MsPortalFx.isNullOrUndefined(n)||(u=a.create(i._ltm,{content:r.infoBalloonContent})),u})),i}return __extends(t,n),t})(y.WidgetUIState);t.WidgetUIState=ut;ft=(function(t){function r(n,i,r,f){var e=t.call(this,n,i,r,f)||this,s,o;return e._dirty=ko.observable(!1),e._clickHandlerInternal=function(){return!0},e._telemetryName="",s=e.ltm,o=e.vm,e._editor=o._msPortalFxEditor,e._addEditor(s,e.vm),o.suppressDirtyBehavior||u.markFormFieldElement(e.element[0],e.vm,e,{triggerValidation:function(){return Q(!0)},valid:ko.observable(!0),dirty:e._dirty,ltm:s}),p.subscribeAndRun(s,[tt.toComputation(o.editMode),tt.toComputation(o.readOnly),e.state.editorType],(function(n,t,i){i==="Inline"&&(t||!n?e.state.showDisplayText(!0):e.state.showDisplayText(!1))})),e.element.findByClassName(v.widgetClass).attr("role","button"),e._assignEvents(),e._assignEditorEvents(),e}return __extends(r,t),r.prototype._inlineEditorDOMExists=function(){return $.contains(window.document.documentElement,this.element.findByClassName(v.widgetEditorClass)[0])},r.prototype._addEditor=function(t){var i=this,u=this.state.editorType,f=this.state.editorContent,e=this._editor,o=ot+st++,r;this._onClickSelectable=et(this._diContainer,this.ltm,this.element,ot,o);this.vm.editor.subscribeAndRun(t,(function(o){var h,c;if(o){if(e(o),o.type==="Custom"?(u("Custom"),r&&r.dispose(),r=t.createChildLifetime(),h=o.onClick,i._telemetryName=h&&h.telemetryName||"",h&&ko.ignoreDependencies((function(){var u,t;typeof h=="function"&&(u=h,h=function(t){t.stopPropagation();Q.isPromiseAlike(u)&&l.logToExtension(n,i.element,2,FxImpl.createError("Pill Control binding argument is not a callback function. The click handler is "+u));i._onClickSelectable.invokeClick(i.vm,u,t)});t=s.getUriAndHandler(r,i._diContainer,h,!0);t.errorMessage.subscribeAndRun(r,(function(t){t&&l.logToExtension(n,i.element,1,FxImpl.createError("Pill Control failure: "+MsPortalFx.getLogFriendlyMessage(t)))}));t.uri.subscribeAndRun(r,(function(n){n=!n&&h.bladeReference?"#":n;i.disabled(!n)}));i._clickHandlerInternal=function(n,i,r){var u=ko.unwrap(t.uriPromise)||Q();return u.then((function(){return t.handler(n,i,r)}))}}))):o.type==="Dialog"?u("Dialog"):u("Inline"),o.type==="Inline"||o.type==="Dialog")if(c=o.content,ht(c))f({htmlTemplate:"<div data-bind='pcControl: $data'><\/div>",viewModel:c});else if(ct(c))f(c);else throw"Unknown editor content in Pill";i._editModeLifetime=t.createChildLifetime();i._addEditModeSubscription(i._editModeLifetime)}}))},r.prototype._addEditModeSubscription=function(n){var t=this;this.vm.editMode.subscribeAndRun(n,(function(r){var u=t._editor&&t._editor(),a=t.state.editorType&&t.state.editorType.value,e,h,s,l;if(a&&u){r&&(t.state.tooltip()&&t.state.tooltip().balloonVisible(!1),nt.hasValueAsync(n,t.state.showDisplayText,(function(n){return!n})).then(p.waitForChangePropagation).then((function(){return e=t.element.findByClassName(v.widgetEditorClass),e[0]&&t._inlineEditorDOMExists()&&f.waitForBindings(e[0])})).then((function(){e.findFirstTabbable().focus();var t={dismissFn:MsPortalFx.noop,logName:"pill"};c.register(t);n.registerForDispose((function(){c.unregister(t)}))})));switch(u.type){case"Inline":!r&&u.onEditModeExited&&(h=u.onEditModeExited(),h.finally((function(){t._exitEditModeCleanUp();n.dispose()})));break;case"Dialog":s=u;r&&s.onEditModeExited&&MsPortalFx.Base.Promises.cancelOnDispose(t.ltm,(function(){return Q.spread([t._diContainer.getAsync(o.DialogManager),t._diContainer.getAsync(i.AsyncPortalFormTarget),],(function(n,i){return t._dialogEditorHandler(n,u,i)}))})).then((function(n){return s.onEditModeExited(n)})).finally((function(){n.dispose();t._exitEditModeCleanUp()}));break;case"Custom":l=t.vm.editMode();t.vm.editMode(!1);l&&t.element.children().filter(it).focus();r&&u.onClick&&t._clickHandlerInternal($.Event("click"),t._onClickSelectable,t._telemetryName);n.dispose()}}}))},r.prototype._dialogEditorHandler=function(n,t,i){var r=this;return n.showShellDialog({telemetryName:t.telemetryName||"pill control dialog",type:k.Dlg2,title:ko.unwrap(t.title),hideTitle:ko.unwrap(t.hideTitle),content:{htmlTemplate:this.state.editorContent.value.htmlTemplate,viewModel:this.state.editorContent.value.viewModel},buttons:t.buttons},i,this.element.findByClassName(v.widgetContentClass)[0],{locator:null,modal:!1,trustedTemplate:!1,sideload:!0,scopeClass:w.getCssScope(this.element)}).then((function(n){var t=r.vm.editMode();return r.vm.exitEditMode().then((function(){t&&r.element.children().filter(it).focus()})),n}),(function(n){return r.vm.exitEditMode(),n||1}))},r.prototype._assignEditorEvents=function(){var n=this,t=this.element.findByClassName(v.widgetEditorClass);this.ltm.registerForDispose([t.setEvents(["focusin",function(){if(n.$disabled())return!1;n._keyboardNavigation&&(n._keyboardNavigation.dispose(),n._keyboardNavigation=null);n._keyboardNavigation=new e.KeyboardNavigation(n.ltm,{element:t,tabTriggers:2})},],["keydown",function(t){if(n.$disabled())return!1;if(t.which===27)n._keyboardNavigation&&(n._keyboardNavigation.dispose(),n._keyboardNavigation=null),n.state.tooltip()&&n.state.tooltip().balloonVisible(!1);else if(t.which===112&&n.state.tooltip())return n.state.tooltip().balloonVisible(!n.state.tooltip().balloonVisible()),!1;t.stopPropagation()},]),])},r.prototype._assignEvents=function(){var n=this,r=this.ltm,i,t;this.$disabled.subscribeAndRun(this.ltm,(function(t){t?n.tabindex(null):n.tabindex(0)}));i=this.vm.value.subscribe(r,(function(){n._dirty(!0);i.dispose()}));t=this.element.children().filter(it);this.ltm.registerForDispose([this.element.setEvents(["dispose",it,function(){n.dispose()},],["click",it,function(){return n.vm.readOnly()||n.vm.enterEditMode(),!1},],["mouseenter",it,function(){n.vm.editMode()||n.state.tooltip()&&n.state.tooltip().balloonVisible(!0);n.state.pillHover(!0)},],["mouseleave",it,function(){n.vm.editMode()||n.state.tooltip()&&n.state.tooltip().balloonVisible(!1);n.state.pillHover(!1)},],["mouseenter",rt,function(){n.state.removeIconHover(!0)},],["mouseleave",rt,function(){n.state.removeIconHover(!1)},],["keypress",it,function(t){return n.$disabled()?!1:t.which===13||t.which===32&&!n.vm.editMode()?(n.vm.readOnly()||n.vm.enterEditMode(),!1):void 0},],["keydown",it,function(t){return n.$disabled()?!1:t.which===112&&n.state.tooltip()?(n.state.tooltip().balloonVisible(!n.state.tooltip().balloonVisible()),!1):void 0},],["keyup",it,function(i){if(n.$disabled())return!1;if(i.which===27){n.state.tooltip()&&n.state.tooltip().balloonVisible(!1);var r=n.vm.editMode();n.vm.exitEditMode().then((function(){r&&t.focus()}))}i.stopPropagation()},],["focusout",it,function(i){var o,u,f,s;if(n.$disabled())return!1;var h=$.contains(n.element[0],i.relatedTarget),c=!i.relatedTarget&&i.target!==t[0]&&$(i.target).closest(it).length===0,r=$(i.target),l=!!r.attr("aria-multiselectable"),e;if(e=l?r.hasClass("fxc-dropdown-popup")&&!r.hasClass("fxc-dropdown-hidden"):r.hasClass("fxc-dropdown-popup"),h)r.hasClass("fxc-dropdown-open")&&(o=$(i.relatedTarget),r.hasClass("fxc-dropdown-popup")||o.hasClass("fxc-dropdown-option")?setTimeout((function(){return r.focus()})):setTimeout((function(){return o.focus()})));else{if(c||e){for(u=r,e&&(f=ko.dataFor(r[0]),f&&f.data&&f.data.isPopUpOpen(!1));!u.parent().hasClass(v.widgetEditorClass);)u=u.parent();u=u.findFirstTabbable();u.length===0&&(u=t);u.focus()}n.state.editorType.value==="Inline"&&(s=n.vm.editMode(),n.vm.exitEditMode().then((function(){s&&t.focus()})))}},]),this.element.setEvents(["click",rt,function(t){if(n.$disabled())return!1;n._removePill();t.stopPropagation()},],["keypress",rt,function(t){return n.$disabled()?!1:t.which===13||t.which===32?(n._removePill(),!1):void 0},]),])},r.prototype._exitEditModeCleanUp=function(){this.state.editorContent({htmlTemplate:"",viewModel:{}});this._keyboardNavigation&&(this._keyboardNavigation.dispose(),this._keyboardNavigation=null)},r.prototype._removePill=function(){var n=this.element.parent();n.hasClass("fxc-pill-collection")&&n.trigger("onRemoved",this.element);this.vm.onRemoved&&this.vm.onRemoved(this.vm.value());this.dispose()},r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(t.prototype.dispose)||(this._cleanElement(v.widgetClass),t.prototype.dispose.call(this))},r})(r.Widget);t.Widget=ft;t.Pill=b.createControlComponent({widgetCtor:ft,widgetUIStateCtor:ut,innerComponent:v.PillInner})}));
define("_generated/MsPortalImpl/Svg/Library/Controls/AddFilter.svg",["require","exports"],(function(){"use strict";return{type:1,data:"<svg viewBox='0 0 18 17' class='msportalfx-svg-placeholder' role='presentation' focusable='false' xmlns:svg='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g><title><\/title><path d='M5 4V0H4v4H0v1h4v4h1V5h4V4z'/><path d='M7 7v1.5l4 3.8V17h3v-4.7l4-3.8V7H7zm6 5v4h-1v-4L8 8.3V8h9v.3L13 12z'/><\/g><\/svg>"}}));
define("MsPortalImpl/Controls/Controls.PillCollection.Component",["require","exports","Weave/DirectMode","Fx/Weave","Weave","FxInternal/Weave/Util","MsPortalImpl/Weave/Util","MsPortalImpl/Controls/Controls.Pill","_generated/MsPortalImpl/Svg/Library/Controls/AddFilter.svg","MsPortalImpl/Weave/Components"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PillCollectionInner=void 0;var c=function(t){var l=t.vm,c=t.state,a=1===l.theme;return i(u.GetContext,{fn:function(t){var v=e.aggregateContext(t,l,c),y=v.disabled,k=v.tabIndex,p=r.toComputation(c.tabIndex),w=c.addButtonAriaLabel,d=MsPortalFx.Base.Images.CustomImageWithOptions(s,{palette:99}),b=c.addButtonLabelVisible.compose(f.negation);return i("div",{className:["fxc-pill-collection",a?"fxc-pill-theme-filter":"fxc-pill-theme-tag",{"fxc-pill-collection-disabled":y}],role:"list",tabindex:"-1","aria-label":r.toComputation(l.ariaLabel)},i(u.SetContext,{disabled:y,tabIndex:k},i(u.ForEach,{collection:c.visibleItems,fn:function(n){var t=n.item,r=n.index;return i(o.Pill,{className:"fxc-pill-collection-item",role:"listitem","data-index":r,vm:t})}})),i("div",{className:["fxc-pill-collection-add",{"fxs-display-none":r.toComputation(l.addition.canAddPill).compose(f.negation)},],role:"listitem"},i("div",{className:"fxc-pill-collection-add-button-container"},i("div",{className:"fxc-pill fxc-pill-collection-add-button",role:"button",tabindex:p,"aria-label":w,title:w},i("span",{className:"fxc-pill-icon fxc-pill-collection-add-icon fxt-pill-collection-add-icon",image:r.toComputation(l.addition.icon).compose((function(n){return n||d}))}),i(u.If,{condition:c.addButtonLabelWithString,concealmentBehavior:"remove",trueFn:function(){return i("span",{className:["fxc-pill-content fxc-pill-collection-add-label",{"fxs-display-none":b}]},c.addButtonLabel)}}),i(u.If,{condition:c.addButtonLabelWithHtmlTemplate,concealmentBehavior:"remove",trueFn:function(){return i("span",{className:["fxc-pill-content fxc-pill-collection-add-label",{"fxs-display-none":b}]},i(h.HtmlOrKo,{content:r.toComputation(l.addition.label),require:n}))}})))),i("div",{className:["fxc-pill-collection-moreOrLess",{"fxs-display-none":c.showMoreOrLess.compose(f.negation)},],onClick:function(n){var t=n.event;c.moreOrLessExpanded(!c.moreOrLessExpanded.value);t.stopPropagation()},onKeyPress:function(n){var t=n.event;(t.which===13||t.which===32)&&(c.moreOrLessExpanded(!c.moreOrLessExpanded.value),t.stopPropagation())}},i("div",{className:"fxc-pill-collection-moreOrLess-content",role:"button",tabindex:p,"aria-expanded":c.moreOrLessExpanded},i("span",{className:"fxc-pill-collection-moreOrLessIcon",image:c.moreOrLessIcon}),i("span",{className:"fxc-pill-collection-moreOrLessText"},c.moreOrLessText))))}})};t.PillCollectionInner=c}));
define("MsPortalImpl/Controls/Controls.PillCollection",["require","exports","MsPortalImpl.Controls/Controls/Base/ViewModelBase","MsPortalImpl.Controls/Controls/Base/Base","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Util/Viva.Resize","MsPortalImpl/Base/Base.Timers","MsPortalImpl/Base/Base.Events","MsPortalImpl/Controls/Controls.PillCollection.Component","Weave/Core/Computation","Weave","Fx/Weave","MsPortalImpl/Controls/Controls.Pill"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var b,k;Object.defineProperty(t,"__esModule",{value:!0});t.Widget=t.WidgetUIState=t.InnerTsxComponent=void 0;var v="fxc-pill-collection",d="fxc-gc",g="fxc-gc-cell",y="fxc-gc-columncell",nt="fxc-gc-columnheader",tt=u.Controls.Pill.editTags,p=u.Controls.Pill.addFilter,w={filter:10,tag:8},a=ko.utils.domData,it=MsPortalFx.isNullOrUndefined;t.InnerTsxComponent=s.PillCollectionInner;b=(function(n){function t(t){var i=n.call(this)||this;i.visibleItems=c.makeWritableComputation([]);i.exceedItems=c.makeWritableComputation([]);i.showMoreOrLess=c.makeWritableComputation(!0);i.moreOrLessExpanded=c.makeWritableComputation(!1);i.moreOrLessIcon=i.moreOrLessExpanded.compose((function(n){return n?MsPortalFx.Base.Images.CaretUp():MsPortalFx.Base.Images.CaretDown()}));i.moreOrLessText=c.composeComputation([i.moreOrLessExpanded,i.exceedItems],(function(n,t){return n?u.Controls.Pill.less:u.Controls.Pill.more.format(t.length)}));var r=t.vm,f=l.toComputation(r.addition.label),e=1===r.theme?p:tt;return i.noAddButtonLabel=f.compose((function(n){return it(n)||typeof n=="string"&&!n.length})),i.addButtonLabelWithString=c.composeComputation([f,i.noAddButtonLabel],(function(n,t){return!t&&!n.htmlTemplate})),i.addButtonLabel=c.composeComputation([f,i.noAddButtonLabel],(function(n,t){return r.addition.labelProvided?t?"":typeof n=="string"?n:n.htmlTemplate:p})),i.addButtonAriaLabel=c.composeComputation([l.toComputation(r.addition.ariaLabel),i.addButtonLabelWithString,i.addButtonLabel],(function(n,t,i){return n||(n=t?i:e),n})),i.addButtonLabelVisible=c.composeComputation([l.toComputation(r.addition.alwaysShowLabel),i.noAddButtonLabel,l.toComputation(r.items)],(function(n,t,i){return!t&&(n||!i.length)})),i.addButtonLabelWithHtmlTemplate=c.composeComputation([f,i.noAddButtonLabel],(function(n,t){return!t&&!!n.htmlTemplate})),i}return __extends(t,n),t})(r.WidgetUIState);t.WidgetUIState=b;k=(function(n){function t(t,i,r,u){var o=n.call(this,t,i,r,u)||this,h,l,b,s,v,p,w;return o._moreOrLessWidth=0,o._fxElementCache=ko.observableArray([]),o._theme=o.vm.theme===1?"filter":"tag",h=t.closest("."+d),o._inGrid=!!h.length,o._inGrid?(l=t.closest("."+g).attr("class").split(" "),b=l[MsPortalFx.findIndex(l,(function(n){return n.includes(y)}))].slice(y.length),o._cacheElement=h.find(".fxc-gc-columnheaderrow:eq(0) ."+nt+b)[0]):o._cacheElement=t[0],s=function(){o.element.trigger("calculateSize")},c.subscribeAndRun(o.ltm,[o.state.moreOrLessExpanded],s),o._assignEvents(),o._containerWidth=o._inGrid?parseInt(ko.dataFor(o._cacheElement).width()):o._getElementWidth(o.element[0]),v=ko.unwrap(o.vm.addition.icon),p="add"+(v?v.type.toString():"")+c.evaluate(o.ltm,o.state.addButtonLabel),o._addButtonWidth=a.get(o._cacheElement,p),o._addButtonWidth||(o._addButtonWidth=o._getElementWidth(o.element.findByClassName("fxc-pill-collection-add")[0]),a.set(o._cacheElement,p,o._addButtonWidth)),w="moreOrLessCounter123",o._moreOrLessWidth=a.get(o._cacheElement,w),o._moreOrLessWidth||(o._moreOrLessWidth=o.element.findByClassName("fxc-pill-collection-moreOrLess").outerWidth(!0)+10,a.set(o._cacheElement,w,o._moreOrLessWidth)),o.state.showMoreOrLess(!1),o.vm.items.subscribeAndRun(o.ltm,s),e.throttleByAnimationFrame((function(){f.track(o.ltm,o.element,(function(n,t){t!==0&&(o._containerWidth!==n||t>40)&&(o._containerWidth=n,s())}))}))(),o}return __extends(t,n),t.prototype._getElementWidth=function(n){return n.getBoundingClientRect().width},t.prototype._addPill=function(){var n=this,t=this.element.find(".fxc-pill-collection-add-button")[0],i=o.getOrCreateFxElement(t,this._fxElementCache),r=this.vm.addition.addPill(i);r.then((function(t){if(t){var i=function(){n.element.find(".fxc-pill-collection-item.fxc-base").last().children().filter(".fxc-pill").focus()};h.invokeAfterChangePropagation(i)}}))},t.prototype._assignEvents=function(){var n=this,t;this.$disabled.subscribeAndRun(this.ltm,(function(t){n.tabindex(t?null:0)}));t=this.element.findByClassName("fxc-pill-collection-add");this.ltm.registerForDispose([t.setEvents(["focusin",function(t){var i=t.relatedTarget&&$(t.relatedTarget);i&&i.hasClass(".fxc-pill-content")&&$.contains(n.element[0],t.relatedTarget)&&!i.hasClass("fxc-pill-collection-add")&&!i.hasClass("fxc-pill-close")&&n._addPill()},],["click",function(t){n._addPill();t.stopPropagation()},],["keypress",function(t){if(t.which===13||t.which===32)return n._addPill(),!1},]),this.element.setEvents(["onRemoved",function(t,i){for(var o,s,c=$(i),f=n.vm,e=n.element.find(".fxc-pill-collection-item"),r,u=0;u<e.length;u++)if(c.data("index")===e.eq(u).data("index")){r=u;break}o=f.items()[r];s=n.vm.deletion.removePill(o);s.then((function(t){var i,u;t&&(i=f.items(),i.length?(u=function(){var t=r<i.length?r+1:r-1,u=t===n.state.visibleItems.value.length?n.element.find(".fxc-pill-collection-item").eq(t-1).children().filter(".fxc-pill"):e.eq(t).children().filter(".fxc-pill");u.focus()},h.invokeAfterChangePropagation(u)):f.addition.canAddPill()?n.element.find(".fxc-pill-collection-add-button").focus():n.element.focus())}))},],["calculateSize",function(){var f=n.vm.items(),t=[],r=[],i=n._addButtonWidth,e=i,u=!0,s=f.map((function(t){return n._getWidth(t)})),o=s.map((function(n,t){return{item:f[t],width:n}}));o.forEach((function(f,s){var h=f.width+w[n._theme],l=t.length<n.vm.maxVisibleItems||n.state.moreOrLessExpanded.value,a,v,y,c;e+=h;a=!n.vm.multipleRows&&u&&i+h<=n._containerWidth&&l;v=(n.state.moreOrLessExpanded.value||n.vm.multipleRows)&&l;a||v?(i+=h,t.push(f.item)):(u&&(u=!1,i+=n._moreOrLessWidth,s>0&&(y=o[s-1].width+w[n._theme],i>n._containerWidth&&n._containerWidth>=n._moreOrLessWidth+n._addButtonWidth&&(c=t[t.length-1],c&&(i-=y,t.pop(),r.push(c))))),r.push(f.item))}));n.state.visibleItems(t);n.state.exceedItems(r);t.length>n.vm.maxVisibleItems||n.state.exceedItems.value.length||e>n._containerWidth&&!n.vm.multipleRows?n.state.showMoreOrLess(!0):(n.state.showMoreOrLess(!1),n.state.moreOrLessExpanded(!1))},]),])},t.prototype._getWidth=function(n){var i=n.displayText,f=i.value(),t=i.key(),r,u;return i.operator&&(t+=i.operator()),t+=f||"",r=a.get(this._cacheElement,t),r?r:(u=this._measureWidth(n,t),a.set(this._cacheElement,t,u),u)},t.prototype._measureWidth=function(n){var t=$(FxImpl.createElement("div",{"class":"fxc-pill-collection-item",role:"listitem","data-bind":"pcControl: $data",style:"visibility: hidden; position: absolute; display: inline-block;"})),r,u,f,i;return this.element.findByClassName(v).append(t),r=__assign(__assign({},n),{infoBalloonContent:ko.observable(),tooltip:ko.observable(),suppressDirtyBehavior:!0}),u=new ko.bindingContext(r).extend({$dicontainer:this._diContainer}),ko.applyBindings(u,t[0]),f=this._getElementWidth(t[0]),i=function(){t.children().filter(".fxc-pill").trigger("dispose");t.remove()},n.editMode()?setTimeout(i):i(),f},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this.element.removeClass(v),n.prototype.dispose.call(this))},t})(i.Widget);t.Widget=k}));
define("_generated/Less/MsPortalImpl/Widgets/Widgets.DashboardFilters.css",["module"],(function(n){"use strict";return{css:"@keyframes tileoverlaylight{0%{background-color:transparent}100%{background-color:rgba(67,67,67,.6)}}@keyframes tileoverlaydark{0%{background-color:transparent}100%{background-color:rgba(17,17,17,.6)}}.fxs-dashboard-filtering-mode{background-color:rgba(0,0,0,.35);transition:background-color .25s}.fxs-dashboard-filtering-mode .fxs-startboard-header,.fxs-dashboard-filtering-mode .fxs-startboard-commandBar{opacity:.3}.fxs-dashboard-filtering-mode .fxs-tile.fxs-filtered-out-tile .fxs-tile-overlay{display:block;animation-fill-mode:forwards}.fxs-dashboard-filtering-mode .fxs-startboard-filter{z-index:198}.fxs-startboard-filter{padding:0 25px 0 40px}.fxs-startboard-filter .fxc-pill-collection-item:first-child{margin-left:0}.fxs-mode-light .fxs-filtered-out-tile .fxs-tile-overlay{animation:tileoverlaylight .25s}.fxs-mode-dark .fxs-filtered-out-tile .fxs-tile-overlay{animation:tileoverlaydark .25s}.fxs-startboard-filter .fxc-pill-inline-edit{margin-top:-1px}.ext-startboard-filter-relative .azc-optionPicker ul{display:-ms-grid;display:grid;-ms-grid-columns:1fr 1fr;grid-template-columns:1fr 1fr}.ext-startboard-filter-relative .azc-optionPicker li{display:inline-flex !important;margin-bottom:5px !important}.ext-startboard-filter-relative .azc-optionPicker li:nth-child(n){-ms-grid-column:1}.ext-startboard-filter-relative .azc-optionPicker li:nth-child(2n){-ms-grid-column:2}.ext-startboard-filter-relative .azc-optionPicker li:nth-child(1),.ext-startboard-filter-relative .azc-optionPicker li:nth-child(2){-ms-grid-row:1}.ext-startboard-filter-relative .azc-optionPicker li:nth-child(3),.ext-startboard-filter-relative .azc-optionPicker li:nth-child(4){-ms-grid-row:2}.ext-startboard-filter-relative .azc-optionPicker li:nth-child(5),.ext-startboard-filter-relative .azc-optionPicker li:nth-child(6){-ms-grid-row:3}.ext-startboard-filter-relative .azc-optionPicker li:nth-child(7),.ext-startboard-filter-relative .azc-optionPicker li:nth-child(8){-ms-grid-row:4}.ext-startboard-filter-relative .azc-optionPicker li:nth-child(9),.ext-startboard-filter-relative .azc-optionPicker li:nth-child(10){-ms-grid-row:5}.ext-startboard-filter-editor{display:flex;flex-direction:row;flex:0 0 auto}.ext-startboard-filter-id{display:block;margin-right:5px}.ext-startboard-filter-value{display:block;margin-left:5px;min-width:120px}.ext-startboard-filter-operation{display:block}.fxs-startboard-filters-pills{display:flex;flex-wrap:wrap;align-items:center;width:100%}.fxs-startboard-filters-pills .fxc-pill-content-key{flex:0 0 auto}.fxs-startboard-filters-pills .fxc-pill-content-value{max-width:120px}.fxs-startboard-filters-pills .fxs-startboard-refreshlabel{flex:0 0 auto;margin-left:auto}.ext-startboard-filter-wrap{max-width:280px;max-height:45vh;overflow:auto;font-size:13px;line-height:1.385}.ext-startboard-filter-wrap .ext-startboard-filter-timePicker{margin:15px 0}.ext-startboard-filter-start,.ext-startboard-filter-end{width:230px}.ext-startboard-filter-start,.ext-startboard-filter-end,.ext-startboard-filter-zone{margin-top:8px}",moduleId:n.id}}));
define("MsPortalImpl/Widgets/Widgets.DashboardFilters",["require","exports","Fx/Controls/InfoBox","Fx/Controls/Pill","Fx/Controls/PillCollection","Fx/Controls/RadioButtons","Fx/Controls/TextBlock","FxInternal/Composition/DashboardFilters","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Widgets/Widgets.WidgetBase","MsPortalImpl/UI/Dashboard/DashboardFilterTransformHelper","MsPortalImpl/UI/Dashboard/AutoRefresh","FxInternal/Css","_generated/Less/MsPortalImpl/Widgets/Widgets.DashboardFilters.css","MsPortalImpl/Controls/Controls.Pill","MsPortalImpl/Controls/Controls.PillCollection"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){"use strict";function k(n,t){b.trace({source:"DashboardFilters",action:n,data:t})}function nt(n,t){for(var e,o=n.get(l.AutoRefresh),s=o.interval,h=[{text:y.off,value:0},{text:y.fiveMin,value:5},{text:y.tenMin,value:10},{text:y.fifteenMin,value:15},{text:y.thirtyMin,value:30},{text:y.oneHour,value:60},{text:y.twoHours,value:120},{text:y.fourHours,value:240},{text:y.day,value:1440},],c=[],u=0,a=h;u<a.length;u++)e=a[u],c[e.value]=e.text.toString();return r.create(t.ltm,{ariaLabel:y.label,getKeyText:function(){return y.label},getValueText:function(n){return c[n]},getOperatorText:function(){return":"},value:s,showRemoveButton:!1,createEditor:function(){var r=i.create(t.ltm,{style:1,text:y.description,visible:o.isShared}),n=f.create(t.ltm,{label:y.optionsLabel,items:h,singleItemPerLine:!0,value:ko.observable(s())}),u={info:r,options:n};return{title:y.label,onEditModeExited:function(){return Q(n.value())},buttons:[{button:4,displayText:p.apply},{button:1,displayText:p.cancel},],content:{htmlTemplate:"<div data-bind='pcControl: info'><\/div><div data-bind='pcControl: options'><\/div>",viewModel:u},telemetryName:"AutoRefreshInterval"}}})}function tt(n,t){var i=n.get(l.AutoRefresh),r=ko.computed(t,(function(){var n=new Date(i.lastUpdate());return y.lastUpdated.format(n.toRelativeString())})),u=setInterval((function(){i.lastUpdate.valueHasMutated()}),6e4);return t.registerForDispose((function(){return clearInterval(u)})),e.create(t,{text:r,visible:MsPortalFx.isFeatureEnabled("dashboardautorefresh")})}var w,b,p,y,d,g;Object.defineProperty(t,"__esModule",{value:!0});t.Widget=void 0;w=MsPortalFx.Base;b=w.Diagnostics.Telemetry;a.injectCss(v);p=s.DashboardFilters;y=s.Dashboard.AutoRefresh;d='<div class="fxs-startboard-filters-pills fxs-hide-in-customize">\n    <div data-bind="pcControl: pillList"><\/div>\n    <div class="fxs-startboard-refreshlabel az-noprint" data-bind="pcControl: lastUpdated"><\/div>\n<\/div>';g=(function(n){function t(t,i,r){var u=n.call(this,t.findByClassName("fxs-startboard-filter"),i)||this,f,e;return u._diContainer=r,u._filterPillCollection=ko.observableArray([]),u._getEditingUi=MsPortalFx.memoizeQ((function(){return Q.all([MsPortalFx.require("MsPortalImpl/Widgets/Widgets.DashboardFilters.Editing"),u._filtersWidgetViewModel.getFilterUpdatingApi(),]).spread((function(n,t){return new n.EditingImpl(u._filtersWidgetViewModel.appliedFilters,t)}))})),u._filtersWidgetViewModel=i,u.element.html(d),f=tt(u._diContainer,u.ltm),e=new ko.bindingContext({pillList:u._setupPillCollection(),lastUpdated:f}).extend({$dicontainer:u._diContainer}),ko.applyBindings(e,u.element.findByClassName("fxs-startboard-filters-pills")[0]),u}return __extends(t,n),t.prototype._updatePillsCollection=function(){var t=this,n=this._filtersWidgetViewModel.appliedFilters().map((function(n){return t._createPill(n)}));MsPortalFx.isFeatureEnabled("dashboardautorefresh")&&n.unshift(nt(this._diContainer,this));this._filterPillCollection(n)},t.prototype._setupPillCollection=function(){var n=this;return ko.reactor(this.ltm,this._filtersWidgetViewModel.appliedFilters,(function(){n._updatePillsCollection()})),u.create(this.ltm,{items:this._filterPillCollection,addition:{canAddPill:ko.computed(this.ltm,(function(){return MsPortalFx.isFeatureEnabled("dashboardfiltersaddbutton")&&n._filtersWidgetViewModel.showAddFilterUi()})),label:p.addFilter,addPill:function(){return k("DashboardFiltersAdd",{}),n._createPill(n._filtersWidgetViewModel.createDashboardFilterViewmodel(),!0,!0)}}})},t.prototype._createPill=function(n,t,i){var e=this;t===void 0&&(t=!1);i===void 0&&(i=!1);var h=this.ltm.createChildLifetime(),u=n.kind()===0,f=r.create(h,{ariaLabel:n.filterIdDisplayText,value:ko.computed(this.ltm,{read:function(){return ko.unwrap(n.model),ko.unwrap(n.id),ko.unwrap(n.kind),n},write:function(){}}),getKeyText:function(){return n.filterIdDisplayText},getOperatorText:function(){if(i)return"";if(u)return":";var t=c.getDenormalizedOperatorForWidget(n.model());return o.operatorStrings[t]},getValueText:function(){return n.filterValueDisplayText},onRemoved:function(){h.dispose();var t=n.id();e._filtersWidgetViewModel.getFilterUpdatingApi().then((function(i){i.exitEditMode();k("DashboardFiltersRemoved",t);var r=n.model();i.removeFilter(t,r&&r.operator)}))},editMode:ko.observable(t),showRemoveButton:!u,createEditor:function(t){return u?e._getEditingUi().then((function(i){return i.createDialogEditor(t,n)})):e._getEditingUi().then((function(r){return r.createEditor(t,n,(function(){return e._updatePillsCollection()}),i)}))}});return ko.reactor(this.ltm,[n.id,n.model,n.isApplicable,n.warningMessage],(function(t,r,e,h){var l,a,v;if(i)return"";f.readOnly(!e);f.showRemoveButton(u?!e:!0);e?(a=c.getDenormalizedOperatorForWidget(n.model()),v=u?":":o.operatorStrings[a],l=h||n.filterIdDisplayText+" "+v+" "+n.filterValueDisplayText):l=s.Filtering.invalid;f.infoBalloonContent(l);f.icon(h?MsPortalFx.Base.Images.StatusBadge.Warning():null)})),f},t})(h.Widget);t.Widget=g}))