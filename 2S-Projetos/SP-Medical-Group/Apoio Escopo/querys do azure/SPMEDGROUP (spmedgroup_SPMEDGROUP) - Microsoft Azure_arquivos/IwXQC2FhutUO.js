define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers",["require","exports"],(function(){"use strict";var n;return (function(n){function e(n,i,r){var u=n.charCodeAt(0);return t[n]||(t[n]="&#"+(i?0:r?(u-55296)*1024+n.charCodeAt(1)- -9216:u)+";")}function i(n){return n===null}function r(n){return n===undefined}function o(n){return i(n)||r(n)}function u(n){return n!==undefined&&n!==null?String(n).replace(f,e):""}function s(n){return u(n)}function h(t,i,r){return t.apply(n,[i].concat(r))}var f=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"};n.isNull=i;n.isUndefined=r;n.isNullOrUndefined=o;n.htmlEncode=u;n.attributeEncode=s;n.callFormatter=h})(n||(n={})),n}));
define("Viva.Controls/Util/Viva.DateUtil",["require","exports"],(function(){"use strict";var n;return (function(n){function v(n,t,i){return i=i?i:"0",t+1>=n.length&&(n=Array(t+1-n.length).join(i)+n),n}function u(n,t,i){return v(n+"",t,i)}function h(n,t){return n.substr(Math.max(n.length-t,0))}function i(n,t){return h(n+"",t)}function r(n,t){return h(u(n,t,"0"),t)}function c(n){return n=n%12,n===0?12:n}function o(n){return n&&n.split("").reverse().join("")}function f(n){return n&&"\\"+n.split("").join("\\")}function y(e){var o=e.length,h,l,a,v,s=n.getLocaleValues();switch(e[0]){case"y":switch(o){case 3:return u(t.getFullYear(),o);case 1:return parseInt(i(t.getFullYear(),2),10)+"";default:return r(t.getFullYear(),o)}case"M":switch(o){case 4:return f(s.months[t.getMonth()]);case 3:return f(s.monthsAbbr[t.getMonth()]);case 2:return r(t.getMonth()+1,2);default:return i(t.getMonth()+1,2)}case"d":switch(o){case 4:return f(s.days[t.getDay()]);case 3:return f(s.daysAbbr[t.getDay()]);case 2:return r(t.getDate(),2);default:return i(t.getDate(),2)}case"h":return o===2?r(c(t.getHours()),2):i(c(t.getHours()),2);case"H":return o===2?r(t.getHours(),2):i(t.getHours(),2);case"m":return o===2?r(t.getMinutes(),2):i(t.getMinutes(),2);case"s":switch(o){case 4:return r(t.getMilliseconds(),3);case 3:return i(t.getMilliseconds(),3);case 2:return r(t.getSeconds(),2)}return i(t.getSeconds(),2);case"t":return o===2?s.ampm[t.getHours()<12?0:1]:s.ampmAbbr[t.getHours()<12?0:1];case"z":return(h=-t.getTimezoneOffset()/60,l=h<0,l&&(h=-h),a=parseInt(h+"",10),v=(h-a)*60,o===3)?(l?"-":"+")+u(a,2)+":"+u(v,2):(l?"-":"+")+u(a,o);case"/":return s.dateSeparator;case":":return s.timeSeparator}return""}function p(n){return o(y(n))}function w(i){for(var r,h,e=[],u=1;u<arguments.length;u++)e[u-1]=arguments[u];return e.length?(r=e[0],h=n.getLocaleValues(),r=h.standard[r]||r,r=r.replace(/'([^']*)'/g,(function(n,t){return f(t)})),t=i,o(o(r).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,4}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,p).replace(/\\(?!\\)/g,""))):s.apply(i,arguments)}function b(n,t){return n&&t?n.getFullYear()===t.getFullYear()?n.getMonth()===t.getMonth()?n.getDate()===t.getDate()?0:n.getDate()<t.getDate()?-1:1:n.getMonth()<t.getMonth()?-1:1:n.getFullYear()<t.getFullYear()?-1:1:-1}function k(n,t){return n&&t?n.getHours()===t.getHours()?n.getMinutes()===t.getMinutes()?n.getSeconds()===t.getSeconds()?0:n.getSeconds()<t.getSeconds()?-1:1:n.getMinutes()<t.getMinutes()?-1:1:n.getHours()<t.getHours()?-1:1:-1}function d(n,t){return n instanceof Date&&t instanceof Date&&e(n)===e(t)}var l=MsPortalFx,a=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(MsPortalFx.DateUtil.DateTimeRange),s,e,t;n.DateTimeRange=a;s=Date.prototype.toString;e=l.toSeconds;n.getLocaleValues=MsPortalFx.getLocaleValues;n.setLocaleValues=MsPortalFx.setLocaleValues;n.toString=w;n.parse=MsPortalFx.dateParse;n.compareDatePartOnly=b;n.compareTimePartOnly=k;n.areDatesEqualBySeconds=d})(n||(n={})),n}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css",["module"],(function(n){"use strict";return{css:".azc-grid table tbody td img.azc-grid-formatters-icon{margin-right:6px;display:flex}.azc-grid .azc-grid-formatters-sprite{position:relative;overflow:hidden;display:inline-block;margin-right:6px;vertical-align:middle}.azc-grid .azc-grid-formatters-sprite img{position:absolute}",moduleId:n.id}}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css",["module"],(function(n){"use strict";return{css:".fxc-percent-formatter{white-space:nowrap;min-height:5px;min-width:5px}.fxc-percent-formatter .fxc-percent-formatter-container{overflow:hidden;width:100%;position:relative;padding:0}.fxc-percent-formatter .fxc-percent-formatter-value{background-color:#00bcf2;height:19px;position:absolute;left:0;display:inline}.fxc-percent-formatter .fxc-percent-formatter-background{width:100%;height:19px;background-color:transparent}.fxc-percent-formatter .fxc-percent-formatter-bottom-bar{height:5px;margin-top:24px}.fxc-percent-formatter .fxc-percent-formatter-top-bar{height:5px;margin-bottom:24px}.fxc-percent-formatter .fxc-percent-formatter-text{position:absolute;left:1px;top:1px;display:inline;margin-top:7px}.fxc-percent-formatter .fxc-percent-formatter-notext{display:none}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters",["require","exports","Viva.Controls/Util/Viva.DateUtil","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalFx/Globalization","MsPortalImpl/Base/Base.ImplUtils","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";e.injectCss(o,s);var h;return (function(t){function y(n){return g.createContextualFragment(n)}function p(n){var t;return function(){return t||(t=n()),t}}function it(t,s){var h,l;return typeof t=="string"?(a.assert(!1,"String formatters are being deprecated. Use Intl.DateTimeFormatOptions instead. Format string: {0}".format(t)),h=function(n,t){return i.toString(n,t)}):h=function(t,i){var r="",e;try{r=u.DateTimeFormat.create(i).format(t)}catch(o){e="Intl failure. Given format: "+JSON.stringify(i)+"; Date: "+t.toString();isNaN(t.getTime())?f.logToExtension(n,s,2,e):a.error(e);r=t.toString()}return r},l=function(n){var u=ko.unwrap(n),i=w(u),f=o.call(arguments,1);return i?r.callFormatter(e,h(i,t),f):""},c(l,w,l)}function rt(n){var i=ko.unwrap(n),f=!i||typeof i=="string"?{uri:i}:i,r=ko.unwrap(f.text),u=ko.unwrap(f.uri),o=ko.unwrap(f.target),s,t,h,e;return r||u?u?(s=nt().cloneNode(!0),t=s.firstChild,t.textContent=r?r:u,t.setAttribute("href",u),o&&t.setAttribute("target",o),t.outerHTML):(h=tt().cloneNode(!0),e=h.firstChild,e.textContent=r,e.outerHTML):""}function h(n){var i=o.call(arguments,1),t=ko.unwrap(n),u=t&&!r.isUndefined(t.text)&&!r.isUndefined(t.uri)?"<img class='"+v+"' src='"+r.attributeEncode(r.callFormatter(s,t.uri,i))+"' alt='' /><span class='fx-grid-formatters-icon-text'>"+r.callFormatter(e,t.text,i)+"<\/span>":"<img class='"+v+"' src='"+r.attributeEncode(r.callFormatter(s,t,i))+"' alt='' />";return"<span class='fx-grid-formatters-icon'>"+u+"<\/span>"}function ut(n){return function(t){var u=o.call(arguments,1),i=ko.unwrap(t);if(r.isNullOrUndefined(n[i])){if(n["##DEFAULT##"])return i=e(i),r.callFormatter(h,n["##DEFAULT##"].text?{uri:n["##DEFAULT##"].uri,text:n["##DEFAULT##"].text.replace(/##DEFAULT##/g,i)}:n["##DEFAULT##"],u)}else return r.callFormatter(h,n[i],u);return""}}function ft(n){return function(t){var f=o.call(arguments,1),i=ko.unwrap(t),w="",a="",b=0,h,v,l,c,y,k,d,p,g;n&&(n.backgroundColor&&(w="msportalfx-bgcolor-"+n.backgroundColor),n.barColorDefault&&(a="msportalfx-bgcolor-"+n.barColorDefault),n.barColorKey&&f[0].item&&f[0].item[n.barColorKey]&&(v=ko.unwrap(f[0].item[n.barColorKey]),v&&(a="msportalfx-bgcolor-"+v)),n.textKey&&(h=f[0].item&&f[0].item[n.textKey]?ko.unwrap(f[0].item[n.textKey]):""),n.textLocation&&(b=n.textLocation));l="fxc-percent-formatter-text";c="";switch(b){case 1:c=" fxc-percent-formatter-bottom-bar";break;case 2:c=" fxc-percent-formatter-top-bar";break;case 0:default:l=null}return(isNaN(i)||i instanceof Date)&&(i=0),y="",l&&(n.textKey||(k=i/100,d=u.NumberFormat.create({style:"percent"}),h=d.format(k)),h=r.callFormatter(e,h,f),y="<div class='"+l+"'>"+h+"<\/div>"),i=Math.min(100,Math.max(0,i)),p=" min-width: 1px;",i===0&&(p=""),g="<div class='azc-control fxc-percent-formatter' data-control='true' aria-atomic='true' aria-valuemin='0' aria-valuemax='100' aria-live='polite' aria-valuenow='"+i+"'><div class='fxc-percent-formatter-container'><div class='fxc-percent-formatter-value"+c+" "+a+"' style='width: "+i+"%;"+p+"'><\/div>"+y+"<div class='fxc-percent-formatter-background"+c+" "+w+"'><\/div><\/div><\/div>",r.callFormatter(s,g,f)}}function et(n){var t=l(n);return function(n){var i=o.call(arguments,1),u=ko.unwrap(n);return r.callFormatter(e,t(u),i)}}function ot(n){return function(t){var i=ko.unwrap(t);return typeof i!="number"?i.toString():n?u.NumberFormat.create(n).format(i):u.NumberFormat.format(i)}}function st(n,t,i){var r=n.createChildLifetime();return function(n,u){var e,f=ko.bindingHandlers.vivaControl.registerCallback((function(){return e||ko.ignoreDependencies((function(){var f=r.createChildLifetime();return e={template:t,data:i(f,n,u),ltm:f}}))}));return u&&u.guidList?(ko.ignoreDependencies((function(){return u.guidList[u.rowNumber()]=f})),f=u.rowNumberPath):f='"'+f+'"',"<div class='azc-vivaControl' data-bind='vivaControl: "+f+"'>"+t+"<\/div>"}}function c(n,t,i){if(!n)throw new Error("Display formatter has to be provided to create any formatters bundle.");var r=function(t,i){return n(t,i)};return t&&(r.sortFormatter=typeof t=="function"?t:l(t)),i&&(r.filterFormatter=typeof i=="function"?i:l(i)),r}function ht(n){return c(n,n,n)}function ct(n){return d[n]}function l(n){return function(t){return r.isNullOrUndefined(n[t])?n["##DEFAULT##"]?n["##DEFAULT##"]:t:n[t]}}function w(n){var t,r;switch(typeof n){case"number":t=new Date(n);break;case"string":r=i.parse(n);isNaN(r)||(t=new Date(r));break;case"object":n!==null&&n.constructor===Date&&(t=n)}return t}function s(n){var t=ko.unwrap(n);return r.isNullOrUndefined(t)?"":t+""}function e(n){var t=ko.unwrap(n);return r.isNullOrUndefined(t)?"":r.htmlEncode(t+"")}var b=MsPortalFx,k=b.Base.Diagnostics,o=Array.prototype.slice,a=k.createLog(n),d={},v="azc-grid-formatters-icon",g=document.createRange(),nt=p((function(){return y("<a class='msportalfx-link-primary' data-bind='attr:{tabindex:$tabIndex}'><\/a>")})),tt=p((function(){return y("<span class='azc-text-primary'><\/span>")}));t.date=it;t.uri=rt;t.icon=h;t.iconLookup=ut;t.percentageBar=ft;t.textLookup=et;t.numberFormat=ot;t.htmlBindings=st;t.bundle=c;t.defaultAll=ht;t._callBackLookup=ct;t.html=s;t.text=e})(h||(h={})),h}));
define("MsPortalImpl.Controls/Controls/Base/Formatters",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalFx/Globalization","MsPortalImpl/Base/Base.Sanitization","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","MsPortalImpl/Resources/ImplScriptResources","Fx/Controls/DropDown"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(t){function b(n,t,r,f,e,o){var c=!!o,s;switch(r){case h.ShortTime:return i.date(u.DateTimeFormat.shortTimePattern,f);case h.LongTime:return i.date(u.DateTimeFormat.longTimePattern,f);case h.ShortDate:return i.date(u.DateTimeFormat.shortDatePattern,f);case h.LongDate:return i.date(u.DateTimeFormat.longDatePattern,f);case h.MonthDay:return i.date(u.DateTimeFormat.monthDayPattern,f);case h.YearMonth:return i.date(u.DateTimeFormat.yearMonthPattern,f);case h.CustomDate:return i.date(e.dateFormat||"",f);case h.TextLookup:return i.textLookup(e.textLookup||{});case h.Text:return i.text;case h.Number:return i.numberFormat(e.numberFormat);case h.Icon:return function(t){return k(n,t,f)};case h.HtmlBindings:return i.htmlBindings(t,d(e.htmlBindingsType,e.htmlBindingsTemplate,c,f),g(t,e.htmlBindingsType,e.htmlBindingsData));case h.PercentageBar:return i.percentageBar(e.percentageBar||{})}switch(r){case h.Html:s=i.html;break;case h.IconLookup:s=i.iconLookup(e.iconLookup||{});break;case h.Uri:s=i.uri;break;default:s=i.text}return c||(s=nt(s)),s}function k(t,u,e){var o=ko.unwrap(u),s=r.isUndefined,h=o&&!s(o.text)&&!s(o.uri)?o.uri:o;return f.sanitizeUri(h+"",null,{diContainer:t,localRequire:n,windowContext:e})?i.icon(u):""}function d(t,i,r,u){var f=i||"";switch(t){case c.TextBox:case c.CheckBox:case c.DropDown:case c.CheckBoxRowSelection:return"<div data-bind='formElement: $data'><\/div>"}return r?f:e.sanitizeHTML(f,n,u).sanitizedMarkup}function g(n,t,i){switch(t){case c.TextBox:return l.textBox(n,i);case c.CheckBox:return l.checkBox(n,i);case c.DropDown:return l.dropDown(n,i);case c.CheckBoxRowSelection:return l.rowSelectionCheckBox(n);case c.Default:default:return function(n,t,i){return{value:t,settings:i}}}}function nt(t){return function(r,u){switch(t){case i.uri:u=u||{};u.cssClass="msportalfx-link-primary"}var f=t(r,u);return e.sanitizeHTML(f,n).sanitizedMarkup}}var a=MsPortalFx.ViewModels.Controls.Lists.Grid,h=a.Format,c=a.HtmlBindingsType,v=MsPortalFx.ViewModels.Forms,y=v.CheckBox.ViewModel,w=v.TextBox.ViewModel,p={invalidBindingData:"The formatOptions property was not correctly set. The htmlBindingsData needs to be specified correctly for rendering the {0}."},l;(function(n){function r(n,r){return function(n,u,f){var o=i(u),e;if(!n||!r||!ko.isObservable(r.items))throw new Error(p.invalidBindingData.format("GroupDropDownFormField"));var c=ko.observable(o()),l={getOriginalObservable:function(){return c},getEditableObservable:function(){return o},createdByBaseFormClass:!0},h=ko.observableArray();return ko.reactor(n,[r.items],(function(n){h(n)})),e=new s.ViewModel(n,{label:ko.observable(r.label||""),items:h,validations:ko.observableArray(r.validations),infoBalloonContent:ko.observable(r.infoBalloonContent),filter:r.filter,filterPlaceholder:r.filterPlaceholder,customFilter:r.customFilter,multiselect:r.multiselect,selectAll:r.selectAll,selectAllOverride:r.selectAllOverride,ariaLabel:f&&f.column&&f.column.name}),e._setEditScopeAccessors(l),t(n,e,o,f&&f.rowMetadata,r&&r.validate),e}}function u(n,r){return function(n,u,f){var e=i(u),s=ko.observable(e()),h={getOriginalObservable:function(){return s},getEditableObservable:function(){return e},createdByBaseFormClass:!0},o=new w(n,{label:ko.observable(r&&r.label?r.label:""),valueUpdateTrigger:MsPortalFx.ViewModels.Controls.ValueUpdateTrigger.Input,validations:ko.observableArray(r?r.validations:null),emptyValueText:ko.observable(r?r.emptyValueText:null),infoBalloonContent:ko.observable(r?r.infoBalloonContent:null),ariaLabel:f&&f.column&&f.column.name});return o._setEditScopeAccessors(h),t(n,o,e,f&&f.rowMetadata,r&&r.validate),o}}function f(n,r){return function(n,u,f){var e=i(u),s=ko.observable(e()),h={getOriginalObservable:function(){return s},getEditableObservable:function(){return e},createdByBaseFormClass:!0},o=new y(n,{label:ko.observable(r&&r.label?r.label:""),validations:ko.observableArray(r?r.validations:null),infoBalloonContent:ko.observable(r?r.infoBalloonContent:null),inlineLabel:!0,ariaLabel:f&&f.column&&f.column.name});return o._setEditScopeAccessors(h),t(n,o,e,f&&f.rowMetadata,r&&r.validate),o}}function e(n,r){return function(n,u,f){var e=i(u);if(!r||!ko.isObservable(r.options))throw new Error(p.invalidBindingData.format("DropDownFormField"));e()===undefined&&e(r.options()[0].value);var h=ko.observable(e()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return e},createdByBaseFormClass:!0},o=new s.ViewModel(n,{label:ko.observable(r.label||""),items:r.options,validations:ko.observableArray(r.validations),infoBalloonContent:ko.observable(r.infoBalloonContent),ariaLabel:f&&f.column&&f.column.name});return o._setEditScopeAccessors(c),t(n,o,e,f&&f.rowMetadata,r&&r.validate),o}}function h(){return function(n,t,i){t=i.rowMetadata.selected;var u=new y(n,{ariaLabel:o.Grid.selectionCheckBoxAriaLabel}),r=!1,f=!0;return t.subscribe(n,(function(n){try{r=!0;u.value(n)}finally{r=!1}})),u.value.subscribe(n,(function(n){if(!f&&!r)try{r=!0;u.value(!n)}finally{r=!1}f=!1})),u}}function t(n,t,i,r,u){if(t.rowMetadata=r,r.editState&&r.editState()===0){t.performValidation(!1);var f=n.createChildLifetime();i.subscribe(f,(function(){r.editState()!==0&&(t.performValidation()||t.performValidation(!0),t.ensureValidation())}));u&&ko.isObservable(u)&&(u.subscribe(n,(function(){t.validate(t.validate()+1)})),r.editing.subscribe(f,(function(n){n||f.dispose()})))}}function i(n){return ko.isObservable(n)?n:ko.observable(n)}n.groupDropDown=r;n.textBox=u;n.checkBox=f;n.dropDown=e;n.rowSelectionCheckBox=h})(l=t.ControlViewModels||(t.ControlViewModels={}));t.getFormatter=b})(h||(h={})),h}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility",["require","exports","MsPortalImpl.Controls/Controls/Base/Loadable"],(function(n,t,i){"use strict";var r;return (function(n){function e(n,i){t[n.toString()]=i}function o(n,i){t[n.toString()]===i&&delete t[n.toString()]}function s(){t={}}function h(n,t){n.forEach((function(n){t.addClass(n.getName())}))}function c(n,t){n.forEach((function(n){t.removeClass(n.getName())}))}var u=MsPortalFx.forEachKey,f=(function(){function n(){}return n.prototype.setInstance=function(n){this._widget=n},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},n})(),t,r;n.Extension=f;t={};n.defaultPlugins=[];n.registerPlugin=e;n.unregisterPlugin=o;n.unregisterAllPlugins=s;r=(function(i){function r(n,t,r){var u=i.call(this,n,t,r)||this;return u._initializePlugins(t),h(u._plugins,u.element),u}return __extends(r,i),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(i.prototype.dispose)||(i.prototype.dispose.call(this),c(this._plugins,this.element))},r.prototype.getPlugin=function(n){return MsPortalFx.find(this._plugins,(function(t){return t.getName()===n}))||null},r.prototype._initializePlugins=function(i){var e=this,f=[],r=[];n.defaultPlugins.forEach((function(n){f.push(new n)}));u(t,(function(n,t){var r=parseInt(n,10);(i.extensions&r)===r&&f.push(new t)}));this._loadPlugins(f,r);this._plugins=r;r.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}));r.forEach((function(n){n.setInstance(e)}))},r.prototype._extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this._plugins.forEach((function(t){t[n]&&i.push(t[n].apply(t,r))})),i},r.prototype._loadPlugins=function(n,t){var i=this;n.forEach((function(r){var u=r.getDependencies()||[],f=u.filter((function(i){return!n.some((function(n){return n.getName()===i.getName()}))&&!t.some((function(n){return n.getName()===i.getName()}))}));t.some((function(n){return n.getName()===r.getName()}))||t.push(r);f.length&&i._loadPlugins(u,t)}))},r})(i.Widget);n.Extensibility=r})(r||(r={})),r}));
define("Viva.Controls/Controls/Base/Viva.ExtensibleControl",["require","exports","Viva.Controls/Controls/Base/Viva.Base"],(function(n,t,i){"use strict";function e(n){o(n);n.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}))}function o(n){for(var u,i,r,f,t=0;t<n.length;++t)for(u=function(t){var i=t.getName();n.every((function(n){return n.getName()!==i}))&&n.push(t)},i=0,r=n[t].getDependencies()||[];i<r.length;i++)f=r[i],u(f)}var u,r,f;Object.defineProperty(t,"__esModule",{value:!0});t.initializePlugins=t.Widget=t.ViewModel=t.Extension=void 0;u=(function(){function n(){var n=this._ltm=new FxImpl.TriggerableLifetimeManager;this.vmBasicOption={ltm:n}}return n.prototype.setInstance=function(n){var t=this._widget=n;t.ltm.registerForDispose(this._ltm)},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},Object.defineProperty(n.prototype,"ltm",{get:function(){return this._ltm},enumerable:!1,configurable:!0}),n})();t.Extension=u;r=(function(n){function t(t){var i=n.call(this,t)||this;return i.extensions=t.extensions||[],i}return __extends(t,n),t.prototype.extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this.extensions.forEach((function(t){var u=t[n];u&&i.push(u.apply(t,r))})),i},t})(i.ViewModel);t.ViewModel=r;f=(function(n){function t(t,i,u,f){var e=this;return u=u||{},u.viewModelType=u.viewModelType||r,e=n.call(this,t,i,u,f)||this,e._initializePlugins(e.options),e._addExtensionClasses(),e}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._removeExtensionClasses())},t.prototype.getPlugin=function(n){if(this.options.extensions)return MsPortalFx.find(this.options.extensions,(function(t){return t.getName()===n}))},t.prototype._initializePlugins=function(n){var t=this;e(n.extensions);n.extensions.forEach((function(n){n.setInstance(t)}))},t.prototype._addExtensionClasses=function(){var n=this;this.options.extensions.forEach((function(t){n.element.addClass(t.getName())}))},t.prototype._removeExtensionClasses=function(){var n=this;this.options.extensions.forEach((function(t){n.element.removeClass(t.getName())}))},t})(i.Widget);t.Widget=f;t.initializePlugins=e}));
define("Viva.Controls/Util/Viva.TemplateEngine",["require","exports","MsPortalImpl/Base/Base.LruMap"],(function(n,t,i){"use strict";var r;return (function(n){function r(n,t){var i=n.filter(t);return i.length||(i=n.find(t)),i}function f(n,i,r){var e=[],u;return n.forEach((function(n){e.push.apply(e,t(n))})),u=t(i),e.forEach((function(n){var i=n.key,t=n.value;u.some((function(n){var e=n.value,u;if(n.key===i)return u=t,r===0?u="{"+f([t],e,r+1)+"}":i==="class"&&(u="ko.unwrap("+e+')+" "+ko.unwrap('+t+")"),n.value=u,!0}))||u.push(n)})),u.map((function(n){return"'"+n.key+"':"+n.value})).join(",")}function e(n,t){var i=n.attr("data-bind"),r=f(t,i,0);n.attr("data-bind",r)}function l(n){var o=n[0].className,h=t(n.attr("data-bind")),r=[],s=[],u=0,f=!1,i;h.forEach((function(n){var i=n.key,u=n.value;i==="css"?t(u).forEach((function(n){"key"in n&&r.push("(ko.unwrap("+n.value+')?"'+n.key+'":"")')})):(i==="attr"&&t(u).some((function(n){return n.key==="class"}))&&(f=!0),s.push(n))}));r.length&&u++;f&&u++;f&&o!==""&&u++;u>=2&&(i=[],o!==""&&(i.push('"'+n[0].className+'"'),n[0].removeAttribute("class")),r.length&&(i.push.apply(i,r),n.attr("data-bind",ko.expressionRewriting.preProcessBindings(s))),e(n,["attr:{'class':"+i.join('+" "+')+"}"]))}var h=new i.LruMap(100),c=!MsPortalFx.isFeatureEnabled("nokosvgcaching"),t=ko.expressionRewriting.parseObjectLiteral,o=(function(){function n(n,t){this._templateSources=n;this._key=t}return n.prototype.addAttribute=function(n,t,i){var u=$(this._get()),o=n?r(u,n):u,f=t;return typeof t=="string"&&(f={},f[t]=i),o.length&&(o.each((function(n,t){var i=$(t);MsPortalFx.forEachKey(f,(function(n,t){n==="data-bind"?e(i,t):n==="class"?i.addClass(t.join(" ")):i.attr(n,MsPortalFx.last(t))}));l(i)})),this._save(u)),this},n.prototype.html=function(n,t){var i=$(this._get());return r(i,n).html(t),this._save(i),this},n.prototype.prepend=function(n,t){var i=$(this._get());return r(i,n).prepend(t),this._save(i),this},n.prototype.append=function(n,t){var i=$(this._get());return r(i,n).append(t),this._save(i),this},n.prototype._get=function(){return this._templateSources[this._key]},n.prototype._save=function(n){for(var t,u,i="",r=0;r<n.length;r++)t=n[r],u=t.nodeType,u===8?i+="<!--"+t.nodeValue+"-->":u===1&&(i+=t.outerHTML);this._templateSources[this._key]=i},n})(),u,s;n.HtmlManipulation=o;u=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._templateSources={},t}return __extends(t,n),t.prototype.getTemplate=function(n){return this._templateSources[n]},t.prototype.setTemplate=function(n,t){var i=this._templateSources;return typeof n=="string"?i[n]=t:MsPortalFx.extend(i,n),this},t.prototype.makeTemplateSource=function(n){var t=this._templateSources[n];return{nodes:function(){if(c){if(arguments.length===0)return h.getOrAdd(t,(function(){return $(FxImpl.createElement("div")).append(ko.utils.parseHtmlFragment(t))[0]}));throw new Error("Can't set node");}},text:function(){var i=arguments.length===0;if(i&&t)return t;throw new Error(i?"Template name '"+n+"' does not exist.":"Can't set template");}}},t})(ko.nativeTemplateEngine);n.StringTemplateEngine=u;s=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getHtmlTemplate=function(n){return new o(this._templateSources,n)},t})(u);n.HtmlTemplateEngine=s})(r||(r={})),r}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css",["module"],(function(n){"use strict";return{css:".azc-grid{width:100%;position:relative;font-size:13px}.azc-grid.azc-grid-headerHidden thead{display:none}.azc-grid .azc-grid-cellContent,.azc-grid .azc-vivaControl{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid .azc-grid-cell-fullheight{height:100%}.azc-grid .azc-grid-cell-ellipse{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid table{width:100%;border:0;background-color:transparent;table-layout:fixed;border-spacing:0}.azc-grid table caption{display:none}.azc-grid table thead tr th{text-transform:none;text-align:left;font-size:13px;padding:0;height:35px;position:relative;font-weight:600;border-bottom-width:1px;border-bottom-style:solid;line-height:31px}.azc-grid table thead tr th a{position:relative}.azc-grid table thead tr th span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid table thead tr th .azc-grid-header-wrapper{padding:1px 0 1px 10px;position:relative}.azc-grid table thead tr th .azc-grid-header-wrapper span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid table thead tr th .azc-grid-header-wrapper .azc-grid-headerlabel{display:block}.azc-grid table td{padding:1px 0 1px 10px;height:29px;border-bottom-width:1px;border-bottom-style:solid;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid table td input,.azc-grid table td select,.azc-grid table td textarea,.azc-grid table td button,.azc-grid table td .azc-button,.azc-grid table td .azc-editableCombo,.azc-grid table td .azc-fileUpload,.azc-grid table td .azc-dropdown,.azc-grid table td .azc-optionPicker{font-size:13px !important}.azc-grid table td .azc-dropdown{display:block}.azc-grid a img{border:0}.azc-grid-tableHead{overflow:hidden}.azc-grid-footer{overflow:hidden}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td.azc-br-muted,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td.azc-br-muted{border-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:first-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:first-of-type{border-left-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .fxs-portal-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:last-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.fxs-portal-selected) td:last-of-type{border-right-color:#00bcf2}.fxs-blade-has-activation .azc-grid .azc-collapsed-hidden{display:none !important}.fxs-mode-light .azc-fabric th.azc-br-muted{border-color:#edebe9}.fxs-mode-light .azc-fabric .td.azc-br-muted{border-color:#f3f2f1}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1",["require","exports","Viva.Controls/Util/Viva.TemplateEngine","Viva.Controls/Controls/Base/Viva.ExtensibleControl","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Interactions/Interactions.KeyboardNavigation","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Base/Base.ImplUtils","Viva.Controls/Util/Viva.Resize","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";function rt(n){return n?"true":"false"}function ii(){var n=FxImpl.features.isEnabled("minColumnWidth",!0);return n||(n=$.querySelectorAll("#web-container").hasClass("fxs-reflowminview")),n}function ri(n,t){var i=0,u=n.value,f=n.units,r=n.fixedPixels;return r!==undefined?i=r:f==="%"&&(i=Math.max(u*t/100,20)),i|0}function y(n){var i,r,t,f,u;return n&&(t=/^\s*(\d+\.?\d*(?:[eE][-+]?\d+)?)(px|fr|%|cm|mm|in|pt|pc|em|ch)\s*$/.exec(n)),t&&t.length===3?(i=parseFloat(t[1]),r=t[2]):(i=1,r="fr"),u=it[r],u&&(f=Math.round((i||0)*u)),{value:i,units:r,fixedPixels:f}}var w,b,k;Object.defineProperty(t,"__esModule",{value:!0});t.Widget=t.parseWidth=t.ViewModel=t.Extension=void 0;l.injectCss(a);var ut=MsPortalFx,d="azc-grid",g="azc-grid-headerHidden",p="azc-grid-selectableRow",ft="azc-grid-editableRow",nt="azc-grid-scrollable",v="azc-br-muted",et="<div class=\"azc-grid-root\" role='presentation'><div class=\"azc-grid-area\" role='presentation' data-bind=\"template:'table'\"><\/div><\/div>",ot="<div class='azc-grid-container "+v+"' role='presentation'><div class='azc-grid-header' role='presentation'><\/div>"+("<div class='azc-grid-tableContainer "+v+"' role='presentation' data-bind='visible:$ctl.tableVisible'>")+"<div class='azc-grid-tableHead' role='presentation'><table class='azc-grid-tableHeader' role='presentation' data-bind='style: { width: $ctl.tableWidth }'><caption data-bind='text: data.summary'><\/caption><!-- ko template: 'header' --><!-- /ko --><\/table><\/div>"+("<div class='azc-grid-tableScrollContainer "+v+"' role='presentation'>")+"<div class='azc-grid-tableContent' role='presentation'><table class='azc-grid-full' role='presentation' data-bind='style: { width: $ctl.tableWidth }'><!-- ko template: 'colgroup' --><!-- /ko --><!-- ko template: 'body' --><!-- /ko --><\/table><\/div><\/div><\/div><div class='azc-grid-footer' role='presentation'><\/div><label aria-live='polite' aria-atomic='true' class='azc-grid-live fxs-hide-accessible-label' data-bind='text: $ctl._ariaLive'><\/label><\/div>",st="<!-- ko template: 'colgroup' --><!-- /ko --><thead><tr role='row'><!-- ko template: { name: \"headerCell\", foreach: $ctl._columns } --><!-- /ko --><\/tr><\/thead>",ht='<colgroup><!-- ko template: { name: "headerColumn", foreach: $ctl._columns } --><!-- /ko --><\/colgroup>',ct='<col data-bind=\'keyedCss: { grid1HeaderColumn: "col" + $index() }, style: { width: pxWidth }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }\' />',lt="<th scope='col' role='presentation' data-bind='keyedCss: { grid1HeaderCell: \"azc-grid-column-header "+v+" \" + cssClass}, css: { \"azc-collapsed-hidden\": $data.hiddenInCollapsed }'><div class='azc-grid-header-wrapper' role='presentation'><!-- ko template: \"headerCellContent\" --><!-- /ko --><\/div><\/th>",at="<span role='columnheader' aria-readonly='true' class='azc-grid-headerlabel azc-grid-headerCell' data-bind='text: name, attr: { id: columnId, \"aria-hidden\": $ctl._ariaHiddenColumnHeader($data), \"aria-label\": ariaLabel }' tabindex='-1'><\/span>",vt="<!-- ko template: { name: ko.pureComputed(function () { return data.loading() ? 'templateLoading' : ($ctl._showNoRows() ? 'bodyNoItems' : 'bodyCore'); }) } --><!-- /ko -->",yt="<tbody class='azc-grid-groupdata' role='rowgroup'><!-- ko template: { name: 'bodyRows', foreach: data.items } --><!-- /ko --><\/tbody>",pt="<!-- ko if: data.noRowsMessage -->"+("<tbody role='rowgroup' class='azc-grid-empty'><tr role='row' data-bind='attr: { tabindex: $tabIndex }'><td role='gridcell' class='"+v+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody>")+"<!-- /ko -->",wt="<tbody role='rowgroup' class='azc-grid-empty'><tr role='row' data-bind='attr: { tabindex: $tabIndex }'><td role='gridcell' class='"+v+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }'>"+MsPortalFx.encodeAttribute(e.Grid.loading)+"<\/td><\/tr><\/tbody>",bt="<!-- ko template: { name: 'bodyRowsCore', data: $ctl.getRowMetadata($data), context: function (metadata) { return { $disabled: metadata.disabled || $disabled }; } } --><!-- /ko -->",kt="<tr role='row' data-bind='keyedCss: { grid1BodyRowsCore: \"azc-grid-row \" + cssClass()}, attr: { \"aria-label\": $ctl._getRowAriaLabel($data) && ariaLabel(), \"aria-rowindex\": $ctl.getRowIndex($index()) }'><!-- ko template: { name: 'bodyCell', foreach: $vm.columns } --><!-- /ko --><\/tr>",dt='<td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, keyedCss: { grid1BodyCell: "azc-grid-cell '+v+' " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : "")}, attr: { "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1, "aria-rowindex": $ctl.getRowIndex($parentContext.$index()), "aria-readonly": $ctl._ariaReadonly }\'><\/td>',tt="$parentContext.$parentContext.$index",gt='<div class=\'azc-grid-cellContent\' data-bind=\'css: { "azc-grid-cell-ellipse": $data.enableEllipse, "azc-grid-cell-fullheight": $data.fullHeight }, trustedCellBinding: $ctl._cellFormat('+tt+", $index, $parent, $data)'><\/div>",ni=0,it={em:13,ch:7,px:1,cm:37.79527559,mm:3.779527559,"in":96,pt:1.333333333,pc:16},ti=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(r.Extension);t.Extension=ti;w=(function(n){function t(t){var i=n.call(this,t)||this;return i.summary=ko.observable(),i.showHeader=!0,i.columns=ko.observableArray(),i.items=ko.observableArray(),i.noRowsMessage=ko.observable(),i.events=$.noop,i.uri={},i.text={},i.sortByList=ko.observableArray(),i}return __extends(t,n),t})(r.ViewModel);t.ViewModel=w;t.parseWidth=y;b=(function(n){function t(t,r,u){var f=this,h,b,l,a,v;return u=u||{},u.viewModelType=u.viewModelType||w,f=n.call(this,t,r,u)||this,f._ariaLive=ko.observable(""),f._ariaReadonly=ko.observable(rt(f._readonly=!f.getPlugin(ft))),f._readLoading=!1,f.id="grid1"+MsPortalFx.getUniqueId(),f.templateEngine=new i.HtmlTemplateEngine,f.width=u.width||ko.observable(),f.height=u.height||ko.observable(),f.collapsed=ko.observable(!1),f.scrollWidth=ko.observable(0),f.tableWidth=ko.pureComputed((function(){return f.scrollWidth()+"px"})),f._columns=f.options.columns.mapInto(f.ltm,(function(n,t){var r=t.width||ko.observable(),u=ko.observable(ii()?t.minWidth||140:0),i,f=y(r.peek()),e;return i=f.fixedPixels!==undefined?f.fixedPixels:Math.round(u.peek()||0),i=Math.max(i,20),e=ko.observable(i+"px"),__assign(__assign({},t),{width:r,nMinWidth:u,pxWidth:e,snapToMin:!1})})),h=ko.pureComputed((function(){var n=f.collapsed();return f._columns().filter((function(t){return!n||!t.hiddenInCollapsed||!t.hiddenInCollapsed()}))})),f.tableVisible=ko.pureComputed((function(){return h().length>0})),f.leftMarginWidth=ko.pureComputed((function(){var n=0;return f.options.extensionTrigger("computeLeftMarginWidth").forEach((function(t){n+=ko.unwrap(t)})),n})),f.rightMarginWidth=ko.pureComputed((function(){var n=0;return f.options.extensionTrigger("computeRightMarginWidth").forEach((function(t){n+=ko.unwrap(t)})),n})),f.totalMarginWidth=ko.pureComputed((function(){return f.leftMarginWidth()+f.rightMarginWidth()})),f.availableWidth=ko.pureComputed((function(){var n=(f.width()||0)-f.totalMarginWidth();return n+=f.options.extensionTrigger("computeAvailableWidthDelta").reduce((function(n,t){return n+t}),0),n>0?n:0})),f.allocatedWidth=ko.pureComputed((function(){var n=f.availableWidth();return h().reduce((function(t,i){var r=y(i.width&&i.width());return t+ri(r,n)}),0)})),f.totalFractionalUnits=ko.pureComputed((function(){return h().reduce((function(n,t){var i=y(t.width&&t.width());return i.units==="fr"&&(n+=i.value),n}),0)})),ko.reactor(f.ltm,(function(){var n=f.totalMarginWidth();h().forEach((function(t){n+=parseInt(t.pxWidth(),10)}));f.scrollWidth(n)})),ko.reactor(f.ltm,(function(){var n=f.availableWidth(),u=f.totalMarginWidth(),e=h(),t=0,i=0,r=0,o=e.map((function(u){var h=u.width(),o=u.nMinWidth.peek(),e,s;return o=f.hscroll()?Math.max(o,20):20,e=y(h),e.units==="fr"?i+=e.value:e.units==="%"?r+=e.value:(t+=e.fixedPixels,o=20),u.availableWidthWhenSnappedToMin&&u.availableWidthWhenSnappedToMin!==n&&(u.availableWidthWhenSnappedToMin=undefined),u.snapToMin&&(u.availableWidthWhenSnappedToMin=n,u.snapToMin=!1),s=f.hscroll()&&u.availableWidthWhenSnappedToMin===n,{columnWidget:u,units:e.units,value:e.value,min:o,snapToMin:s,fixedPixels:e.fixedPixels}}));f._updateColumnWidths(o,n,u,i,r,t)})),f.options.extensionTrigger("beforeCreate"),f._showNoRows=ko.pureComputed((function(){if(!f.options.items)return!0;var n=f.options.items(),t=n&&n.length||0,i=f.options.extensionTrigger("modifyRowNumber");return i.forEach((function(n){t+=n})),t===0})),f._setTemplates(),b=f.getPlugin(p),f.element.addClass(d).addClass("azc-fabric").attr({role:"grid","aria-multiselectable":rt(b&&!!b._multiselect),"aria-readonly":f._ariaReadonly(),id:f.id}).html(et),f.options.columns.subscribeAndRun(f.ltm,(function(n){f.element.attr("aria-colcount",n.length)})),l=f.ariaRowCount=ko.observable(0),l.subscribeAndRun(f.ltm,(function(n){f.element.attr("aria-rowcount",n)})),a=f.options.extensionTrigger("getAriaRowCount").filter((function(n){return!!n})),a.length===1?a[0].subscribeAndRun(f.ltm,(function(n){l(n)})):a.length===0?f.options.items.subscribeAndRun(f.ltm,(function(n){l(n?n.length:0)})):l(-1),v=f.options.extensionTrigger("getFirstObservableRowIndexObservable").filter((function(n){return!!n})),f.firstRowIndex=v.length>0&&!!v[0]?v[0]:ko.observable(1),f.options.showHeader||f.element.addClass(g),f.options.loading.subscribe(f.ltm,(function(n){(n||f._readLoading)&&(f._readLoading=!0,n?f._ariaLive(e.Grid.Accessibility.loading):f._ariaLive(e.Grid.Accessibility.loaded))})),f._bindDescendants(),f._attachEvents(),f.options.summary.subscribeAndRun(f.subLifetime,(function(n){f.element.attr("aria-label",n);f.element.findByClassName("azc-grid-groupdata").attr("aria-label",n)})),f.options.showHeader&&s.waitForBindings(f.element[0]).then((function(){new o.KeyboardNavigation(f.ltm,{element:f.element.find("thead tr"),tabTriggers:8,itemSelector:".azc-grid-headerCell, .azc-checkBox",parentTabIndexContextObservable:f.$tabIndex})})),f.options.extensionTrigger("afterCreate"),c.track(f.ltm,t,(function(n,t){if(f.ltm&&!f.ltm.isDisposed()){var i=f.width.peek(),r=f.height.peek(),u=n!==i,e=t!==r,o=f.collapsed.peek(),s=u?f.element.closest(".fxs-blade").hasClass("fxs-blade-has-activation"):o;f.collapsed(s);f.width(n);f.height(t);f.element.children(".azc-grid-root").children(".azc-grid-area").width(n);f.options.extensionTrigger("onSizeChanged",t,n,e,u,r,i)}}),{notifyInitialSize:!0}),f}return __extends(t,n),t.prototype._updateColumnWidths=function(n,t,i,r,u,f){var it=t,ct=Math.max(t-f-it*u/100,0),o=0,p=0,l=0,a=0,e=[],h=[],rt=n.map((function(n){var t=0,i=0,u;return n.units==="fr"?(t=ct*n.value/r,i=Math.max(t-n.min,0),a+=i,i||(t=n.min),l+=t):n.units==="%"?(n.snapToMin||(t=it*n.value/100,i=Math.max(t-n.min,0),p+=i),i||(t=n.min),o+=t):t=n.fixedPixels,u=__assign(__assign({},n),{widthPixels:t,extraPixels:i}),u.units==="fr"?h.push(u):u.units==="%"&&e.push(u),u})),w,b,c,v,y,k,d,g,nt,tt;if(u<100&&!l&&o&&o<t-f)for(var lt=t,ut=0,s=0,ft=u,at=function(){s=e.length;var n=ut,t=ft;e=e.filter((function(i){var r=0,u=0;return i.snapToMin||(r=(lt-n)*i.value/t,u=Math.max(r-i.min,0)),u||(r=i.min,ft-=i.value,ut+=r),i.extraPixels=u,i.widthPixels=r,!!u}))};e.length!==s;)at();if(this.hscroll()&&(w=o+l+f,b=p+a,b&&w>t&&w-t<b)){if(c=0,v=l-a,p&&t-o-f<v&&(c=t-f-v),c)for(var et=0,s=0,ot=u,vt=function(){s=e.length;var n=et,t=ot;e=e.filter((function(i){if(i.extraPixels){var r=(c-n)*i.value/t,u=Math.max(r-i.min,0);if(r=u?r:i.min,i.widthPixels=r,i.extraPixels=u,u)return!0}return et+=i.widthPixels,ot-=i.value,!1}))};e.length!==s;)vt();if(y=0,k=t-f-(c||o),a&&k>=v&&(y=k),y)for(var st=0,s=0,ht=r,yt=function(){s=h.length;var n=st,t=ht;h=h.filter((function(i){if(i.extraPixels){var r=(y-n)*i.value/t,u=Math.max(r-i.min,0);if(r=u?r:i.min,i.widthPixels=r,i.extraPixels=u,u)return!0}return st+=i.widthPixels,ht-=i.value,!1}))};h.length!==s;)yt()}d=0;g=0;rt.forEach((function(n){var i=n.widthPixels,t;n.units==="%"||n.units==="fr"?(t=Math.round(i+d),d+=i-t,nt=n):t=i;g+=t;n.widthPixels=t}));nt&&(tt=t-g,Math.abs(tt)===1&&(nt.widthPixels+=tt));rt.forEach((function(n){n.columnWidget.pxWidth(n.widthPixels+"px")}))},t.getCell=function(n,t,i){var r=n.find?n:n.element;return r.find(".azc-grid-row:eq("+t+") .azc-grid-cell:not([aria-hidden=true]):eq("+i+")")},t.prototype.getRowIndex=function(n){return this._readonly?this.firstRowIndex()+n:undefined},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this.options.extensionTrigger("beforeDestroy"),this._detachEvents(),this._cleanElement(d,"azc-fabric",g),n.prototype.dispose.call(this),this.options.extensionTrigger("afterDestroy"))},Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.getRowMetadata=function(n){var u=this.options,i,t,r;return typeof n!="object"||!n?null:(i=function(t){return t&&t.item===n},t=MsPortalFx.find(this._allRows,i),t||(t=this._getNewRowMetadataEntries(),t.item=n,r=MsPortalFx.find(u.rowMetadata,i),r&&$.extend(!0,t,r),this._allRows.push(t)),t)},t.prototype.previous=function(){return this.getPlugin(p).previous()},t.prototype.next=function(){return this.getPlugin(p).next()},t.prototype._getAllRowMetadata=function(){return this._allRowsInited||(this._updateAllRowMetadata(),this._allRowsInited=!0),this._allRows},t.prototype._initializePlugins=function(t){this._allRows=[];n.prototype._initializePlugins.call(this,t)},t.prototype._initializeSubscriptions=function(t){var i=this,r;n.prototype._initializeSubscriptions.call(this,t);r=this.subLifetime;t.columns.subscribeAndRun(r,(function(n){i._normalizeColumns(n)}));this.$disabled.subscribeAndRun(r,(function(n){i.element.attr("aria-disabled",n)}));this.options.loading.subscribeAndRun(r,(function(n){i.element.attr("aria-busy",n?"true":null)}));t.items&&(t.items.subscribe(r,(function(n){var t=[],r=[];i._allRows.forEach((function(i){var u=n.some((function(n){return i.item===n}));u?t.push(i):r.push(i)}));r.forEach((function(n){i.options.extensionTrigger("shouldRetainRowMetadata",n).some((function(n){return n===!0}))&&t.push(n)}));i._allRows=t;i._updateAllRowMetadata()})),this._itemsPerKeyboardPage=ko.computed(r,(function(){var n=i.options.items();return n&&n.length>20?10:5})))},t.prototype._attachEvents=function(){this.options.extensionTrigger("beforeAttachEvents");this.element.on("mouseenter.azcGrid",">.azc-grid-root>.azc-grid-area>.azc-grid-container .azc-grid-full>tbody>tr>td .azc-grid-cellContent, >.azc-grid-root>.azc-grid-area>.azc-grid-container .azc-grid-tableHeader>thead>tr>th .azc-grid-headerlabel",this._onMouseEnter=function(){var n=$(this),t=n.attr("title");n.find(">div,>span").length===0&&t!==n.text()&&(this.offsetWidth<this.scrollWidth?n.attr("title",n.text()):t&&n.removeAttr("title"))});this.options.extensionTrigger("afterAttachEvents")},t.prototype._detachEvents=function(){this.options.extensionTrigger("beforeDetachEvents");this._onMouseEnter&&(this.element.off("mouseenter.azcGrid",this._onMouseEnter),this._onMouseEnter=null);this.options.extensionTrigger("afterDetachEvents")},t.prototype._getNewRowMetadataEntries=function(){var n={item:null,cssClass:ko.observable("")},t=this.options.extensionTrigger("getDefaultRowMetadataProperties",n);return t.forEach((function(t){$.extend(!0,n,t)})),n},t.prototype._getNewColumnEntries=function(){var n={name:ko.observable(""),itemKey:"",formatter:f.text,cssClass:"",width:ko.observable(null),ariaLabel:null},t=this.options.extensionTrigger("getDefaultColumnProperties");return t.forEach((function(t){$.extend(!0,n,t)})),n},t.prototype._normalizeColumns=function(n){for(var t=this._getNewColumnEntries(),u=Object.keys(t),i=!1,r=n.length,f=function(){var f=n[r];u.forEach((function(n){f[n]===undefined&&(f[n]=t[n],i=!0)}));ut.isNullOrUndefined(f.columnId)&&(f.columnId="fxgridcol"+ni++);i&&(t=e._getNewColumnEntries(),i=!1)},e=this;r--;)f()},t.prototype._getTotalColumns=function(){var n=this.options.columns().length,t=this.options.extensionTrigger("getAdditionalColumns");return t.forEach((function(t){n+=t})),n},t.prototype._cellFormat=function(n,t,i,r){var u=r.guidList||(r.guidList=[]),e=r.formatter||f.text;return e(i.item[r.itemKey],{item:i.item,rowNumber:n,columnNumber:t,rowMetadata:i,column:r,guidList:u,rowNumberPath:"$data.guidList["+tt+".peek()]"})},t.prototype._getCellAriaLabel=function(n,t){return t.getCellAriaLabel?n.cellAriaLabels&&n.cellAriaLabels[t.itemKey]?!0:(n.cellAriaLabels||(n.cellAriaLabels={}),n.cellAriaLabels[t.itemKey]=ko.observable(),Q(t.getCellAriaLabel(n.item)).then((function(i){n.cellAriaLabels[t.itemKey](i)})),!0):null},t.prototype._getRowAriaLabel=function(n){var t=this,i;return n.ariaLabel?!0:(i=ko.observable(),this.options.getRowAriaLabel&&ko.computed(this.ltm,(function(){t.options.rowAriaLabelDependencies&&t.options.rowAriaLabelDependencies.forEach((function(t){ko.unwrap(n.item[t])}));ko.ignoreDependencies((function(){Q(t.options.getRowAriaLabel(n.item)).then((function(n){i(n)}))}))})).extend({rateLimit:{timeout:100,method:"notifyWhenChangesStop"}}),n.ariaLabel=ko.computed(this.ltm,(function(){var r=i(),u=t.options.extensionTrigger("getRowAriaLabelOverride",n)[0];return u||r||null})),!0)},t.prototype._setTemplates=function(){var n=this.templateEngine;this.options.extensionTrigger("beforeSetTemplates",n);n.setTemplate({table:ot,header:st,headerColumn:ct,colgroup:ht,headerCell:lt,headerCellContent:at,body:vt,bodyCore:yt,bodyNoItems:pt,templateLoading:wt,bodyRows:bt,bodyRowsCore:kt,bodyCell:dt,bodyCellContent:gt});this.options.extensionTrigger("afterSetTemplates",n)},t.prototype._updateAllRowMetadata=function(){var i=this,t=this.options,n;t.items&&(n=t.items(),n&&n.length&&n.forEach((function(n){i.getRowMetadata(n)})))},t.prototype._ariaHiddenColumnHeader=function(n){return!n||!ko.unwrap(n.name)&&!ko.unwrap(n.ariaLabel)?!0:null},t.prototype.convertPixelsToUnits=function(n,t,i,r){var f,u;if(t==="fr"){var e=this.totalFractionalUnits.peek(),o=Math.max(this.availableWidth.peek()-this.allocatedWidth.peek(),20),u=void 0;u=this.hscroll()&&i!==e?n*e*(1-r/o)/(o-n):n*e/o;f={value:Math.round(u*1e4)/1e4,units:t}}else t==="%"?(u=n*100/Math.max(this.availableWidth.peek(),20),f={value:Math.round(u*1e4)/1e4,units:t}):(u=n/it[t],f={value:Math.round(u*1e4)/1e4,units:t});return f},t.prototype.hscroll=function(){var n=this.getPlugin(nt);return!!(n&&n.hscroll)},t.prototype.vscroll=function(){var n=this.getPlugin(nt);return!!(n&&n.vscroll)},t})(r.Widget);t.Widget=b;k=ko.bindingHandlers.trustedHtml;ko.bindingHandlers.trustedCellBinding={init:k.init,update:function(t,i,r,u,f){try{return k.update(t,i,r,u,f)}catch(e){e=e&&e.message?e:FxImpl.createError("Undefined cell binding error");e._sourceErrorLevel=0;h.logToExtension(n,t,2,e.message);throw e;}}};ko.bindingHandlers.azcGrid=u.getBindingHandler(b)}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer"],(function(n,t,i,r,u,f){"use strict";function y(t,i){return function(r,u){var e=t(r,u);return f.sanitizeHTML(e,n,i).sanitizedMarkup}}function p(n,t){return n&&t&&n===t}var o,s;Object.defineProperty(t,"__esModule",{value:!0});t.TrustedWidget=t.Widget=t.GridExtension=void 0;var h=MsPortalFx.Base,c=h.Diagnostics,l=MsPortalFx.ViewModels.Controls.Lists.Grid,e=l.Format,a=MsPortalFx.forEachKey,v=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(i.Extension);t.GridExtension=v;o=(function(t){function i(n,i,r){var u=t.call(this,n,i,r)||this;return u._metadataDisposables=[],u._resetCallbackAdded=!1,u.width=ko.observable(),u.height=ko.observable(),u._extensionTrigger("beforeCreate"),u._initializeWidgets(),u._extensionTrigger("afterCreate"),u}return __extends(i,t),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(t.prototype.dispose)||(this._extensionTrigger("beforeDestroy"),this._metadataDisposables&&(this._metadataDisposables.forEach((function(n){var t=n.disposables||[];t.forEach((function(n){n.dispose()}))})),this._metadataDisposables=[]),this._resetCallbackAdded&&this.options.resetCallback(null),t.prototype.dispose.call(this),this._extensionTrigger("afterDestroy"))},Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),i.prototype.getRowMetadata=function(n){return this._instance.getRowMetadata(n)},i.prototype._twoWayBinding=function(n,t,i){var r=n.createChildLifetime(),f=t(),e=i(),u=!1,o=function(n,t){if(!u)try{u=!0;n(t)}finally{u=!1}};return f?i(f):e&&t(e),t.subscribe(r,(function(n){o(i,n)})),i.subscribe(r,(function(n){o(t,n)})),r},i.prototype._resetExtensions=function(){var n=this._extensionTrigger("resetExtension");return Q.all(n)},i.prototype._initializeWidgets=function(){var n=this;this._initializeNestedViewModel();this._instance=new r.Widget(this.element,this._nestedViewModel,{height:this.height,width:this.width});this._widgets.push(this._instance);this._extensionTrigger("initializeExtension");this._initializeVivaRowMetadata();this.options.resetCallback()||(this.options.resetCallback((function(){return n._resetExtensions()})),this._resetCallbackAdded=!0)},i.prototype._getFormatter=function(n,t){var i;switch(n){case e.Text:return u.text;case e.Uri:return u.uri}if(i=MsPortalFx.find(this._extensionTrigger("getSafeFormatter",n,t,this.isTrusted),(function(n){return n!==null})),i)return i;switch(n){case e.Html:i=u.html;break;default:i=MsPortalFx.find(this._extensionTrigger("getUnsafeFormatter",n,t,this.isTrusted),(function(n){return n!==null}));i||(i=u.text)}return this.isTrusted||(i=y(i,this.element)),i},i.prototype._connectMetadataAndDisposeSubscriptions=function(n,t){var i=this._getVivaItem(t);i&&this._canConnectRowMetadataProperties(i,t)&&(this._connectRowMetadataProperties(i,t),n.dispose())},i.prototype._disposeMetadataDisposables=function(n){var t,i=-1;this._metadataDisposables.some((function(r,u){return r.metadata===n?(t=r,i=u,!0):!1}));t&&((t.disposables||[]).forEach((function(n){n.dispose()})),this._metadataDisposables.splice(i,1))},i.prototype._initializeNestedViewModel=function(){var o,u=this,t=new r.ViewModel(this.vmBasicOption),i=this.options,e=this.ltm;t.summary=i.summary;t.showHeader=i.showHeader;t.sortByList=i.sortByList;i.loading.subscribeAndRun(e,t.loading);t.actions=i._msPortalFxActions;t.getRowAriaLabel=i.getRowAriaLabel&&function(n){return i.getRowAriaLabel(n)};t.rowAriaLabelDependencies=i.rowAriaLabelDependencies;t.noRowsMessage=ko.observable();i.noRowsMessage&&ko.computed(e,(function(){var r=i.noRowsMessage(),e=u.isTrusted?r:f.sanitizeHTML(r,n,u.element).sanitizedMarkup;t.noRowsMessage(e)}),this);t.columns=i.columns.mapInto(e,(function(n,t){var i=u._toNestedColumn(t);return u._extensionTrigger("columnAdded",n,t,i),i}));t.items=i.items;(o=t.extensions).push.apply(o,this._getExtensions(i.extensionsOptions||{}));t.disabled=i.disabled;this._nestedViewModel=t},i.prototype._toNestedColumn=function(n){var t=a(n,(function(n,t,i){i[n]=t}),{});return t.pcColumn=n,t.formatter=null,n.format!==undefined&&(t.formatter=this._getFormatter(n.format,n.formatOptions||{})),t},i.prototype._initializeVivaRowMetadata=function(){var n=this,t=this.options.rowMetadata;t.subscribeArrayBulkChanges(this.ltm,(function(t,i){i.forEach((function(t){n._disposeMetadataDisposables(t)}));t.forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))}));t.peek().forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))},i.prototype._connectPortalAndVivaRowMetadataAsync=function(n){var r=this,t=this.ltm.createChildLifetime(),i=this._getVivaItem(n);i&&this._canConnectRowMetadataProperties(i,n)?this._connectRowMetadataProperties(i,n):(this._extensionTrigger("registerSubscriptionsToConnectMetadataProperties",t,n),this._nestedViewModel.items.subscribe(t,(function(){r._connectMetadataAndDisposeSubscriptions(t,n)})))},i.prototype._getVivaItem=function(n){var i=MsPortalFx.find(this._nestedViewModel.items(),(function(t){return n.item===t})),r,t;if(!i)for(r=this._extensionTrigger("getAdditionalItems"),t=0;t<r.length;t++)if(r[t]&&(i=r[t].first((function(t){return p(t,n.item)})),i))break;return i},i.prototype._canConnectRowMetadataProperties=function(n,t){return!this._extensionTrigger("disallowConnectRowMetadataProperties",n,t).some((function(n){return!!n}))},i.prototype._connectRowMetadataProperties=function(n,t){var i,u=this.getRowMetadata(n),r;t?(i=MsPortalFx.find(this._metadataDisposables,(function(n){return n.metadata===t})),i||(i={metadata:t,disposables:[]},this._metadataDisposables.push(i)),this._extensionTrigger("connectRowMetadataProperties",n,u,t).forEach((function(n){n&&i.disposables.push.apply(i.disposables,n)}))):(r=new c.Log("Grid"),r.debug("Metadata was not present and could not connect rowmetadata."))},i.prototype._getExtensions=function(n){var t=[];return this._extensionTrigger("getExtension",n).forEach((function(n){n&&t.push(n)})),t},i})(i.Extensibility);t.Widget=o;s=(function(n){function t(t,i){return n.call(this,t,i,{isTrusted:!0})||this}return __extends(t,n),t})(o);t.TrustedWidget=s}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css",["module"],(function(n){"use strict";return{css:'.fxs-mode-standardcontrast .azc-grid-focusableRow tr[aria-disabled="true"] td>div{opacity:.5}.fxs-mode-standardcontrast .azc-grid-focusableRow tr[aria-disabled="true"] td.azc-grid-infoBalloon>div{opacity:1}.fxs-mode-standardcontrast .azc-grid-focusableRow tr[aria-disabled="true"] td .azc-dockedballoon{position:static}.azc-grid-focusableRow.azc-grid-mousedown{outline:none}.fxs-mode-light .azc-fabric .azc-grid-headerlabel:focus,.fxs-mode-light .azc-fabric .azc-grid-row:focus{outline-style:solid;outline-color:#605e5c}',moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Base/JQueryHelper","MsPortalImpl/Base/Base.KeyboardHelper","Viva.Controls/Util/Viva.Util","MsPortalImpl/Base/Base.FeatureDetection","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";function h(n){return n.find("> tbody > tr[data-grid-focusable]:not([aria-disabled=true][tabindex=-1]):not(.fxc-row-hidden):visible")}function p(n,t){var i,r,o=[],s=t&&t.preventScroll&&!e.canPreventScrollOnFocus(),u,f;if(s){for(u=document.scrollingElement||document.documentElement,i=n;(i=i.parentElement)&&n!==u;)o.push({parentElement:i,scrollLeft:i.scrollLeft,scrollTop:i.scrollTop});o.push({parentElement:u,scrollLeft:u.scrollLeft,scrollTop:u.scrollTop})}if(n.focus(t),n.focus(t),s){for(f=!1;r=o.pop();)i=r.parentElement,i.scrollTop!==r.scrollTop&&(i.scrollTop=r.scrollTop,f=!0),i.scrollLeft!==r.scrollLeft&&(i.scrollLeft=r.scrollLeft,f=!0);if(f)return Q.delay(10)}return Q()}var k;Object.defineProperty(t,"__esModule",{value:!0});t.FocusableRowExtension=void 0;o.injectCss(s);var d=MsPortalFx,g=d.isNullOrUndefined,a=window,nt='attr: { "aria-disabled": $disabled, "data-grid-focusable": true }',tt="attr: { tabindex: focused() ? $ctl.$tabIndex() : '-1' }",it='css: { "azc-row-disabled": $disabled }',v="azc-grid-tableContainer",w="."+v,rt="tbody tr[data-grid-focusable=true]:not([aria-disabled=true])",c=".azc-grid",l="rowFocus",b="tabindex",ut="<!-- ko template: { name: 'bodyRowsCore', data: $ctl.getRowMetadata($data), context: function (metadata) { return { $disabled: metadata.disabled || $disabled, $tabIndex: ko.unwrap(metadata.editing) ? 0 : metadata.focusIndex}; } } --><!-- /ko -->",y=!1;k=(function(n){function t(t){var i=n.call(this)||this;return i._options=t=t||{},i._gridTabIndex=ko.observable(!0),t.focusableCursorEnabled=t.focusableCursorEnabled||ko.observable(!1),t.focusableCursorOptions=t.focusableCursorOptions||{hasPreviousFocusRow:ko.observable(!1),hasNextFocusRow:ko.observable(!1)},i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.isEditableControl=function(n){return n.is("input")||n.is("textarea")||n.is("select")||n.is("keygen")},t.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t)},t.prototype.afterCreate=function(){var t=this,n=this._widget,i=n.element;ko.reactor(this.ltm,(function(){i.attr(b,t._gridTabIndex()?n.$tabIndex():-1)}))},t.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",[nt,this._getRowFocusDataBindAttribute(),it]);this.externalHover||t.addAttribute("tr","class",["fxs-portal-hover","fxs-portal-focus"]);n.setTemplate("bodyRows",ut)},t.prototype.getDefaultRowMetadataProperties=function(){var t=this,n=ko.observable(!1);return{disabled:ko.observable(!1),focused:n,focusIndex:ko.pureComputed({read:function(){return n()?t._widget.$tabIndex():-1},write:function(t){n(t===0)}})}},t.prototype.getOrder=function(){return 10},t.prototype.handleRemovedRow=function(n){var t=this,i;this._lastTabbableRowMetadata&&n===this._lastTabbableRowMetadata.item&&(this._gridTabIndex(!0),this._lastTabbableRowMetadata=null);i=$(document.activeElement).closest(".azc-grid-row");i.length&&ko.dataFor(i[0]).item===n&&Q.nextTick((function(){var n=t._findFirstFocusable(t._widget.element);n.length?t._focusRow(n[0],ko.dataFor(n[0])):t._widget.element.focus()}))},t.prototype.beforeCreate=function(){var n=this;this._widget.options.items.subscribeArrayDeletes(this.ltm,(function(t){n.handleRemovedRow(t)}))},t.prototype.afterAttachEvents=function(){var i=this,n=this,r=this._widget.element,f=this.ltm;f.registerForDispose(r.setEvents(["click.azcGrid",rt,function(t){if(this===a.document.activeElement||$.contains(this,a.document.activeElement))n._updatePreviousNextFocusableState($(this));else{var i=ko.dataFor(this);i&&n._focusRow(this,i,t)}},],["keydown.azcGrid",function(i){var e=$(i.target),f=e.closest(c),l=e.is(c),o=l?null:e.closest("tr[data-grid-focusable]"),r,s=u.getModifierKeys(i),h=!0;if(!t.isEditableControl(e))if(s===0){switch(i.which){case 38:r=n._findPreviousFocusable(f,o);break;case 40:r=n._findNextFocusable(f,o);break;case 36:r=n._findFirstFocusable(f);break;case 35:r=n._findLastFocusable(f);break;case 33:case 34:r=n._findFocusableByPage(f,i.which);break;default:h=!1}r&&r.length&&n._focusRow(r,ko.dataFor(r[0]),i);h&&i.preventDefault()}else s===4&&i.which===9&&n._focus(i)},],["mousedown.azcGrid",function(){r.addClass("azc-grid-mousedown");$.querySelectorAll("body").one("mouseup",(function(){r.removeClass("azc-grid-mousedown")}))}],["focus.azcGrid",function(t){$.contains(r[0],t.relatedTarget)||(n._focus(t),n._lastTabbableRowMetadata&&n._gridTabIndex(!1))}],["focusin.azcGrid",function(){if(!n._lastTabbableRowMetadata){var i=n._findFirstFocusable(n._widget.element),t=i.length&&ko.dataFor(i[0]);t&&t.focused(!0);n._lastTabbableRowMetadata=t}}]));this._widget.options.items.fxOnce(f,(function(){i._widget.element[0]===a.document.activeElement&&Q.nextTick((function(){var n=i._findFirstFocusable(i._widget.element);n.length&&i._focusRow(n,ko.dataFor(n[0]))}))}),(function(n){return!!(n&&n.length)}))},t.prototype.beforeDestroy=function(){this._widget.element.removeAttr(b).removeClass("azc-grid-mousedown")},t.prototype.getName=function(){return t.Name},t.prototype.focusRowByRowMetadata=function(n){var t=this._getRowByRowMetadata(n);t&&this._focusRow(t,n)},t.prototype.previous=function(n){var t;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(t=this._getRowByRowMetadata(n),t){var r=$(t),u=r.closest(c),i=this._findPreviousFocusable(u,r);i&&this._focusRow(i,ko.dataFor(i[0]),$.Event(l))}}else throw new Error("Previous focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},t.prototype.next=function(n){var t;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(t=this._getRowByRowMetadata(n),t){var r=$(t),u=r.closest(c),i=this._findNextFocusable(u,r);i&&this._focusRow(i,ko.dataFor(i[0]),$.Event(l))}}else throw new Error("Next focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},t.prototype._findFirstFocusable=function(n){return h(n.find("table.azc-grid-full").eq(0)).first()},t.prototype._findFocusableByPage=function(n,t){var f;n=n.find("table.azc-grid-full").eq(0);var i=this._getPagedFocusableList(n),e=this._getFocusedItemIndex(n),o=this._widget._itemsPerKeyboardPage(),r=e<o?0:Math.floor(e/o),s=e%o,u;if(i.length>0)switch(t){case 33:s===0&&i[r-1]?u=MsPortalFx.first(i[r-1]):(f=i[r],u=MsPortalFx.first(f));break;case 34:i[r+1]?u=MsPortalFx.first(i[r+1]):(f=i[r],u=MsPortalFx.last(f))}return u?$(u):undefined},t.prototype._findLastFocusable=function(n){return h(n.find("table.azc-grid-full").eq(0)).last()},t.prototype._findNextFocusable=function(n,t){var u=t?t.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),i=h(u),r;if(t){for(r=0;r<i.length;r++)if(t[0]===i[r]&&r<i.length-1)return $(i[r+1])}else if(i.length)return $(i[0]);return null},t.prototype._findPreviousFocusable=function(n,t){var u=t?t.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),r=h(u),i;if(t)for(i=r.length-1;i>=0;i--)if(t[0]===r[i]&&i>0)return $(r[i-1]);return null},t.prototype._focus=function(n){var f,e=this._widget.element,o=e.hasClass("azc-grid-mousedown"),h=n.type==="focus"&&!o,s=u.getModifierKeys(n),c=s===0&&(n.which===9||n.which===40||n.which===38),i,t;o?(i=$(n.target).closest("tr:not([aria-disabled=true])")[0],i&&(f=this._widget.getRowMetadata(ko.dataFor(i).item),this._focusRow(i,f),s===0&&(n.preventDefault(),n.stopPropagation()))):(c||h)&&(t=e.find("input, textarea, select, button, a, [tabindex=0], "+w).filter((function(n,t){var i=$(t);return(i.hasClass(v)||i.closest(w).length===0)&&r.isVisible(i)})),document.activeElement!==t[0]&&t[0]&&!$(t[0]).hasClass(v)?(p(t[0]),n.preventDefault(),n.stopPropagation()):this._focusCurrentlyFocusableRow(n))},t.prototype._focusCurrentlyFocusableRow=function(n){var t,i,f=this._widget.element,e=f.find(".azc-grid-row").eq(0),o=u.getModifierKeys(n),r;e.length?t=e[0]:this._lastTabbableRowMetadata&&this._isRowDisplayed(this._lastTabbableRowMetadata)?(t=this._getRowByRowMetadata(this._lastTabbableRowMetadata),i=this._lastTabbableRowMetadata):(r=this._findNextFocusable(f,null),t=r&&r.length?r[0]:null);t&&(i=i||this._widget.getRowMetadata(ko.dataFor(t).item),this._focusRow(t,i),o===0&&(n.preventDefault(),n.stopPropagation()))},t.prototype._focusRow=function(n,t,i){var r=$(n),u;this._lastTabbableRowMetadata&&this._lastTabbableRowMetadata.focused(!1);g(t)?this._lastTabbableRowMetadata=null:(this._lastTabbableRowMetadata=t,t.focused(!0),u={focused:t,target:r},p(r[0]),i&&(this._widget.trigger(l,f.cloneEvent(i,l),u),this._widget.options.events("focus",u)),this._updatePreviousNextFocusableState(r))},t.prototype._getFocusedItemIndex=function(n){for(var i,r=this._getPagedFocusableList(n),u,f=this._widget._itemsPerKeyboardPage(),t=0;t<r.length;t++)for(i=0;i<r[t].length;i++)if(ko.dataFor(r[t][i])===this._lastTabbableRowMetadata){u=t*f+i;break}return u},t.prototype._getFocusedRowMetadata=function(){return this._lastTabbableRowMetadata},t.prototype._getRowByRowMetadata=function(n){return MsPortalFx.find(this._widget.element.find("tbody tr").toArray(),(function(t){return ko.dataFor(t)===n}))},t.prototype._getRowFocusDataBindAttribute=function(){return tt},t.prototype._findPreviousAndNextFocusable=function(n,t){var e=t?t.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),r=h(e),i,u,f;if(t)for(i=r.length-1;i>=0;i--)if(t[0]===r[i]){i>0&&(u=$(r[i-1]));i<r.length-1&&(f=$(r[i+1]));break}return{previous:u,next:f}},t.prototype._updatePreviousNextFocusableState=function(n){if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){var i=n.closest(".azc-grid"),t=this._findPreviousAndNextFocusable(i,n);this.options.focusableCursorOptions.hasPreviousFocusRow(t.previous?!0:!1);this.options.focusableCursorOptions.hasNextFocusRow(t.next?!0:!1)}},t.prototype._getPagedFocusableList=function(n){for(var i=[],t=h(n).toArray(),r=this._widget._itemsPerKeyboardPage();t.length>0;)t.length<=r?i.push(t.splice(0)):i.push(t.splice(0,r));return i},t.prototype._isRowDisplayed=function(n){return this._widget.element.find("tbody tr[data-grid-focusable=true]:not([aria-disabled=true])").each((function(t,i){if(ko.dataFor(i)===n)return!0})),!1},t.prototype.saveFocus=function(){var t,n;if(!this._savedFocusInfo&&(t=this._widget.element[0],n=document.activeElement,n&&(t===n||$.contains(t,n)))){var i=n.closest(".azc-grid-row,.azc-grid"),r=i&&i.classList.contains("azc-grid-row")?i:null,u=r?ko.dataFor(r):null;this._savedFocusInfo={activeElement:n,rowElement:r,rowMetadata:u}}},t.prototype.restoreFocus=function(){var i,n;if(this._savedFocusInfo){var r=this._savedFocusInfo,t=r.activeElement,u=r.rowElement,f=r.rowMetadata;this._savedFocusInfo=null;t&&(i=document.activeElement,i===t||i&&i!==document.body||(n=void 0,$.contains(this._widget.element[0],t)?n=t:$.contains(this._widget.element[0],u)?n=u:f&&(n=this._getRowByRowMetadata(f)),n&&!y&&(y=!0,p(n,{preventScroll:!0}).finally((function(){y=!1})))))}},t.Name="azc-grid-focusableRow",t})(i.Extension);t.FocusableRowExtension=k}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow"],(function(n,t,i,r,u){"use strict";var f;return (function(n){var t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getName=function(){return"Focusable"},t.prototype.getOrder=function(){return 0},t.prototype.getExtension=function(){return new u.FocusableRowExtension},t})(r.GridExtension);n.FocusableRowExtension=t;i.defaultPlugins.push(t)})(f||(f={})),f}));
define("_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css",["module"],(function(n){"use strict";return{css:".fxc-base.azc-grid .fx-grid-formatters-svg{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svg.fx-grid-svgicon-center{justify-content:center;width:calc(100% + 10px);margin-left:-10px}.fxc-base.azc-grid .fx-grid-formatters-svg .fx-grid-formatters-svgtext{text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svgicon{margin-right:6px;flex-shrink:0;width:12px;height:14px;position:relative}.fxc-base.azc-grid .fx-grid-formatters-icon{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-icon .fx-grid-formatters-icon-text{flex:1;min-width:0;text-overflow:inherit;overflow:inherit}",moduleId:n.id}}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalImpl/Base/Base.Sanitization","FxInternal/Css","_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";o.injectCss(s);var h;return (function(t){function y(t,i,r){var u=ko.unwrap(i),f=u&&!h(u.text)&&!h(u.uri)?u.uri:u;return e.sanitizeUri(f+"",null,{diContainer:t,localRequire:n,windowContext:r})}function b(n,t,i){return y(n,t,i)?u.icon(t):""}var c=FxImpl.Intl.DateTimeFormat,w=MsPortalFx.ViewModels.Controls.Lists.Grid,o=w.Format,s=u.date,a=f.attributeEncode,l=f.callFormatter,h=f.isUndefined,p=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getName=function(){return"Formatter"},t.prototype.getOrder=function(){return 0},t.prototype.getSafeFormatter=function(n,t){var e=this,i=this._widget.element,r,f;switch(n){case o.ShortTime:return s(c.shortTimePattern,i);case o.LongTime:return s(c.longTimePattern,i);case o.ShortDate:return s(c.shortDatePattern,i);case o.LongDate:return s(c.longDatePattern,i);case o.MonthDay:return s(c.monthDayPattern,i);case o.YearMonth:return s(c.yearMonthPattern,i);case o.CustomDate:return s(t.dateFormat||"",i);case o.Number:return u.numberFormat(t.numberFormat);case o.TextLookup:return u.textLookup(t.textLookup||{});case o.Icon:return function(n){return b(e._widget._diContainer,n,i)};case o.IconLookup:r=t.iconLookup||{};for(f in r)r.hasOwnProperty(f)&&(y(this._widget._diContainer,r[f],i)||delete r[f]);return u.iconLookup(r);case o.SvgIcon:return v.svgIcon;case o.SvgIconLookup:return v.svgIconLookup(t.svgIconLookup||{});case o.PercentageBar:return u.percentageBar(t.percentageBar||{})}return null},t.prototype.getUnsafeFormatter=function(n,t){switch(n){case o.Html:return u.html;case o.TextLookup:return u.textLookup(t.textLookup||{});case o.Uri:return u.uri}return null},t})(r.GridExtension),v;t.FormatterExtension=p;i.defaultPlugins.push(p),(function(n){function t(n){var f=function(n){return n&&!h(n.type)},e=function(n,t,i){var r="image: "+a(ko.toJSON(n)),u=i&&t?', style: { height:"'+a(t)+'", width: "'+a(i)+'" }':"";return"<span class='fx-grid-formatters-svgicon' data-bind='"+r+u+"'><\/span>"},o=Array.prototype.slice.call(arguments,1),t=ko.unwrap(n),s="",i,r;return(t&&!h(t.center)&&t.center&&(s=" fx-grid-svgicon-center"),i="<div class='fx-grid-formatters-svg"+s+"'>",t&&!h(t.svg)&&f(t.svg))?(r="",t.text&&!h(t.text)&&(r="<span class='fx-grid-formatters-svgtext'>"+l(u.text,t.text,o)+"<\/span>"),i+e(t.svg,t.height,t.width)+r+"<\/div>"):f(t)?i+e(t)+"<\/div>":t&&!h(t.text)?i+"<span class='fx-grid-formatters-svgtext'>"+l(u.text,t.text,o)+"<\/span><\/div>":""}function i(t){return function(i){for(var r,e,s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];if(r=ko.unwrap(i),f.isNullOrUndefined(t[r])){if(t["##DEFAULT##"])return r=u.text(r),e=t["##DEFAULT##"],e.text&&(e=MsPortalFx.extend2(e,{text:e.text.replace(/##DEFAULT##/g,r)})),l(n.svgIcon,e,s)}else return l(n.svgIcon,t[r],s);return""}}n.svgIcon=t;n.svgIconLookup=i})(v=t.Formatters||(t.Formatters={}))})(h||(h={})),h}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css",["module"],(function(n){"use strict";return{css:'.azc-grid-selectableRow-selectionCell-col{width:26px;max-width:26px}.azc-grid-selectableRow-selectAll{vertical-align:text-top}.azc-grid table th.azc-grid-selectableRow-selectionCell-header{padding-left:6px}.azc-grid table td.azc-grid-selectableRow-selectionCell{padding-left:7px}.azc-grid-selectableRow-selectionCell-wrapper{border-width:1px;border-style:solid;border-radius:2px;box-sizing:border-box;width:18px;height:18px;display:block;transition-property:background-color,border-color;transition-duration:200ms;transition-timing-function:cubic-bezier(.4,0,.23,1)}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon{margin-top:2px;margin-left:2px;position:relative}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon svg{vertical-align:top}.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table{height:100%}.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody{height:100%}.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody tr{height:100%}.azc-grid-selectableRow table thead th.azc-grid-selectableRow-overlay-header{width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell{overflow:visible;padding:0;vertical-align:top;width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin{position:relative;overflow:visible;height:100%}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin div.azc-grid-selectableRow-overlay-container{position:absolute;top:0;right:0}.azc-grid-selectableRow table tbody tr td:first-of-type{border-left:none}.azc-grid-selectableRow table tbody tr td:last-of-type,.azc-grid-selectableRow table tbody tr td.azc-br-muted:last-of-type{border-right:none}.fxs-mode-light .azc-fabric .azc-grid-row .azc-grid-selectableRow-selectionCell-wrapper{background-color:#fff;border-color:#323130}.fxs-mode-light .azc-fabric .azc-grid-row[aria-selected="true"] .azc-grid-selectableRow-selectionCell-wrapper{background-color:#0078d4;border-color:#0078d4}.fxs-mode-light .azc-fabric .azc-grid-row[aria-selected="true"] .azc-grid-selectableRow-selectionCell-wrapper.azc-fill-text{fill:#fff}.fxs-mode-light .azc-fabric .azc-grid-row[aria-selected="true"] .azc-grid-selectableRow-selectionCell-wrapper:hover{border-color:#005a9e;background-color:#005a9e}.fxs-mode-light .azc-fabric .azc-grid-row[aria-selected="true"] td{border-color:transprent;background-clip:padding-box}.fxs-mode-light .azc-fabric .azc-grid-row[aria-disabled="true"] .azc-grid-selectableRow-selectionCell-wrapper{background-color:transparent;border-color:#c8c6c4}.fxs-mode-light .azc-fabric .azc-grid-row[aria-disabled="true"] .azc-grid-selectableRow-selectionCell-wrapper:hover{background-color:transparent}.fxs-mode-light .azc-fabric .azc-grid-row[aria-selected="true"][aria-disabled="true"] .azc-grid-selectableRow-selectionCell-wrapper{background-color:#c8c6c4;border-color:#c8c6c4}.fxs-mode-light .azc-fabric .azc-grid-row[aria-selected="true"][aria-disabled="true"] .azc-grid-selectableRow-selectionCell-wrapper.azc-fill-text{fill:#fff}.fxs-mode-light .azc-fabric .azc-grid-row[aria-selected="true"][aria-disabled="true"] .azc-grid-selectableRow-selectionCell-wrapper:hover{background-color:#c8c6c4}',moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Util/Viva.Util","MsPortalImpl/Base/Base.KeyboardHelper","Viva.Controls/Controls/Forms/Viva.CheckBox","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","MsPortalImpl/Resources/ImplScriptResources","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css","MsPortalImpl/Base/Base.KnockoutExtensions.Image"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";function g(n){var t=y(n);return t&&t.selected&&!t.selected()}var p,l,rt;Object.defineProperty(t,"__esModule",{value:!0});t.SelectableRowExtension=t.RowSelectionMode=t.EventTypes=void 0;h.injectCss(c);var ut=MsPortalFx.Base,ft=ut.Images,w=MsPortalFx.isNullOrUndefined,y=ko.dataFor,nt=window,a="azc-grid-selectableRow",v="tr[data-grid-selectable=true]:not([aria-disabled=true])",tt="tbody "+v,et=tt+" td."+a+"-selectionCell",ot=a+"-selectAll",it="11px",b='attr: { "data-grid-selectable": true, "aria-selected": selected() ? "true" : "false" }',k='keyedCss: { grid1RowSelected: { "fxs-portal-selected": selected() }}',st='keyedCss:{ grid1SelectableRowTable: { "azc-grid-multiselectable": $ctl.getPlugin("'+a+'")._multiselect, '+('"azc-grid-selectable": $ctl.getPlugin("'+a+'")._showSelectionExperience }}'),ht="<col class='"+a+"-selectionCell-col' />",ct="<th class='"+a+"-selectionCell-header azc-br-muted' role='presentation'>"+('<!-- ko if: $ctl.getPlugin("'+a+"\")._canSelectAll --><div class='"+ot+"' data-bind='azcCheckBox: $ctl.getPlugin(\""+a+'")._selectAllCheckbox, attr:{ "aria-label": $ctl.getPlugin("'+a+"\")._ariaLabel }'><\/div><!-- /ko -->")+"<\/th>",d="<td class='"+a+"-selectionCell azc-br-muted' role='presentation'>"+("<div class='"+a+"-selectionCell-wrapper fxs-portal-border azc-fill-text' aria-hidden='true'>")+("<div data-bind='trustedHtml: $ctl.getPlugin(\""+a+"\")._selectionCellFormat($data)'><\/div>")+"<\/div><\/td>";(function(n){n.RowSelect="rowSelect";n.RowClick="rowClick"})(p=t.EventTypes||(t.EventTypes={})),(function(n){n[n.Off=0]="Off";n[n.Single=1]="Single";n[n.MultipleAdd=2]="MultipleAdd";n[n.MultipleReplace=3]="MultipleReplace";n[n.AlwaysSingle=4]="AlwaysSingle"})(l=t.RowSelectionMode||(t.RowSelectionMode={}));rt=(function(n){function t(t){var i=n.call(this)||this,r;return i._ariaLabel=s.Grid.selectAllCheckboxLabel,i._showSelectionExperience=ko.observable(!1),i._options=t=t||{},t.mode=t.mode||ko.observable(l.Single),t.hideMultiSelectCheckbox=t.hideMultiSelectCheckbox||!1,t.enableSelectableCursor=t.enableSelectableCursor||ko.observable(!1),t.hasPreviousSelectableItem=t.hasPreviousSelectableItem||ko.observable(!1),t.hasNextSelectableItem=t.hasNextSelectableItem||ko.observable(!1),i._enableSelectableCursor=ko.computed(i.ltm,(function(){i._updateSelectableCursor()})),r=i._selectAllCheckbox=new e.ViewModel(i.vmBasicOption),r.canUserSetIndeterminate(!1),i._multiselect=ko.pureComputed((function(){var n=t.mode();return n===l.MultipleAdd||n===l.MultipleReplace})),i._canSelectAll=ko.pureComputed((function(){return i._multiselect()&&!t.disableSelectAll&&!i._widget.options.extensionTrigger("shouldNotAllowSelectAll").some((function(n){return n}))})),i._modeSubscription=t.mode.subscribe(i.ltm,(function(n){if(i._widget&&(n===l.AlwaysSingle||n===l.Single)){var r=void 0,e=void 0,u=void 0,t=i.getSelectedRows(),f=t?t.length:0;if(t=i.getSelectedRows(),f=t?t.length:0,f>=1)for(u=1;u<f;u++)t[u].selected(!1);else n===l.AlwaysSingle&&(r=i._widget.options.items(),r&&r.length>0&&(e=i._widget.getRowMetadata(r[0]),e.selected(!0)))}})),i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.getSelectedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return n.selected.peek()}))},t.prototype.getSelectableRows=function(){var n=this;return this._widget.options.items().filter((function(t){return!n._widget.getRowMetadata(t).disabled()}))},t.prototype.selectAllRows=function(){this.selectRows.apply(this,this.getSelectableRows())},t.prototype.unselectAllRows=function(){this._widget._getAllRowMetadata().forEach((function(n){n.selected(!1)}))},t.prototype.unselectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(n){i._widget.getRowMetadata(n).selected(!1)}))},t.prototype.selectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(n){i._widget.getRowMetadata(n).selected(!0)}))},t.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t);this._options.mode.valueHasMutated()},t.prototype.afterCreate=function(){this._widget.ltm.registerForDispose([this._showSelectionExperience,this._modeSubscription,this._enableSelectableCursor,]);this._focusableRowPlugin=this._widget.getPlugin(i.FocusableRowExtension.Name);this._updateSelectableCursor()},t.prototype.afterSetTemplates=function(n){var t=this,f=n.getHtmlTemplate("bodyRowsCore"),s=n.getHtmlTemplate("header"),h=n.getHtmlTemplate("colgroup"),c=n.getHtmlTemplate("table"),r=n.getHtmlTemplate("editableBodyRowsCorePerColumn"),u=n.getHtmlTemplate("editableBodyRowsCoreForRow"),e=!w(r)&&!w(u),i="data-bind";f.addAttribute("tr",i,[b,k]);c.addAttribute("table",i,[st]);ko.reactor(this.ltm,(function(){var n=t._options.mode(),i=n===l.Off,r=t._options.hideMultiSelectCheckbox,u=n===l.Single||n===l.AlwaysSingle,f=MsPortalFx.find(t._widget.options.extensions,(function(n){return n.getName()==="azc-grid-activateableRow"})),e=!i&&!r&&!(u&&f);t._showSelectionExperience(e)}));this._showSelectionExperience()&&(f.prepend("tr",d),s.prepend("tr",ct),h.prepend("colgroup",ht),e&&(r.prepend("tr",d),u.prepend("tr",d)));e&&(r.addAttribute("tr",i,[b,k]),u.addAttribute("tr",i,[b,k]));this._selectionCellFormatter=o.Formatters.svgIconLookup({"true":{svg:ft.Check({palette:99}),height:it,width:it}});ko.reactor(this.ltm,(function(){var n,i,r;t._canSelectAll()&&(i=!0,t._widget._getAllRowMetadata().forEach((function(t){if(!t.disabled()){var r=t.selected();n=n||r;i=i&&r}})),r=t._selectAllCheckbox,i&&n?r.value(1):n?r.value(2):r.value(0))}))},t.prototype.getDefaultRowMetadataProperties=function(){return{selected:ko.observable(!1)}},t.prototype.afterAttachEvents=function(){var t=this,n=this;this.ltm.registerForDispose(this._widget.element.setEvents(["click.azcGrid",tt,function(t){nt.getSelection().toString().trim()||($.contains(n._widget.element[0],this)&&n._onClick(this,t),t.stopPropagation())},],["click.selectionCell",et,function(t){var r=$(this).closest(v)[0],u=n._widget.getPlugin(i.FocusableRowExtension.Name);f.setCtrlOrCommandModifier(t);n._changeSelection(1,r,t,n._multiselect());u._focusRow(r,y(r));t.stopPropagation()},],["keydown.azcGrid",function(t){var r=$(t.target),s=r[0],d=y(s),u=d&&d.selected,h,b,tt=n._widget._itemsPerKeyboardPage(),c=f.getModifierKeys(t),k=f.isCtrlOrCommandOnly(t),a=!0,p,e,o;if(n._options.mode()!==l.Off&&!i.FocusableRowExtension.isEditableControl(r)){switch(t.which){case 32:b=nt.document.activeElement;(c===0||k&&r.is("tr[data-grid-selectable]")&&(t.target===b||$.contains(r[0],b)))&&(p=y(r[0]),p&&p.selected&&p.selected()&&f.setCtrlOrCommandModifier(t),n._changeSelection(2,r[0],t));break;case 65:k?n._canSelectAll()&&n.selectAllRows():a=!1;break;case 68:k?n.unselectAllRows():a=!1;break;case 38:case 40:n._multiselect()&&c===4&&(e=void 0,e=t.which===38?r.prevAll(v)[0]:r.nextAll(v)[0],u&&!u()&&n._changeSelection(3,s,t,!1,!0),w(e)||g(e)&&n._changeSelection(3,e,t,!1,!0));break;case 33:case 34:n._multiselect()&&c===4&&(o=void 0,o=t.which===33?r.prevAll(v):r.nextAll(v),h=o.length<tt-1?o:o.slice(0,tt-1),u&&!u()&&n._changeSelection(3,s,t,!1,!0),h.each((function(i,r){g(r)&&n._changeSelection(3,r,t,!1,!0)})));break;case 36:case 35:n._multiselect()&&c===4&&(h=t.which===36?r.prevAll(v):r.nextAll(v),n.unselectAllRows(),u&&!u()&&n._changeSelection(3,s,t,!1,!0),h.each((function(i,r){g(r)&&n._changeSelection(3,r,t,!1,!0)})));break;default:a=!1}a&&(t.stopPropagation(),t.preventDefault())}},]));this._selectAllCheckbox.value.subscribe(this._widget.ltm,(function(n){switch(n){case 1:t.selectAllRows();break;case 0:t.unselectAllRows()}}))},t.prototype.getOrder=function(){return 20},t.prototype.getDependencies=function(){return[new i.FocusableRowExtension]},t.prototype.getName=function(){return t.Name},t.prototype.getAdditionalColumns=function(){var n=0;return this._showSelectionExperience()&&(n+=1),n},t.prototype._changeSelection=function(n,t,r,e,o){var g;e===void 0&&(e=!1);o===void 0&&(o=!1);var w=this.options.mode(),a,nt=this.options.disableRequireSingleModeAssistKey?this.options.disableRequireSingleModeAssistKey.peek():!1,tt=this._widget.getPlugin(i.FocusableRowExtension.Name),d=f.isCtrlOrCommand(r);if(!this._widget.options.extensionTrigger("shouldNotChangeSelection",t,r).some((function(n){return!!n}))){switch(w){case l.Off:return;case l.Single:case l.AlwaysSingle:a=!1;break;case l.MultipleAdd:a=!0;break;case l.MultipleReplace:a=d||r.shiftKey||r.which===32;break;default:throw new Error("Unknown selection mode: "+w+".");}e&&(a=!0);var c=y(t),s=null,h=[],it=c.selected&&c.selected(),b,k=-1,v;if(a)it?h=[c]:s=c;else{for(h=this.getSelectedRows(),v=h.length-1;v>=0;v--)g=h[v],g!==c||(k=v);k<0?s=c:w===l.Single&&(nt||d||r.shiftKey)||(w===l.Single?(h.splice(k,1),s=c):h.splice(k,1))}(s||h.length>0)&&(b={selected:s,unselected:h,_reason:n},this._widget.trigger("beforeRowSelect",u.cloneEvent(r,"beforeRowSelect"),b),h.forEach((function(n){n.selected(!1)})),s&&s.selected&&(s.selected(!0),o&&tt.focusRowByRowMetadata(s)),this._widget.trigger(p.RowSelect,u.cloneEvent(r,p.RowSelect),b),this._widget.options.events("select",b))}},t.prototype.previous=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.previous(this.getSelectedRows()[0]);else throw new Error("Previous selectable cursor method will work only when enableSelectableCursor option is set to true.");return Q()},t.prototype.next=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.next(this.getSelectedRows()[0]);else throw new Error("Next selectable cursor method will work only when enableSelectableCursor option is set to true.");return Q()},t.prototype._updateSelectableCursor=function(){var r=this,n,t;this._widget&&(n=this._widget.getPlugin(i.FocusableRowExtension.Name),this._options.enableSelectableCursor()?(n.options.focusableCursorEnabled=this._options.enableSelectableCursor,n.options.focusableCursorOptions={hasPreviousFocusRow:this.options.hasPreviousSelectableItem||ko.observable(!1),hasNextFocusRow:this.options.hasNextSelectableItem||ko.observable(!1)},this._rowFocusLifetime||(t=this._rowFocusLifetime=this.ltm.createChildLifetime(),t.registerForDispose(this._widget.element.setEvents(["rowFocus.azcGrid",function(n,t){var i=r.getSelectedRows();i&&i.length>0&&($(t.target[0]).click(),n.stopPropagation())}])))):(this._options.hasPreviousSelectableItem(!1),this._options.hasNextSelectableItem(!1),n.options.focusableCursorEnabled(!1),n.options.focusableCursorOptions.hasPreviousFocusRow(!1),n.options.focusableCursorOptions.hasNextFocusRow(!1),this._rowFocusLifetime&&this._rowFocusLifetime.dispose()))},t.prototype._onClick=function(n,t){var i={item:n,rowMetadata:y(n),clientX:t.clientX,clientY:t.clientY};this._widget.trigger(p.RowClick,u.cloneEvent(t,p.RowClick),i,t.target);this._widget.options.events(p.RowClick,i);this._changeSelection(4,n,t)},t.prototype._selectionCellFormat=function(n){var t;return this._showSelectionExperience()&&(t=this._selectionCellFormatter(n.selected())),t},t.prototype.computeLeftMarginWidth=function(){return this._showSelectionExperience()?26:0},t.Name=a,t})(r.Extension);t.SelectableRowExtension=rt}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css",["module"],(function(n){"use strict";return{css:'.azc-grid-activateableRow tr.azc-grid-row:not([aria-disabled="true"]) td[data-activatable="true"],.azc-grid-activateableRow .azc-grid-activateonselected tr.azc-grid-row:not([aria-disabled="true"]),.azc-grid-link{cursor:pointer}',moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Base/Base.KeyboardHelper","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css"],(function(n,t,i,r,u,f,e,o){"use strict";var k;Object.defineProperty(t,"__esModule",{value:!0});t.SelectableRowActivateExtension=t.windowOpen=void 0;e.injectCss(o);var v=MsPortalFx,h=v.isNullOrUndefined,s=i.RowSelectionMode,y="keypress.",c="azcActivation",p="azc-grid-virtualFocus",l="tbody tr[data-grid-activateable=true]",w=l+":not([aria-disabled=true])",a=w+" [data-activatable=true]",b=w+", "+a,d="tbody tr[data-grid-activateable=true]:not([aria-disabled=true])",g='keyedCss: { grid1SelectableRowActivated: { "fxs-portal-selected fxs-portal-activated": activated() }}',nt='keyedCss:{ grid1SelectableRowActivateTable: { "azc-grid-activateonselected": $ctl.getPlugin("azc-grid-activateableRow")._activateOnSelected }}',tt='attr: { "data-grid-activateable": "true", "data-grid-row-activated": activated() ? "true" : "false" }',it='keyedCss: { grid1SelectableRowActivatedBodyRow: { "azc-grid-link": !$disabled() && link() && link().uri }}',rt='attr: { "data-activatable": activatable(), "data-grid-cell-activated": $parent.activated() === $data.itemKey ? "true" : "false" }',ut=v.disposeDisposable,ft=function(n,t){window.open(n,t)};t.windowOpen=ft;k=(function(n){function u(t){var i=n.call(this)||this;return i._disposables=[],i._options=t=t||{},i._activatedColumnKey=t.activatedColumnKey||ko.observable(),i._primaryActivateColumnKey=t.primaryActivateColumnKey||ko.observable(),i._activateOnSelected=t.activateOnSelected||ko.observable(!1),i._activatedRow=null,i._selfActivation=!1,i}return __extends(u,n),Object.defineProperty(u.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),u.prototype.getActivatedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return!h(n.activated.peek())}))},u.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("bodyRowsCore"),t="data-bind",f=[tt,it,g,],i,r;u.addAttribute("tr",t,f);i=n.getHtmlTemplate("bodyCell");i.addAttribute("td",t,[rt]);r=n.getHtmlTemplate("table");r.addAttribute("table",t,[nt])},u.prototype.getDefaultRowMetadataProperties=function(){return{activated:ko.observable(null),activatedInfo:ko.observable(null),link:ko.observable(null),useDefaultActivation:ko.observable(!0)}},u.prototype.getDefaultColumnProperties=function(){return{activatable:ko.observable(!!this.options.activateRow)}},u.prototype.afterAttachEvents=function(){var t=this,n=this;this._disposables.push(this._widget.element.setEvents(["click.azcActivationCell",a,function(t){window.getSelection().toString().trim()||n._handleActivationKeyPressOrClick(t,this)}],[y+"azcActivationRow",d,function(t){n._handleActivationKeyPressOrClick(t,this)}],[y+"azcActivationCell",a,function(t){n._handleActivationKeyPressOrClick(t,this);t.stopPropagation()}],["rowSelect."+c,function(t,i){n._onRowSelect(t,i)}],["focus."+c,b,function(n){var t=$(n.currentTarget);t.closest(l).addClass(p)}],["blur."+c,b,function(n){var t=$(n.currentTarget);t.closest(l).removeClass(p)}],["beforeRowSelect."+c,function(n,i){t._onBeforeRowSelect(n,i)}]))},u.prototype.afterCreate=function(){var n=this,t=this._widget.ltm,r=this._widget.options;this._selectableRowExtension=this._widget.getPlugin(i.SelectableRowExtension.Name);this._widget._getAllRowMetadata().filter((function(n){return!h(n.activated.peek())&&n.selected.peek()})).forEach((function(n){n.activated(null)}));ko.computed(t,(function(){var t=r.columns();n._firstColumnKey=t&&t.length>0?t[0].itemKey:null}));r.items.map(t,(function(t,i){var r=n._widget.getRowMetadata(i),u=!1;r.selected.subscribe(t,(function(t){var i=n._activateOnSelected();if(t&&i)n._activateRow(r);else if(i&&!u)try{u=!0;r.activated(null)}finally{u=!1}}));r.activated.subscribe(t,(function(t){var i=!h(t);if(i){if(!u&&!n._selfActivation)try{u=!0;n._activateOnSelected()&&r.selected(!0);n._activatedColumnKey.peek()!==t&&n._activatedColumnKey(t)}finally{u=!1}n._activatedRow=r}}))}));ko.computed(t,(function(){n._widget.element.toggleClass("azc-grid-selectionActivates",n._activateOnSelected())}));this._widget._getAllRowMetadata().forEach((function(t){t.activated()&&(n._activatedRow=t,n._activateOnSelected()&&t.selected(!0))}))},u.prototype.getOrder=function(){return 40},u.prototype.getDependencies=function(){return[new i.SelectableRowExtension(this.options)]},u.prototype.beforeDestroy=function(){ut(this._disposables);this._disposables=[]},u.prototype.getName=function(){return u.Name},u.prototype.shouldNotAllowSelectAll=function(){return this._activateOnSelected()},u.prototype.shouldNotChangeSelection=function(n,t){var r=this.options,i=r.mode?r.mode():s.Off,h=i===s.MultipleAdd||i===s.MultipleReplace,o=f.isCtrlOrCommandOnly(t),u,e;if(!!r.activateRow&&h&&!r.hideMultiSelectCheckbox&&t.type==="click"&&$(t.target).closest("td").attr("data-activatable")==="true")return!0;if(i===s.MultipleReplace){if($(n).attr("aria-selected")==="true"&&!(t.shiftKey||o)&&(u=$(t.target),e=u.attr("data-activatable")==="true"?u:u.closest("[data-activatable=true]"),e.length>0&&$.contains(n,e[0])))return!0}else if(i===s.Single||i===s.AlwaysSingle)return o||t.shiftKey;return!1},u.prototype.previous=function(){return this._selectableRowExtension.previous()},u.prototype.next=function(){return this._selectableRowExtension.next()},u.prototype._changeActivation=function(n,t){var e=this.options,i=ko.dataFor(n),l=$(t.currentTarget),a=l.closest(".azc-grid-cell"),w=$(n).find(".azc-grid-cell"),b=a[0]?a:w,k=ko.dataFor(b[0]),v=i.selected.peek(),d=i.activated.peek(),y=!1,u=k.itemKey,o,h,c,p;if(v&&(f.isCtrlOrCommand(t)||t.shiftKey)&&d===u&&(y=!0),e.activateRow||v||t.type!=="keypress"||(o=r.cloneEvent(t,"keydown"),o.which=32,$.extend(o,{which:32,target:n,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey}),$(n).trigger(o),t.stopPropagation(),t.preventDefault()),y||this._activatedColumnKey(u),h=this._activatedRow,h!==null&&h!==i&&h.activated(null),i!==null)if(e.activateRow)i.activated()||e.activateRow(i);else if(c=i.useDefaultActivation,!c||c())try{this._selfActivation=!0;p=e.mode()!==s.MultipleAdd||!(i.activated()!==u&&i.selected());this._activatedColumnKey(u);i.activated(u);p||t.stopPropagation()}finally{this._selfActivation=!1;l.trigger("fxensurebladevisible",{})}},u.prototype._handleActivationKeyPressOrClick=function(n,t){var r=f.isCtrlOrCommand(n),i;n.type==="keypress"&&(n.which!==13||r)&&(n.which!==10||!r)&&(n.which!==32||this.options.activateRow)||(i=$(t).closest("tr[data-grid-activateable=true]"),i.length>0&&this._changeActivation(i[0],n))},u.prototype._onBeforeRowSelect=function(n,t){if(this._activateOnSelected()){var i=t&&t.selected,r=i&&i.selected;r&&r()&&this._activateRow(i)}},u.prototype._onRowSelect=function(n,i){var u=i.selected,r,f;u&&(r=u.link&&u.link(),r&&(f=r.uri,f&&(t.windowOpen(f,r.target),this._selectableRowExtension.unselectAllRows())))},u.prototype._activateRow=function(n){this._lastActivatedRow&&this._lastActivatedRow.activated(null);this._lastActivatedRow=n;var t=this._activatedColumnKey();h(t)&&(t=this._primaryActivateColumnKey()||this._firstColumnKey);h(t)||n.activated()===t||n.useDefaultActivation&&!n.useDefaultActivation()||n.activated(t)},u.Name="azc-grid-activateableRow",u})(u.Extension);t.SelectableRowActivateExtension=k}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate","MsPortalImpl/Base/Base.Selectable2.ClickContext","MsPortalImpl/Base/Base.KeyboardHelper"],(function(n,t,i,r,u,f,e,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SelectableRowExtension=void 0;var a=MsPortalFx.ViewModels,v=a.Controls.Lists.Grid,h=f.RowSelectionMode,c=MsPortalFx.isNullOrUndefined,l=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._lifetime=new FxImpl.TriggerableLifetimeManager,t}return __extends(t,n),t.prototype.beforeDestroy=function(){this._lifetime.dispose()},t.prototype.getExtension=function(n){var c=this,r=n,i=ko.observable(h.Off),t=r&&r.selectableRow,u,f,o,s;if(t){o=t.selectionMode||0;switch(o){case 1:i(h.Single);break;case 2:i(h.MultipleReplace);break;case 3:i(h.MultipleAdd);break;default:i(h.Off)}this._activatedColumnKey=t.activatedColumnKey;this._primaryActivateColumnKey=t.primaryActivateColumnKey;this._activateOnSelected=t.activateOnSelected;u=t.disableRequireSingleModeAssistKey;f=t.enableSelectableCursor||ko.observable(!1)}return this._activatedColumnKey||(this._activatedColumnKey=ko.observable()),this._primaryActivateColumnKey||(this._primaryActivateColumnKey=ko.observable()),this._activateOnSelected||(this._activateOnSelected=ko.observable(!1)),r.onRowClicked&&(s=function(n){var t=c._selectable2ClickHandler;if(t)t.onClick({item:n.item,metadata:n})}),new e.SelectableRowActivateExtension({mode:i,disableSelectAll:t.disableSelectAll,activatedColumnKey:this._activatedColumnKey,primaryActivateColumnKey:this._primaryActivateColumnKey,activateOnSelected:this._activateOnSelected,disableRequireSingleModeAssistKey:u,enableSelectableCursor:f,hasNextSelectableItem:ko.observable(!1),hasPreviousSelectableItem:ko.observable(!1),activateRow:s})},t.prototype.getActivatedColumnKey=function(){return this._activatedColumnKey.peek()||this._primaryActivateColumnKey.peek()},t.prototype.initializeExtension=function(){var l=this,n=this._widget,r=n.options.extensionsOptions,i=this._lifetime,u,e,h=r.onRowClicked,c,t;h&&(c=this._selectable2ClickHandler=o.getListSelectableWithClickHandler(n._diContainer,n.options.selectableData,$(n.element),h),c.activationState.subscribe(i,(function(n){var i=n.previous&&n.previous.metadata&&n.previous.metadata.activated,t,r;i&&i(null);t=n.current&&n.current.metadata;r=t&&t.activated;t&&(!t.useDefaultActivation||t.useDefaultActivation())&&r(l.getActivatedColumnKey())})));t=n._instance.element;t.on(f.EventTypes.RowSelect,u=function(n,t){n.stopPropagation();var i=r.selectableRow.rowSelect;i&&i(n,t)});i.registerForDispose((function(){t.off(f.EventTypes.RowSelect,u)}));t.on(f.EventTypes.RowClick,e=function(t,i){var f=$(t.target),e=i.rowMetadata,r=f.closest("a"),o=r&&$(i.item).find(r).length>0,u;if(!o){var h=n.options.extensionsOptions,c=h.selectableRow,l=c.selectionMode===1;l&&(s.isCtrlOrCommandOnly(t)||t.shiftKey)&&(t.stopPropagation(),t.preventDefault(),u=n.options.selectableData,$(t.target).trigger("fxopeninnewtab",{selectableSet:u,item:e.item}))}});i.registerForDispose((function(){t.off(f.EventTypes.RowClick,e)}))},t.prototype.getName=function(){return"Selectable"},t.prototype.getOrder=function(){return 1},t.prototype.getDependencies=function(){return[new r.FocusableRowExtension]},t.prototype.registerSubscriptionsToConnectMetadataProperties=function(n,t){var r=this,i=n.createChildLifetime();return this._widget.options.selectableData.selectableItems.subscribe(i,(function(){r._widget._connectMetadataAndDisposeSubscriptions(i,t)})),i},t.prototype.disallowConnectRowMetadataProperties=function(n,t){var r=-1,u=this._widget.options,i;return(u.selectableData.selectableItems().some((function(n,i){return n.data===t.item?(r=i,!0):!1})),r>=0)?(i=-1,u.items().some((function(t,r){return t===n?(i=r,!0):!1})),i===-1)?!1:r!==i:!0},t.prototype.connectRowMetadataProperties=function(n,t,i){function u(n,t){f._twoWayBinding(e,n,t)}var l=this,f=this._widget,e=f.ltm.createChildLifetime(),o=MsPortalFx.find(f.options.selectableData.selectableItems(),(function(t){return t.data===n})),s=t,r=i,h;return r.link&&s.link&&u(r.link,s.link),u(o.isSelected,t.selected),u(t.selected,r.selected),h=ko.computed(e,{read:function(){var n=r.activated();return!(n===null||n===undefined)},write:function(n){var t,i;n?r.activated()||(t=l.getActivatedColumnKey(),c(t)&&(i=MsPortalFx.find(f.options.columns(),(function(n){return n.activatable&&n.activatable()})),t=c(i)?null:i.itemKey),c(t)||r.activated(t)):r.activated(null)}}),u(t.activated,r.activated),u(o.isActivated,h),u(t.disabled,r.disabled),u(t.useDefaultActivation,r.useDefaultActivation),e},t})(u.GridExtension);t.SelectableRowExtension=l;i.registerPlugin(v.Extensions.SelectableRow,l)}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow",["require","exports","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1"],(function(n,t,i,r){"use strict";var u;return (function(n){var t=MsPortalFx.disposeDisposable,u=(function(n){function r(t){var i=n.call(this)||this;return i._disposables=[],t=i._options=t||{},t.disabled===undefined&&(t.disabled=ko.observable(!1)),i}return __extends(r,n),Object.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),r.prototype.afterAttachEvents=function(){var r=this._options,t=this._widget,n="rowRightClick";this._disposables.push(t.element.setEvents(["fxcontextmenurequest.azcGrid","tbody[class!=azc-grid-empty] tr",function(u){var e,f;r.disabled()||(f=ko.dataFor(this),!f||f.disabled&&f.disabled.peek()||(e={rowMetadata:f,clientX:u.clientX,clientY:u.clientY},t.trigger(n,i.cloneEvent(u,n),e,u.target),t.options.events(n,e)))}],["keydown.azcGrid",function(r){switch(r.which){case 121:if(r.shiftKey){var u=$(r.target).closest("tr")[0],f=$(u).offset(),e={rowMetadata:ko.dataFor(u),clientX:f.left+u.offsetWidth-232,clientY:f.top+10};t.trigger(n,i.cloneEvent(r,n),e,r.target);t.options.events(n,e);r.preventDefault();r.stopPropagation()}}}]))},r.prototype.beforeDestroy=function(){t(this._disposables);this._disposables=[]},r.prototype.getName=function(){return r.Name},r.Name="azc-grid-rightClickableRow",r})(r.Extension);n.RightClickableRowExtension=u})(u||(u={})),u}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var o=MsPortalFx.ViewModels,s=o.Controls,h=s.Lists.Grid,t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.beforeDestroy=function(){this._rightClickHandler&&(this._widget._instance.element.off("rowRightClick",this._rightClickHandler),this._rightClickHandler=null)},t.prototype.getExtension=function(n){var t=n;return this._commands=t.controlCommands,new f.RightClickableRowExtension},t.prototype.initializeExtension=function(){var n=this;this._widget._instance.element.on("rowRightClick",this._rightClickHandler=function(t,i){return n._triggerRightClickEvent(t,i)})},t.prototype.getName=function(){return"RightClickableRow"},t.prototype.getOrder=function(){return 1},t.prototype.getDependencies=function(){return[new r.SelectableRowExtension]},t.prototype._triggerRightClickEvent=function(n,t){var u=this._widget.options,f=u.selectableData,i=t.rowMetadata,r;return!!i&&!!i.item?(this._updateSelectionFollowingRightClick(i),i.disabled()||this._widget._extensionTrigger("shouldHideContextMenu",i).some((function(n){return!!n})))?!1:(r=$.Event("rightclick",{target:n.target,clientX:t.clientX,clientY:t.clientY}),$(n.target).trigger(r,this._getCommandRightClickEventArgs(f,i.item)),n.preventDefault(),n.stopPropagation(),!0):!1},t.prototype._updateSelectionFollowingRightClick=function(n){var i;if(!n.selected()){var t=this._widget,u=t.options,r=u.selectableData.selectableItems();r.forEach((function(n){n.isSelected(!1)}));i=MsPortalFx.find(r,(function(i){return!t.getRowMetadata(i.data).disabled()&&i.data===n.item}));i&&(i.isSelected(!0),t._instance.getPlugin(e.FocusableRowExtension.Name).focusRowByRowMetadata(n))}},t.prototype._getCommandRightClickEventArgs=function(n,t){var f=this._widget,a=n.selectableItems().filter((function(n){return n.isSelected()})),h=a.map((function(n){return n.data})),e=h[0],c=f.getRowMetadata(t),i,r,l,o,s,u;return e&&(i=ko.unwrap(e.commandGroup),r=ko.unwrap(e.commandGroupOwner),l=h.some((function(n){return ko.unwrap(n.commandGroup)!==i||ko.unwrap(n.commandGroupOwner)!==r})),l&&(i=null,r=null)),o={selectableSet:n,deleteRowCommandTitle:null,markForDelete:null},f._extensionTrigger("enableRowDelete",c).some((function(n){return!!n}))&&f._extensionTrigger("getListDataForRightClick",c).forEach((function(n){$.extend(o,n)})),s={entityType:1,commandGroup:i,commandGroupOwner:r,viewModel:t,listData:o},u=this._commands&&this._commands(),u&&u.length&&$.extend(s,{controlCommands:u}),s},t})(u.GridExtension);n.RightClickableRowExtension=t;i.registerPlugin(h.Extensions.RightClickableRow,t)})(o||(o={})),o}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css",["module"],(function(n){"use strict";return{css:'.azc-grid-contextMenuShortcut .azc-grid-contextMenuShortcut-col{width:32px}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled="true"]) td.azc-grid-contextMenuShortcut-cell{padding:0 4px 0 0;text-align:center}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled="true"]) td.azc-grid-contextMenuShortcut-cell a{display:inline-block;box-sizing:border-box;height:20px;width:20px;padding-top:2px}.azc-grid-contextMenuShortcut table tbody .azc-row-disabled .azc-grid-contextMenuShortcut-cell a{display:none}.fxs-mode-light .azc-fabric .azc-grid-contextMenuShortcut-cell .azc-grid-ellipsis-svg{fill:#605e5c}',moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut",["require","exports","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css"],(function(n,t,i,r,u,f,e,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ContextMenuShortcutExtension=void 0;e.injectCss(o);var s="azc-grid-contextMenuShortcut-cell",h="tbody tr[data-grid-selectable=true]:not([aria-disabled=true]) .azc-grid-contextMenuShortcut-cell a",a='attr: { "data-grid-contextmenushortcut": true }',v="<col class='azc-grid-contextMenuShortcut-col' />",y="<th aria-hidden='true' class='azc-grid-contextMenuShortcut-header azc-br-muted'><\/th>",c="azcGridContextMenuShortcut",p="click."+c,w="keydown."+c,l="<td role='gridcell' class='"+s+" azc-br-muted'>"+("<a class='azc-grid-ellipsis-svg msportalfx-inherit-color fxs-portal-svg' role='button' title='"+i.ContextMenu.ariaLabel+"' aria-label='"+i.ContextMenu.ariaLabel+"' data-bind='attr: { tabindex: focusIndex}'>")+'<svg xmlns="http://www.w3.org/2000/svg" focusable="false" height="16" width="16" viewBox="0 0 16 16"><circle cx="14.4" cy="7.6" r="1.6"/><circle cx="8" cy="7.6" r="1.6"/><circle cx="1.6" cy="7.6" r="1.6"/><\/svg><\/a><\/td>',b=(function(n){function t(t){var i=n.call(this)||this;return i._options=t||{},i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.afterSetTemplates=function(n){var i=n.getHtmlTemplate("bodyRowsCore"),r=n.getHtmlTemplate("header"),u=n.getHtmlTemplate("colgroup"),t=n.getHtmlTemplate("editableBodyRowsCorePerColumn");i.addAttribute("tr","data-bind",[a]).append("tr",l);r.append("tr",y);u.append("colgroup",v);MsPortalFx.isNullOrUndefined(t)||t.append("tr",l)},t.prototype.afterAttachEvents=function(){var n=this._widget,t=function(t){var r=$(t.target),f=r.offset(),e=r.closest("tr")[0],o={rowMetadata:ko.dataFor(e),clientX:f.left,clientY:f.top},i="rowContextMenuShortcutClick";n.trigger(i,u.cloneEvent(t,i),o,e);n.options.events(i,o);t.preventDefault()},i=function(n){(n.which===32||n.which===13)&&(t(n),n.stopPropagation(),n.preventDefault())};this._widget.ltm.registerForDispose([this._widget.element.setEvents([p,h,t,],[w,h,i,]),])},t.prototype.getOrder=function(){return 40},t.prototype.getDependencies=function(){return[new r.SelectableRowExtension]},t.prototype.beforeDestroy=function(){this._detachEvents&&this._detachEvents()},t.prototype.getName=function(){return t.Name},t.prototype.shouldNotChangeSelection=function(n,t){var i=$(t.target),r=i.closest("tr").attr("aria-selected")==="true",u=!!i.closest("."+s).length;return r&&u?!0:!1},t.prototype.getAdditionalColumns=function(){return 1},t.prototype.computeRightMarginWidth=function(){return 32},t.Name="azc-grid-contextMenuShortcut",t})(f.Extension);t.ContextMenuShortcutExtension=b}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var e=MsPortalFx.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.beforeDestroy=function(){this._onClick&&(this._widget._instance.element.off("rowContextMenuShortcutClick",this._onClick),this._onClick=null)},t.prototype.getExtension=function(){return new f.ContextMenuShortcutExtension},t.prototype.initializeExtension=function(){var n=this;this._widget._instance.element.on("rowContextMenuShortcutClick",this._onClick=function(t,i){var r=n._widget.getPlugin("RightClickableRow");return r?r._triggerRightClickEvent(t,i):!1})},t.prototype.getName=function(){return"ContextMenuShortcut"},t.prototype.getOrder=function(){return 1},t.prototype.getDependencies=function(){return[new r.RightClickableRowExtension]},t})(u.GridExtension);n.ContextMenuShortcutExtension=t;i.registerPlugin(e.Extensions.ContextMenuShortcut,t)})(e||(e={})),e}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css",["module"],(function(n){"use strict";return{css:".azc-grid-editableRow .azc-grid-editableRow-edited td:first-child{box-shadow:inset 3px 0 0 0 #c84fd7}.azc-grid-editableRow .azc-grid-editableRow-deleted{display:none}.azc-grid-editableRow .azc-grid-cell-hidden{display:none}.azc-grid-editableRow .azc-placeholdercell{display:none}.azc-grid-editableRow tr.azc-grid-editing .azc-placeholdercell{display:table-cell}.azc-grid-editableRow tr.azc-grid-editing .azc-grid-cell-editing+.azc-placeholdercell{display:none}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow","Viva.Controls/Util/Viva.Util","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";function lt(n){return $(n).parent().hasClass(w)?0:1}function rt(n){var t=$(n).parent(),i;return i=t.hasClass(w)?t.siblings(d).find(p).first():t.siblings(d).find(p).last(),i.find("td.azc-grid-cell")}function ut(n){var t=$(n);return!t.find(".azc-validatableControl-invalid").length&&!t.find(".azc-validatableControl-pending").length}function ft(n){var t=$(n);return!!t.find(".azc-validatableControl-pending").length}function et(n,t){ut(n)?t.resolve(!0):ft(n)?setTimeout((function(){et(n,t)}),50):t.resolve(!1)}function at(n){var t=Q.defer();return et(n,t),t.promise}function vt(n){return n.rowMetadata&&n.rowMetadata.editState()!==0}function ot(n){var t=$(n),i=t.find("input, select, textarea"),r=i.serializeArray(),u=ko.dataFor(n),f=!t.parent("tbody."+y).length;return{rowMetadata:u,data:r,existingItem:f}}function yt(n){var t=Q.delay(it);return (function i(){return Q.all([e.waitForBindings(n),Q.delay(it/10)]).then((function(){if(t.isPending())return i()}))})()}var st;Object.defineProperty(t,"__esModule",{value:!0});t.EditableRowExtension=void 0;h.injectCss(c);var v=MsPortalFx.isNullOrUndefined,b="azc-grid-selectableRow",p=".azc-grid-row",k=p+":not([aria-disabled=true])",d="tbody.azc-grid-groupdata",a="azc-grid-editableRow",l="azc-grid-editableRow-row",ht="."+l,y="azc-grid-editableRow-addSection",ct="."+y,g=ct+" "+ht,w="azc-grid-editableRow-placement-top",nt="azc-br-top-hovered",tt="azc-br-bottom-hovered",it=200;st=(function(n){function t(t){var r=n.call(this)||this;return r._isDisposed=!1,r._options=t=t||{},t.placement=t.placement||0,r._createdItems=ko.observableArray(),r._createdItems.subscribeArrayDeletes(r.ltm,(function(n){r._widget.getPlugin(i.FocusableRowExtension.Name).handleRemovedRow(n)})),r._orderedCreatedItems=ko.computed(r.ltm,(function(){var i=r._createdItems(),n,t,u;return i.length<=1?i:(n=i.slice(),t=MsPortalFx.findIndex(n,(function(n){var t=r._widget.getRowMetadata(n);return t&&t.emptyRow()})),t!==-1&&t!==n.length-1&&(u=n.splice(t,1),n.push(u[0])),r.options.placement===1&&n.reverse(),n)})),r}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"createdItems",{get:function(){return this._createdItems},enumerable:!1,configurable:!0}),t.prototype.afterSetTemplates=function(n){var r="<tbody role='rowgroup' class='"+y+"' data-bind='css: { \""+w+'": $ctl.getPlugin("'+a+"\").options.placement === 1 }'>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+a+'")._orderedCreatedItems } --><!-- /ko -->')+"<\/tbody>",e='css: { "azc-grid-editableRow-edited": $ctl.getPlugin("'+a+'")._isRowEdited($data), "azc-grid-editableRow-deleted": $ctl.getPlugin("'+a+'")._isRowDeleted($data), "fxs-suppresschildvalidation": $data.emptyRow }',o="<td role='gridcell' aria-readonly='false' data-bind='trustedHtml: $ctl.getPlugin(\""+a+'")._editableCellFormat($parent, $data), keyedCss: { grid1EditableRowEditableBodyCellPerCol: ($parent.editing() ? "azc-grid-cell" : "azc-grid-cell-hidden") + " azc-br-muted azc-grid-cell-editing " + cssClass}, attr: { "aria-describedby": columnId, "aria-colindex" : $index() + 1 }\'><\/td>',u='<td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, keyedCss:{ grid1EditableRowCell: (!$parent.editing() ? "azc-grid-cell" : "azc-grid-cell-hidden") + " azc-br-muted " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : "")}, attr: { "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1 }\'><\/td>',f,t,i;n.setTemplate("editablePlaceholderBodyCell",u);f="<!-- ko if: $parent._rendered -->"+o+'<!-- /ko --><td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, keyedCss:{ grid1EditableRowPlaceHoder: " azc-placeholdercell azc-br-muted " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : "")}, attr: { "aria-describedby": columnId, "aria-label": $ctl._getCellAriaLabel($parent, $data) && $parent.cellAriaLabels[itemKey](), "aria-colindex" : $index() + 1 }\'><\/td>'+u;n.setTemplate("bodyCell",f);t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",[e]);t.addAttribute("tr","data-bind",["css: {'azc-grid-editing': editing, "+l+": editing }"]);i=n.getTemplate("body");n.setTemplate("body",this.options.placement===1?r+i:i+r)},t.prototype.getDefaultRowMetadataProperties=function(n){var f=this,r=ko.observable(!1),u=ko.observable(!1),t;return r.fxAwaitAndRun(this._widget.ltm).then(u),t={editState:ko.observable(0),editing:r,validationResult:ko.observable(0),emptyRow:ko.observable(!1),_addedOnce:!1,_rendered:u},t.editState.subscribe(this.ltm,(function(t){t===3&&f._widget.getPlugin(i.FocusableRowExtension.Name).handleRemovedRow(n.item)})),t},t.prototype.modifyRowNumber=function(){var n=this,t=this._widget._getAllRowMetadata().filter((function(n){return n.editState()===3})).length,i=this.createdItems().filter((function(t){return!n._widget.getRowMetadata(t).emptyRow()})).length;return i-t},t.prototype.afterAttachEvents=function(){function w(h){if(!c&&!r.$disabled()){var d=this,p=ko.dataFor(d),g=$(d),it=!!g.closest("tbody."+y).length,ut=r.getPlugin(u.SelectableRowExtension.Name),rt=p,l,a=void 0,nt,w,b=h.clientX,k=h.clientY,tt=void 0;if(!p.editing.peek()&&(t.options.allowEditExistingItems&&!it||t.options.allowEditCreatedItems&&it)){(v(b)||v(k))&&(tt=$(h.target).position(),b=tt.left,k=tt.top);a=this;do a=a.previousSibling;while(a!==null&&ko.dataFor(a)!==p.item);if(p.editing(!0),a){do a=a.nextSibling;while(a!==null&&a.nodeName.toLowerCase()!=="tr");a&&(h.target=a,w=a,yt(o[0]).then((function(){if(!t._isDisposed){for(l=document.elementFromPoint(b,k);l;)if(l=f.findContainingControl(l),$.contains(w,l))if(l&&f.executeSetFocusOn(l)){try{i=!0;c=!0;n(w);nt=f.cloneEvent(h,"click");nt.clientX=b;nt.clientY=k;$(document.activeElement).trigger(nt)}finally{i=!1;c=!1}break}else break;else break;n.peek()!==w&&n(w)}})),rt.selected&&(ut._changeSelection(4,w,h),h.stopPropagation(),h.preventDefault()))}else $.contains(d,document.activeElement)||e.waitForBindings(r.element[0]).then((function(){if(!t._isDisposed){for(l=document.elementFromPoint(b,k);l;)if(l=f.findContainingControl(l),$.contains(d,l)){if(l&&f.executeSetFocusOn(l)){try{i=!0;n(g[0])}finally{i=!1}break}}else break;n.peek()!==g[0]&&n(g[0])}}))}else!p.emptyRow()&&p.editing.peek()&&rt.selected&&s.isCtrlOrCommandOnly(h)&&h.type==="click"&&p.editing(!1)}}var n=ko.observable(),i=!1,h=!1,c=!1,t=this,r=this._widget,o=r.element,a=this.ltm,p;a.registerForDispose(o.setEvents(["mouseenter",g,function(){o.hasClass(b)&&rt(this).addClass(lt(this)===0?nt:tt)},],["mouseleave",g,function(){o.hasClass(b)&&rt(this).removeClass(nt+" "+tt)},],["focusout","tr."+l,function(){if(!h){var n=this,i=ko.dataFor(n);i&&i.editing&&i.editing.peek()&&setTimeout((function(){var i=document.activeElement,r=function(){try{h=!0;t._rowAdd(n)}finally{h=!1}};n===i||$.contains(n,i)||(ft(n)?at(n).then((function(n){n&&r()})):r())}),10)}},],["keyup",k,function(n){switch(n.which){case 38:case 40:case 36:case 35:case 33:case 34:case 9:ko.dataFor(this).editing(!0);w.apply(this,[n])}},],["click",k,w,]));n.subscribe(a,(function(n){i||v(n)||f.setFocusToFirstFocusableChild($(n),(function(n){return $(n).attr("data-editable")?n:null}))}));p=function(n){var i=!1,f=$(n.target),e=n.target,r,u;s.isNonWrittenCharacter(n.which)||(n.type==="keydown"||n.type==="keyup"||n.type==="input"?(r=f.data("editablerow-previous"),n.type==="keydown"&&r===undefined?f.data("editablerow-previous",e.value):(n.type==="keyup"||n.type==="input")&&(i=e.value!==(r||""))):i=!0,i&&(u=$(this).closest("tr."+l)[0],u&&t._rowEdit(u,n.type)));n.type==="fxvaluechanged"&&n.stopPropagation()};a.registerForDispose(r.element.setEvents(["keydown keyup change","tr."+l+" input, tr."+l+" select, tr."+l+" textarea",p,],["fxvaluechanged","tr",p,]))},t.prototype.getOrder=function(){return 14},t.prototype.getDependencies=function(){return[new i.FocusableRowExtension]},t.prototype.beforeDestroy=function(){this._isDisposed=!0},t.prototype.shouldRetainRowMetadata=function(n){return this._createdItems().some((function(t){return n.item===t}))},t.prototype.getName=function(){return t.Name},t.prototype.getRowAriaLabelOverride=function(n){return n.emptyRow()?this._options.newRowAriaLabel||o.Grid.newRowAriaLabel:null},t.prototype._rowAdd=function(n){var i=this._widget,r=!0,t=ot(n),u={targets:$(n).find(">td.azc-grid-cell").children(),editableRow:t,preventExitEditing:function(){r=!1}};(t.existingItem||vt(t))&&!v(t.rowMetadata)&&ut(n)&&(t.rowMetadata._addedOnce=!0,i.trigger("rowAdd",null,u),i.options.events("rowAdd",u),r&&t.rowMetadata.editing(!1))},t.prototype._rowEdit=function(n,t){var i={targets:$(n).find(">td.azc-grid-cell").children(),editableRow:ot(n),type:t};i.editableRow.rowMetadata.editState(i.editableRow.existingItem?2:1);this._widget.trigger("rowEdit",null,i);this._widget.options.events("rowEdit",i)},t.prototype._editableRowFormat=function(n){var t=this.options.editableFormatter;return t?t({rowMetadata:n}):""},t.prototype._editableCellFormat=function(n,t){return t.editableFormatter?t.editableFormatter(n.item[t.itemKey],{item:n.item,rowMetadata:n,column:t}):""},t.prototype._isRowEdited=function(n){return n.editState()!==0},t.prototype._isRowDeleted=function(n){return n.editState()===3},t.Name=a,t})(r.Extension);t.EditableRowExtension=st}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Fields/Base/FormValidation","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow","MsPortalImpl.Controls/Fields/TextField"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function o(n,t){return t=ko.unwrap(t),s(t)||n.length<t}function v(n){switch(n){case t.Created:return 1;case t.Deleted:return 3;case t.Updated:return 2;case t.None:default:return 0}}function y(n,t){return n===t||n&&t&&n[h]&&n[h]===t[h]}var p=MsPortalFx.Base,w=p.Diagnostics,t=MsPortalFx.Data.EditState,b=MsPortalFx.ViewModels,c=b.Controls.Lists.Grid,k=c.Format,d=c.HtmlBindingsType,s=MsPortalFx.isNullOrUndefined,g=new w.Log("ImplGrid.EditableRowExtension"),a=e.EditableRowExtension.Name,h,l;n.getVivaEditableRowState=v;h="__gridGuid";l=(function(n){function i(){var t=n!==null&&n.apply(this,arguments)||this;return t._creatingEmptyRow=!1,t}return __extends(i,n),i.prototype.beforeDestroy=function(){var n=this._detach;n&&n()},i.prototype.getExtension=function(n){var i=n,t=i.editableRow||{},r={placement:t.placement,allowEditExistingItems:!!t.allowEditExistingItems,allowEditCreatedItems:!!t.allowEditCreatedItems,newRowAriaLabel:t.newRowAriaLabel};return this._editableExtn=new e.EditableRowExtension(r)},i.prototype.initializeExtension=function(){var n=this,u=this._widget,e=u.ltm,t=u.options,h=u._instance,i=h.getPlugin(a),w=t.extensionsOptions,c=w.editableRow,f=c.maxBufferedRows,r=i.createdItems,v={rowAdd:function(r,u){u.preventExitEditing();n._ensureValidation(u.targets,i,(function(){t.rowAdd&&t.rowAdd(r,u);u.editableRow.rowMetadata.editing(!1)}))},rowEdit:function(u,e){var h=e.editableRow,s=h.rowMetadata,l,a;s.emptyRow(!1);h.existingItem||(l=t.createdItems().some((function(n){return y(n,s.item)})),l||c.addCreated(s.item));n._ensureValidation(null,i);a=c.placement||0;a===0&&o(r(),f)&&n._ensureNewRow(i)}},p=h.element,l;p.on(v);this._detach=function(){n._detach=null;p.off(v)};l=c.validate;l&&l.subscribe(e,(function(){n._ensureValidation(u.element,i)}));ko.utils.arrayPushAll(r,t.createdItems());t.addEmptyRow.subscribeAndRun(e,(function(n){if(n&&o(r(),f)){var t=h.getRowMetadata(n);t.editing(!0);t.emptyRow(!0);r.push(n)}}));t.createdItems.subscribeArrayEdits(e,(function(t){if(t=ko.utils.adjustArrayEdits(t),t.length){var e=r(),c=!1;r.valueWillMutate();t.forEach((function(n){var i=!s(n.moved),r,u,t;n.status==="added"?(r=e.some((function(t){return y(t,n.value)})),(i||!r)&&e.splice(n.index,0,n.value)):n.status==="deleted"&&(u=e.splice(n.index,1)[0],i||(c=!0,t=h.getRowMetadata(u),t.editing(!1),t.editState(0)))}));r.valueHasMutated();c&&(o(e,f)&&n._ensureNewRow(i),n._ensureValidation(u.element,i))}}));ko.isObservable(f)&&f.subscribe(e,(function(t){return n._onMaxBufRowsChange(t)}))},i.prototype.getName=function(){return"EditableRow"},i.prototype.getOrder=function(){return 1},i.prototype.getDependencies=function(){return[new r.FocusableRowExtension]},i.prototype.columnAdded=function(n,t,i){var r=this._widget,u,f=t.editableFormat;u=s(f)?r._getFormatter(k.HtmlBindings,{htmlBindingsType:d.TextBox}):r._getFormatter(f,t.editableFormatOptions||{});i.editableFormatter=u},i.prototype.columnRemoved=function(){},i.prototype.connectRowMetadataProperties=function(n,i,r){var u=this,f=this._widget.ltm.createChildLifetime();return ko.computed(f,(function(){var n=r.editState();ko.ignoreDependencies((function(){var r=v(n);i.editState(r);i.editing()||i.editing(n===t.Created||n===t.Updated);r===3&&u._ensureValidation(u._widget.element,u._widget._instance.getPlugin(e.EditableRowExtension.Name))}))})),f},i.prototype.getAdditionalItems=function(){return this._editableExtn.createdItems()},i.prototype.registerSubscriptionsToConnectMetadataProperties=function(n,t){var r=this,i=n.createChildLifetime();return this._editableExtn.createdItems.subscribe(i,(function(){r._widget._connectMetadataAndDisposeSubscriptions(i,t)})),i},i.prototype.enableRowDelete=function(){var n=this._widget.options.extensionsOptions;return n.editableRow.enableRowDelete!==!1},i.prototype.shouldHideContextMenu=function(n){return n.item===this._getEmptyRowItem()},i.prototype.getListDataForRightClick=function(){var n={},i=this._widget.options.extensionsOptions,t=i.editableRow;return n.deleteRowCommandTitle=t.deleteRowCommandTitle,n.markForDelete=function(n){t.markForDelete(n)},n},i.prototype._ensureValidation=function(n,i,r){var e=this,f=this._widget.options.extensionsOptions;n&&(u.gatherFormFields(n).forEach((function(n){var i=n.viewmodel,r=i.rowMetadata;r.editState&&r.editState()!==t.None&&i.performValidation()!==null&&i.performValidation(!0)})),r&&u.ensureFormFieldValidation(n,!1).then((function(n){if(n){r();var t=f.editableRow;t.placement===1&&o(i.createdItems(),t.maxBufferedRows)&&e._ensureNewRow(i)}})));u.ensureFormFieldValidation(this._widget.element,!1).then((function(n){var t=f.editableRow;t.valid&&t.valid(n)}))},i.prototype._getEmptyRowItem=function(){var n=this;return MsPortalFx.find(this._editableExtn.createdItems(),(function(i){return n._widget.getRowMetadata(i).editState()===t.None}))},i.prototype._ensureNewRow=function(n){var i=this,t;if(!this._creatingEmptyRow){if(t=this._widget.options.extensionsOptions,t.editableRow.enableRowAdd===!1)return;this._emptyNewRowExists(n)||(this._creatingEmptyRow=!0,t.editableRow.create().finally((function(){i._creatingEmptyRow=!1})))}},i.prototype._emptyNewRowExists=function(n){var t=this;return n.createdItems().some((function(n){var i=t._widget._instance.getRowMetadata(n);return i.emptyRow()}))},i.prototype._onMaxBufRowsChange=function(n){var f=this._widget,t=f._instance.getPlugin(a),i=t.createdItems(),r=i.length,u=this._emptyNewRowExists(t);!u&&o(i,n)?this._ensureNewRow(t):u&&!s(n)&&r>n&&t.createdItems.splice(r-1,1)},i})(f.GridExtension);n.EditableRowExtension=l;i.registerPlugin(c.Extensions.EditableRow,l)})(o||(o={})),o}));
define("_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css",["module"],(function(n){"use strict";return{css:".azc-button{align-items:center;justify-content:center;border-width:1px;border-style:solid;box-sizing:border-box;overflow:hidden;min-width:80px;font-size:13px;padding:2px 20px 4px;height:24px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;text-align:center}.azc-button:focus{outline-width:1px}.azc-button img{margin-right:3px}.azc-button svg{height:100%;width:100%}",moduleId:n.id}}));
define("Viva.Controls/Controls/Forms/Viva.Button",["require","exports","Viva.Controls/Controls/Base/Viva.Base","MsPortalImpl/Base/JQueryHelper","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css"],(function(n,t,i,r,u,f,e){"use strict";f.injectCss(e);var o;return (function(n){var t,f,e;(function(n){n[n.Initial=0]="Initial";n[n.Hover=1]="Hover";n[n.Active=2]="Active"})(t=n.MouseState||(n.MouseState={}));f=(function(n){function i(){var i=n!==null&&n.apply(this,arguments)||this;return i.submit=!1,i.selector=ko.observable(null),i.toggle=ko.observable(!1),i.pressed=ko.observable(!1),i.state=ko.observable(t.Initial),i.click=$.noop,i.uri=ko.observable({}),i.text=ko.observable({}),i.tabindex=ko.observable(0),i.visible=ko.observable(!0),i.isDefault=ko.observable(!1),i}return __extends(i,n),i})(i.ViewModel);n.ViewModel=f;e=(function(n){function i(t,i,r){var u=this,e;r=r||{};r.viewModelType=r.viewModelType||f;u=n.call(this,t,i,r)||this;u.element.addClass("azc-button fxt-button").attr({role:"button",type:"button"}).on("click",u._clickHandler=function(n){return u._click(n)}).on("mousedown",u._mouseDownHandler=function(){u._mouseDown()}).on("mouseenter",u._mouseEnterHandler=function(){u._mouseEnter()}).on("mouseleave",u._mouseLeaveHandler=function(){u._mouseLeave()});if(!u.element.is("button")){e=!1;u.element.on("keydown",u._keyDownHandler=function(n){var t=function(){u.element.trigger("click",n)};n.which===13&&t();e=!1;n.which===32&&(e=!0,n.stopPropagation())}).on("keyup",u._keyUpHandler=function(n){e&&n.which===32&&(e=!1,u.element.trigger("click",n),n.stopPropagation())})}return u._initializeComputeds(),u}return __extends(i,n),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement("azc-button fxt-button fxs-inner-solid-border azc-button-default fxs-portal-button-primary fxs-button-default fxs-button-disabled azc-disabled"),this.element.removeAttr("role tabindex aria-pressed aria-disabled aria-label"),this._mouseLeaveHandler&&(this.element.off("mouseleave",this._mouseLeaveHandler),this._mouseLeaveHandler=null),this._mouseEnterHandler&&(this.element.off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null),this._mouseDownHandler&&(this.element.off("mousedown",this._mouseDownHandler),this._mouseDownHandler=null),this._removeMouseUpHandler(),this._keyUpHandler&&(this.element.off("keyup",this._keyUpHandler),this._keyUpHandler=null),this._keyDownHandler&&(this.element.off("keydown",this._keyDownHandler),this._keyDownHandler=null),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),n.prototype.dispose.call(this))},Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),i.prototype._initializeComputeds=function(){var n=this,t=this.ltm,u=this.options,i=this.element;this.$tabIndex.subscribeAndRun(t,(function(n){i.attr("tabindex",n)}));ko.computed(t,(function(){u.toggle()?i.attr("aria-pressed",u.pressed()):i.removeAttr("aria-pressed")}));ko.computed(t,(function(){var t=u.selector();n._previousSelector!==t&&n._previousImg&&n._previousImg.attr({src:"",alt:""});n._previousSelector=t;n._previousImg=i.find(t).attr({src:n._getUri(),alt:n._getAlt()})}));ko.computed(t,(function(){var t=n.$disabled();i.toggleClass("fxs-button-disabled azc-disabled",t).toggleClass("fxs-inner-solid-border",!t).attr("aria-disabled",t).filter(":button").prop("disabled",t)}));ko.computed(t,(function(){var n=u.isDefault();i.toggleClass("azc-button-default fxs-portal-button-primary",n).toggleClass("fxs-button-default",!n)}));ko.computed(t,(function(){r.toggle(i,u.visible()!==!1)}));u.tabindex.subscribeAndRun(t,(function(t){n.tabindex(t)}))},i.prototype._click=function(n){return this.$disabled()?!1:(this.options.pressed(!this.options.pressed()),this.options.click&&this.options.click.call(this.element,n),this.options.submit&&this.element.submit(),!0)},i.prototype._getAlt=function(){var n=this.options.text();if(typeof n=="string")return n;if(!n)return null;var i=this._getObject(n),r=this.options.state(),u=t[r].toLowerCase();return i[u]||null},i.prototype._getObject=function(n){return this.options.toggle()&&n.normal&&n.pressed&&(n=this.options.pressed()?n.pressed:n.normal),n.enabled&&n.disabled&&(n=this.$disabled()?n.disabled:n.enabled),n},i.prototype._getUri=function(){var n=this.options.uri();if(typeof n=="string")return n;if(!n)return null;var i=this._getObject(n),r=this.options.state(),u=t[r].toLowerCase();return i[u]||null},i.prototype._mouseDown=function(){var n=this;this.element.addClass("azc-button-state-active");this.options.state(t.Active);this._removeMouseUpHandler();this._body&&this._body.length===1||(this._body=$.querySelectorAll("body"));this._body.on("mouseup",this._mouseUpHandler=function(){n.element.removeClass("azc-button-state-active");n.options.state(t.Initial);n.element.hasClass("azc-button-state-hover")?n._mouseEnter():n._mouseLeave();n._removeMouseUpHandler()})},i.prototype._mouseEnter=function(){this.element.addClass("azc-button-state-hover");this.options.state()!==t.Active&&this.options.state(t.Hover)},i.prototype._mouseLeave=function(){this.element.removeClass("azc-button-state-hover");this.options.state()!==t.Active&&this.options.state(t.Initial)},i.prototype._removeMouseUpHandler=function(){this._mouseUpHandler&&(this._body.off("mouseup",this._mouseUpHandler),this._mouseUpHandler=null)},i})(i.Widget);n.Widget=e;ko.bindingHandlers.azcButton=u.getBindingHandler(e,{controlsDescendantBindings:!1})})(o||(o={})),o}));
define("_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css",["module"],(function(n){"use strict";return{css:".azc-searchBox{position:relative;display:inline-block;font-size:13px;padding-right:30px;height:23px}.azc-searchBox .azc-button{height:23px;width:23px;min-width:23px;font-size:16px;line-height:normal;vertical-align:top;margin-left:0;padding:0;border:none;top:0;position:absolute}.azc-searchBox-state-hidden{display:none}.azc-searchBox-button-state-hidden{padding-right:0}.azc-searchBox-button-state-hidden .azc-button{display:none}.azc-searchBox-button-icon{position:absolute;top:-1px;left:6px}.azc-searchBox-wrapper{width:100%;height:100%;position:relative;float:left;padding:0}.azc-searchBox-input{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.azc-searchBox-input .azc-textBox-wrapper{padding-right:0;width:100%}.azc-searchBox-input .azc-textBox-wrapper input{display:inline-block;padding-right:0}.azc-searchBox-search-icon{position:absolute;width:14px;height:14px;top:4px;left:6px;pointer-events:none;display:none}.azc-searchBox-wrapper.azc-searchBox-search-icon-visible .azc-searchBox-search-icon{display:block}.azc-searchBox-wrapper.azc-searchBox-search-icon-visible .azc-textBox-wrapper input{padding-left:24px}.azc-fabric .azc-searchBox{height:24px}.azc-fabric .azc-searchBox .azc-button{height:24px;width:24px;min-width:24px}",moduleId:n.id}}));
define("Viva.Controls/Controls/Forms/Viva.SearchBox",["require","exports","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Base/Viva.ValueUpdateTrigger","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Forms/Viva.Button","Viva.Controls/Controls/Base/Viva.ValidatableControl","MsPortalImpl/Base/Base.KeyboardHelper","_generated/MsPortalImpl/Svg/Startup/Search.svg","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","MsPortalImpl/Base/Base.SvgHelper","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";var y;Object.defineProperty(t,"__esModule",{value:!0});t.Widget=t.ViewModel=void 0;l.injectCss(a);var v="azc-searchBox",k="azc-searchBox-state-hover",p="azc-searchBox-state-hidden",w="azc-searchBox-button-state-hidden",d="<div class='azc-searchBox-wrapper' data-bind='css: { \"azc-searchBox-search-icon-visible\": data.searchIconVisible }'><div class='azc-searchBox-search-icon fxs-portal-svg-secondary' aria-hidden='true'>"+c.getSvgReferenceOrFallBackToData(s,{palette:99}).outerHTML+"<\/div><div class='azc-searchBox-input' data-bind='azcTextBox: $ctl._textBoxViewModel'><\/div><\/div>"+("<button aria-label='"+i.SearchBox.deleteButtonName+"' data-bind='azcButton: $ctl._buttonViewModel'>")+"<div class='azc-searchBox-button-icon'>&times;<\/div><\/button>",b=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.queryString=ko.observable(""),t.visible=ko.observable(!0),t.closeButtonVisible=ko.observable(!0),t.searchIconVisible=ko.observable(!0),t.placeholder=ko.observable("Search..."),t}return __extends(t,n),t})(e.ViewModel);t.ViewModel=b;y=(function(n){function t(t,i,e){var o=this;return e=e||{},e.viewModelType=e.viewModelType||b,o=n.call(this,t,i,e)||this,o.element.addClass(v).html(d),o._button=o.element.find("button"),o._input=o.element.find(".azc-searchBox-input"),o.options.keyDownEvent=o.options.keyDownEvent||$.noop,o._textBoxViewModel=new u.ViewModel({ltm:o.ltm,value:o.options.queryString,placeholder:o.options.placeholder,valueUpdateTrigger:r.ValueUpdateTrigger.Input}),o._buttonViewModel=new f.ViewModel(o.vmBasicOption),o._buttonViewModel.isDefault(!0),o._buttonViewModel.visible=o.options.closeButtonVisible,o._attachEvents(),o._initializeComputeds(),o._bindDescendants(),o._afterCreate(),o.options.placeholder&&o.options.placeholder.subscribeAndRun(o.ltm,(function(n){n&&o._input.find(".azc-input").attr("aria-label",n)})),o.options.ariaControls&&o._input.find(".azc-input").attr("aria-controls",o.options.ariaControls),o}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(v,k,p,w),n.prototype.dispose.call(this))},Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype._getElementToFocus=function(){var n=this.element.find("input");return n.length?n[0]:null},t.prototype._initializeComputeds=function(){var n=this,t=this.ltm;ko.computed(t,(function(){var t=n.$disabled();n._buttonViewModel.disabled(t);n._textBoxViewModel.disabled(t);n._textBoxViewModel.dirty(n.options.dirty())}));ko.computed(t,(function(){n.element.toggleClass(p,!n.options.visible())}));ko.computed(t,(function(){n.element.toggleClass(w,!n.options.closeButtonVisible())}))},t.prototype._attachEvents=function(){var n=this;this._detachEvents();this._buttonClickHandler=function(){n.options.queryString("");n.options.visible(!1)};this._inputKeyDownHandler=function(t){$.contains(n._input[0],document.activeElement)&&(o.getModifierKeys(t)===0&&t.which===27&&(n.options.queryString(""),t.preventDefault()),n.options.keyDownEvent(t))};this._button.on("click."+v,this._buttonClickHandler);this.element.on("keydown.azcSearchBox",this._inputKeyDownHandler)},t.prototype._detachEvents=function(){this._buttonClickHandler&&(this._button.off("click."+v,this._buttonClickHandler),this._buttonClickHandler=null);this._inputKeyDownHandler&&(this.element.off("keydown.azcSearchBox",this._inputKeyDownHandler),this._inputKeyDownHandler=null)},t})(e.Widget);t.Widget=y;ko.bindingHandlers.azcSearchBox=h.getBindingHandler(y)}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css",["module"],(function(n){"use strict";return{css:".azc-grid-filterable.azc-grid.azc-grid-headerHidden:not(.azc-grid-groupable) .azc-grid-filterable-searchBox{margin-bottom:14px}.azc-grid-filterable.azc-grid.azc-grid-filterable-active .azc-grid-reorderRow-cell div{visibility:hidden}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox{display:block}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox.azc-searchBox-state-hidden{display:none}.azc-grid-filterable.azc-grid .azc-grid-filterable-match{font-style:normal}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","Viva.Controls/Controls/Forms/Viva.SearchBox","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";function y(n,t){for(var u=v.call(n.childNodes),i,f,r;i=u.pop();)switch(i.nodeType){case 3:t(i);break;case 1:f=i;r=f.classList;r.contains("msportalfx-nohighlighting")||r.contains("azc-control")||r.contains("fxc-control")||u.push.apply(u,v.call(i.childNodes))}}function nt(n){var i=FxImpl.createElement("div",{trustedInnerHTML:n}),t=[];return y(i,(function(n){t.push(n.textContent)})),t.join(" ")}var p;Object.defineProperty(t,"__esModule",{value:!0});t.FilterableExtension=void 0;s.injectCss(h);var w=" ",l="azc-grid-filterable-active",c="azc-grid-filterable",b="<div class='azc-grid-filterable-searchBox' data-bind='azcSearchBox: $ctl.getPlugin(\""+c+"\")._searchBoxVM'><\/div>"+("<div aria-live='polite' aria-atomic='true' class='azc-grid-filterable-live fxs-hide-accessible-label' data-bind='text: $ctl.getPlugin(\""+c+"\")._ariaLive'><\/div>"),a="###EXISTING_TEMPLATE_BODY_CORE###",k='<!-- ko ifnot: $ctl.getPlugin("'+c+'").options.serverFilter() -->'+('<!-- ko if: $ctl.getPlugin("'+c+'").filterActive() -->')+('<!-- ko if: $ctl.getPlugin("'+c+'").results().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+c+'").results() } --><!-- /ko -->')+"<\/tbody><!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+c+'").results().length -->')+"<!-- ko if: data.items().length --><tbody role='rowgroup' class='azc-grid-empty' data-bind='if: data.noRowsMessage'><tr role='row' data-bind='attr: { tabindex: $tabIndex }'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko -->"+('<!-- ko if: $ctl.getPlugin("'+c+'").options.serverFilter() || !$ctl.getPlugin("'+c+'").filterActive() -->')+a+"<!-- /ko -->",d="(['|\"]?)([\"|']?trustedCellBinding[\"|']?:)(.*),",g="$1$2 "+('$ctl.getPlugin("'+c+'").filterActive() ')+('? $ctl.getPlugin("'+c+'")._filterableCellFormat($parentContext.$parentContext.$index, $index, $parent, $data) ')+": $3,",v=Array.prototype.slice;p=(function(n){function t(t){var i=n.call(this)||this;return i._options=$.extend(i._getDefaultFilterableOptions(),t),i._results=ko.observableArray(),i._filterActive=ko.observable(!1),i._displayedCols=[],i._colMap={},i._colNumMap={},i._resultTokenMap={},i._ariaLive=ko.observable(""),i._lastEncodedFilter=null,i}return __extends(t,n),Object.defineProperty(t.prototype,"filterActive",{get:function(){return this._filterActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"results",{get:function(){return this._results},enumerable:!1,configurable:!0}),t.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("table"),f=n.getTemplate("bodyCore"),e=k.replace(a,f),t=n.getTemplate("bodyCellContent"),i=new RegExp(d),r=t;t.match(i)&&(r=t.replace(i,g));u.prepend(".azc-grid-header",b);n.setTemplate({bodyCore:e,bodyCellContent:r})},t.prototype.afterCreate=function(){var n=this,t=this._widget,i=this.ltm;[function(){n._searchBoxVM.visible(n._options.searchBoxVisible())},function(){var t=$.trim(n._searchBoxVM.queryString());n._queryTimeout&&clearTimeout(n._queryTimeout);n._queryTimeout=setTimeout((function(){n._queryTimeout=null;n._resetResults();n._filterHandler(t)}),n.options.valueUpdateDelayTimeout())},function(){var i=t.options.columns();n._colMap={};n._colNumMap={};i.forEach((function(t,i){n._colMap[t.itemKey]=t;n._colNumMap[t.itemKey]=i;n._displayedCols.push(t.itemKey)}))},function(){t.element.toggleClass(l,n._filterActive())},function(){t.options.items();n._filterActive.peek()&&n._results(n._getResultItems(n._parseQueryString(n._searchBoxVM.queryString.peek())))},].forEach((function(r){ko.computed(i,r,n,{disposeWhenNodeIsRemoved:t.element[0]})}));this.options.serverFilter.subscribe(i,(function(){n._resetAndFilterResults($.trim(n._searchBoxVM.queryString()))}))},t.prototype.beforeCreate=function(){var n=this;this._searchBoxVM=new o.ViewModel(this.vmBasicOption);this._searchBoxVM.queryString=this.options.queryString;this._searchBoxVM.closeButtonVisible=this.options.searchBoxCloseButtonVisible;this._searchBoxVM.placeholder=this.options.searchBoxPlaceholder;this._searchBoxVM.ariaControls=this._widget.id;this._searchBoxVM.keyDownEvent=function(t){var u=n._widget.getPlugin(i.FocusableRowExtension.Name),r=e.getModifierKeys(t);u&&t.which===9&&(r===0||r===4)&&u._focus(t);r===0&&t.which===13&&n._resetAndFilterResults($.trim(n._searchBoxVM.queryString()))}},t.prototype.beforeDestroy=function(){this._widget.element.removeClass(l)},t.prototype.getDefaultRowMetadataProperties=function(){return{}},t.prototype.getName=function(){return t.Name},t.prototype.getOrder=function(){return 100},t.prototype.shouldNotAllowDrag=function(){return this._widget.element.hasClass(l)?!0:!1},t.prototype._parseQueryString=function(n){for(var r=new Map,i=n.toLowerCase().split(w).filter((function(n){var t=!r.has(n);return t&&r.set(n,n),t})),t=0;t<i.length;t++)this._resultTokenMap[i[t]]=[];return i},t.prototype._resetAndFilterResults=function(n){this._queryTimeout&&(clearTimeout(this._queryTimeout),this._queryTimeout=null,this._resetResults());this._filterHandler(n)},t.prototype._filterHandler=function(n){var i=this,t=n?MsPortalFx.encodeAttribute(n):null,u=this._lastEncodedFilter!==t,r;this._lastEncodedFilter=t;r=this.options.serverFilter()&&this.options.filterCallback();r?Q(r(n)).then((function(){var n=i._widget.options.extensionTrigger("handlesServerFilterAnnouncement"),r;n&&n.length&&n[0]||(r=i._widget.ariaRowCount(),i._ariaLive(t?f.Grid.loadingCompleteFiltered.format(r,t):f.Grid.loadingComplete.format(r)))})):t?(this._filterActive(!0),this._results(this._getResultItems(this._parseQueryString(n))),this._ariaLive(f.Grid.loadingCompleteFiltered.format(this._results().length,t))):(this._filterActive(!1),u&&this._ariaLive(f.Grid.loadingComplete.format(this._widget.ariaRowCount())))},t.prototype._getResultItems=function(n){var t=this,o=this._getSearchableColumns(),r,s,h=[],u=[],i,f,e;return this._widget.options.items().forEach((function(c,l){for(u=[],f=0;f<o.length;f++)if(r=o[f],c.hasOwnProperty(r)){s=t._getFormattedItemValue(c[r],{item:c,rowMetadata:t._widget.getRowMetadata(c),rowNumber:function(){return l},columnNumber:function(){return t._colNumMap[r]},column:t._colMap[r]});var a=nt(s).toLowerCase();for(e=0;e<n.length;e++)i=n[e],a.indexOf(i)!==-1&&(u.indexOf(i)===-1&&u.push(i),t._resultTokenMap[i].indexOf(c)===-1&&t._resultTokenMap[i].push(c))}u.length===n.length&&h.push(c)})),h},t.prototype._filterableCellFormat=function(n,t,i,r){var o=i.item,s=r.itemKey,c=o[s],l={item:i.item,rowNumber:n,columnNumber:t,rowMetadata:i,column:r},u=this._getFormattedItemValue(c,l),a=this._getSearchableColumns(),h,f=[];for(var e in this._resultTokenMap)h=this._resultTokenMap.hasOwnProperty(e)&&this._resultTokenMap[e].indexOf(o)!==-1&&a.indexOf(s)!==-1,h&&f.push(e);return f.length&&(u=this._highlightMatches(u,f)),u},t.prototype._highlightMatches=function(n,t){t.sort((function(n,t){return t.length-n.length}));t=t.map((function(n){return MsPortalFx.regexEscape(n)}));var i=new RegExp(t.join("|"),"gi"),r=FxImpl.createElement("div",{trustedInnerHTML:n});return y(r,(function(n){var r=n.textContent,u=i.exec(r),f,t,e,o,s,h;if(u){for(f=document.createDocumentFragment(),t=0;u;)e=u.index,o=u[0],e>t&&f.appendChild(document.createTextNode(r.slice(t,e))),s=FxImpl.createElement("em",{"class":"azc-grid-filterable-match fxs-highlight"}),s.textContent=o,t=e+o.length,f.appendChild(s),u=i.exec(r);r.length>t&&f.appendChild(document.createTextNode(r.slice(t)));h=n.parentNode;h.replaceChild(f,n)}})),r.innerHTML},t.prototype._getFormattedItemValue=function(n,t){var i,u;if(t.column&&t.column.filterFormatter)i=t.column.filterFormatter(n,t);else{u=ko.toJS(n);switch(typeof u){case"object":i=r.text(JSON.stringify(u),t);break;default:i=r.text(u,t)}}return i},t.prototype._getSearchableColumns=function(){return this.options.searchableColumns().length?this.options.searchableColumns():this._displayedCols},t.prototype._resetResults=function(){this._results.removeAll();this._resultTokenMap={}},t.prototype._getDefaultFilterableOptions=function(){return{searchableColumns:ko.observableArray(),searchBoxVisible:ko.observable(!0),searchBoxPlaceholder:ko.observable(f.Viva.Grid.Filterable.placeholder),searchBoxCloseButtonVisible:ko.observable(!0),queryString:ko.observable(""),serverFilter:ko.observable(!1),filterCallback:ko.observable(null),valueUpdateDelayTimeout:ko.observable(300)}},t.Name=c,t})(u.Extension);t.FilterableExtension=p}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var e=MsPortalFx.ViewModels.Controls.Lists.Grid,o=300,t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getExtension=function(n){var i=n,t=i&&i.filterable,r;return t&&(r={searchBoxCloseButtonVisible:t.searchBoxCloseButtonVisible||ko.observable(!0),searchBoxPlaceholder:t.searchBoxPlaceholder||ko.observable(u.Viva.Grid.Filterable.placeholder),searchBoxVisible:t.searchBoxVisible||ko.observable(!0),searchableColumns:t.searchableColumns||ko.observableArray(),queryString:t.queryString||ko.observable(""),serverFilter:t.serverFilter||ko.observable(!1),valueUpdateDelayTimeout:t.valueUpdateDelayTimeout||ko.observable(o)}),new f.FilterableExtension(r)},t.prototype.getName=function(){return"Filterable"},t.prototype.getOrder=function(){return 0},t.prototype.columnAdded=function(n,t,i){i.filterFormatter=null;var r=t.filterableFormat;r!==undefined&&(i.filterFormatter=this._widget._getFormatter(r,t.filterableFormatOptions||{}))},t})(r.GridExtension);n.FilterableExtension=t;i.registerPlugin(e.Extensions.Filterable,t)})(e||(e={})),e}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1"],(function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FocusableRowHoverExtension=void 0;var f='css: { "azc-external-hovered": $data === $ctl.getPlugin("azc-grid-hoverableRow")._hoveredRowMetadata() }',e=(function(n){function t(t){var i=n.call(this)||this;return i._disposables=[],i._options=t||{},i._hoverIDKey=i._options.hoverIDKey||ko.observable(),i._hoveredID=i._options.hoveredID||ko.observable(),i._hoveredRowMetadata=ko.observable(null),i._backupIdMax=0,i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.beforeCreate=function(){this._focusableRowExtension=this._widget.getPlugin(i.FocusableRowExtension.Name);this._focusableRowExtension.externalHover=!0},t.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",[f])},t.prototype.getDefaultRowMetadataProperties=function(){return{hovered:ko.observable(!1)}},t.prototype.afterAttachEvents=function(){var t=this,n=this,i=this._widget.element;this._disposables.push(i.setEvents(["rowFocus.azcHovered",function(t,i){n._onRowFocus(t,i)}],["mouseenter.azcHovered",">.azc-grid-root>.azc-grid-area>.azc-grid-container .azc-grid-full>tbody>tr.azc-grid-row:not([aria-disabled=true])",function(i){var r;!t._preventMouseHandler&&i.currentTarget&&(r=ko.dataFor(i.currentTarget),n._hoveredRowMetadata(r))}],["mouseleave.azcHovered",function(){t._preventMouseHandler||n._hoveredRowMetadata(null)}],["focus.azcHovered",function(t){if(!n._hoveredRowMetadata()){var i=void 0;t.currentTarget&&(i=ko.dataFor(t.currentTarget),n._hoveredRowMetadata(i),n._focusedByEvent=!0)}}],["blur.azcHovered","tbody.azc-grid-groupdata",function(){n._focusedByEvent&&n._hoveredRowMetadata()&&(n._hoveredRowMetadata(null),n._focusedByEvent=!1)}]))},t.prototype.afterCreate=function(){var n=this,t,i,r,u;this._rebuildIdRowMetadaMap();r=this._widget;u=this.ltm;r.options.items.subscribeArrayChanges(u,(function(u){i=ko.unwrap(u[n._hoverIDKey()]);i||(i=(n._backupIdMax++).toString());t=r.getRowMetadata(u);t.hoverID=i;n._idRowMetadataMap[i]=t}),(function(i){t=r.getRowMetadata(i);delete n._idRowMetadataMap[t.hoverID]}));this._hoveredID.subscribe(u,(function(t){n.hoverRowByHoverId(t)}));this._hoveredRowMetadata.subscribe(u,(function(t){var i=t?t.hoverID:null;i!==n._hoveredID.peek()&&n._hoveredID(i)}))},t.prototype.getOrder=function(){return 30},t.prototype.getDependencies=function(){return[new i.FocusableRowExtension(this.options)]},t.prototype.beforeDestroy=function(){MsPortalFx.disposeDisposable(this._disposables);this._disposables=[];this._resetPreventMouseHandlerTimer()},t.prototype.getName=function(){return t.Name},t.prototype.hoverRowByHoverId=function(n){var t=this._getRowMetadataFromHoverID(n);this.hoverRowByRowMetadata(t)},t.prototype.hoverRowByRowMetadata=function(n,t){if(this._hoveredRowMetadata.peek()!==n){if(this._inHoverRowByRowMetadata){console.error(" FocusableRowHoverExtension hoverRowByRowMetadata go into recursive called. Please verify."+MsPortalFx.getCurrentCallStack(!0));return}try{if(this._inHoverRowByRowMetadata=!0,this._hoveredRowMetadata(n),n){var i={hovered:n};this._widget.trigger("rowHover",t?r.cloneEvent(t,"rowHover"):$.Event("rowHover"),i);this._widget.options.events("hover",i)}}finally{this._inHoverRowByRowMetadata=!1}}},t.prototype._resetPreventMouseHandlerTimer=function(){this._preventMouseHandler=!1;this._preventMouseHandlerTimer!==null&&(clearTimeout(this._preventMouseHandlerTimer),this._preventMouseHandler=null)},t.prototype._onRowFocus=function(n,t){var r=this,i;this._focusedByEvent=!!n;this._focusedByEvent&&(this._resetPreventMouseHandlerTimer(),this._preventMouseHandler=!0,this._preventMouseHandlerTimer=setTimeout((function(){r._resetPreventMouseHandlerTimer()}),250));t.focused?(i=t.focused,this.hoverRowByRowMetadata(i,n)):this.hoverRowByRowMetadata(null)},t.prototype._getRowMetadataFromHoverID=function(n){var t;return MsPortalFx.isNullOrUndefined(n)||(t=this._idRowMetadataMap[n]),t||null},t.prototype._rebuildIdRowMetadaMap=function(){var i=this,r=this._widget._getAllRowMetadata(),u=this._hoverIDKey.peek(),n,t={};this._backupIdMax=0;r.forEach((function(r){n=ko.unwrap(r.item[u]);n=n?n.toString():(i._backupIdMax++).toString();t[n]=r;r.hoverID=n}));this._idRowMetadataMap=t},t.Name="azc-grid-hoverableRow",t})(u.Extension);t.FocusableRowHoverExtension=e}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover"],(function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FocusableRowHoverExtension=void 0;var e=MsPortalFx.ViewModels.Controls.Lists.Grid,f=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var i=n,t=i.hoverable||{};return new u.FocusableRowHoverExtension({focusable:t.focusable||ko.observable(!0),hoverIDKey:t.hoverIDKey||ko.observable(),hoveredID:t.hoveredID||ko.observable()})},t.prototype.initializeExtension=function(){},t.prototype.getName=function(){return"FocusableRowHover"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);t.FocusableRowHoverExtension=f;i.registerPlugin(e.Extensions.Hoverable,f)}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings",["require","exports","MsPortalImpl.Controls/Controls/Base/Formatters","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(t){function v(t,i,r,u){var f=i||"";switch(t){case o.TextBox:case o.CheckBox:case o.DropDown:case o.GroupDropDown:case o.CheckBoxRowSelection:return"<div data-bind='formElement: $data' data-grid-formelement='"+o[t]+"'><\/div>"}return r||(f=e.sanitizeHTML(f,n,u).sanitizedMarkup),f}function l(n,t,i){switch(t){case o.TextBox:return s.textBox(n,i);case o.CheckBox:return s.checkBox(n,i);case o.DropDown:return s.dropDown(n,i);case o.GroupDropDown:return s.groupDropDown(n,i);case o.CheckBoxRowSelection:return s.rowSelectionCheckBox(n);case o.Default:default:return function(n,t,i){return{value:t,settings:i}}}}var c=MsPortalFx.ViewModels.Controls.Lists.Grid,a=c.Format,o=c.HtmlBindingsType,s=i.ControlViewModels,h;t.getHtmlBindingsViewModel=l;h=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getName=function(){return"FormatterHtmlBindings"},t.prototype.getOrder=function(){return 0},t.prototype.getSafeFormatter=function(n,t,i){switch(n){case a.HtmlBindings:var r=this._widget&&this._widget.element;return f.htmlBindings(this._widget.ltm,v(t.htmlBindingsType,t.htmlBindingsTemplate,i,r),l(this._widget.ltm,t.htmlBindingsType,t.htmlBindingsData))}return null},t})(u.GridExtension);t.FormatterHtmlBindingsExtension=h;r.defaultPlugins.push(h)})(o||(o={})),o}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css",["module"],(function(n){"use strict";return{css:".azc-grid-groupable.azc-grid .azc-grid-groupdata .azc-grid-groupheader td{padding-top:1px;font-size:13px;font-weight:600;text-transform:none}.azc-grid-groupable.azc-grid .azc-grid-groupdata .azc-grid-groupheader:hover{background-color:inherit}.azc-grid-groupable.azc-grid .azc-grid-groupdata tr:not(.azc-grid-groupheader) td.azc-grid-cell:first-of-type{padding-left:30px}.azc-grid-groupable.azc-grid th.azc-grid-column-header:first-of-type .azc-grid-header-wrapper{padding-left:30px}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css"],(function(n,t,i,r,u,f,e){"use strict";function s(n){return n=ko.toJS(n),c(n)?"":n}function v(n,t,i){var r=[],u=[];return t===0?u=n:(n.forEach((function(n){n.sortFormatter?r.push(n.sortFormatter(ko.toJS(n.value))):r.push(ko.toJS(n.value))})),i?r.sort(i):r.sort(),t===2&&r.reverse(),r.forEach((function(t){n.forEach((function(n){var i=n.sortFormatter?n.sortFormatter(ko.toJS(n.value)):ko.toJS(n.value);t.toString()===i.toString()&&u.push(n)}))}))),u}function y(n,t,i){var r,u,f;n.options.items().forEach((function(e){r="";f=s(e[i]);t.forEach((function(n){u=s(n.value);f.toString()===u.toString()&&(r=u)}));n.getRowMetadata(e).groupId(r)}))}function p(n,t,i){if(i===null||i===undefined)throw new Error("groupId cannot be null or undefined when fetching group items.");return ko.computed(n,(function(){var n=[],u=ko.toJS(i).toString(),r;return t.options.items().forEach((function(i){r=s(t.getRowMetadata(i).groupId);r.toString()===u&&n.push(i)})),n}))}var h,l;Object.defineProperty(t,"__esModule",{value:!0});t.GroupableExtension=t.Group=void 0;f.injectCss(e);var c=MsPortalFx.isNullOrUndefined,o="azc-grid-groupable",a="<!-- ko if: data.items().length -->"+('<!-- ko foreach: $ctl.getPlugin("'+o+'").groups -->')+"<tbody class='azc-grid-groupdata' role='rowgroup' data-bind='attr: { \"aria-label\": ariaLabel }' ><tr aria-hidden='true' class='azc-grid-groupheader'>"+("<td class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+o+"\")._headerCellFormat(formatter, value), attr: { colspan: $ctl._getTotalColumns() }'><\/td>")+"<\/tr>"+('<!-- ko if: $ctl.getPlugin("'+o+'").getItemsByGroup(value)().length -->')+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+o+'").getItemsByGroup(value)() } --><!-- /ko -->')+"<!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+o+'").getItemsByGroup(value)().length -->')+"<tr role='row'><td role='gridcell' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: $vm.noRowsMessage' class='azc-br-muted'><\/td><\/tr><!-- /ko --><\/tbody><!-- /ko -->"+('<!-- ko if: $ctl.getPlugin("'+o+'").getItemsByGroup("")().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='row' class='azc-grid-groupheader'>"+("<td rol='gridcell' class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+o+'").options.noGroupLabel(), attr: { "aria-label": $ctl.getPlugin("'+o+"\").options.noGroupLabel(), colspan: $ctl._getTotalColumns() }'><\/td>")+"<\/tr>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+o+'").getItemsByGroup("")() } --><!-- /ko -->')+"<\/tbody><!-- /ko --><!-- /ko -->";h=(function(){function n(n,t,r,u){this.value=n;this.formatter=t||i.text;this.sortFormatter=r;this.ariaLabel=u}return n})();t.Group=h;l=(function(n){function t(t){var i=n.call(this)||this;return i._groupItems={},i._options=$.extend(i._getDefaultGroupOptions(),t),c(i._options.groups)&&(i._options.groups=ko.observable(null)),i}return __extends(t,n),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.afterSetTemplates=function(n){n.setTemplate("bodyCore",a)},t.prototype.beforeCreate=function(){var n=this,u=function(t,i,r,u){var f=[],e=[],o=[];return r.forEach((function(n){var t=s(n[i]),r=t.toString();e.indexOf(r)===-1&&(f.push(t),e.push(r))})),f.forEach((function(t){var i=ko.observable();n._options&&n._options.getGroupAriaLabel?Q(n._options.getGroupAriaLabel(t)).then((function(n){i(n)})):i(t&&t.toString());o.push(new h(t,u,null,i))})),o},r=this.ltm,t;this._groups=ko.computed(r,(function(){t&&t.dispose();t=r.createChildLifetime();var f=[],e=n.options.groups(),o;return e?f=e:(o=n.options.headerFormatter||i.text,f=u(t,n.options.groupKey(),n._widget.options.items(),o)),y(n._widget,f,n.options.groupKey()),v(f,n.options.sortOrder(),n.options.sortFunction)}))},t.prototype.beforeDestroy=function(){var n=this;this._groupItems&&(Object.getOwnPropertyNames(this._groupItems).forEach((function(t){var i=n._groupItems[t];i&&($.isFunction(i.dispose)&&i.dispose(),n._groupItems[t]=null)})),this._groupItems=null)},t.prototype.getItemsByGroup=function(n){return n=ko.toJS(n),this._groupItems[n]||(this._groupItems[n]=p(this.ltm,this._widget,n)),this._groupItems[n]},t.prototype.getDefaultRowMetadataProperties=function(){return{groupId:ko.observable("")}},t.prototype.getName=function(){return t.Name},t.prototype.getOrder=function(){return 70},t.prototype._getDefaultGroupOptions=function(){return{groupKey:ko.observable(""),headerFormatter:i.text,groups:ko.observable(null),noGroupLabel:function(){return u.Viva.Grid.Groupable.noGroupLabel},sortOrder:ko.observable(1),sortFunction:null}},t.prototype._headerCellFormat=function(n,t){return n(t)},t.prototype.computeLeftMarginWidth=function(){return 30},t.Name=o,t})(r.Extension);t.GroupableExtension=l}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable","MsPortalImpl/Resources/ImplScriptResources"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){function o(n){var i,r=t.SortFunction;switch(n){case r.DateTime:i=function(n,t){var i=new Date(n).getTime(),r=new Date(t).getTime();return i<r?-1:i>r?1:0};break;case r.SettingListGroupOrder:i=function(n,t){var i=f.Part.SettingList.Group.support;return n===i?-1:t===i?1:0};break;default:i=null}return i}var t=MsPortalFx.ViewModels.Controls.Lists.Grid,e=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var f=n||{},i=this._widget,e=i.ltm.createChildLifetime(),s=i.element[0],t=f.groupable,r=t.getGroupAriaLabel&&t.getGroupAriaLabel.bind(f);return new u.GroupableExtension({groupKey:t.groupKey,headerFormatter:i._getFormatter(t.headerFormat,t.headerFormatOptions),groups:ko.computed(e,(function(){var n;return t&&t.groups&&(n=[],t.groups().forEach((function(t){var o=i._getFormatter(t.format,t.formatOptions),e=null,f;t.sortFormat&&(e=i._getFormatter(t.sortFormat,t.sortFormatOptions));f=ko.observable();r?Q(r(t.value)).then((function(n){f(n)})):f(t.value&&t.value.toString());n.push(new u.Group(t.value,o,e,f))}))),n}),this,{disposeWhenNodeIsRemoved:s}),noGroupLabel:i._getFormatter(t.noGroupLabelFormat,t.noGroupLabelFormatOptions),sortFunction:o(t.sortFunction),sortOrder:ko.computed(e,(function(){var n=1;return t&&t.sortOrder&&(n=t.sortOrder()),n}),this,{disposeWhenNodeIsRemoved:s}),getGroupAriaLabel:r})},t.prototype.initializeExtension=function(){},t.prototype.getName=function(){return"Groupable"},t.prototype.getOrder=function(){return 0},t.prototype.connectRowMetadataProperties=function(n,t,i){var r=this._widget.ltm.createChildLifetime();return this._widget._twoWayBinding(r,i.groupId,t.groupId),r},t})(r.GridExtension);n.GroupableExtension=e;n.getSortFunction=o;i.registerPlugin(t.Extensions.Groupable,e)})(e||(e={})),e}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css",["module"],(function(n){"use strict";return{css:".azc-grid-hierarchical-cell-flexcontainer{display:flex;align-items:center}.azc-grid-hierarchical-cell-flexcontainer .azc-grid-cellContent{flex:1 1 auto}.azc-grid-hierarchical-header>a{padding-left:26px}.azc-grid-hierarchical-icon,.azc-grid-hierarchical-indent{display:inline-block;flex:0 0 auto;width:16px;height:16px;top:3px}.azc-grid-hierarchical-icon-collapsed{margin-left:2px;width:12px;height:12px}.azc-grid-hierarchical-icon-expanded{margin-left:4px;margin-top:2px;width:12px;height:12px;transform:rotate(90deg)}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Resources/ImplScriptResources","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css"],(function(n,t,i,r,u,f,e,o){"use strict";e.injectCss(o);var s;return (function(n){var o=f.Grid.Accessibility,h=MsPortalFx.Base.Images.Chevron(),c='css: { "azc-grid-hierarchical-toplevel": item.depth() === 0 }',l='css: { "azc-grid-hierarchical-header": hierarchical }',e="tr[data-grid-focusable]",s=".azc-grid-hierarchical-icon[data-grid-expandable]",t="azc-grid-hierarchical",a="<div class='azc-grid-hierarchical-cell-flexcontainer'><!-- ko if: hierarchical --><!-- ko foreach: new Array($parent.item.depth()) --><div class='azc-grid-hierarchical-indent'><\/div><!-- /ko --><div class='azc-grid-hierarchical-icon' role='button' data-bind='"+('if: $ctl.getPlugin("'+t+'")._isExpandable($parent.item), ')+"clickBubble: false, attr: { "+('"aria-labelledby": $ctl.getPlugin("'+t+'")._getCellContentId($parentContext.$parentContext.$index, $index, $parent, $data), ')+('"aria-expanded": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? $parent.item.expanded().toString() : null, ')+('"data-grid-expandable": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? "true" : null, ')+('"aria-hidden": $ctl.getPlugin("'+t+'")._isExpandable($parent.item) ? null : "true", ')+('tabindex: $ctl.getPlugin("'+t+"\")._isExpandable($parent.item) && $tabIndex() }'>")+'<div data-bind=\'css: { "azc-grid-hierarchical-icon-collapsed": !$parent.item.expanded(), "azc-grid-hierarchical-icon-expanded": $parent.item.expanded() }, '+('image: $ctl.getPlugin("'+t+"\")._expansionImage($parent.item)'>")+"<\/div><\/div><div class='azc-grid-cellContent' data-bind='attr: { "+('"id": $ctl.getPlugin("'+t+'")._getCellContentId($parentContext.$parentContext.$index, $index, $parent, $data) }, ')+'css: { "azc-grid-cell-ellipse": $data.enableEllipse, "azc-grid-cell-fullheight": $data.fullHeight }, trustedCellBinding: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)\'><\/div><!-- /ko --><!-- ko ifnot: hierarchical --><div class=\'azc-grid-cellContent\' data-bind=\'css: { "azc-grid-cell-ellipse": $data.enableEllipse, "azc-grid-cell-fullheight": $data.fullHeight }, trustedCellBinding: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)\'><\/div><!-- /ko --><\/div>',v=MsPortalFx.disposeDisposable,y=(function(n){function t(t){var i=n.call(this)||this;return i._disposables=[],i._options=$.extend(i._getDefaultHierarchicalOptions(),t),i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("headerCell");i.addAttribute("th","data-bind",[l]);t.addAttribute("tr","data-bind",[c]);n.setTemplate("bodyCellContent",a)},t.prototype.afterCreate=function(){},t.prototype.afterAttachEvents=function(){var t=this,n=!0,i=this.options;this._disposables.push(this._widget.element.setEvents(["keydown.azcGrid",e,function(r){var s=$(r.target),f=s.closest(e),o=ko.dataFor(f[0]),h=u.getModifierKeys(r);if(h===0&&f&&f.length>0){switch(r.which){case 37:n=t._expandOrCollapse(i,o,!1);break;case 39:n=t._expandOrCollapse(i,o,!0);break;default:n=!1}n&&(r.preventDefault(),r.stopPropagation())}}],["keydown.azcGrid",s,function(r){var s=$(r.target),f=s.closest(e),o=ko.dataFor(f[0]),h=o?o.item:null,c=u.getModifierKeys(r);if(c===0&&f&&f.length>0){switch(r.which){case 13:case 32:n=t._expandOrCollapse(i,o,!h.expanded());break;default:n=!1}n&&(r.preventDefault(),r.stopPropagation())}}],["click.azcGrid",s,function(r){var o=$(r.target),u=o.closest(e),f=ko.dataFor(u[0]),s=f?f.item:null;u&&u.length>0&&(n=t._expandOrCollapse(i,f,!s.expanded()));n&&(r.preventDefault(),r.stopPropagation())},]))},t.prototype.beforeDestroy=function(){v(this._disposables);this._disposables=[]},t.prototype.getName=function(){return t.Name},t.prototype.getOrder=function(){return 18},t.prototype.getDependencies=function(){return[new r.FocusableRowExtension]},t.prototype.getDefaultColumnProperties=function(){return{hierarchical:!1}},t.prototype.shouldNotAllowSelectAll=function(){return!0},t.prototype._expandOrCollapse=function(n,t,i){var r=t?t.item:null,u=n.hierarchy;return r&&this._isExpandable(r)?(i?r.expanded()||(u.expand(t.item),this._widget._ariaLive(o.expanded)):r.expanded()&&(u.collapse(t.item),this._widget._ariaLive(o.collapsed)),!0):!1},t.prototype._getDefaultHierarchicalOptions=function(){return{hierarchy:null}},t.prototype._isExpandable=function(n){return n.expandable&&(n.expandable()===!0||n.expandable()===undefined)},t.prototype._expansionImage=function(){return h},t.prototype._getCellContentId=function(n,t,i,r){return this._widget.id+"_cc_"+r.columnId+"_"+n()},t.Name="azc-grid-hierarchical",t})(i.Extension);n.HierarchicalExtension=y})(s||(s={})),s}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical"],(function(n,t,i,r,u){"use strict";var f;return (function(n){var f=MsPortalFx.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getExtension=function(n){var t=n,i=t&&t.hierarchical;return new u.HierarchicalExtension(i)},t.prototype.initializeExtension=function(){},t.prototype.beforeDestroy=function(){},t.prototype.getName=function(){return"Hierarchical"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);n.HierarchicalExtension=t;i.registerPlugin(f.Extensions.Hierarchical,t)})(f||(f={})),f}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css",["module"],(function(n){"use strict";return{css:'.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer{display:block;height:38px;text-decoration:none;text-align:center}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreLabel{font-size:13px;line-height:1.385;line-height:38px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon{display:inline-block;margin-top:10px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon::before{content:url("Content/static/azc-validatableControl-pending.gif")}.azc-grid-pageable.azc-grid .azc-grid-pageable-pager{float:right}.azc-grid-pageable.azc-grid.azc-grid-pageable-onePage .azc-grid-pageable-pager{display:none}',moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css"],(function(n,t,i,r,u,f,e){"use strict";f.injectCss(e);var o;return (function(n){function a(){return{label:ko.observable(u.Grid.loadMore),showLabel:ko.observable(!0),loading:ko.observable(!1)}}var t="azc-grid-pageable",e=t+"-loadMoreContainer",o="."+e+"[href]",s=t+"-onePage",f=t+"-full",h="<!-- ko ifnot: $ctl.getPlugin(\"azc-grid-pageable\").options.pagerViewModel --><a role='button' aria-label='"+MsPortalFx.encodeAttribute(u.Grid.loadMoreAriaLabel)+"' class='azc-grid-pageable-loadMoreContainer' href='#' data-bind='attr: { \"aria-controls\": $ctl.id }, visible: $ctl.getPlugin(\"azc-grid-pageable\").options.showLabel'><span class='azc-grid-pageable-loadMoreLabel' data-bind='visible: !$ctl.getPlugin(\"azc-grid-pageable\").options.loading(), text: $ctl.getPlugin(\"azc-grid-pageable\").options.label'><\/span><span class='azc-grid-pageable-loadMoreIcon' data-bind='visible: $ctl.getPlugin(\"azc-grid-pageable\").options.loading, css: { \"azc-grid-pageable-showLoadingIcon\": $ctl.getPlugin(\"azc-grid-pageable\").options.loading }'><\/span><\/a><!-- /ko --><!-- ko if: $ctl.getPlugin(\"azc-grid-pageable\").options.pagerViewModel --><div class='azc-grid-pageable-pager' data-bind='azcPager: $ctl.getPlugin(\"azc-grid-pageable\").options.pagerViewModel'><\/div><!-- /ko -->",c="<!-- ko template: { name: ko.pureComputed(function () { return data.items().length ? 'bodyCore' : ($ctl.getPlugin(\"azc-grid-pageable\").options.loading() ? 'bodyCore' : 'bodyNoItems'); }), data: $data } --><!-- /ko -->",l=(function(n){function r(t){var i=n.call(this)||this;return i._options=$.extend(a(),t),i}return __extends(r,n),Object.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),r.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("table");t.append(".azc-grid-footer",h);n.setTemplate("body",c)},r.prototype.afterCreate=function(){var t=this,n=this.options.pagerViewModel;n&&ko.computed(this.ltm,(function(){var i=t._widget.element;i.toggleClass(s,n.numberOfPages()===1);i.addClass(f)}))},r.prototype.afterAttachEvents=function(){var n=this;this.ltm.registerForDispose(this._widget.element.setEvents(["click.azcPageableGrid",o,function(t){var u,r,f;t.preventDefault();t.stopPropagation();u=n.options;!u.loading()&&u.onLoadMoreData&&(r=n._widget.getPlugin(i.FocusableRowExtension.Name),f=r&&r._findLastFocusable(n._widget.element),r&&f.length&&r._focusRow(f,ko.dataFor(f[0])),u.onLoadMoreData())}]))},r.prototype.beforeDestroy=function(){this._widget.element.removeClass(f)},r.prototype.getName=function(){return r.Name},r.prototype.getOrder=function(){return 20},r.prototype.getAriaRowCount=function(){return this.options.ariaRowCount},r.prototype.handlesServerFilterAnnouncement=function(){return this.options.handlesServerFilterAnnouncement},r.prototype.getFirstObservableRowIndexObservable=function(){var n=this;return ko.pureComputed((function(){return n.options.pagerViewModel&&n.options.itemsPerPage?(n.options.pagerViewModel.currentPage()-1)*n.options.itemsPerPage()+1:1}))},r.prototype.shouldNotAllowSelectAll=function(){return!0},r.Name=t,r})(r.Extension);n.PageableExtension=l})(o||(o={})),o}));
define("_generated/Less/Viva.Controls/Controls/Viva.Pager.css",["module"],(function(n){"use strict";return{css:".azc-pager{margin-top:3px}.azc-pager .fxs-portal-border{border:1px solid;margin-left:3px}.azc-pager .fxs-portal-border svg{height:12px;width:12px}.azc-pager-list{list-style:none;margin:0;padding:0;overflow:auto}.azc-pager-listitem{float:left;text-align:center}.azc-pager-listitem:last-child{margin-right:0}.azc-pager-listitem[aria-disabled=true]{opacity:.2 !important}.azc-pager-link{display:block;padding:0 11px;font-size:11px;line-height:22px;color:inherit !important;text-decoration:none}.azc-pager-arrow-link{padding:0;line-height:0}.azc-pager-arrow,.azc-pager-page{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-pager-arrow .azc-pager-svg,.azc-pager-page .azc-pager-svg{padding:4px}.azc-pager-input{width:50px}.azc-pager-input .azc-pager-input-textBox{height:23px;padding-right:0 !important}.azc-pager-input input{text-align:center;border-right-width:1px !important}",moduleId:n.id}}));
define("Viva.Controls/Controls/Viva.Pager",["require","exports","Fx/Controls/TextBox","Viva.Controls/Controls/Base/Viva.Base","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Viva.Pager.css"],(function(n,t,i,r,u,f,e,o){"use strict";function b(){return{previous:u.Pager.previous,next:u.Pager.next}}var h,c;Object.defineProperty(t,"__esModule",{value:!0});t.Widget=t.ViewModel=void 0;e.injectCss(o);var p=/^\s*(\d+)\s*$/,l="azc-pager",a="azc-pager-arrow",v="azc-pager-arrow-previous",y="azc-pager-arrow-next",s="azc-pager-input-textBox",w="<div class=\"azc-pager-landmark\" role='navigation' aria-label='"+MsPortalFx.encodeAttribute(u.Grid.pagination)+"'><ul class=\"azc-pager-list\"><!-- ko if: $ctl._longPager --><li class='azc-pager-listitem azc-pager-input'>"+("<div class='"+s+"' data-bind='pcControl: $ctl._currentPage'><\/div>")+"<\/li><li class='azc-pager-listitem azc-pager-page'>"+("<a class='azc-pager-link' role='button' aria-label='"+MsPortalFx.encodeAttribute(u.Pager.lastPage)+'\' data-bind=\'text: data.numberOfPages, attr: { "data-page-id": data.numberOfPages(), href: $ctl._isCurrentPage(data.numberOfPages()) ? null : "#" }\'><\/a>')+'<\/li><!-- /ko --><!-- ko ifnot: $ctl._longPager --><!-- ko foreach: $ctl._pages --><li class=\'azc-pager-listitem azc-pager-page fxs-portal-hover\' data-bind=\'css: {"fxs-portal-selected": $ctl._isCurrentPage($data)}, attr: { "aria-current": $ctl._isCurrentPage($data) ? "page" : null }\'><a class=\'azc-pager-link\' role=\'button\' data-bind=\'text: $data, attr: {"aria-label": $ctl._ariaLabel($data), "data-page-id": $data, href: $ctl._isCurrentPage($data) ? null : "#" }\'><\/a><\/li><!-- /ko --><!-- /ko --><!-- ko if: $ctl._showArrows -->'+("<li class='azc-pager-listitem fxs-portal-border fxs-portal-hover "+a+" "+v+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageFirst() ? "true" : "false" }\'>')+"<a class='azc-pager-link azc-pager-arrow-link' role='button' data-bind='attr: { title: data.text.previous, \"aria-label\": data.text.previous, href: $ctl._isCurrentPageFirst() ? null : \"#\" }'><div class='azc-pager-svg msportalfx-svg-flip-horizontal fxs-portal-svg' data-bind='image: MsPortalFx.Base.Images.Chevron()'><\/div><\/a><\/li>"+("<li class='azc-pager-listitem fxs-portal-border fxs-portal-hover "+a+" "+y+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageLast() ? "true" : "false" }\'>')+"<a class='azc-pager-link azc-pager-arrow-link' role='button' data-bind='attr: { title: data.text.next, \"aria-label\": data.text.next, href: $ctl._isCurrentPageLast() ? null : \"#\" }'><div class='azc-pager-svg fxs-portal-svg' data-bind='image: MsPortalFx.Base.Images.Chevron()'><\/div><\/a><\/li><!-- /ko --><\/ul><\/div>";h=(function(n){function t(t,i){i===void 0&&(i={});var r=n.call(this,t)||this;return r.currentPage=i.currentPage||ko.observable(1),r.numberOfPages=i.numberOfPages||ko.observable(1),r.maxPages=i.maxPages||ko.observable(20),r.text=i.text,r.ariaLive=i.ariaLive||ko.observable(""),r}return __extends(t,n),t})(r.ViewModel);t.ViewModel=h;c=(function(n){function t(t,r,f){var e=this;return f=f||{},f.viewModelType=f.viewModelType||h,e=n.call(this,t,r,f)||this,e.options.text=e.options.text||b(),e.element.addClass(l).html(w),e._currentPage=i.create(e.ltm,{ariaLabel:u.Pager.currentPage,suppressDirtyBehavior:!0,hideValidationCheck:!0,onEnterPressed:function(){var t=p.exec(e._currentPage.value()),n;t&&(n=parseInt(t[1]),n>=1&&n<=r.numberOfPages()&&r.currentPage(n))}}),e._attachEvents(),e._initializeComputeds(),e._bindDescendants(),e}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(l),n.prototype.dispose.call(this))},Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_longPager",{get:function(){return this.options.numberOfPages()>this.options.maxPages()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_showArrows",{get:function(){return this.options.numberOfPages()>1},enumerable:!1,configurable:!0}),t.prototype._ariaLabel=function(n){return u.Pager.page.format(n)},t.prototype._initializeComputeds=function(){var n=this,t=this.options,i;this._pages=ko.observableArray();i=this.ltm;ko.computed(i,(function(){var r=n._pages.peek(),i,u;for(n._pages.valueWillMutate(),r.splice(0,r.length),i=1,u=Math.min(t.numberOfPages(),t.maxPages());i<=u;i++)r.push(i);n._pages.valueHasMutated()}));ko.reactor(i,(function(){n._currentPage.value(t.currentPage().toString())}))},t.prototype._attachEvents=function(){var n=this,t;this._detachEvents();t=this.options;this.element.on("click","ul li.azc-pager-page a[href]",this._clickPageEventHandler=function(i){var r=parseInt($(i.currentTarget).data("page-id"),10);t.currentPage(r);i.preventDefault();n.options.ariaLive("");n.options.ariaLive(u.Pager.loadPageNumber.format(r))}).on("click","ul li."+v+" a[href]",this._clickArrowPreviousEventHandler=function(i){t.currentPage(t.currentPage()-1);i.preventDefault();n.options.ariaLive("");n.options.ariaLive(u.Pager.loadPrev)}).on("click","ul li."+y+" a[href]",this._clickArrowNextEventHandler=function(i){t.currentPage(t.currentPage()+1);i.preventDefault();n.options.ariaLive("");n.options.ariaLive(u.Pager.loadNext)}).on("blur","."+s+" input",this._inputBlurEventHandler=function(){n._currentPage.value(t.currentPage().toString())})},t.prototype._detachEvents=function(){var n=this.element,u=this._clickPageEventHandler,t,i,r;u&&(n.off("click",u),this._clickPageEventHandler=null);t=this._clickArrowPreviousEventHandler;t&&(n.off("click",t),this._clickArrowPreviousEventHandler=null);i=this._clickArrowNextEventHandler;i&&(n.off("click",i),this._clickArrowNextEventHandler=null);r=this._inputBlurEventHandler;r&&(n.off("blur","."+s+" input",r),this._inputBlurEventHandler=null)},t.prototype._isCurrentPage=function(n){return n===this.options.currentPage()},t.prototype._isCurrentPageFirst=function(){return 1===this.options.currentPage()},t.prototype._isCurrentPageLast=function(){return this.options.numberOfPages()===this.options.currentPage()},t})(r.Widget);t.Widget=c;ko.bindingHandlers.azcPager=f.getBindingHandler(c)}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Viva.Pager","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable","MsPortalImpl/Resources/ImplScriptResources"],(function(n,t,i,r,u,f,e,o,s){"use strict";function a(n){var t,i;return n&&(t=n.metadata(),t&&(i=t.totalItemCount,!MsPortalFx.isNullOrUndefined(i)))?i:0}var v;Object.defineProperty(t,"__esModule",{value:!0});t.PageableExtension=t.DefaultItemsPagePage=void 0;var y=MsPortalFx.ViewModels.Controls.Lists.Grid,h=y.PageableType,c=MsPortalFx.Base.Promises.cancelOnDispose,p=u.Grid,l=MsPortalFx.getUniqueId;t.DefaultItemsPagePage=10;v=(function(n){function i(){var t=n!==null&&n.apply(this,arguments)||this;return t._options=null,t._type=null,t._dataNav=null,t._filterQS=ko.observable(null),t._currentRequestId=null,t}return __extends(i,n),i.prototype.getExtension=function(n){var u=this,s=n,i=s&&s.pageable,r,e;if(i&&(this._dataNav=i.dataNavigator),!this._validateSequential()&&!this._validatePageable())throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");this._type=i.type;r=this._ariaRowCount=ko.observable();switch(i.type){case h.Pageable:r(0);e=i.pagerMaxPages;this._options={loading:ko.observable(!1),pagerViewModel:new f.ViewModel({ltm:this._widget.ltm},{maxPages:!MsPortalFx.isNullOrUndefined(e)&&ko.observable(e)}),itemsPerPage:i.itemsPerPage?i.itemsPerPage:ko.observable(t.DefaultItemsPagePage),ariaRowCount:r,handlesServerFilterAnnouncement:!0};break;case h.Sequential:default:r(-1);this._options={label:i.label?i.label:ko.observable(p.loadMore),showLabel:i.showLabel?i.showLabel:ko.observable(!0),loading:ko.observable(!1),onLoadMoreData:function(){u._currentRequestId=l();u._onLoadMoreData(u._currentRequestId).catch((function(){}))},ariaRowCount:r,handlesServerFilterAnnouncement:!0}}return new o.PageableExtension(this._options)},i.prototype.initializeExtension=function(){if(!(this._type===h.Sequential&&this._validateSequential()||this._type===h.Pageable&&this._validatePageable()))throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");var n=this._filterableExtn=this._widget._instance.getPlugin(e.FilterableExtension.Name);n&&n.options.serverFilter()&&this._filterQS(n.options.queryString())},i.prototype.resetExtension=function(){var n=this,t=this._filterableExtn&&this._filterableExtn.options,i;return t&&!t.filterCallback()&&t.filterCallback((function(t){if(n._filterQS()!==t)return n._filterQS(t),n.resetExtension()})),i=this._type===h.Sequential&&this._validateSequential()?this._resetAndLoadData():this._type===h.Pageable&&this._validatePageable()?this._resetLoadPage():Q(),i.catch((function(){})),i},i.prototype.beforeDestroy=function(){this._subLifetime&&this._subLifetime.dispose()},i.prototype.getName=function(){return"Pageable"},i.prototype.getOrder=function(){return 0},i.prototype._validateSequential=function(){return this._dataNav&&!!this._dataNav.loadByContinuationToken},i.prototype._validatePageable=function(){return this._dataNav&&!!this._dataNav.loadBySkipTake},i.prototype._loadPage=function(){var n=this,i=l(),t=this._options;this._currentRequestId=i;var f=t.pagerViewModel.currentPage(),r=t.itemsPerPage(),e=this._getSortData(),u=this._filterQS()?MsPortalFx.encodeAttribute(this._filterQS()):null;return t.loading(!0),c(this._widget.ltm,(function(){return Q(n._dataNav.loadBySkipTake((f-1)*r,r,n._filterQS(),e))})).then((function(){if(n._currentRequestId===i){var t=n._dataNav.items();t=t?t.slice(0):[];n._widget.options.items(t)}return Q()}),(function(n){return n=n||FxImpl.createError("Undefined failure from loadBySkipTake"),n._sourceErrorLevel=0,Q.reject(n)})).finally((function(){if(n._currentRequestId===i){t.loading(!1);var r=a(n._dataNav)||n._widget.options.items().length;n._ariaRowCount(r);n._widget._instance._ariaLive(u?s.Grid.loadingCompleteFiltered.format(r,u):s.Grid.loadingComplete.format(r))}}))},i.prototype._attachSubscriptions=function(){var i=this,t,n;if(this._subLifetime=this._widget.ltm.createChildLifetime(),this._type===h.Pageable){t=this._options;n=t.pagerViewModel;this._options.pagerViewModel.ariaLive=this._widget._instance._ariaLive;var r=a(this._dataNav),u=t.itemsPerPage(),f=n.currentPage(),e=n.numberOfPages();ko.reactor(this._subLifetime,(function(){var s=a(i._dataNav),o=t.itemsPerPage(),h=n.currentPage();ko.ignoreDependencies((function(){if(o){var t=(s+o-1)/o|0||1;t!==e&&(e=t,n.numberOfPages(t))}(s!==r||o!==u||h!==f)&&(r=s,u=o,f=h,o&&h&&i._loadPage().catch((function(){})))}))}))}},i.prototype._resetCurrentPageSubscription=function(){this._subLifetime&&this._subLifetime.dispose();this._options.pagerViewModel.currentPage(1);this._attachSubscriptions()},i.prototype._resetLoadPage=function(){return this._resetCurrentPageSubscription(),this._loadPage()},i.prototype._onLoadMoreData=function(n){var t=this,r=this._options,i;return r.loading(!0),this._widget._instance._ariaLive(s.Grid.loadingMore),i=this._filterQS()?MsPortalFx.encodeAttribute(this._filterQS()):null,c(this._widget.ltm,(function(){return Q(t._dataNav.loadByContinuationToken())})).then((function(){return t._currentRequestId===n&&t._widget.options.items.push.apply(t._widget.options.items,t._dataNav.items()),Q()}),(function(n){return n=n||FxImpl.createError("Undefined failure from loadByContinuationToken"),n._sourceErrorLevel=0,Q.reject(n)})).finally((function(){if(t._currentRequestId===n){r.loading(!1);var u=t._widget.options.items().length;t._dataNav.metadata()&&t._dataNav.metadata().continuationToken?(t._ariaRowCount(-1),t._widget._instance._ariaLive(i?s.Grid.loadingPartiallyCompleteFiltered.format(u,i):s.Grid.loadingPartiallyComplete.format(u))):(r.showLabel(!1),t._ariaRowCount(u),t._widget._instance._ariaLive(i?s.Grid.loadingCompleteFiltered.format(u,i):s.Grid.loadingComplete.format(u)))}}))},i.prototype._resetAndLoadData=function(){var n=this,t=this._getSortData();return this._currentRequestId=l(),c(this._widget.ltm,(function(){n._dataNav.resetLoadByContinuationToken&&n._dataNav.resetLoadByContinuationToken(n._filterQS(),t)})),this._options.showLabel(!0),this._widget.options.items([]),this._onLoadMoreData(this._currentRequestId)},i.prototype._getSortData=function(){var n=this._widget.options.sortByList;return n?n():null},i})(r.GridExtension);t.PageableExtension=v;i.registerPlugin(y.Extensions.Pageable,v)}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css",["module"],(function(n){"use strict";return{css:'.azc-grid-reorderRow col.azc-grid-reorderRow-col{width:16px}.azc-grid-reorderRow table tbody tr[draggable]{-webkit-user-drag:element}.azc-grid-reorderRow table tbody tr td.azc-grid-reorderRow-cell{padding-left:5px;padding-right:6px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled="true"]):hover td.azc-grid-reorderRow-cell div{margin-top:4px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled="true"]):hover td.azc-grid-reorderRow-cell div::before{content:url("Content/static/azc.grid.reorderrowextension.handle-hover.svg");width:5px;height:17px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled="true"])[aria-selected="true"]:hover td.azc-grid-reorderRow-cell div::before{content:url("Content/static/azc.grid.reorderrowextension.handle-active.svg")}.azc-grid-reorderRow .azc-grid-reorderRow-line{position:absolute;width:100%;height:3px;display:none}.azc-grid-reorderRow.azc-grid-reorderRow-active .azc-grid-reorderRow-line{display:block}',moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow",["require","exports","Viva.Controls/Util/Viva.Util","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css"],(function(n,t,i,r,u,f,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ReorderRowExtension=void 0;f.injectCss(e);var c=window,o="azc-grid-reorderRow-active",h="azc-grid-reorderRow-enabled",l='attr: { "data-grid-reorder": true }',a="<col class='azc-grid-reorderRow-col' />",v="<th role='presentation' class='azc-grid-reorderRow-header azc-br-muted'><\/th>",y="<td role='presentation' class='azc-grid-reorderRow-cell azc-br-muted'><div><\/div><\/td>",p="application/x-azc-grid-row",w="data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",s={},b=(function(n){function t(t){var i=n.call(this)||this;return i._options=t=t||{},t.disabled===undefined&&(t.disabled=ko.observable(!1)),i._gridGuid=MsPortalFx.getUniqueId(),i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.afterCreate=function(){var n=this;this._widget.element.append(FxImpl.createElement("div",{"class":"azc-grid-reorderRow-line azc-bg-muted"}));ko.computed(this.ltm,(function(){n._widget.element.toggleClass(h,!n.options.disabled())}))},t.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("header"),r=n.getHtmlTemplate("colgroup");t.addAttribute("tr","data-bind",[l]).prepend("tr",y);i.prepend("tr",v);r.prepend("colgroup",a)},t.prototype.afterAttachEvents=function(){var n=this,t=this;this._widget.element.on("dragstart","[draggable]",this._dragstartEventHandler=function(t){if(!n._widget.options.extensionTrigger("shouldNotAllowDrag").some((function(n){return!!n}))){i.DataTransfer.isLegacyDataTransfer()&&c.getSelection().removeAllRanges();var u=MsPortalFx.getUniqueId(),f=t.target,r=new i.DataTransfer(t.originalEvent.dataTransfer),e=FxImpl.createElement("img");e.src=w;s[u]={rowMetadata:ko.dataFor(f),element:f};r.effectAllowed="move";r.setDragImage(e,-25,-25);r.setData(n._getMimeType(),u)}}).on("drop",this._dropEventHandler=function(t){var r=new i.DataTransfer(t.originalEvent.dataTransfer),f=r.types;if(f.some((function(t){return t===n._getMimeType()}))){r.dropEffect="move";var e=r.getData(n._getMimeType()).split(";"),o=e.map((function(n){return s[n].rowMetadata})),u={rowMetadata:o,clientX:t.originalEvent.pageX,clientY:t.originalEvent.pageY,position:n._positionLine(t)};t.preventDefault();setTimeout((function(){n._widget.trigger("rowReorder",i.cloneEvent(t,"rowReorder"),u);n._widget.options.events("reorder",u)}),0)}}).on("dragend",this._dragendEventHandler=function(){s={};n._widget.element.removeClass(o)}).on("mouseenter.azcGrid","tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",this._mouseenterEventHandler=function(){t.options.disabled()||$(this).closest(".azc-grid-row").attr("draggable","true")}).on("mouseleave.azcGrid","tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",this._mouseleaveEventHandler=function(){$(this).closest(".azc-grid-row").removeAttr("draggable")});$.querySelectorAll("html").on("dragover",this._dragoverEventHandler=function(t){if($.contains(n._widget.element[0],t.target)){var u=new i.DataTransfer(t.originalEvent.dataTransfer),r=u.types;r&&r.some((function(t){return t===n._getMimeType()}))&&(n._positionLine(t),t.preventDefault())}else n._widget.element.hasClass(o)&&n._widget.element.removeClass(o)})},t.prototype.getOrder=function(){return 21},t.prototype.getDependencies=function(){return[new r.FocusableRowExtension]},t.prototype.beforeCreate=function(){var n=this,t=["azc-grid-editableRow"];this._widget.options.extensions.forEach((function(i){if(t.indexOf(i.getName())>=0)throw new Error("The extension "+i.getName()+" is not compatible with the extension "+n.getName()+".");}))},t.prototype.beforeDestroy=function(){this._widget.element.removeClass(o).removeClass(h);this._dragstartEventHandler&&(this._widget.element.off("dragstart",this._dragstartEventHandler),this._dragstartEventHandler=null);this._dropEventHandler&&(this._widget.element.off("drop",this._dropEventHandler),this._dropEventHandler=null);this._dragendEventHandler&&(this._widget.element.off("dragend",this._dragendEventHandler),this._dragendEventHandler=null);this._dragoverEventHandler&&(this._widget.element.off("dragover",this._dragoverEventHandler),this._dragoverEventHandler=null);this._mouseenterEventHandler&&(this._widget.element.off("mouseenter.azcGrid",this._mouseenterEventHandler),this._mouseenterEventHandler=null);this._mouseleaveEventHandler&&(this._widget.element.off("mouseleave.azcGrid",this._mouseleaveEventHandler),this._mouseleaveEventHandler=null)},t.prototype.getName=function(){return t.Name},t.prototype.getAdditionalColumns=function(){return 1},t.prototype._getMimeType=function(){return(p+"-"+this._gridGuid).toLowerCase()},t.prototype._positionLine=function(n){var e=$(n.target),i=null,t,u;if(e.hasClass("azc-grid-reorderRow-line"))i=this._savedIndex;else if($.contains(this._widget.element[0],n.target)){if(this._widget.element.hasClass(o)||this._widget.element.addClass(o),t=e.closest("[data-grid-reorder=true]"),u=n.originalEvent,t.length===0){var s=this._widget.element.find("[data-grid-reorder=true]"),h=s.first(),a=s.last();t=u.pageY<=h.offset().top?h:a}i=t.index();var c=t.outerHeight(),f=t.offset(),r=t.position(),l=this._widget.element.find(".azc-grid-reorderRow-line");f.top=Math.floor(f.top);r.top=Math.floor(r.top);u.pageY-f.top<c/2?l.css("top",Math.round(r.top)):(l.css("top",Math.round(r.top+c)),i++);this._savedIndex=i}else this._widget.element.removeClass(o);return i},t.prototype.computeLeftMarginWidth=function(){return 16},t.Name="azc-grid-reorderRow",t})(u.Extension);t.ReorderRowExtension=b}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow"],(function(n,t,i,r,u){"use strict";var f;return (function(n){var f=MsPortalFx.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.beforeDestroy=function(){this._handler&&(this._widget._instance.element.off("rowReorder",this._handler),this._handler=null)},t.prototype.getExtension=function(n){var t=n||{},i=t.reorderRow||{},r=i.disabled;return new u.ReorderRowExtension({disabled:r})},t.prototype.initializeExtension=function(){var t=this._widget,n=t.options;t._instance.element.on("rowReorder",this._handler=function(i,r){var w=n.extensionsOptions||{},h=w.reorderRow||{},b=h.automaticallyReorderRows,c=h.rowReorder,l=r.rowMetadata,f,s,y,p;if(b!==!1){var u=n.items.peek(),e=[],a=Math.min(u.length,Math.max(0,r.position));l.forEach((function(n){e.push(n.item)}));var k=function(n){return e.indexOf(n)>=0?!0:!1},v=0,o=!1;for(f=0,s=0;f<u.length;f++,s++)y=u[f],k(y)&&(o||(n.items.valueWillMutate(),o=!0),u.splice(f,1),f--,s<a&&v++);o&&(u.splice.apply(u,[a-v,0].concat(e)),n.items.valueHasMutated())}c&&(p={rowMetadata:l.map((function(n){return t.getRowMetadata(n.item)})),position:r.position},c(i,p))})},t.prototype.getName=function(){return"ReorderRowExtension"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);n.ReorderRowExtension=t;i.registerPlugin(f.Extensions.ReorderRow,t)})(f||(f={})),f}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css",["module"],(function(n){"use strict";return{css:".azc-grid-vscroll.azc-grid{height:100%}.azc-grid-vscroll .azc-grid-root{height:100%;overflow-y:hidden}.azc-grid-vscroll .azc-grid-area{height:100%;overflow-y:hidden}.azc-grid-vscroll .azc-grid-container{height:100%;overflow-y:hidden;display:flex;flex-direction:column}.azc-grid-vscroll .azc-grid-header{flex:1 0 auto;min-height:0}.azc-grid-vscroll .azc-grid-tableContainer{height:100%;overflow-y:hidden;flex:1 1 auto;min-height:0;display:flex;flex-direction:column}.azc-grid-vscroll .azc-grid-tableHead{flex:1 0 auto;min-height:0}.azc-grid-vscroll .azc-grid-tableScrollContainer{height:100%;flex:1 1 auto;min-height:0;overflow-y:auto}.azc-grid-vscroll .azc-grid-footer{flex:1 0 auto;min-height:0}.azc-grid-hscroll .azc-grid-root{overflow-x:hidden}.azc-grid-hscroll .azc-grid-area{overflow-x:hidden}.azc-grid-hscroll .azc-grid-container{overflow-x:hidden}.azc-grid-hscroll .azc-grid-tableContainer{overflow-x:hidden}.azc-grid-hscroll .azc-grid-tableHeader{margin-right:17px}.azc-grid-hscroll .azc-grid-tableScrollContainer{overflow-x:auto}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable",["require","exports","MsPortalImpl/Base/Base.FeatureDetection","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Base/Base.FeatureDetection","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css"],(function(n,t,i,r,u,f,e){"use strict";function w(){return{dataProvider:null,horizontal:!0,vertical:!0}}var s,c;Object.defineProperty(t,"__esModule",{value:!0});t.ScrollableExtension=t.AsyncItem=void 0;f.injectCss(e);var l="<!-- ko template: { name: ko.pureComputed(function () { return  $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems().length ? 'bodyCore' : 'bodyNoItems'; }), data: $data } --><!-- /ko -->",a="<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='presentation' class='azc-grid-scrollable-above' aria-hidden='true'><\/tr><!-- ko foreach: $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems --><!-- ko template: { name: template, data: item } --><!-- /ko --><!-- /ko --><\/tbody>",v="<tr role='row' class='azc-grid-scrollable-loading'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",y="<tr role='row' class='azc-grid-scrollable-error'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",o=Math.floor,h=Math.min,p=MsPortalFx.disposeDisposable;s=(function(){function n(n,t,i){var r=this;this.index=n;this.item=ko.observable(i);this.state=ko.observable(t);this.template=ko.pureComputed((function(){switch(r.state()){case 0:return"bodyRowsLoading";case 2:return"bodyRowsError";case 1:default:return"bodyRows"}}))}return n})();t.AsyncItem=s;c=(function(n){function t(t){var i=n.call(this)||this;return i._disposables=[],t=i._options=__assign(__assign({},w()),t),i.hscroll=t.horizontal,i.vscroll=t.vertical,i._vscrollVirtualized=t.vertical&&!!t.dataProvider,i._rowHeight=ko.observable(t.defaultRowHeight||32),i._totalCount=ko.observable(0),i._viewportHeight=ko.observable(0),i._firstObservableRowIndex=ko.observable(1),i._vscrollVirtualized&&(i.asyncItems=ko.observableArray(),i._resetAsyncItemCache()),i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.afterCreate=function(){var n=this,t=this._widget.element,i;t.toggleClass("azc-grid-hscroll",this.hscroll);t.toggleClass("azc-grid-vscroll",this.vscroll);this.ltm.registerForDispose((function(){t.removeClass("azc-grid-hscroll azc-grid-vscroll")}));this._scrollContainer=t.find(".azc-grid-tableScrollContainer");this._scrollHeader=t.find(".azc-grid-tableHead");i=0;this._disposables.push(this._scrollContainer.setEvents(["scroll.azcGridScrollable",function(){var t=n._scrollContainer[0].scrollTop;t!==i?(i=t,n._update()):n._updateHeader();n.hscroll&&(n._scrollHeader[0].scrollLeft=n._scrollContainer[0].scrollLeft)},]));this.hscroll&&this._disposables.push(this._scrollHeader.setEvents(["scroll.azcGridScrollable",function(){n._scrollContainer[0].scrollLeft=n._scrollHeader[0].scrollLeft},]));this._vscrollVirtualized&&(this.options.dataProvider.totalItemCount.subscribe(this._widget.ltm,(function(){n._activePageRequest||(n._resetAsyncItemCache(),n._update())})),this._widget.scrollWidth.subscribeAndRun(this._widget.ltm,(function(t){var i=n._scrollContainer.find(".azc-grid-tableContent");i.width(t)})));ko.reactor(this.ltm,(function(){var t,i;n._options.dataProvider?t=n._options.dataProvider.totalItemCount():(i=n._widget.options.items()||[],t=i.length);n._totalCount(t)}));this._update(!0)},t.prototype.afterSetTemplates=function(n){this._vscrollVirtualized&&n.setTemplate({body:l,bodyCore:a,bodyRowsLoading:v,bodyRowsError:y})},t.prototype.getDefaultColumnProperties=function(){return{}},t.prototype.beforeDestroy=function(){this._cancelAsyncUpdate();p(this._disposables);this._disposables=[];this._asyncItemCache=null;this._activePageRequest=null},t.prototype.getName=function(){return t.Name},t.prototype.getOrder=function(){return 15},t.prototype.getAriaRowCount=function(){return this.options.dataProvider&&this.options.dataProvider.totalItemCount?this.options.dataProvider.totalItemCount:null},t.prototype.getFirstObservableRowIndexObservable=function(){return this._firstObservableRowIndex},t.prototype.shouldNotAllowSelectAll=function(){return this._vscrollVirtualized},t.prototype.reset=function(){this._resetAsyncItemCache();this._vscrollVirtualized&&this._widget.options.items.removeAll();var n=this._scrollContainer;n&&(n.scrollLeft(0),n.scrollTop(0),this._update(!0))},t.prototype.onSizeChanged=function(n,t,i,r){this._vscrollVirtualized&&(i?(this._viewportHeight(this._scrollContainer&&this._scrollContainer[0]&&this._scrollContainer[0].offsetHeight||0),this._update()):r&&this._updateHeader())},t.prototype._resetAsyncItemCache=function(){this._asyncItemCache=[];this._asyncItemCache.length=2048},t.prototype._updateHeader=function(){var n=this._scrollContainer,t,i,r,u;n&&(t=n.find(".azc-grid-tableHeader"),t.length&&(i=-n.scrollLeft(),t.css("left",i<0?i+"px":""),r=MsPortalFx.truncate(n[0].offsetWidth-n[0].clientWidth),t.css("width",r>0?"calc(100% - "+r+"px)":""),u=this._widget.options.showHeader?t.outerHeight()||40:0,n.parent(".azc-grid-tableContainer").css("padding-top",u+"px")))},t.prototype._update=function(n){this._updateHeader();this._vscrollVirtualized&&this._updateViewportAsync(n)},t.prototype._updateViewportAsync=function(n){var t=this,i;if(this._cancelAsyncUpdate(),n)try{this._updateViewport(n);this._updateHeader()}catch(r){}else i=this._options.updateViewportAsyncDebounceTime||256,this._updateViewportAsyncTimeout=setTimeout((function(){if(t._updateViewportAsyncTimeout)try{t._updateViewport();t._updateHeader()}catch(n){}}),i)},t.prototype._cancelAsyncUpdate=function(){this._updateViewportAsyncTimeout&&(clearTimeout(this._updateViewportAsyncTimeout),this._updateViewportAsyncTimeout=null)},t.prototype._getRowHeight=function(){var n,t=this._scrollContainer.find(".azc-grid-full .azc-grid-row:eq(0)");return t.length&&(n=t.height()),n=n||this._options.defaultRowHeight||32,this._rowHeight(n),n},t.prototype._getTotalScrollHeight=function(n,r){var u=o(t._maxElementHeightFactor*i.getMaxElementHeight()),f=o(n*r);return h(f,u)},t.prototype._updateContentHeight=function(n,t){var i=this._widget.element.find(".azc-grid-tableContent");i.height(n);i.css("overflow-y",t?"hidden":"")},t.prototype._updateAboveRowHeight=function(n){var t=this._scrollContainer.find(".azc-grid-scrollable-above");t.css("height",n||"")},t.prototype._updateViewport=function(){var t=this,c=this.options.dataProvider.totalItemCount(),n=c,i,r;MsPortalFx.isNullOrUndefined(n)&&(n=100);i=this._getRowHeight();r=this._getTotalScrollHeight(n,i);this._updateContentHeight(r,!0);var f=this._scrollContainer[0],l=f.offsetHeight||50*i,w=f.scrollTop||0,a=f.scrollHeight||r||l,v=o(n*w/a),e=Math.ceil(l/i),u=Math.max(v-e,0),b=h(v+e+e,n>100?n:100),s=b-u,k=o(a*u/n);this._updateAboveRowHeight(k);var y=this._activePageRequest={},p=Math.min(c||0,s),d=this._renderRows(u,s,p);this._request(y,d,u,s,p).finally((function(){y===t._activePageRequest&&(t._activePageRequest=null,n=t.options.dataProvider.totalItemCount(),r=t._getTotalScrollHeight(n,i),t._updateContentHeight(r,!1),t._updateHeader(),t._firstObservableRowIndex(u+1))}))},t.prototype._renderRows=function(n,t,i){for(var c,l,u=[],f=this._asyncItemCache,e=0;e<t;e++){var o=n+e,r=void 0,h=o%f.length;r=f[h];r&&r.index===o||(r=new s(o,0,null),f[h]=r,r.state()===2&&r.state(0));u.push(r)}return c=ko.utils.compareArrays(this.asyncItems(),u.slice(0,i),{sparse:!0}),l=ko.utils.createArraySplices(c,!0),this._saveFocus(),ko.utils.applyArraySplices(this.asyncItems,l),this._restoreFocus(),u},t.prototype._updateGridItems=function(n){var i,r,t;n=n||[];n.length&&(t=this._widget.options,i=t.items.peek(),i?(r=[i.length,0],n.forEach((function(n){i.indexOf(n)<0&&r.push(n)})),r.length>2&&t.items.splice.apply(t.items,r)):t.items(n))},t.prototype._request=function(n,t,i,r,u){var f=this;return this.options.dataProvider.fetch(i,r).then((function(i){var r,e=[];i=i||[];f._saveFocus();t.forEach((function(n,t){var r=i[t];r?(n.item.peek()!==r&&n.item(r),n.state.peek()!==1&&n.state(1),e.push(r)):n.state(2)}));n===f._activePageRequest&&(i.length<u?f.asyncItems.splice(i.length,u-i.length):i.length>u&&(r=f.asyncItems).splice.apply(r,__spreadArray([u,0],t.slice(u,i.length))),f._updateGridItems(e));f._restoreFocus()}),(function(){t.forEach((function(n){n.state()!==1&&n.state(2)}))}))},t.prototype.shouldRetainRowMetadata=function(){return!0},t.prototype.scrollTo=function(n){this._scrollContainer[0].scrollTop=n/this._options.dataProvider.totalItemCount.peek()*this._scrollContainer[0].scrollHeight;this._updateViewport()},t.prototype.computeAvailableWidthDelta=function(){var t=0,n;return this.vscroll&&(n=this._totalCount(),n&&n*this._rowHeight()>this._viewportHeight()&&(t=-u.getScrollbarWidth())),t},t.prototype._saveFocus=function(){this._widget.options.extensionTrigger("saveFocus")},t.prototype._restoreFocus=function(){this._widget.options.extensionTrigger("restoreFocus")},t.Name="azc-grid-scrollable",t._maxElementHeightFactor=.8,t})(r.Extension);t.ScrollableExtension=c}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css",["module"],(function(n){"use strict";return{css:'.azc-grid.azc-grid-resizableColumn .azc-grid-tableContainer{position:relative}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle{position:absolute;right:-5px;top:0;height:33px;width:10px;cursor:col-resize;z-index:1;display:flex;justify-content:center}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line{width:1px;height:100%;opacity:0}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-ghostLine{position:absolute;width:1px;top:0;z-index:1}.azc-grid.azc-grid-resizableColumn .azc-grid-show-handles .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line{opacity:1}.azc-grid.azc-grid-resizableColumn thead:hover .azc-grid-resizableColumn-handle-line{opacity:1}.azc-grid.azc-grid-resizableColumn.azc-grid-resizing .azc-grid-resizableColumn-handle-line{opacity:1}.azc-grid.azc-grid-resizableColumn.azc-grid-resizing *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-grid.azc-grid-resizableColumn .azc-grid-headerlabel::after{content:""}',moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Base/Base.KeyboardHelper","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css"],(function(n,t,i,r,u,f,e){"use strict";function a(){return{resizable:ko.observable(!0)}}function h(n,t,i){var r=t!==undefined?Math.max(n,t):n;return i!==undefined?Math.min(r,i):r}var c;Object.defineProperty(t,"__esModule",{value:!0});t.ResizableColumnExtension=void 0;f.injectCss(e);var o=window,s="azc-grid-resizing",l="<!-- ko if: $ctl.getPlugin(\"azc-grid-resizableColumn\").options.resizable() && hasHandle() --><div class='azc-grid-resizableColumn-handle' role='presentation'><div class='azc-grid-resizableColumn-handle-line azc-bg-muted' role='presentation'><\/div><\/div><!-- /ko -->";c=(function(n){function t(t){var i=n.call(this)||this;return i._options=$.extend(a(),t),i}return __extends(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("headerCell");t.append("div",l)},t.prototype.afterCreate=function(){var n=this;this._hscroll()||this._widget.options.columns.subscribeAndRun(this.ltm,(function(t){t.length&&(n._lastColumnObject&&n._lastColumnObject.hasHandle(!0),n._lastColumnObject=t[t.length-1],n._lastColumnObject.hasHandle(!1))}))},t.prototype.afterAttachEvents=function(){var n=this;this._ltm.registerForDispose(this._widget.element.setEvents(["mousedown.azcGridResizableColumn",".azc-grid-resizableColumn-handle",function(t){var i,r,u;(n._mouseDownPosition=t.pageX,n._handle=$(t.currentTarget),n._columns=n._widget.element.find("th"),i=n._handle.parent().closest("th"),r=ko.dataFor(i[0]),t.preventDefault(),r.disableResizable())||(u=n._getNextResizableColumn(n._columns,n._widget._columns.indexOf(r)+1),n._hscroll()||u)&&n._resizeStart(i,u)}],["keydown.azcGridResizableColumn",".azc-grid-headerCell",function(t){var i;if(r.isCtrlOrCommandOnly(t)){i=0;switch(t.keyCode){case 37:i=-20;break;case 39:i=20}if(i){n._columns=n._widget.element.find("th");var h=$(t.currentTarget).closest("th"),c=ko.dataFor(h[0]),l=n._widget._columns.indexOf(c),o=n._getNextResizableColumn(n._widget.element.find("th"),l+1);if(o){var a=ko.dataFor(o[0]),u=h.width(),f=o.width(),e=u+i,s=f-i;e<20?(s=f+u-20,e=20):s<20&&(e=u+f-20,s=20);n._setColumnWidth(c,u,e,a,f)}}}},]))},t.prototype.getName=function(){return t.Name},t.prototype.getOrder=function(){return 16},t.prototype.beforeDestroy=function(){this._mouseUpEventHandler&&($(o.document).off("mouseup.azcGridResizableColumn",this._mouseUpEventHandler),this._mouseUpEventHandler=null);this._mouseMoveEventHandler&&($(o.document).off("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler),this._mouseMoveEventHandler=null);this._widget.element.removeClass(s)},t.prototype.getDefaultColumnProperties=function(){return{disableResizable:ko.observable(!1),hasHandle:ko.observable(!0)}},t.prototype._resizeStart=function(n,t){var i=this,a=this._widget.element.find(".azc-grid-tableHeader"),v=this._widget.element.find(".azc-grid-tableContent"),r=$(FxImpl.createElement("div",{"class":"azc-grid-resizableColumn-ghostLine fxs-portal-selected"})),u=this._widget.element.find(".azc-grid-tableContainer"),f=n.offset().left+20,e=this._hscroll()?undefined:t.offset().left+t.width()-20,y=this._handle.find(".azc-grid-resizableColumn-handle-line"),p=y.offset().left,w=this._tableOffset(u,p),c,l;r.offset({left:w});r.css("position","absolute");c=a.height();l=v.height();r.height(c+l);u.append(r);$(o.document).on("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler=function(n){var t=n.pageX,u=h(t,f,e);n.preventDefault();i._widget.element.addClass(s);r.offset({left:u})});$(o.document).one("mouseup.azcGridResizableColumn",this._mouseUpEventHandler=function(u){var l=u.pageX,a=h(l,f,e),v=t?ko.dataFor(t[0]):undefined,y=ko.dataFor(n[0]);$(o.document).off("mousemove.azcGridResizableColumn",i._mouseMoveEventHandler);i._mouseMoveEventHandler=null;i._widget.element.removeClass(s);r.remove();var c=n.width(),p=t?t.width():undefined,w=a-i._mouseDownPosition,b=c+w;i._setColumnWidth(y,c,b,v,p)})},t.prototype._setColumnWidth=function(n,t,r,u,f){if(r!==t){var o=i.parseWidth(n.width&&n.width.peek()),y=o.units,p=o.value,s=this._widget.convertPixelsToUnits(r,y,p,t),h=r,c=""+s.value+s.units;if(this._hscroll())n.nMinWidth(h),n.snapToMin=!0,n.width&&n.width(c);else{var l=u.nMinWidth.peek(),a=i.parseWidth(u.width&&u.width.peek()),w=a.units,b=a.value,e=f+t-r,v=this._widget.convertPixelsToUnits(e,w,b,f),k=e<l?e:l,d=""+v.value+v.units;n.nMinWidth(h);u.nMinWidth(k);n.width&&n.width(c);u.width&&u.width(d)}}},t.prototype._getNextResizableColumn=function(n,t){var f=this._widget._columns(),u,e,i,o,s,r;if(t===f.length)u=null;else if(i=f[t],o=i.disableResizable?i.disableResizable():!1,s=i.hiddenInCollapsed?i.hiddenInCollapsed():!1,o||s&&this._widget.collapsed())t++,u=this._getNextResizableColumn(n,t);else{for(r=0;r<n.length;r++)if(ko.dataFor(n.eq(r)[0]).columnId===i.columnId){e=n.eq(r);break}u=e}return u},t.prototype._hscroll=function(){var n=this._widget.getPlugin(u.ScrollableExtension.Name);return n&&n.options.horizontal},t.prototype._tableOffset=function(n,t){return t-n.offset().left},t.Name="azc-grid-resizableColumn",t})(i.Extension);t.ResizableColumnExtension=c}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn"],(function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ResizableColumnExtension=void 0;var e=MsPortalFx.ViewModels.Controls.Lists.Grid,f=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getExtension=function(n){var t=n,i=t&&t.resizableColumn;return new u.ResizableColumnExtension(i)},t.prototype.getName=function(){return"ResizableColumn"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);t.ResizableColumnExtension=f;i.registerPlugin(e.Extensions.ResizableColumn,f)}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable"],(function(n,t,i,r,u,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ScrollableExtension=void 0;var e=(function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._filterQueryString=ko.observable(null),t}return __extends(t,n),t.prototype.getExtension=function(n){var u=this,e=n,t=e&&e.scrollable,r={dataProvider:null,horizontal:t&&t.horizontal,vertical:t&&t.vertical},i=t&&t.dataNavigator;return this._vscrollVirtualized=r.vertical&&!!i,i&&(r.dataProvider={totalItemCount:ko.pureComputed((function(){var n,t=i.metadata();return t&&(n=t.totalItemCount),n})),fetch:function(n,t){var r=null,f=u._widget.options.sortByList;return f&&(r=f()),Q(i.loadBySkipTake(n,t,u._filterQueryString(),r)).then((function(){return Q(i.items())}),(function(n){var t=FxImpl.createError("This error is due to a rejected loadBySkipTake call from a pageable grid.",{innerErrors:n});return t._sourceErrorLevel=0,Q.reject(t)}))}}),this._azcScrollableExtension=new f.ScrollableExtension(r)},t.prototype.initializeExtension=function(){var f=this,i,n,t,r;this._vscrollVirtualized&&(i=this._widget._instance.getPlugin(u.FilterableExtension.Name),i&&(n=this._filterQueryString,t=i.options,t.serverFilter()&&n(t.queryString()),r=t.filterCallback,r()||r((function(t){if(n()!==t)return n(t),f.resetExtension()}))))},t.prototype.resetExtension=function(){var n=this;return Q().then((function(){n._vscrollVirtualized&&n._azcScrollableExtension&&n._azcScrollableExtension.reset()}))},t.prototype.beforeDestroy=function(){this._azcScrollableExtension=null},t.prototype.getName=function(){return"Scrollable"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);t.ScrollableExtension=e;i.defaultPlugins.push(e)}));
define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css",["module"],(function(n){"use strict";return{css:".azc-grid-sortableColumn .azc-grid-sortableColumn-target{display:flex;flex:1 1 auto;cursor:pointer}.azc-grid-sortableColumn .fxc-ascending .msportalfx-descend{opacity:.25}.azc-grid-sortableColumn .fxc-descending .msportalfx-ascend{opacity:.25}.azc-grid-sortableColumn .azc-grid-sortableColumn-image-container{display:flex;flex:0 0 auto;align-items:center;justify-content:center;position:absolute;top:0;right:9px}.azc-grid-sortableColumn .azc-grid-sortableColumn-sortImage{width:16px;height:32px;padding-top:3px}.azc-grid-sortableColumn .azc-grid-headerlabel{flex:1 1 calc(100% - 11px);margin-right:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:15px}",moduleId:n.id}}));
define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn",["require","exports","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","_generated/MsPortalImpl/Svg/Startup/SortArrows.svg","FxInternal/Css","_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SortableColumnExtension=void 0;o.injectCss(s);var h="azc-grid-sortableColumn",a=h+"-target",l="."+a,c=u.Viva.Grid.Sortable,v="<span role='columnheader' aria-readonly='true' class='azc-grid-headerCell' data-bind='keyedCss: { grid1SortableColumn: $ctl.getPlugin(\""+h+'")._getSortClasses(sortOrder())}, attr: { "aria-sort": $ctl.getPlugin("'+h+"\")._getAriaSort(sortOrder()), id: columnId }'><div data-bind='text: name' class='azc-grid-headerlabel'><\/div><div class='azc-grid-sortableColumn-image-container'>"+("<div class='azc-grid-sortableColumn-sortImage' data-bind='image: $ctl.getPlugin(\""+h+"\").sortIcon'>")+"<\/div><\/div><\/span>",y=(function(n){function t(t){var i=n.call(this)||this;return i.sortIcon=e,i._disposables=[],i._sortByList=[],i._sortInProgress=!1,i._options=t||{},i}return __extends(t,n),t.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t)},Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.prototype.afterSetTemplates=function(n){var t=n.getTemplate("headerCellContent");n.setTemplate("headerCellContent","<!-- ko if: sortable -->"+v+"<!-- /ko --><!-- ko ifnot: sortable -->"+t+"<!-- /ko -->")},t.prototype.afterCreate=function(){var n=this,u=this._options,t=this._widget,i=t.options,r=this._sortByList=i.sortByList();u.sortClientSide&&r.length&&this._sortCallback(r);i.sortByList.subscribe(t.ltm,(function(t){t!==n._sortByList&&n._sortCallback(t)}))},t.prototype._sortCallback=function(n){var t=this;this._sortInProgress||(this._sortInProgress=!0,this._sortByList=n,this._widget.options.actions.sort(n).finally((function(){t._sortInProgress=!1})),this._ariaLiveUpdate(n))},t.prototype.afterAttachEvents=function(){var n=this,t=this._widget.getPlugin(i.FocusableRowExtension.Name),r=this._widget.element;this._disposables.push(r.setEvents(["click",l,function(t){var r=ko.dataFor(this),s=r.itemKey,i=n._sortByList.slice(),h=f.isCtrlOrCommandOnly(t),o=r.sortOrder()===1?2:1,u={itemKey:r.itemKey,sortOrder:o},e;t.preventDefault();n._sortInProgress||(h?(e=MsPortalFx.findIndex(i,(function(n){return n.itemKey===s})),e>=0?i[e]=u:i.push(u)):(n._resetColumns(),i=[u]),r.sortOrder(o),n._sortCallback(i))}],["keydown",l,function(n){f.getModifierKeys(n)===0&&(n.which===13||n.which===32)&&($(this).trigger("click"),n.preventDefault())}],["keydown.azc-grid-sortableColumn",l,t?function(n){n.which===9&&f.getModifierKeys(n)===0&&t._focusCurrentlyFocusableRow(n)}:null]))},t.prototype._ariaLiveUpdate=function(n){var i=this,t=[],u=n.map((function(n){return{displayName:MsPortalFx.find(i._widget.options.columns(),(function(t){return t.itemKey===n.itemKey})).name(),sortBy:n}})),r;u.forEach((function(n,r){r===0?t.push(c.sortingby):t.push(c.then);var u=i._getAriaSort(n.sortBy.sortOrder)==="ascending"?c.ascending:c.descending;t.push(n.displayName,u)}));r=t.join(" ");this._widget._ariaLive(r)},t.prototype._resetColumns=function(){var n=this._widget.options,t=n.sortByList();t.length!==0&&n.columns().forEach((function(n){n.sortOrder(0)}))},t.prototype._getAriaSort=function(n){switch(n){case 1:return"ascending";case 2:return"descending"}return"none"},t.prototype._getSortClasses=function(n){return a+" fxc-"+this._getAriaSort(n)},t.prototype.getDefaultColumnProperties=function(){return{sortable:!0,sortOrder:ko.observable(0)}},t.prototype.beforeDestroy=function(){MsPortalFx.disposeDisposable(this._disposables);this._disposables=[]},t.prototype.getName=function(){return t.Name},t.Name=h,t})(r.Extension);t.SortableColumnExtension=y}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn"],(function(n,t,i,r,u){"use strict";var f;return (function(n){var f=MsPortalFx.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getExtension=function(n){var t=n,i=t&&t.sortableColumn,r=i.dataNavigator;return new u.SortableColumnExtension({sortClientSide:!r,sortCallback:i.sortCallback||null})},t.prototype.getName=function(){return"SortableColumn"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);n.SortableColumnExtension=t;i.registerPlugin(f.Extensions.SortableColumn,t)})(f||(f={})),f}));
define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1",["require","exports","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl","MsPortalImpl/Weave/Util","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn"],(function(n,t,i,r){"use strict";var f,u,e;Object.defineProperty(t,"__esModule",{value:!0});t.Grid1=t.TrustedWidget=t.Widget=t.GridExtension=t.x=void 0;t.x=5;f=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(i.GridExtension);t.GridExtension=f;u=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(i.Widget);t.Widget=u;e=(function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t})(i.TrustedWidget);t.TrustedWidget=e;t.Grid1=r.createControlComponentForKO({widgetCtor:u})}))