define("FxInternal/Controls/Pager",["require","exports","FxInternal/Controls/Base/Base"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var r=(function(n){function t(t,i){var r=n.call(this,t)||this;return r.controlType=209,r.state=ko.observable(__assign({pageNumber:0,totalPageCount:0},i.state)),r.state.extend({notify:"always"}),r.cssClass=MsPortalFx.initObservable(i.cssClass,""),r.disabled=MsPortalFx.initObservable(i.disabled,!1),r.visible=MsPortalFx.initObservable(i.visible,!0),r.loading=ko.observable(!1),r._loadPage=i.loadPage,r.canLoadNextPage=ko.pureComputed((function(){var n=!r.disabled()&&!r.loading(),t,i,u;return n&&(t=r.state(),i=t.pageNumber||0,n=i>0,n&&(u=t.totalPageCount||0,n=i<u)),n})),r.canLoadPreviousPage=ko.pureComputed((function(){var n=!r.disabled()&&!r.loading(),t,i,u;return n&&(t=r.state(),i=t.pageNumber||0,n=i>1,n&&(u=t.totalPageCount||0,n=i<=u)),n})),r.canLoadSelectedPage=ko.pureComputed((function(){var n=!r.disabled()&&!r.loading(),t,i;return n&&(t=r.state(),i=t.totalPageCount||0,n=i>1),n})),r}return __extends(t,n),t.prototype.canLoadPage=function(n){var t=n>0&&!this.disabled.peek()&&!this.loading.peek(),i,r;return t&&(i=this.state.peek(),r=i.totalPageCount||0,t=n===1||n<=r),t},t.prototype._loadPageInternal=function(n){var t=this,i=!!this._loadPage;return i?(this.loading(!0),this._loadPage(n,this).then((function(n){return t.state(n),!0})).catch((function(n){t.state({pageNumber:0,totalPageCount:0});throw n;})).finally((function(){t.loading(!1)}))):Q(i)},t.prototype.loadNextPage=function(){var n=this;return ko.ignoreDependencies((function(){var t=n.canLoadNextPage.peek(),i,r;return t?(i=n.state.peek(),r=(i.pageNumber||0)+1,n._loadPageInternal(r)):Q(t)}))},t.prototype.loadPreviousPage=function(){var n=this;return ko.ignoreDependencies((function(){var t=n.canLoadPreviousPage.peek(),i,r;return t?(i=n.state.peek(),r=(i.pageNumber||0)-1,n._loadPageInternal(r)):Q(t)}))},t.prototype.loadPage=function(n){var t=this;return ko.ignoreDependencies((function(){var i=t.canLoadPage(n);return i?t._loadPageInternal(n):Q(i)}))},t})(i.ViewModel);t.ViewModel=r}));
define("Fx/Controls/Pager",["require","exports","FxInternal/Controls/Pager"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;t.create=r}));
define("FxInternal/Controls/TriStateCheckBox",["require","exports","FxInternal/Controls/Base/FormsBase"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var r=(function(n){function t(t,i){var r=n.call(this,t,i)||this;return i=i||{},r.controlType=22,r.canUserSetIndeterminate=ko.observable(i.userCanSetIndeterminate!==!1),r.inlineLabel=i.labelOnRight||!1,r.isAMD=!0,r}return __extends(t,n),t})(i.ViewModel);t.ViewModel=r}));
define("Fx/Controls/TriStateCheckBox",["require","exports","FxInternal/Controls/TriStateCheckBox"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;t.create=r}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Util",["require","exports"],(function(n,t){"use strict";function c(n,t){for(var e=r(t),o=e.length,u,i=0;i<o;i++)u=e[i],f.value=t[u],h(n,u,f)}function e(n,t){if(t)for(var f=r(t),e=f.length,i=void 0,u,i=0;i<e;i++)u=f[i],n[u]=t[u];return n}function l(n){return n&&n._msPortalFxInternal}function a(n){var t;return function(){return t||(t=n()),t}}function v(){var r,u,i=arguments.length-2,n,t,f=function(t,i){ko.isObservable(t)?(n[i]=t.peek(),t.subscribe(r,(function(t){n[i]=t;u.apply(void 0,n)}))):n[i]=t};if(i)for(r=arguments[0],u=arguments[i+1],n=new Array(i),t=0;t<i;t++)f(arguments[t+1],t)}function y(){var u,r,n,i=arguments.length-2,t,f=function(t,i){t&&t.peek?(n[i]=t.peek(),t.subscribe(u,(function(t){n[i]=t;r.apply(void 0,n)}))):n[i]=t};if(i)for(u=arguments[0],r=arguments[i+1],n=new Array(i),t=0;t<i;t++)f(arguments[t+1],t);r.apply(void 0,n)}function i(n,t){for(var i,f=n.length,u,r=0;r<f;r++)i=n[r],u=i.subscription,u&&(!t||t==="sweep"&&i.disposing?(i.subscription=null,i.disposing=!1,u.dispose()):t==="mark"&&(i.disposing=!0))}function p(){var u=arguments[0],o;if(u&&!u.isDisposed()){for(var t=arguments.length-2,f=new Array(t),r=new Array(t),e=arguments[t+1],s=function(n,t){return n&&n.peek?function(){return t.subscription||(t.subscription=n.subscribe((function(){t.disposing||(i(r,"mark"),e.apply(void 0,f),i(r,"sweep"))}))),t.disposing=!1,n.peek()}:function(){return n}},n=void 0,n=0;n<t;n++)o=r[n]={subscription:null,disposing:!1},f[n]=s(arguments[n+1],o);u.registerForDispose((function(){return i(r)}));e.apply(void 0,f)}}function o(){var t,i,r,n=arguments.length;return n>2&&(t=arguments[0],i=u.call(arguments,1,n-1),r=arguments[n-1]),s(t,i,r)}function s(n,t,r){var f=ko.observable(),h;if(n&&!n.isDisposed()){for(var o=t.length,s=new Array(o),e=new Array(o),c=function(n,t){return n&&n.peek?function(){return t.subscription||(t.subscription=n.subscribe((function(){if(!t.disposing){i(e,"mark");var u=f.peek(),n=r.apply(void 0,s);u!==n&&f(n);i(e,"sweep")}}))),t.disposing=!1,n.peek()}:function(){return n}},u=void 0,u=0;u<o;u++)h=e[u]={subscription:null,disposing:!1},s[u]=c(t[u],h);n.registerForDispose((function(){return i(e)}));f(r.apply(void 0,s))}return f}function w(){var t=u.call(arguments),n;return ko.pureComputed((function(){return n||(n=o.apply(null,t)),n()}))}function b(n,t){for(var u=r(t),h=u.length,f,e=[],c=!1,o,i=0;i<h;i++)f=t[u[i]],ko.isObservable(f)&&(c=!0),e.push(f);return o=function(n){var t={};for(i=0;i<h;i++)t[u[i]]=n[i];return t},c?s(n,e,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o(t.map((function(n){return n()})))})):o(e)}function k(n){return n===undefined||n===null?"":typeof n=="string"?n:""+n}Object.defineProperty(t,"__esModule",{value:!0});t.isArray=t.convertToString=t.computedObject=t.pureComputed=t.computed=t.reactor=t.subscribeAndRun=t.subscribe=t.lazy=t.internal=t.defProps=t.extend=t.defLocalProps=void 0;var h=Object.defineProperty,r=Object.keys,u=Array.prototype.slice,f={enumerable:!1};t.defLocalProps=c;t.extend=e;t.defProps=e;t.internal=l;t.lazy=a;t.subscribe=v;t.subscribeAndRun=y;t.reactor=p;t.computed=o;t.pureComputed=w;t.computedObject=b;t.convertToString=k;t.isArray=Array.isArray}));
define("FxInternal/Utils/KnockoutArrayUtils",["require","exports"],(function(n,t){"use strict";function i(n,t,i){var u=new Map,r=ko.observableArray();return r.get=function(n){return u.get(n)},r.subscribeArrayBulkChanges(n,(function(n,i){i.forEach((function(n){u.delete(t(n))}));n.forEach((function(n){u.set(t(n),n)}))})),i=ko.unwrap(i),i&&r(i.slice()),r}function r(n,i,r){return n.map((function(n){var u=MsPortalFx.clone(n);return u.value=n.status===t.EditStatusAdded?MsPortalFx.isUndefined(n.moved)?r(n.value):i[n.moved]:i[n.index],u}))}Object.defineProperty(t,"__esModule",{value:!0});t.mapArrayEdits=t.EditStatusRetained=t.EditStatusDeleted=t.EditStatusAdded=t.observableArrayMap=void 0;t.observableArrayMap=i;t.EditStatusAdded="added";t.EditStatusDeleted="deleted";t.EditStatusRetained="retained";t.mapArrayEdits=r}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Base",["require","exports","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";function p(n){return!!n.children||!!n.getChildren}function w(n){return!!n.item&&!n.group}function b(n){return!!n.group}function k(n){return!!n.group&&!n.item}function d(n){return!n.group&&!!n.item}var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=t.Plugin=t.isRow=t.isRowGroup=t.isGroupNode=t.isDataNode=t.isParentNode=void 0;var o=window,s=MsPortalFx.Resources.Strings.CoreGrid,h=Object.keys,u=FxImpl.features.isNativePerf&&o.performance,c=36,l=32,a=140,v=!0,y=!1;t.isParentNode=p;t.isDataNode=w;t.isGroupNode=b;t.isRowGroup=k;t.isRow=d;f=(function(){function n(n,t,i,r){this._lifetime=n;this._grid=t;this._gridInternal=i;this._options=r}return n})();t.Plugin=f;e=(function(n){function t(t,u){var f=n.call(this,t)||this,o,a,v,w;f._columnId=0;f._options=u;f.cssClass=MsPortalFx.initObservable(u.cssClass,"");f.disabled=MsPortalFx.initObservable(u.disabled,!1);f.visible=MsPortalFx.initObservable(u.visible,!0);f.ariaLabel=MsPortalFx.initObservable(u.ariaLabel);f.header={};f._loadingTasks=[];f.loading=ko.observable(!1);f.loadingMessage=ko.observable("");f.noData=ko.observable(!0);f.noDataMessage=MsPortalFx.initObservable(u.noDataMessage,s.noData);var e=f._columnDefinitions=MsPortalFx.initObservableArray(u.columns),g=i.observableArrayMap(t,(function(n){return n.id})),nt=f.columns=g;r.extend(nt,{add:function(n,t){var i=[MsPortalFx.isNullOrUndefined(t)?(e.peek()||[]).length:t,0];e.splice.apply(e,i.concat(n))},remove:function(n){return e.remove((function(t){return n.indexOf(t.id)>=0}))},removeAll:function(){return e.removeAll()}});o=f._nodes=ko.observableArray();a=f._nodesById=i.observableArrayMap(t,(function(n){return n.id}));o.mapInto(t,(function(n,t){return t}),a);v=f._nodesByItem=i.observableArrayMap(t,(function(n){return n.item}));o.mapInto(t,(function(n,t){return t}),v);w=f._nodesByGroup=i.observableArrayMap(t,(function(n){return n.group}));o.mapInto(t,(function(n,t){return t}),w);var tt=0,it=function(){return""+tt++},y=function(n){var t={id:MsPortalFx.isNullOrUndefined(n.id)?it():r.convertToString(n.id),isGroup:!!n.group,item:n.item,group:n.group,source:n,children:n.children?n.children.map(y):null};return!t.children&&t.source.getChildren&&(t.getChildren=function(){return Q(t.source.getChildren(t.source)).then((function(n){t.children=n?n.map(y):null;t.getChildren=null}))}),t},rt=function(n,t,i){var o=u.row||{},r={_lifetime:n,_node:t},e={_msPortalFxInternal:r};return f._createRow(n,e,r,o,t,i),f._initRow(n,e,r,o),e},ut=function(n,t,i){var o=u.rowGroup||{},r={_lifetime:n,_node:t},e={_msPortalFxInternal:r};return f._createRowGroup(n,e,r,o,t,i),f._initRowGroup(n,e,r,o),e},ft=function(n,t,i,r){var u={_lifetime:n},e={_msPortalFxInternal:u};return f._createCell(n,e,u,t,i,r),f._initCell(n,e,u,t,i,r),e},b=ko.observable(null),et=function(){var n=b.peek();return n?n():Q.reject(new MsPortalFx.Errors.CanceledError("flush not possible"))},p={},k={},d=f._msPortalFxInternal={trigger:k,_nodes:o,_nodesById:a,_nodesByItem:v,_createRow:rt,_createRowGroup:ut,_createCell:ft,_createInternalNode:y,_updateRows:function(){return f._updateRows()},headerHeight:MsPortalFx.initValue(u.header&&u.header.height,c),renderMode:0,rowHeight:MsPortalFx.initValue(u.row&&u.row.height,l),hscroll:!1,vscroll:ko.observable(!1),ariaReadOnly:!0,announcement:ko.observable(""),flushCallback:b,showLoadingUI:ko.observable(!0)};return r.defLocalProps(d,{on:function(n){for(var u=h(n),f=u.length,r,t,i=0;i<f;i++)r=u[i],t=p[r],t||(t=[],p[r]=t),t.push(n[r])},addEventTriggers:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(n){k[n]=function(){var i=p[n],t,r;if(i)for(t=void 0,r=i.length,t=0;t<r;t++)i[t].apply(null,arguments)}}))},flushChanges:et}),d.addEventTriggers("extendGrid","initGrid","extendHeader","initHeader","extendColumnHeader","initColumnHeader","extendColumn","initColumn","extendRow","initRow","extendRowGroup","initRowGroup","extendCell","initCell","onSizeChanged","onPageChanged","onHeightChanged","onWidthChanged","onViewportChanged","onReset"),f}return __extends(t,n),t.prototype._extendGrid=function(n,t,i,r){i.trigger.extendGrid(n,t,i,r)},t.prototype._initGrid=function(n,t,i,f){var e=this;this._columnDefinitions.mapInto(n,(function(n,t){var i=t.header,s=i,u,r,f,o;return(!i||ko.isObservable(i)||typeof i.controlType=="number"||typeof i=="string"||typeof i.htmlTemplate=="string")&&(s={content:i}),u={},r={_msPortalFxInternal:u},e._createColumnHeader(n,r,u,s),e._initColumnHeader(n,r,u,s),f={},o={_msPortalFxInternal:f},e._createColumn(n,o,f,t,r),e._initColumn(n,o,f,t,r),o}),this.columns);u&&r.subscribe(n,t.loading,(function(n){n?u.mark("GridLoadingStart"):u.mark("GridLoadingEnd")}));i.on({onSizeChanged:function(n,r,u,e,o,s){var h,c,l;if(n!==e){i.trigger.onWidthChanged(n,e);h=f.onWidthChanged;h&&h(n,e,t)}if(r!==o){i.trigger.onHeightChanged(r,o);c=f.onHeightChanged;c&&c(r,o,t)}if(u!==s){i.trigger.onViewportChanged(u,s);l=f.onViewportChanged;l&&l(u,s)}},onPageChanged:function(n,i){var r=f.onPageChanged;r&&r(n,i,t)}});i.trigger.initGrid(n,t,i,f)},t.prototype._extendHeader=function(n,t,i){t.visible=MsPortalFx.initObservable(i.visible,!0);this._msPortalFxInternal.trigger.extendHeader(n,t,i)},t.prototype._initHeader=function(n,t,i){this._msPortalFxInternal.trigger.initHeader(n,t,i)},t.prototype._createColumnHeader=function(n,t,i,u){r.defProps(t,{ariaLabel:MsPortalFx.initObservable(u.ariaLabel),content:MsPortalFx.initObservable(u.content)});r.defProps(i,{bold:MsPortalFx.initValue(u.bold,v),upperCase:MsPortalFx.initValue(u.upperCase,y)});this._msPortalFxInternal.trigger.extendColumnHeader(n,t,i,u)},t.prototype._initColumnHeader=function(n,t,i,r){this._msPortalFxInternal.trigger.initColumnHeader(n,t,i,r)},t.prototype._createColumn=function(n,t,i,u,f){i._definition=u;i._lifetime=n;i.minWidth=MsPortalFx.initObservable(u.minWidth,a);i.ariaReadOnly=!0;r.defProps(t,{id:u.id||"column_"+this._columnId++,header:f,width:MsPortalFx.initObservable(u.width),visible:MsPortalFx.initObservable(u.visible,!0)});u.cell&&(t.cellFormatter=this._createFormatter(u.type,u));this._msPortalFxInternal.trigger.extendColumn(n,t,i,u)},t.prototype._initColumn=function(n,t,i,r){this._msPortalFxInternal.trigger.initColumn(n,t,i,r)},t.prototype._createCell=function(n,t,i,u,f,e){r.defProps(t,{column:e,content:ko.observable(ko.unwrap(f.content)),ariaLabel:ko.observable(ko.unwrap(f.ariaLabel))});this._msPortalFxInternal.trigger.extendCell(n,t,i,u)},t.prototype._initCell=function(n,t,i,u,f){r.reactor(n,f.content,(function(n){t.content(n())}));r.reactor(n,f.ariaLabel,(function(n){t.ariaLabel(n())}));this._msPortalFxInternal.trigger.initCell(n,t,i,u)},t.prototype._updateRows=function(){},t.prototype._createRow=function(n,t,u,f,e,o){var h=e.id,s=e.item,c=f.ariaLabel&&f.ariaLabel(s,n),l=f.disabled&&f.disabled(s,n);r.defLocalProps(t,{item:s});r.defProps(u,{excluded:ko.observable(!1),isGroup:!1});r.defProps(t,{id:h,ariaLabel:MsPortalFx.initObservable(c),disabled:MsPortalFx.initObservable(l,!1)});t.cells=i.observableArrayMap(n,(function(n){return n.column&&n.column.id||null}));this._msPortalFxInternal.trigger.extendRow(n,t,u,f,o)},t.prototype._initRow=function(n,t,i,u){var f=this;this.columns.mapInto(n,(function(n,i){var o=n,s=r.internal(i),h,e,u,c;return s._definition.defineCell?(u=s._definition.defineCell(o,t.item,t),e=u,u&&typeof u=="object"&&u.hasOwnProperty("content")&&typeof u.controlType!="number"||(e={content:u})):i.cellFormatter&&(c=i.cellFormatter.format(o,t,f),h={},e={content:c}),f._msPortalFxInternal._createCell(o,h,e,i)}),t.cells);this._msPortalFxInternal.trigger.initRow(n,t,i,u)},t.prototype._createRowGroup=function(n,t,i,u,f,e){var s=f.id,o=f.group,h=u.ariaLabel&&u.ariaLabel(o,n);r.defLocalProps(t,{group:o});r.defProps(i,{excluded:ko.observable(!1),isGroup:!0});r.defProps(t,{id:s,ariaLabel:MsPortalFx.initObservable(h)});t.cells=ko.observableArray();t.disabled=ko.observable(!1);this._msPortalFxInternal.trigger.extendRowGroup(n,t,i,u,e)},t.prototype._initRowGroup=function(n,t,i,r){var u=n.createChildLifetime(),f={content:r&&r.content&&r.content(t.group,n)},e=this._msPortalFxInternal._createCell(u,{},f,null);t.cells([e]);this._msPortalFxInternal.trigger.initRowGroup(n,t,i,r)},t.prototype._processLoadingTask=function(){var u=this,t=this._msPortalFxInternal,n=this._loadingTasks.shift(),r;if(n){var i=n.messageOptions,f=n.uiShown,e=n.completion;this.loading(!0);r=i.message||"";this.loadingMessage(r);r&&t.announcement(r);t.flushChanges().then((function(){f.resolve(u.loading()&&t.showLoadingUI())}),(function(){f.resolve(!1)}));e.finally((function(){var e=!u._processLoadingTask();if(e){var n=i.completedMessage||"",r=void 0,f=t.totalRowCount();r=f>0?(i.completedDataMessage||"").format({count:f}):i.completedNoDataMessage||"";r.length&&(n=n.length?n+"\n"+r:r);u._msPortalFxInternal.announcement(n)}})).catch((function(){}))}else this.loading(!1),this.loadingMessage("");return!!n},t.prototype.displayLoadingMessage=function(n,t){var r=t?typeof t=="string"?{message:t}:t:{},i=Q.defer();return this._loadingTasks.push({completion:Q(n),uiShown:i,messageOptions:r}),this.loading()||this._processLoadingTask(),i.promise},t})(MsPortalFx.ViewModels.Controls.Base.ViewModel);t.ViewModel=e}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var u=(function(n){function t(t,i,u,f){function y(n,t){var i=r.internal(n),u=r.internal(t),f=!1;return s!==i&&(s&&s.activated(!1),i?(i.activated(!0),c=n.column.id):c=null,s=i,a(c),f=!0),h!==u&&(h&&h.activated(!1),u?(u.activated(!0),o=t.id,e=t.item):(o=null,e=null),h=u,l(e),f=!0),f}var p=n.call(this,t,i,u,f)||this,w=f.activation||{},s,h,c,o,e,l=ko.observable(null),a=ko.observable(null),v=MsPortalFx.initValue(w.hideSelectionDuringActivation,!1),b=function(n,t){var i=y(n,t);return i&&v&&u.saveSelection&&u.saveSelection(t,!1),i},k=function(){var n=y();return n&&v&&u.restoreSelection&&u.restoreSelection(),n};u.on({extendGrid:function(n,t,i){r.defProps(i,{activate:b,deactivate:k});t.activation={};r.defLocalProps(t.activation,{activatedItem:l,activatedColumnId:a})},extendRow:function(n,t,i){var u=ko.observable(!1);t.activated=u;r.defLocalProps(i,{activated:u})},initRow:function(n,t){var r=o!==undefined&&o!==null&&o===t.id||e!==undefined&&e!==null&&e===t.item,i;r&&(t.activated(!0),i=t.cells.get(c),i&&i.activated(!0))},extendCell:function(n,t,i){var u=ko.observable(!1);t.activated=u;r.defLocalProps(i,{activated:u})}});return p}return __extends(t,n),t})(i.Plugin);t.Plugin=u}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var u=MsPortalFx.Base.Diagnostics.createLog(n),f=(function(n){function t(t,i,f,e,o){var v=n.call(this,t,i,f,e)||this,s=e.contextMenu;if(s){var y=MsPortalFx.wrap(!0),l=MsPortalFx.wrap([]),p=s.canShowMenu||o.canShowMenu||y,w=s.supplyMenuCommands||o.supplyMenuCommands||l,b=s.supplyMenuBulkCommands||o.supplyMenuBulkCommands||l,k=s.supplyButtonCommands||o.supplyButtonCommands||l,d=MsPortalFx.initObservable(s.visible,!0),h=t.createChildLifetime(),c=ko.observableArray(),g=MsPortalFx.initValue(s.maxButtonCommands,MsPortalFx.initValue(o.maxButtonCommands,1)),nt=function(n,t){return Q(k(n,t,i))},tt=function(n){return p(n,i)},a=function(n){var t=r.internal(n);return t.canShowMenu()},it=function(n){if(c.removeAll(),h.dispose(),h=t.createChildLifetime(),a(n)){var r=i.selection,f=r?r.selectedRows():[];if(f.length>1){if(f.indexOf(n)>=0&&f.every(a))return Q(b(h,r,i)).then((function(n){n&&MsPortalFx.find(n,(function(n){return n.type===17}))&&u.error("List commands are not supported in supplyMenuBulkCommands");var t=n.filter((function(n){return n.type!==17}));c(t||[])}))}else return Q(w(h,n,i)).then((function(n){n&&MsPortalFx.find(n,(function(n){return n.type===17}))&&u.error("List commands are not supported in supplyMenuCommands");var t=n.filter((function(n){return n.type!==17}));c(t||[])}))}return Q()};f.on({extendGrid:function(n,t){t.contextMenu={maxButtonCommands:g,supplyMenuCommands:it,menuCommands:c,visible:d}},extendRow:function(n,t,i){i.commandButtons=ko.observable([]);i.canShowMenu=ko.observable(!1)},initRow:function(n,t,i){ko.reactor(n,(function(){i.canShowMenu(tt(t))}));MsPortalFx.tryImmediateResolve(nt(n,t),(function(n){i.commandButtons(n||[])}))}})}return v}return __extends(t,n),t})(i.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var r=(function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return __extends(t,n),t})(i.Plugin);t.Plugin=r}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var f=(function(n){function t(t,i,f,e){var b=n.call(this,t,i,f,e)||this,c=e.focus||{},l=ko.observable(null),a=ko.observable(null),o=ko.observable(null),v=ko.observable(null),s=f.visibleRows,p=r.observableArrayMap(t,(function(n){return n.id}));s.mapInto(t,(function(n,t){return t}),p);var y=function(n){var i=o(),t;n!==i&&(o(n),t=n&&u.internal(n),t&&!t.isGroup?(l(n),a(null)):(a(n),l(null)),f.trigger.rowOrRowGroupChanged(n,i))},k=function(n){return!!n&&s().some((function(t){return t===n}))},h=function(n,t){var r=k(n),i;return r&&(y(n),t&&(i=f.focusRowOrRowGroup(),i&&i(n))),r},d=function(n){var t=!!n,i;return t&&(i=u.internal(n),t=!!i&&!i.isGroup,t&&(t=h(n,!0))),t},w=function(n){return h(n,!1)},g=function(){for(var t,f=o(),i=!1,r,u=s(),n=0;n<u.length;n++)if(t=u[n],t===f)i=!0;else if(i){r=t;break}return h(r,!0)},nt=function(){for(var t,u=o(),i,r=s(),n=0;n<r.length;n++){if(t=r[n],t===u)break;i=t}return h(i,!0)},tt=function(){var n=s()[0];return h(n,!0)},it=function(){var n=s(),t=n[n.length-1];return h(t,!0)};f.on({extendGrid:function(n,t,i){t.focus={currentRow:l,currentRowGroup:a,currentCell:v,moveToRow:d,moveDown:g,moveUp:nt,moveFirst:tt,moveLast:it};u.defProps(i,{currentRowOrRowGroup:o,focusRowOrRowGroup:ko.observable(),moveToFocusedRowOrRowGroup:w})},initGrid:function(n,t,i){i.visibleRows.subscribeArrayBulkChanges(n,(function(n,t){var i=o(),r;i&&t.includes(i)&&(r=p.get(i.id),y(r||null))}))},extendRow:function(n,t,i){u.defProps(t,{focused:ko.observable(!1)});u.defProps(i,{tabbable:ko.observable(!1)})},extendRowGroup:function(n,t){u.defProps(t,{focused:ko.observable(!1)})},enterRow:function(n,t){var f=c.onEnterRow,r;f&&n&&(r=u.internal(n),r.isGroup||r.excluded()||f(n,i));w(n);v(t)},exitRow:function(n){var r=c.onExitRow,t;r&&n&&(t=u.internal(n),t.isGroup||t.excluded()||r(n,i))},enterCell:function(n,t){var f=c.onEnterCell,r;f&&n&&t&&(r=u.internal(t),r.isGroup||r.excluded()||f(n,t,i));v(n)},exitCell:function(n,t){var f=c.onExitCell,r;f&&n&&t&&(r=u.internal(t),r.isGroup||r.excluded()||f(n,t,i))},rowOrRowGroupChanged:function(n,t){n&&n.focused(!0);t&&t.focused(!1)},onReset:function(){y(null)}});return f.addEventTriggers("enterRow","exitRow","enterCell","exitCell","rowOrRowGroupChanged"),b}return __extends(t,n),t})(i.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i){"use strict";function u(n,t){return ko.isObservable(t)?i.computed(n,t,(function(n){return i.convertToString(n())})):i.convertToString(t)}function a(n,t){switch(n){case"Text":return new f(t);case"Template":return new e(t);case"UriLink":return new o(t);case"BladeLink":return new s(t);case"ResourceLink":return new h(t);case"CustomLink":return new c(t);case"TagList":return new l(t)}}var r,f,e,o,s,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.create=t.TagListFormatter=t.CustomLinkFormatter=t.ResourceLinkFormatter=t.BladeLinkFormatter=t.UriLinkFormatter=t.TemplateFormatter=t.TextFormatter=t.BaseFormatter=void 0;r=(function(){function n(n,t,i){this.formatterType=n;this._format=t;this.constantFormat=i}return n.prototype.format=function(n,t,r){var u=this._format(t.item,n,t,r);return i.computedObject(n,u)},n})();t.BaseFormatter=r;f=(function(n){function t(t){var r=this,i=t.cell||{};return n.call(this,"Text",(function(n,t,r){var f=i.text&&i.text(n,t,r);return{text:u(t,f)}}),{})||this}return __extends(t,n),t})(r);t.TextFormatter=f;e=(function(n){function t(t){var i=this,r=t.cell||{};return i=n.call(this,"Template",(function(n,t,i,u){var f=r.viewModel&&r.viewModel(n,t,i,u);return{viewModel:f}}),{})||this,i.template=r.template,i}return __extends(t,n),t})(r);t.TemplateFormatter=e;o=(function(n){function t(t){var i=this,r=t.cell||{};return i=n.call(this,"UriLink",(function(n,t,i){var f=r.uriLink&&r.uriLink(n,t,i)||{},e=u(t,f.text);return __assign(__assign({},f),{text:e})}),{})||this,i.telemetryName=r.telemetryName,i}return __extends(t,n),t})(r);t.UriLinkFormatter=o;s=(function(n){function t(t){var i=this,r=t.cell||{};return i=n.call(this,"BladeLink",(function(n,t,i){var f=r.bladeLink&&r.bladeLink(n,t,i)||{},e=u(t,f.text);return __assign(__assign({},f),{text:e})}),{})||this,i.telemetryName=r.telemetryName,i}return __extends(t,n),t})(r);t.BladeLinkFormatter=s;h=(function(n){function t(t){var r=this,i=t.cell||{};return r=n.call(this,"ResourceLink",(function(n,t,r){var f=i.resourceLink&&i.resourceLink(n,t,r)||{},e=u(t,f.text);return __assign(__assign({},f),{text:e,canClick:MsPortalFx.initValue(f.canClick,!0)})}),{})||this,r.showIcon=i.showIcon!==!1,r.showPreview=i.showPreview!==!1,r.telemetryName=i.telemetryName,r.attachHoverCard=i.attachHoverCard,r.supplyInPageBladeParameters=i.supplyInPageBladeParameters&&function(n,t){return Q(i.supplyInPageBladeParameters(n,t.item,t))},r}return __extends(t,n),t})(r);t.ResourceLinkFormatter=h;c=(function(n){function t(t){var r=this,i=t.cell||{};return r=n.call(this,"CustomLink",(function(n,t,r){var f=i.customLink&&i.customLink(n,t,r)||{},e=u(t,f.text);return __assign(__assign({},f),{text:e,canClick:MsPortalFx.initValue(f.canClick,!0)})}),{})||this,r.buttonRole=!!i.buttonRole,r.telemetryName=i.telemetryName,r.invokeClick=i.onClick&&function(n){i.onClick(n.row.item,n.row,n.element)},r}return __extends(t,n),t})(r);t.CustomLinkFormatter=c;l=(function(n){function t(t){var r=this,i=t.cell||{};return r=n.call(this,"TagList",(function(n,t,r){return{tags:i.tags&&i.tags(n,t,r)}}),{})||this,r.invokeClick=i.onClick&&function(n,t){i.onClick(n.item,t)},r}return __extends(t,n),t})(r);t.TagListFormatter=l;t.create=a}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var r=(function(n){function t(t,i,r,u){var f=n.call(this,t,i,r,u)||this;f._isGrouped=ko.observable(!1);r.on({extendGrid:function(n,t,i){i.isGrouped=f._isGrouped}});return f}return __extends(t,n),t.prototype.enableGrouping=function(n){this._isGrouped(n)},t})(i.Plugin);t.Plugin=r}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover",["require","exports","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r,u){"use strict";function f(n){var t=u.internal(n);return!t.isGroup}Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var e=(function(n){function t(t,r,e,o){var v=n.call(this,t,r,e,o)||this,y=o.hover||{};if(y){var h=e._allRows,s=ko.observable(null),c=i.observableArrayMap(t,(function(n){return n.id}));h.mapInto(t,(function(n,t){return t}),c);var l=function(n,t){var i,r,f;n=n||null;i=s.peek();n!==i&&(i&&(r=u.internal(i),i.hovered(!1),r.programmaticHovered(!1)),n&&(n.hovered(!0),t&&(f=u.internal(n),f.programmaticHovered(!0))),s(n))},a=function(n){var t=!n||f(n);return t&&l(n,!0),Q(t)},p=function(n){var t=!0,i,r;return(MsPortalFx.isNullOrUndefined(n)||(r=u.convertToString(n),i=c.get(r),t=!!i),t)?a(i):Q(t)},w=function(n){return l(n,!1),Q()};e.on({extendGrid:function(n,t,i){t.hover={};u.defLocalProps(t.hover,{hoverRow:a,hoveredRow:s,hoverRowById:p});i.notifyHoverRow=w},initGrid:function(n){h.subscribeArrayDeletes(n,(function(n){var t=s.peek();t&&n===t&&s(null)}))},extendRow:function(n,t,i){u.defLocalProps(t,{hovered:ko.observable(!1)});i.programmaticHovered=ko.observable(!1)}})}return v}return __extends(t,n),t})(r.Plugin);t.Plugin=e}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var u=(function(n){function t(t,i,u,f){var h=n.call(this,t,i,u,f)||this,o=MsPortalFx.initValue(f.resizing,{}),e,s;if(o){e=o.onColumnsResized;s=function(n,t,u){n.forEach((function(n,t){var i=r.internal(n);i.minWidth(u[t])}));n.forEach((function(n,i){n.width(t[i])}));e&&e(n,i)};u.on({extendGrid:function(n,t){t.resizing={resizeColumns:s}},extendColumn:function(n,t,i,u){r.defProps(t,{canResize:MsPortalFx.initObservable(u.canResize,!0)})}})}return h}return __extends(t,n),t})(i.Plugin);t.Plugin=u}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var r=(function(n){function t(t,i,r,u,f){var h=n.call(this,t,i,r,u)||this,e=MsPortalFx.initValue(u.scrolling,{});if(e){var c=f&&f.detectVScroll?undefined:!1,o=MsPortalFx.initValue(e.horizontal,!0),s=MsPortalFx.initValue(e.vertical,c);r.on({initGrid:function(){i.scrolling={horizontal:o,vertical:s};r.hscroll=o;s&&r.vscroll(!0)}})}return h}return __extends(t,n),t})(i.Plugin);t.Plugin=r}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection",["require","exports","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r,u){"use strict";function o(n){var t=n.selectedOrCurrentRows;return ko.pureComputed((function(){var r=[],i;return t?r=t():(i=ko.unwrap(n),i&&(r=Array.isArray(i)?i:[i])),r}))}function e(n){var t=u.internal(n);return!t.isGroup}function f(n){var t=u.internal(n);return!t.excluded.peek()}Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=t.wrapContextRows=void 0;t.wrapContextRows=o;var s=(function(n){function t(t,o,s,h,c){var fi=n.call(this,t,o,s,h)||this,a,et;if(c||(c={virtualized:!1,enabledByDefault:!1}),a=h.selection||(c.enabledByDefault?{}:null),a){var p=MsPortalFx.wrap(!0),ct=MsPortalFx.initValue(a.selectionMode,0),y=ko.observable(!1),ni=ct===0,lt=ct===1,b=c.virtualized,ei=MsPortalFx.initObservable(a.visible,!0),nt=s._allRows,ft=i.observableArrayMap(t,(function(n){return n.item}));nt.mapInto(t,(function(n,t){return t}),ft);et=i.observableArrayMap(t,(function(n){return n.id}));nt.mapInto(t,(function(n,t){return t}),et);var w=ko.observable(!1),v=i.observableArrayMap(t,(function(n){return n.id})),k=i.observableArrayMap(t,(function(n){return n.id})),tt=ko.observableArray();u.subscribe(t,v,(function(n){var i=tt(),t=n.filter((function(n){return!!n.row})).map((function(n){return n.row}));(t.length!==i.length||t.some((function(n,t){return n!==i[t]})))&&tt(t)}));var at=ko.observableArray(),vt=c.virtualized?undefined:ko.observable(0),ot=c.virtualized?undefined:ko.observable(0),ti=function(n,t){var i=t.item;if(MsPortalFx.isNullOrUndefined(i))throw new MsPortalFx.Errors.Error("null item in selection");return t.item},yt=v.mapInto(t,ti),oi=k.mapInto(t,ti),ii=ko.observableArray(),si=a.canSelectItem||p,hi=a.canUnselectItem||p,ci=a.canSelectAllItems||p,li=a.canUnselectAllItems||p,ai=a.canSelectRow||p,vi=a.canUnselectRow||p,yi=a.canSelectAllRows||p,pi=a.canUnselectAllRows||p,wi=w,it=u.computed(t,w,(function(n){return b&&n()}));it.subscribe(t,(function(n){n?v([]):k([])}));var pt=function(n){var t=!!n&&!y(),i,r;return t&&(i=n.row,r=n.item,t=!!i||!!r,t&&i&&(t=e(i)&&ai(i,o)),t&&r&&(t=si(r,o))),t},bi=function(n){return pt(st(n))},rt=function(n){var i=pt(n);if(i){var r=n.row,u=n.item,t=!1;it()?t=!0:r?t=r.selected():u&&(t=yt().includes(u));t||(ni?v([n]):v.push(n))}return i},ki=function(n){return rt(st(n))},wt=function(n){var t=!!n&&!y(),i,r;return t&&(i=n.row,r=n.item,t=!!i||!!r,t&&i&&(t=e(i)&&vi(i,o)),t&&r&&(t=hi(r,o))),t},di=function(n){return wt(st(n))},d=function(n){var i=wt(n),r,t;return i&&(r=n.id,it()?k.push(n):(t=v.get(r),t&&(v.remove(t),w(!1)))),i},gi=function(n){return d(st(n))},ri=a.selectAllDisabled!==undefined?ko.utils.wrap(a.selectAllDisabled):ko.pureComputed((function(){return!s._allRowsLoaded()})),bt=function(){var n=!ri()&&lt&&!y();return n&&ci(o)&&yi(o)},nr=ko.pureComputed((function(){return bt()})),kt=function(){var n=bt();return n&&(w(!0),it()?v([]):v(nt().filter(f).map(g))),n},tr=function(){return kt()},dt=function(){var n=!y();return n&&li(o)&&pi(o)},ir=ko.pureComputed((function(){return dt()})),ut=function(){var n=dt();return n&&(v([]),k([]),w(!1)),n},rr=function(){return ut()},ur=function(n){var t=u.convertToString(n);return rt(ht(t))},fr=function(n){var t=u.convertToString(n);return d(ht(t))},er=ko.pureComputed((function(){if(it())return!0;if(!c.virtualized){var n=vt(),t=ot();return n>0&&t>0&&n===t}return!1})),or=function(n){return pt(g(n))},ui=function(n){return rt(g(n))},sr=function(n){return wt(g(n))},gt=function(n){return d(g(n))},hr=ko.pureComputed((function(){return bt()})),cr=kt,lr=ko.pureComputed((function(){return dt()})),ar=ut,vr=function(n){var r,t,i;return n&&(t=n.id,i=n.item,r={row:et.get(t)||ft.get(i),item:i,id:t}),r},g=function(n){var t;return n&&(t={row:n,item:n.item,id:n.id}),t},st=function(n){var t,i,r,u;return n&&(i=ft.get(n),i?t=g(i):(r=s._nodesByItem.get(n),u=void 0,r&&(u=r.id),t={item:n,id:u})),t},ht=function(n){var r;if(n!==undefined){var i=et.get(n),t=void 0,u=s._nodesById.get(n);u&&(t=u.item,t&&!i&&(i=ft.get(t)));r={row:i,item:t,id:n}}return r},l,yr=function(n,i){var r,u=y();u||(l?l.row!==n&&(l.discard=!0,(r=l.ltm)===null||r===void 0?void 0:r.dispose()):l={discard:!1,row:n,allSelected:lt&&b&&w(),selectedIds:v().map((function(n){return n.id})),unselectedIds:k().map((function(n){return n.id}))});try{n&&(y(!1),ut(),s.moveToFocusedRowOrRowGroup(n));i||!l||l.ltm||(l.ltm=t.createChildLifetime(),at.fxOnce(l.ltm,(function(){var n,t=lt&&b&&w(),i=v().map((function(n){return n.id}));l&&(l.allSelected!==t||l.selectedIds!==i)&&(l.discard=!0,(n=l.ltm)===null||n===void 0?void 0:n.dispose())})))}finally{(i||u)&&y(!0)}},pr=function(){var t,n;y()&&y(!1);n=l;l=null;n&&((t=n.ltm)===null||t===void 0?void 0:t.dispose(),n.discard||(ut(),n.allSelected&&kt(),n.selectedIds&&n.selectedIds.forEach((function(n){rt(ht(n))})),n.unselectedIds&&n.unselectedIds.forEach((function(n){d(ht(n))}))))};s.on({extendGrid:function(n,t,i){t.selection={};u.defProps(t.selection,{selectionMode:ct,selectAllDisabled:ri,allRowsSelected:er,selectedRows:tt,selectedOrCurrentRows:at,canSelectRow:or,selectRow:ui,canUnselectRow:sr,unselectRow:gt,canSelectAllRows:hr,selectAllRows:cr,canUnselectAllRows:lr,unselectAllRows:ar,visible:ei});u.defLocalProps(t.selection,{allItemsSelected:wi,selectedItems:yt,unselectedItems:oi,selectedOrCurrentItems:ii,canSelectItem:bi,selectItem:ki,canUnselectItem:di,unselectItem:gi,canSelectAllItems:nr,selectAllItems:tr,canUnselectAllItems:ir,unselectAllItems:rr,selectItemById:ur,unselectItemById:fr});u.defProps(i,{selectionFrozen:y});u.defLocalProps(i,{saveSelection:yr,restoreSelection:pr})},initGrid:function(n,t,i){b||ot(nt().length);nt.subscribeArrayBulkChanges(n,(function(n,t){n=n.filter(f);t=t.filter(f);b?n.forEach((function(n){var t=w()?!k.get(n.id):!!v.get(n.id);n.selected(t)})):(t.forEach((function(n){gt(n)})),ot(ot()+n.length-t.length))}));tt.subscribeArrayBulkChanges(n,(function(n,t){n.forEach((function(n){n.selected(!0)}));t.forEach((function(n){n.selected(!1)}));b||vt(vt()+n.length-t.length)}));ko.reactor(n,(function(){var i=[],r=tt(),n;r.length?i=r.slice():(n=t.focus.currentRow(),n&&e(n)&&f(n)&&(i=[n]));at(i)}));b||i._nodesById.subscribeArrayBulkChanges(n,(function(n,t){t.forEach((function(n){var u=n.id,t=v.get(u),r;t&&(r=i._nodesById.get(u),r?(d(t),rt(vr(r))):d(t))}))}));ko.reactor(n,(function(){var i=[],r=yt(),n;r.length?i=r.slice():(n=t.focus.currentRow(),n&&e(n)&&f(n)&&(i=[n.item]));ii(i)}))},extendRow:function(n,t){t.selected=ko.observable(!1)},rowOrRowGroupChanged:function(n,t){ni&&(t&&r.isRow(t)&&gt(t),n&&r.isRow(n)&&ui(n))},onReset:function(){ut()}})}return fi}return __extends(t,n),t})(r.Plugin);t.Plugin=s}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var u=MsPortalFx.Resources.Strings.CoreGrid,f=(function(n){function t(t,i,f,e,o){var v=n.call(this,t,i,f,e)||this,h=MsPortalFx.initValue(e.sorting,{});if(h){var s=ko.observableArray(),c=h.canSortAdditionalColumns,l=function(n,t){var r=n.map((function(n,i){return{id:n.id,direction:t[i]}}));return o.onColumnSortingStart(r,u.sorting).then((function(){i.columns().forEach((function(i){var r=n.indexOf(i);r!==-1?i.sortDirection(t[r]):i.sortDirection(0)}));f.sortedOrders(r)}))},a=ko.observable(!0);f.on({extendGrid:function(n,t,i){t.sorting={sortColumns:l,canSortAdditionalColumns:a};i.sortedOrders=s;r.defLocalProps(i,{sortColumns:l})},extendColumn:function(n,t,i,u){r.defProps(t,{canSort:MsPortalFx.initObservable(u.canSort,!1),sortDirection:MsPortalFx.initObservable(u.sortDirection,0)})},initGrid:function(){ko.reactor(t,(function(){var n=i.columns().filter((function(n){return n.sortDirection()!==0&&n.canSort()})).map((function(n){var t=n.id,i=n.sortDirection;return{id:t,direction:i()}}));s(n)}));c&&ko.reactor(t,(function(){a(c(s(),i))}))}})}return v}return __extends(t,n),t})(i.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.ArrayGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var p=(function(n){function t(t,i){var w=n.call(this,t,i)||this;w.controlType=130;var b=ko.observableArray(),p=w,f=w._msPortalFxInternal,k=w.header,d=i.header||{},g=MsPortalFx.initObservableArray(i.items);return r.defLocalProps(p,{items:g,rows:b}),f._allRows=b,f.visibleRows=b,f.totalRowCount=ko.observable(0),f._allRowsLoaded=ko.observable(!0),w._plugins=[new s.Plugin(t,p,f,i),new v.Plugin(t,p,f,i),new u.Plugin(t,p,f,i),new l.Plugin(t,p,f,i),new a.Plugin(t,p,f,i),new e.Plugin(t,p,f,i,{}),new y.Plugin(t,p,f,i,{onColumnSortingStart:function(){return Q()}}),new o.Plugin(t,p,f,i),new h.Plugin(t,p,f,i),new c.Plugin(t,p,f,i),],w._extendGrid(t,p,f,i),w._extendHeader(t,k,d),w._initGrid(t,p,f,i),w._initHeader(t,k,d),w}return __extends(t,n),t.prototype._initGrid=function(t,i,u,f){var e=this;n.prototype._initGrid.call(this,t,i,u,f);r.subscribeAndRun(t,this.items,(function(n){u.totalRowCount(n.length)}));this.items.mapInto(t,(function(n,t){var i=u._createInternalNode({item:t,id:null});return u._createRow(n,i)}),i.rows);i.rows.mapInto(t,(function(n,t){return r.internal(t)._node}),this._nodes);r.subscribeAndRun(t,this.items,(function(n){e.noData(!n.length)}))},t.prototype._createFormatter=function(n,t){return f.create(n,t)},t})(i.ViewModel);t.ViewModel=p}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";function u(n,t){n&&n.forEach((function(n){if(t(n)){var i=n.children;i&&u(i.peek(),t)}}))}function f(n,t){if(n&&n.length){var i=n.shift();return t(i).then((function(t){if(t){var r=i.children;r&&n.push.apply(n,r.peek()||[])}return t})).then((function(){return f(n,t)}))}return Q(!0)}Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var e=(function(n){function t(t,e,o,s){var c=n.call(this,t,e,o,s)||this,h;if(c._hasHierarchicalColumn=ko.observable(!1),c._isHierarchical=ko.observable(!1),h=MsPortalFx.initValue(s.hierarchy,{}),h){var b=c._isHierarchical,k=c._hasHierarchicalColumn,l=function(n,t,u,f){var o=!!n,l,a,s,c;return o&&(o=f===undefined?!0:f===i.isRowGroup(n),o&&(l=r.internal(n),o=l.expandable(),o&&(a=n.expanded(),o=t!==a))),o&&u&&(i.isRow(n)?(s=t?h.canExpandRow:h.canCollapseRow,s&&(o=s(n,e))):i.isRowGroup(n)&&(c=t?h.canExpandRowGroup:h.canCollapseRowGroup,c&&(o=c(n,e)))),o},a=function(n,t,r,u,f){return ko.ignoreDependencies((function(){var o=l(n,t,r,f);return o?t?g(n,u).then((function(t){if(t)if(i.isRow(n)&&h.onExpandRow)h.onExpandRow(n,e);else if(i.isRowGroup(n)&&h.onExpandRowGroup)h.onExpandRowGroup(n,e);return t})):d(n,u).then((function(t){if(t)if(i.isRow(n)&&h.onCollapseRow)h.onCollapseRow(n,e);else if(i.isRowGroup(n)&&h.onCollapseRowGroup)h.onCollapseRowGroup(n,e);return t})):Q(o)}))},d=function(n,t){return n.expanded(!1),t&&o._updateRows(),Q(!0)},g=function(n,t){var i,u,f;if(n.children.peek().length)n.expanded(!0),t&&o._updateRows();else if(i=r.internal(n),u=i._node,(u.children||u.getChildren)&&!u.children&&u.getChildren)return f=i._lifetime,i.expanding(!0),MsPortalFx.Base.Promises.cancelOnDispose(f,Q(u.getChildren())).then((function(){var r=c.createChildRows(f,u.children||[],i.level());return n.children(r),n.expanded(!0),i.expandable(!!r.length),t&&o._updateRows(),!0})).catch((function(n){return MsPortalFx.Errors.isInstanceOfErrorType(n,MsPortalFx.Errors.CanceledError)?!1:Q.resolve(n)})).finally((function(){i.expanding(!1)}));return Q(!0)},y=function(n,t){var i=o.isHierarchical(),r;if(i&&t&&(r=n?h.canExpandAll:h.canCollapseAll,r&&(i=r(e))),i){i=!1;var f=e.rowGroups(),s=e.rows(),c=f.length?f:s;u(c,(function(r){return i||(i=l(r,n,t,undefined)),!i}))}return i},p=function(n,t){return ko.ignoreDependencies((function(){var i=y(n,t);if(i){var r=e.rowGroups.peek(),u=e.rows.peek(),s=r.length?r:u;return Promise.resolve(f(s.slice(),(function(i){return a(i,n,t,!1,undefined).then((function(){return!0}))})).finally((function(){o._updateRows();var t=n?h.onExpandAll:h.onCollapseAll;t&&t(e)})))}return Promise.resolve(i)}))},v=new Map,w=function(){v.clear()},nt=function(n){u(n,(function(n){return v.set(n.id,n.expanded.peek()),!0}))};o.on({extendGrid:function(n,t,i){t.hierarchy={};r.defProps(t.hierarchy,{canCollapseAll:function(){return y(!1,!0)},canCollapseRow:function(n){return l(n,!1,!0,!1)},canCollapseRowGroup:function(n){return l(n,!1,!0,!0)},canExpandAll:function(){return y(!0,!0)},canExpandRow:function(n){return l(n,!0,!0,!1)},canExpandRowGroup:function(n){return l(n,!0,!0,!0)},collapseAll:function(){return p(!1,!1)},collapseRow:function(n){return a(n,!1,!1,!0,!1)},collapseRowGroup:function(n){return Promise.resolve(a(n,!1,!1,!0,!0))},expandAll:function(){return p(!0,!1)},expandRow:function(n){return a(n,!0,!1,!0,!1)},expandRowGroup:function(n){return Promise.resolve(a(n,!0,!1,!0,!0))}});r.defProps(i,{isHierarchical:b,expandOrCollapseRowOrRowGroup:function(n,t){return a(n,t,!0,!0,undefined)},hasHierarchicalColumn:k,_saveExpandedStates:nt,_clearExpandedStates:w})},extendRow:function(n,t,u,f,e){var o=u._node.source,p=e&&e.parentLevel||0,s=p+1,c=!1,y=!1,l,a;i.isParentNode(o)&&(o.children?o.children.length&&(c=!0,l=v.get(t.id),a=s===1,y=h.supplyInitialExpansionForItem&&i.isDataNode(o)?h.supplyInitialExpansionForItem(l,a,s,o.item):MsPortalFx.initValue(l,a)):c=!0);r.defProps(t,{expanded:ko.observable(y)});r.defLocalProps(t,{children:ko.observableArray()});r.defProps(u,{expandable:ko.observable(c),expanding:ko.observable(!1),level:ko.observable(s),setsize:ko.observable(1),posinset:ko.observable(1)})},initRow:function(n,t,i){var r=i._node,u;r.children&&(u=c.createChildRows(n,r.children,i.level()),t.children(u))},extendRowGroup:function(n,t,u){var f=u._node.source,c=1,e=!1,l=!1,o,s;i.isParentNode(f)&&(f.children?f.children.length&&(e=!0,o=v.get(t.id),s=c===1,l=h.supplyInitialExpansionForGroup&&i.isGroupNode(f)?h.supplyInitialExpansionForGroup(o,s,f.group):MsPortalFx.initValue(o,s)):e=!0);r.defProps(t,{expanded:ko.observable(l)});r.defLocalProps(t,{children:ko.observableArray()});r.defProps(u,{expandable:ko.observable(e),expanding:ko.observable(!1),level:ko.observable(c),setsize:ko.observable(1),posinset:ko.observable(1)})},initRowGroup:function(n,t,i){var r=i._node,u;r.children&&(u=c.createChildRows(n,r.children,i.level()),t.children(u))},onReset:function(){w()}})}return c}return __extends(t,n),t.prototype.createChildRows=function(n,t,i){var u=this,r=[];return t.forEach((function(t){var f=u._gridInternal._createRow(n,t,{parentLevel:i});r.push(f)})),r},t.prototype.enableHierarchy=function(n,t){this._isHierarchical(n);this._hasHierarchicalColumn(t)},t})(i.Plugin);t.Plugin=e}));
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","Fx/Controls/Toolbar"],(function(n,t,i,r,u){"use strict";function f(n,t,i,f,e,o){var h=r.extend(e,o),s=MsPortalFx.initObservable(o&&o.disabled,!1),c=r.extend(h,{disabled:ko.pureComputed({read:function(){return s()||!i(t())},write:function(n){s(n)}}),onClick:function(){f(t())}});return u.ToolbarItems.createBasicButton(n,c)}Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=t.createToolbarButton=void 0;t.createToolbarButton=f;var e=(function(n){function t(t,i,r,u,f){var o=n.call(this,t,i,r,u)||this,e=u.toolbar;if(e)r.on({extendGrid:function(n,t){t.toolbar={visible:MsPortalFx.initObservable(e.visible,!0),viewModel:null}},initGrid:function(){var n=e.createToolbar||f.createToolbar,t=n(o._lifetime,i);i.toolbar.viewModel=t}});return o}return __extends(t,n),t})(i.Plugin);t.Plugin=e}));
define("FxInternal/Controls/Grid2/Grid2.DataGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var w=(function(n){function t(t,i){var f=n.call(this,t,i)||this,nt,k;f._lastParams=null;var b=f,w=f._msPortalFxInternal,d=f.header,g=i.header||{};return w.renderMode=1,f.controlType=131,nt=ko.observableArray(),k=ko.observableArray(),r.defLocalProps(b,{rows:nt,rowGroups:k}),f._dataSource=i.dataSource,f._rowMap=new Map,f._rootNodes=ko.observableArray(),f._rootRowsOrGroups=ko.observableArray(),f._previousRowMap=null,f._refreshLifetime=null,w.visibleRows=ko.observableArray(),w._allRows=ko.observableArray(),w._allRowsLoaded=ko.observable(!0),w.totalRowCount=r.computed(t,w._allRows,k,(function(n,t){return n().length+t().length})),f._plugins=[new s.Plugin(t,b,w,i),new y.Plugin(t,b,w,i),new u.Plugin(t,b,w,i),new a.Plugin(t,b,w,i),new v.Plugin(t,b,w,i,{detectVScroll:!0}),new e.Plugin(t,b,w,i,{}),new p.Plugin(t,b,w,i,{onColumnSortingStart:function(n,t){return f._refreshInternal({message:t,params:f._lastParams},n)}}),new o.Plugin(t,b,w,i),f._hierarchyPlugin=new c.Plugin(t,b,w,i),new l.Plugin(t,b,w,i),f._groupingPlugin=new h.Plugin(t,b,w,i),],f._extendGrid(t,b,w,i),f._extendHeader(t,d,g),f._initGrid(t,b,w,i),f._initHeader(t,d,g),f}return __extends(t,n),t.prototype._initGrid=function(t,i,u,f){var e=this;n.prototype._initGrid.call(this,t,i,u,f);this._rootNodes.mapInto(t,(function(n,i){var f,o=i.id,s,h,c;return o!==undefined&&e._previousRowMap&&(s=e._previousRowMap.get(o),s&&(h=r.internal(s)._node,h.isGroup!==i.isGroup||h.item!==i.item||h.group!==i.group||s.children.peek().length||(f=s,e._previousRowMap.delete(o)))),f||(c=t.createChildLifetime(),f=i.isGroup?u._createRowGroup(c,i):u._createRow(c,i)),o!==undefined&&e._rowMap.set(o,f),f}),this._rootRowsOrGroups)},t.prototype._updateRows=function(){var c=this._msPortalFxInternal,y=[],l=[],a=[],t=[],p=[],v=!0,w=!1,o=0,tt=this._rootRowsOrGroups.peek(),h,g,nt;if(tt.length)for(var n=void 0,s=void 0,i=void 0,u=[{level:1,expanded:!0,index:0,rows:this._rootRowsOrGroups.peek()}];u.length;){var f=u[u.length-1],e=f.level,b=f.index,k=f.rows,d=f.expanded;b<k.length?(n=k[b],s=r.internal(n),i=s._node,l.push(i),f.index++,d&&p.push(n),e===1&&(s.isGroup?t.push(n):a.push(n)),s.isGroup||(y.push(n),e===2&&t.length&&a.push(n)),h=n.children&&n.children.peek(),g=d&&n.expanded&&n.expanded.peek(),h&&h.length&&u.push({level:e+1,expanded:g,index:0,rows:h}),v&&i.getChildren&&(v=!1),(i.children||i.getChildren)&&(w=!0,e>o&&(o=e))):u.pop()}nt=o>1||o===1&&!t.length;this._hierarchyPlugin.enableHierarchy(w,nt);this._groupingPlugin.enableGrouping(!!t.length);this._nodes(l);this.noData(!l.length);c._allRows(y);c._allRowsLoaded(v);c.visibleRows(p);this.rows(a);this.rowGroups(t)},t.prototype._createFormatter=function(n,t){return f.create(n,t)},t.prototype.refresh=function(n){n=n||{};var t=this._msPortalFxInternal,i=t.sortedOrders?t.sortedOrders():[];return this._refreshInternal(n,i)},t.prototype._refreshInternal=function(n,t){var i=this,e=n.reset,h=n.params,c=n.showMessage,u=this._msPortalFxInternal;this._lastParams=h;this._refreshLifetime&&!this._refreshLifetime.isDisposed()?this._refreshLifetime.dispose():(this._previousRowMap=this._rowMap,this._rowMap=new Map,e?u.trigger.onReset():(u.saveSelection&&u.saveSelection(null,!0),u._saveExpandedStates&&u._saveExpandedStates(this._rootRowsOrGroups.peek())),u.showLoadingUI(c!==!1));var f=this._refreshLifetime=this.lifetimeManager&&this.lifetimeManager.createChildLifetime(),o=c&&u.showLoadingUI()?Q.defer():null,l=MsPortalFx.Base.Promises.cancelOnDispose(f,(function(){return o?o.promise.then((function(){return Q(i._dataSource({reset:e,sortOrder:t,params:h}))})):Q(i._dataSource({reset:e,sortOrder:t,params:h}))})).then((function(n){var t=[],e;n&&r.isArray(n)&&(e=n,e.forEach((function(n){if(MsPortalFx.isNullOrUndefined(n)||MsPortalFx.isNullOrUndefined(n.item)&&MsPortalFx.isNullOrUndefined(n.group))throw new MsPortalFx.Errors.Error("dataSource returned node without item or group");t.push(u._createInternalNode(n))})));f&&f===i._refreshLifetime&&(i._rootNodes(t),u._updateRows())})).catch((function(n){f&&f===i._refreshLifetime&&(i._rootNodes([]),u._updateRows());throw n;})).finally((function(){f&&f.dispose();f&&f===i._refreshLifetime&&(u.showLoadingUI(!0),!e&&i._msPortalFxInternal.restoreSelection&&i._msPortalFxInternal.restoreSelection());i._previousRowMap&&(i._previousRowMap.forEach((function(n){var t=r.internal(n);t._lifetime.dispose()})),i._previousRowMap=null)})),s=n||{};return this.displayLoadingMessage(l,{message:s.message,completedMessage:s.completedMessage,completedDataMessage:s.completedDataMessage,completedNoDataMessage:s.completedNoDataMessage}).finally((function(){o&&o.resolve()})),l},t})(i.ViewModel);t.ViewModel=w}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Addition",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var u=(function(n){function t(t,i,u,f){var a=n.call(this,t,i,u,f)||this,o=f.addition;if(o){var e=ko.observable(),h=o.canAddRow||MsPortalFx.wrap(!0),c=o.onAddRow,v=function(){var n=e(),t=!!n&&n.dirty();return t&&h(i)},y=function(){var f=v(),t,n;return f&&(t=e(),u.transferAdditionalRows(),n=r.internal(t),n._canStopEditing(!0),n.placeholder(!1),n.excluded(!1),n.tabbable(!1),e(null),i.dirty(!0),t.cells().forEach((function(n){return n.dirty(!0)})),c&&c(t,i)),f},s=function(){return!0&&h(i)},l=function(){var l=s(),h=e(),a,c;if(l&&!h){var c=t.createChildLifetime(),v=o.createItem(),n=u._createRow(c,u._createInternalNode({item:v,id:null})),f=r.internal(n);f.placeholder(!0);f.excluded(!0);f.tabbable(!0);e(n);u.additionalRows([n]);f._canStopEditing(!1);i.editing.editRow(n)}else!l&&h&&(e(null),u.additionalRows([]),a=r.internal(h),c=a._lifetime,c.dispose())};u.on({extendGrid:function(n,t){t.addition={canAddRow:ko.pureComputed(s)}},initGrid:function(n){var t=n.createChildLifetime();ko.reactor(t,(function(){var n=e();n&&n.dirty()&&Q.nextTick((function(){t.isDisposed()||(y(),l())}))}));ko.reactor(t,(function(){s();Q.nextTick((function(){t.isDisposed()||l()}))}))},extendRow:function(n,t,i){i.placeholder=ko.observable(!1)}})}return a}return __extends(t,n),t})(i.Plugin);t.Plugin=u}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Deletion",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r,u,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var e=MsPortalFx.Resources.Strings.EditableGrid,o=MsPortalFx.Base.Images.Delete(),s=(function(n){function t(t,i,s,h){var p=n.call(this,t,i,s,h)||this,c=h.deletion;if(c){var w=c.canDeleteRows||MsPortalFx.wrap(!0),v=c.onDeleteRows,b=i.items,l=[],a=function(n){var t=!!n&&n.length;return t&&w(n,i)},y=function(n){var t=a(n);return t&&(n=n.slice(),t=n.every((function(n){return n.focused()&&i.focus.moveDown(),b.remove(n.item),!0})),t&&(l.splice.apply(l,__spreadArray([0,l.length],n)),i.dirty(!0),v&&v(n,i))),t},k=function(n,t,i){var f=r.wrapContextRows(t);return u.createToolbarButton(n,f,a,y,{telemetryName:"DeleteRows",label:e.deleteCommandText,icon:o},i)};s.on({extendGrid:function(n,t){t.deletion={};f.defProps(t.deletion,{canDeleteRows:a,deleteRows:y});f.defLocalProps(t.deletion,{createDeleteRowsCommand:k})}})}return p}return __extends(t,n),t})(i.Plugin);t.Plugin=s}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Editing",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var u=MsPortalFx.wrap(!0),f=(function(n){function t(t,f,e,o){var v=n.call(this,t,f,e,o)||this,s=o.editing||{},y=s.canEditRow||u,p=s.canStopEditingRow||MsPortalFx.wrap(Q(!0)),h=function(n){var t=!!n&&!n.disabled();return t&&y(n,f)},c=function(n){var i=h(n),t,u;return i&&!n.editing()&&(t=r.internal(n),u=t._editingLifetime=t._lifetime.createChildLifetime(),n.cells.mapInto(u,(function(t,i){var s=r.internal(i.column),e=s._definition.createCellEditor,f=r.internal(i),u=f._editorLifetime,o;e&&!u&&(u=f._editorLifetime=f._lifetime.createChildLifetime(),o=e(u,n.item,n),r.reactor(u,o,(function(n){i.editor(n())})))})),n.editing(!0)),i},l=function(n){var t=!!n,i;return t&&(i=r.internal(n),t=i._canStopEditing()&&!n.focused()&&!n.disabled()&&n.editing()&&n.validationErrors().length===0,t)?Q(p(n,f)).then((function(t){return t&&n.dirty()?n.triggerValidation().then((function(){return n.validationErrors().length===0})):t})):Q(t)},w=function(n){return l(n).then((function(t){if(t){var i=r.internal(n);i._editingLifetime&&i._editingLifetime.dispose();n.editing(!1)}return t}))},a=ko.observable().extend({rateLimit:{method:"notifyWhenChangesStop",timeout:200}});r.subscribe(t,a,(function(n){c(n)}));e.on({extendGrid:function(n,t,i){t.editing={canEditRow:h,editRow:c,canStopEditingRow:l,stopEditingRow:w};i.ariaReadOnly=!1},extendRow:function(n,t,i){t.editing=ko.observable(!1);var r=ko.observable(!0);i._canStopEditing=ko.pureComputed({read:function(){return r()&&!t.validationErrors().length},write:function(n){r(n)}});i._editingLifetime=null;t.dirty=ko.pureComputed((function(){return t.cells().some((function(n){return n.dirty()}))}))},extendColumn:function(n,t,i,r){i.ariaReadOnly=!r.createCellEditor},extendCell:function(n,t,i){Object.defineProperty(t,"editorLifetime",{enumerable:!1,writable:!0,configurable:!1,value:undefined});t.editor=ko.observable();t.dirty=ko.observable(!1);i._editorLifetime=null},initCell:function(n,t){ko.reactor(n,(function(){var n=t.editor(),i=n&&n.dirty;i&&ko.unwrap(i)&&(t.dirty(!0),f.dirty(!0))}))},rowOrRowGroupChanged:function(n,t){t&&i.isRow(t)&&t.editing()&&f.editing.stopEditingRow(t);(!n||i.isRow(n))&&a(n)},clearDirty:function(){f.rows().forEach((function(n){n.dirty()&&n.cells().forEach((function(n){if(n.dirty()){var t=n.editor(),i=t&&t.dirty;ko.isObservable(i)&&i(!1);n.dirty(!1)}}))}))}});return v}return __extends(t,n),t})(i.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Insertion",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r,u,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var e=MsPortalFx.Resources.Strings.EditableGrid,o=MsPortalFx.Base.Images.Insert(),s=(function(n){function t(t,i,s,h){var p=n.call(this,t,i,s,h)||this,c=h.insertion;if(c){var w=c.createItem,l=i.rows,b=i.items,k=MsPortalFx.wrap(!0),d=c.canInsertRow||k,v=c.onInsertRow,a=function(n){var t=n&&l().indexOf(n)>=0;return t&&d(n,i)},y=function(n){var r=a(n),f,u,t;return r&&(f=w(),u=l().indexOf(n),b.splice(u,0,f),t=l()[u],r=i.focus.moveToRow(t),i.dirty(!0),t.cells().forEach((function(n){return n.dirty(!0)})),v&&v(t,i)),r},g=function(n,t,i){var f=r.wrapContextRows(t);return u.createToolbarButton(n,f,(function(n){return n.length===1?a(n[0]):!1}),(function(n){var t=n&&n[0];return y(t)}),{telemetryName:"InsertRow",label:e.insertCommandText,icon:o},i)};s.on({extendGrid:function(n,t){t.insertion={};f.defProps(t.insertion,{canInsertRow:a,insertRow:y});f.defLocalProps(t.insertion,{createInsertRowCommand:g})}})}return p}return __extends(t,n),t})(i.Plugin);t.Plugin=s}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Reordering",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(n,t,i,r,u,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var o=MsPortalFx.Resources.Strings.EditableGrid,s=MsPortalFx.Base.Images.ArrowUp(),h=MsPortalFx.Base.Images.ArrowDown(),c=MsPortalFx.Base.Images.Upload(),l=MsPortalFx.Base.Images.Download(),e=MsPortalFx.wrap(!0),a=(function(n){function t(t,i,a,v){var et=n.call(this,t,i,a,v)||this,p=v.reordering;if(p){var y=i.rows,w=i.items,ot=MsPortalFx.initObservable(p.visible,!0),st=p.canMoveRowsToRow||e,ht=p.canMoveRowsUp||e,ct=p.canMoveRowsDown||e,lt=p.canMoveRowsTop||e,at=p.canMoveRowsBottom||e,tt=function(n,t){return!0&&st(n,t,i)},b=function(n,t){var o=tt(n,t),f,e,c,h;if(o){n=n.slice();var l=y(),s=n.length+1,u=void 0,a=[],r=[],v=void 0,p=0;for(f=0;f<l.length&&s;f++)e=l[f],c=MsPortalFx.remove(n,e)[0],c?(a.push(c),u===undefined&&(p++,u=f),s--):e===t?(v=r.length,r.push(e),u===undefined&&(u=f),s--):u!==undefined&&r.push(e);o=s===0;o&&(r.splice.apply(r,[v+p,0].concat(a)),h=[u,r.length],h=h.concat(r.map((function(n){return n.item}))),w.splice.apply(w,h),i.dirty(!0))}return o},k=function(n){var r=y(),t=n&&n.length&&r.length>n.length,u;return t&&(u=r[0],t=n.indexOf(u)<0),t&&ht(n,i)},it=function(n){var o=k(n),u,t,h,c,l;if(o){u=y();n=n.slice();var s=void 0,f=[],e=void 0,r=n.length+1;for(t=0;t<u.length&&r;t++)if(h=u[t],c=MsPortalFx.remove(n,h)[0],c){if(t===0)return!1;e===undefined&&(e=t-1,s=u[e]);r--;f.push(h);t===u.length-1&&(r--,f.push(s))}else e!==undefined&&(f.push(s),s=h,r===1&&r--);o=r===0;o&&(l=[e,f.length],w.splice.apply(w,l.concat(f.map((function(n){return n.item})))),i.dirty(!0))}return o},d=function(n){var t=y(),r=n&&n.length&&t.length>n.length,u;return r&&(u=t[t.length-1],r=n.indexOf(u)<0),r&&ct(n,i)},rt=function(n){var f=d(n),s,u,o,c,l;if(f){s=y();n=n.slice();var t=[],e=void 0,r=n.length+1,h=0;for(u=0;u<s.length&&r;u++)o=s[u],c=MsPortalFx.remove(n,o)[0],c?(e===undefined&&(e=u),t.push(o),r--):e!==undefined&&(t.splice(h,0,o),h=t.length,r===1&&r--);f=r===0;f&&(l=[e,t.length],w.splice.apply(w,l.concat(t.map((function(n){return n.item})))),i.dirty(!0))}return f},g=function(n){var t=y(),r=n&&n.length&&t.length>n.length;return r&&lt(n,i)},ut=function(n){var t=g(n),i;return t&&(i=y(),t=b(n,i[0])),t},nt=function(n){var t=y(),r=n&&n.length&&t.length>n.length;return r&&at(n,i)},ft=function(n){var t=nt(n),i;return t&&(i=y(),t=b(n,i[i.length-1])),t},vt=function(n,t,i){var f=r.wrapContextRows(t);return u.createToolbarButton(n,f,k,it,{telemetryName:"MoveUp",label:o.moveUpCommandText,icon:s},i)},yt=function(n,t,i){var f=r.wrapContextRows(t);return u.createToolbarButton(n,f,d,rt,{telemetryName:"MoveDown",label:o.moveDownCommandText,icon:h},i)},pt=function(n,t,i){var f=r.wrapContextRows(t);return u.createToolbarButton(n,f,g,ut,{telemetryName:"MoveTop",label:o.moveTopCommandText,icon:c},i)},wt=function(n,t,i){var f=r.wrapContextRows(t);return u.createToolbarButton(n,f,nt,ft,{telemetryName:"MoveBottom",label:o.moveBottomCommandText,icon:l},i)};a.on({extendGrid:function(n,t){t.reordering={};f.defProps(t.reordering,{canMoveRowsToRow:tt,moveRowsToRow:b,canMoveRowsUp:k,moveRowsUp:it,canMoveRowsDown:d,moveRowsDown:rt,canMoveRowsTop:g,moveRowsTop:ut,canMoveRowsBottom:nt,moveRowsBottom:ft,visible:ot});f.defLocalProps(t.reordering,{createMoveRowsUpCommand:vt,createMoveRowsDownCommand:yt,createMoveRowsTopCommand:pt,createMoveRowsBottomCommand:wt})}})}return et}return __extends(t,n),t})(i.Plugin);t.Plugin=a}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Validation",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Utils/ValidationHelper"],(function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var f=MsPortalFx.Base.Promises.cancelOnDispose,e=MsPortalFx.identity,o=(function(n){function t(t,i,o,s){var v=n.call(this,t,i,o,s)||this,l=function(){u.tryOnTriggerValidation(i)},h=s.validation||{},c=ko.observable(!0),a=function(){var n,r,u;return l(),n=[],h.validate&&(r=h.validate(i),n.push(Q(r))),h.validateAsync&&(u=f(t,(function(){return Q(h.validateAsync(i))})),n.push(u)),i.rows().forEach((function(i){if(ko.unwrap(i.editing)&&ko.unwrap(i.dirty)){var r=f(t,(function(){return Q(i.triggerValidation())}));n.push(r)}})),Q.all(n).then((function(n){var t=n.every(e);return c(t),t}))};o.on({extendGrid:function(n,t,i){t.validation={triggerValidation:a,valid:c};t.valid=c;t.triggerValidation=a;i.canCreateValidationFooter=!!h.createRowValidationFooter},initGrid:function(n,t){ko.reactor(n,(function(){var n=t.rows().every((function(n){return!n.validationErrors().length}));c(n)}))},extendRow:function(n,t,i){t.triggerValidation=function(){l();var n=[];return n.push.apply(n,t.cells().map((function(n){return Q(n.triggerValidation())}))),Q.all(n).then((function(n){return n.every(e)}))};t.validationErrors=ko.pureComputed((function(){var n=[];return t.cells().forEach((function(t){var i=t.customValidationErrors();i&&i.length&&n.push.apply(n,i);i=t.editorValidationErrors();i&&i.length&&n.push.apply(n,i)})),n}));i.validationFooter=ko.observable()},initRow:function(n,t,i){if(o.canCreateValidationFooter){var u=n.createChildLifetime();r.subscribe(u,t.validationErrors,(function(r){r&&r.length&&(u.dispose(),i.validationFooter(h.createRowValidationFooter(n,t)))}))}},extendCell:function(n,t){t.triggerValidation=function(){l();var n=ko.unwrap(t.editor);return n&&n.triggerValidation?(n.ensureValidation&&n.ensureValidation(!0),Q(n.triggerValidation())):Q(!0)};t.customValidationErrors=ko.observableArray();t.editorValidationErrors=ko.observable([])},initCell:function(n,t){ko.reactor(n,(function(){var i=ko.unwrap(t.editor),r=i&&i.validationResults,u=[],n;r&&(n=ko.unwrap(r),n&&n.forEach((function(n){var t=n.message;t&&!n.valid&&u.push(t)})));t.editorValidationErrors(u)}))}});return v}return __extends(t,n),t})(i.Plugin);t.Plugin=o}));
define("FxInternal/Data/BaseProjection",["require","exports"],(function(){"use strict";var n=ko.utils,t=MsPortalFx.initValue,i=MsPortalFx.initObservableArray;return (function(){function r(n){var r=this;this._lifetime=n.lifetime.createChildLifetime();this._source=n.source;this._autoRefresh=t(n.autoRefresh,!0);this.destination=i(n.destination);this._internalEdit=!1;this.destination.subscribe(this._lifetime,(function(){if(!r._internalEdit)throw new Error("Modification of projection array not allowed while the projection is active.");}));this._autoRefresh&&FxImpl.subscribeArrayEdits(this._lifetime,this._source,(function(n){r._update(n)}))}return r.prototype._replace=function(t){var i=this.destination.peek(),r=n.compareArrays(i,t,{sparse:!0});this._apply(r)},r.prototype._apply=function(t){var i=n.createArraySplices(t);try{this._internalEdit=!0;i.length?n.applyArraySplices(this.destination,i):this.destination.notifySubscribers([],"arrayChange")}finally{this._internalEdit=!1}},r})()}));
define("FxInternal/Data/JoinProjection",["require","exports","FxInternal/Data/BaseProjection"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(n){function t(t){var i=n.call(this,t)||this;return i._joinSource=t.joinSource,i._transferring=!1,i._autoRefresh&&FxImpl.subscribeArrayEdits(i._lifetime,i._joinSource,(function(n){i._updateJoin(n)})),i.refresh(),i}return __extends(t,n),t.prototype.refresh=function(){var n=this._source().concat(this._joinSource());this._replace(n)},t.prototype._update=function(n){this._transferring||this._apply(n)},t.prototype._updateJoin=function(n){if(!this._transferring){var t=this._source().length,i=n.map((function(n){return MsPortalFx.extend2(n,{index:n.index+t})}));this._apply(i)}},t.prototype.transfer=function(n){try{this._transferring=!0;n()}finally{this._transferring=!1}},t})(i);t.default=r}));
define("FxInternal/Controls/Grid2/Grid2.EditableGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.EditableGrid.Addition","FxInternal/Controls/Grid2/Grid2.EditableGrid.Deletion","FxInternal/Controls/Grid2/Grid2.EditableGrid.Editing","FxInternal/Controls/Grid2/Grid2.EditableGrid.Insertion","FxInternal/Controls/Grid2/Grid2.EditableGrid.Reordering","FxInternal/Controls/Grid2/Grid2.EditableGrid.Validation","FxInternal/Data/JoinProjection","Fx/Controls/Toolbar"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var nt=(function(n){function t(t,i){var nt=n.call(this,t,i)||this,rt,tt,it;nt.controlType=125;rt=ko.observableArray();nt._appendRow=null;var d=nt,f=nt._msPortalFxInternal,ut=nt.header,ft=i.header||{};return f.addEventTriggers("clearDirty"),tt=ko.observable(!1),nt.dirty=ko.computed(t,{read:function(){return tt()},write:function(n){tt(n);n||f.trigger.clearDirty()}}),it=MsPortalFx.initObservableArray(i.items),r.defLocalProps(d,{items:it,rows:rt}),f._allRows=ko.observableArray(),f.visibleRows=f._allRows,f.totalRowCount=ko.observable(0),f._allRowsLoaded=ko.observable(!0),r.defLocalProps(f,{additionalRows:ko.observableArray(),transferAdditionalRows:function(){nt._join.transfer((function(){var n=f.additionalRows();f.additionalRows([]);n.forEach((function(n){nt._appendRow=n;it.push(n.item)}))}));nt._appendRow=null}}),nt._plugins=[new o.Plugin(t,d,f,i),new s.Plugin(t,d,f,i),new l.Plugin(t,d,f,i,{enabledByDefault:!0}),new u.Plugin(t,d,f,i),new h.Plugin(t,d,f,i),new c.Plugin(t,d,f,i),new e.Plugin(t,d,f,i,{maxButtonCommands:i.deletion?2:undefined,supplyButtonCommands:function(n,t,i){var r=[],u=i.contextMenu.maxButtonCommands;return i.deletion&&r.length<u&&r.push(i.deletion.createDeleteRowsCommand(n,t)),r},supplyMenuCommands:function(n,t,i){var r=[];return i.deletion&&r.push(i.deletion.createDeleteRowsCommand(n,t)),i.reordering&&(r.push(i.reordering.createMoveRowsUpCommand(n,t)),r.push(i.reordering.createMoveRowsDownCommand(n,t)),r.push(i.reordering.createMoveRowsTopCommand(n,t)),r.push(i.reordering.createMoveRowsBottomCommand(n,t))),i.insertion&&r.push(i.insertion.createInsertRowCommand(n,t)),r},supplyMenuBulkCommands:function(n,t,i){var r=[];return i.deletion&&r.push(i.deletion.createDeleteRowsCommand(n,t)),i.reordering&&(r.push(i.reordering.createMoveRowsUpCommand(n,t)),r.push(i.reordering.createMoveRowsDownCommand(n,t)),r.push(i.reordering.createMoveRowsTopCommand(n,t)),r.push(i.reordering.createMoveRowsBottomCommand(n,t))),i.insertion&&r.push(i.insertion.createInsertRowCommand(n,t)),r}}),new a.Plugin(t,d,f,i,{createToolbar:function(n,t){var i=t.reordering,u=t.insertion,f=t.deletion,r=t.selection;return g.create(n,{showLabels:!0,items:[i&&i.createMoveRowsUpCommand(n,r),i&&i.createMoveRowsDownCommand(n,r),i&&i.createMoveRowsTopCommand(n,r),i&&i.createMoveRowsBottomCommand(n,r),u&&u.createInsertRowCommand(n,r),f&&f.createDeleteRowsCommand(n,r),].filter((function(n){return!!n}))})}}),new p.Plugin(t,d,f,i),new k.Plugin(t,d,f,i),new v.Plugin(t,d,f,i),new y.Plugin(t,d,f,i),new w.Plugin(t,d,f,i),new b.Plugin(t,d,f,i),],nt._extendGrid(t,d,f,i),nt._extendHeader(t,ut,ft),nt._initGrid(t,d,f,i),nt._initHeader(t,ut,ft),nt}return __extends(t,n),t.prototype._initGrid=function(t,i,u,f){var o=this,e;n.prototype._initGrid.call(this,t,i,u,f);r.subscribeAndRun(t,this.items,(function(n){u.totalRowCount(n.length)}));e=this.items.mapInto(t,(function(n,t){var i=o._appendRow,f,e;return i?(f=r.internal(i),n.registerForDispose(f._lifetime),i):(e=u._createInternalNode({item:t,id:null}),u._createRow(n,e))}),i.rows);i.rows.mapInto(t,(function(n,t){return r.internal(t)._node}),this._nodes);this.noData(!1);this._join=new d.default({lifetime:t,source:e,joinSource:u.additionalRows,destination:u._allRows})},t.prototype._createFormatter=function(n,t){return f.create(n,t)},t})(i.ViewModel);t.ViewModel=nt}));
define("FxInternal/Controls/Grid2/Grid2.PagedDataGrid.Paging",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","Fx/Controls/Pager"],(function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var f=MsPortalFx.Resources.Strings,e=(function(n){function t(t,i,e,o,s){var k=n.call(this,t,i,e,o)||this,a=o.paging||{};if(a){var d=a.pageLoadingMessage||f.CoreGrid.loading,g=MsPortalFx.initValue(a.pageSize,100),nt=e._skip,l=e._take,tt=e._totalCount;l(g);var c=ko.computed(t,(function(){return Math.ceil(tt()/l())})),v=ko.computed(t,(function(){return nt()/l()+(c()?1:0)})),h=u.create(t,{visible:ko.pureComputed((function(){return c()>1})),loadPage:function(n){return Q(b(n)).then((function(){var n=c(),t=v();return{pageNumber:t,totalPageCount:n}}))}}),y=function(n){return n===1||n>=1&&n<=c()},p=function(){return h.canLoadNextPage()},w=function(){return h.canLoadPreviousPage()},b=function(n){return ko.ignoreDependencies((function(){var t=y(n),i,r;return t?(i=l(),r=((n||1)-1)*i,s.onLoadPage(r,i,d).then((function(){return t}))):Q(t)}))},it=function(){return ko.ignoreDependencies((function(){var n=p();return n?h.loadNextPage():Q(n)}))},rt=function(){return ko.ignoreDependencies((function(){var n=w();return n?h.loadPreviousPage():Q(n)}))};e.on({extendGrid:function(n,t,i){t.paging={canLoadNextPage:p,canLoadPage:y,canLoadPreviousPage:w,loadNextPage:it,loadPage:b,loadPreviousPage:rt};i.pager=h},initGrid:function(n){r.reactor(n,v,c,(function(n,t){var i=h.state.peek(),r=t(),u=n();(u!==i.pageNumber||r!==i.totalPageCount)&&h.state({pageNumber:u,totalPageCount:r})}))}})}return k}return __extends(t,n),t})(i.Plugin);t.Plugin=e}));
define("FxInternal/Controls/Grid2/Grid2.PagedDataGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.PagedDataGrid.Paging","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var b=(function(n){function t(t,i){var b=n.call(this,t,i)||this,tt,d;b._lastParams=null;var k=b,f=b._msPortalFxInternal,g=b.header,nt=i.header||{};f.renderMode=1;b.controlType=132;tt=ko.observableArray();d=ko.observableArray();r.defLocalProps(k,{rows:tt,rowGroups:d});b._dataSource=i.dataSource;b._rowMap=new Map;b._rootNodes=ko.observableArray();b._rootRowsOrGroups=ko.observableArray();b._previousRowMap=null;b._refreshLifetime=null;f.visibleRows=ko.observableArray();f._allRows=ko.observableArray();f._allRowsLoaded=ko.observable(!0);f.totalRowCount=r.computed(t,f._allRows,d,(function(n,t){return n().length+t().length}));f._skip=ko.observable(0);f._take=ko.observable(0);f._totalCount=ko.observable(0);b._plugins=[new s.Plugin(t,k,f,i),new p.Plugin(t,k,f,i,{virtualized:!0}),new u.Plugin(t,k,f,i),new v.Plugin(t,k,f,i),new y.Plugin(t,k,f,i),new e.Plugin(t,k,f,i,{}),new w.Plugin(t,k,f,i,{onColumnSortingStart:function(n,t){var i=f._take.peek();return b._refreshInternal({message:t,params:b._lastParams},n,0,i)}}),new o.Plugin(t,k,f,i),b._hierarchyPlugin=new c.Plugin(t,k,f,i),new l.Plugin(t,k,f,i),b._pagingPlugin=new a.Plugin(t,k,f,i,{onLoadPage:function(n,t,i){var r=f.sortedOrders?f.sortedOrders():[];return b._refreshInternal({message:i,params:b._lastParams},r,n,t)}}),b._groupingPlugin=new h.Plugin(t,k,f,i),];b._extendGrid(t,k,f,i);b._extendHeader(t,g,nt);b._initGrid(t,k,f,i);b._initHeader(t,g,nt);f.on({onViewportChanged:function(){}});return b}return __extends(t,n),t.prototype._initGrid=function(t,i,r,u){var f=this;n.prototype._initGrid.call(this,t,i,r,u);this._rootNodes.mapInto(t,(function(n,i){var u,o=i.id,e;return u||(e=t.createChildLifetime(),u=i.isGroup?r._createRowGroup(e,i):r._createRow(e,i)),o!==undefined&&f._rowMap.set(o,u),u}),this._rootRowsOrGroups)},t.prototype._updateRows=function(){var c=this._msPortalFxInternal,y=[],l=[],a=[],t=[],p=[],v=!0,w=!1,o=0,tt=this._rootRowsOrGroups.peek(),h,g,nt;if(tt.length)for(var n=void 0,s=void 0,i=void 0,u=[{level:1,expanded:!0,index:0,rows:this._rootRowsOrGroups.peek()}];u.length;){var f=u[u.length-1],e=f.level,b=f.index,k=f.rows,d=f.expanded;b<k.length?(n=k[b],s=r.internal(n),i=s._node,l.push(i),f.index++,d&&p.push(n),e===1&&(s.isGroup?t.push(n):a.push(n)),s.isGroup||(y.push(n),e===2&&t.length&&a.push(n)),h=n.children&&n.children.peek(),g=d&&n.expanded&&n.expanded.peek(),h&&h.length&&u.push({level:e+1,expanded:g,index:0,rows:h}),v&&i.getChildren&&(v=!1),(i.children||i.getChildren)&&(w=!0,e>o&&(o=e))):u.pop()}nt=o>1||o===1&&!t.length;this._hierarchyPlugin.enableHierarchy(w,nt);this._groupingPlugin.enableGrouping(!!t.length);this._nodes(l);this.noData(!l.length);c._allRows(y);c._allRowsLoaded(v);c.visibleRows(p);this.rows(a);this.rowGroups(t)},t.prototype._createFormatter=function(n,t){return f.create(n,t)},t.prototype.refresh=function(n){n=n||{};var t=this._msPortalFxInternal,i=t.sortedOrders?t.sortedOrders():[],r=t._take.peek();return this._refreshInternal(n,i,0,r)},t.prototype._refreshInternal=function(n,t,i,u){var e=this,s=n.reset,l=n.params,a=n.showMessage,f=this._msPortalFxInternal;this._lastParams=l;this._refreshLifetime&&!this._refreshLifetime.isDisposed()?this._refreshLifetime.dispose():(this._previousRowMap=this._rowMap,this._rowMap=new Map,s?f.trigger.onReset():(f.saveSelection&&f.saveSelection(null,!0),f._saveExpandedStates&&f._saveExpandedStates(this._rootRowsOrGroups.peek())),f.showLoadingUI(a!==!1));var o=this._refreshLifetime=this.lifetimeManager&&this.lifetimeManager.createChildLifetime(),h=a&&f.showLoadingUI()?Q.defer():null,v=MsPortalFx.Base.Promises.cancelOnDispose(o,(function(){return h?h.promise.then((function(){return Q(e._dataSource({reset:s,sortOrder:t,params:l,skip:i,take:u}))})):Q(e._dataSource({reset:s,sortOrder:t,params:l,skip:i,take:u}))})).then((function(n){var t=[],s;n&&n.nodes&&r.isArray(n.nodes)&&(s=n.nodes,s.forEach((function(n){if(MsPortalFx.isNullOrUndefined(n)||MsPortalFx.isNullOrUndefined(n.item)&&MsPortalFx.isNullOrUndefined(n.group))throw new MsPortalFx.Errors.Error("dataSource returned node without item or group");t.push(f._createInternalNode(n))})));o&&o===e._refreshLifetime&&(e._rootNodes(t),f._take(u),f._skip(i),f._totalCount(n.totalCount),f._updateRows())})).catch((function(n){o&&o===e._refreshLifetime&&(e._rootNodes([]),f._take(u),f._skip(i),f._totalCount(0),f._updateRows());throw n;})).finally((function(){o&&o.dispose();o&&o===e._refreshLifetime&&(f.showLoadingUI(!0),!s&&e._msPortalFxInternal.restoreSelection&&e._msPortalFxInternal.restoreSelection());e._previousRowMap&&(e._previousRowMap.forEach((function(n){var t=r.internal(n);t._lifetime.dispose()})),e._previousRowMap=null)})),c=n||{};return this.displayLoadingMessage(v,{message:c.message,completedMessage:c.completedMessage,completedDataMessage:c.completedDataMessage,completedNoDataMessage:c.completedNoDataMessage}).finally((function(){h&&h.resolve()})),v},t})(i.ViewModel);t.ViewModel=b}));
define("FxInternal/Controls/Grid2/Grid2.SequentialDataGrid.Paging",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","Fx/Controls/Button"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Plugin=void 0;var u=MsPortalFx.Resources.Strings,f=(function(n){function t(t,i,f,e,o){var a=n.call(this,t,i,f,e)||this,h=e.paging||{};if(h){var v=h.pageLoadingMessage||u.CoreGrid.loading,y=u.SequentialDataGrid.loadAdditionalPageText,c=f._token,s=function(){var n=c();return!MsPortalFx.isNullOrUndefined(n)},l=function(){return ko.ignoreDependencies((function(){var n=s(),t;return n?(t=c(),o.onLoadAdditionalPage(t,v).thenResolve(!0)):Q(n)}))},p=r.create(t,{text:y,disabled:ko.pureComputed((function(){return i.disabled()||i.loading()||!s()})),visible:ko.pureComputed((function(){return s()})),onClick:function(){l()}});f.on({extendGrid:function(n,t,i){t.paging={canLoadAdditionalPage:s,loadAdditionalPage:l};i.loadAdditionalPageButton=p}})}return a}return __extends(t,n),t})(i.Plugin);t.Plugin=f}));
define("FxInternal/Controls/Grid2/Grid2.SequentialDataGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.SequentialDataGrid.Paging","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var b=(function(n){function t(t,i){var b=n.call(this,t,i)||this,tt,d;b._lastParams=null;var k=b,f=b._msPortalFxInternal,g=b.header,nt=i.header||{};return b.controlType=133,tt=ko.observableArray(),d=ko.observableArray(),r.defLocalProps(k,{rows:tt,rowGroups:d}),f._token=ko.observable(null),b._dataSource=i.dataSource,b._rowMap=new Map,b._rootNodes=ko.observableArray(),b._rootRowsOrGroups=ko.observableArray(),b._previousRowMap=null,b._refreshLifetime=null,f.visibleRows=ko.observableArray(),f._allRows=ko.observableArray(),f._allRowsLoaded=ko.observable(!0),f.totalRowCount=r.computed(t,f._allRows,d,(function(n,t){return n().length+t().length})),b._plugins=[new s.Plugin(t,k,f,i),new p.Plugin(t,k,f,i,{virtualized:!0}),new u.Plugin(t,k,f,i),new v.Plugin(t,k,f,i),new y.Plugin(t,k,f,i),new e.Plugin(t,k,f,i,{}),new w.Plugin(t,k,f,i,{onColumnSortingStart:function(n,t){return f._token(null),b._refreshInternal({message:t,params:b._lastParams},n,f._token())}}),new o.Plugin(t,k,f,i),b._hierarchyPlugin=new c.Plugin(t,k,f,i),new l.Plugin(t,k,f,i),b._pagingPlugin=new a.Plugin(t,k,f,i,{onLoadAdditionalPage:function(n,t){var i=f.sortedOrders?f.sortedOrders():[];return b._refreshInternal({message:t,params:b._lastParams},i,f._token())}}),b._groupingPlugin=new h.Plugin(t,k,f,i),],b._extendGrid(t,k,f,i),b._extendHeader(t,g,nt),b._initGrid(t,k,f,i),b._initHeader(t,g,nt),b}return __extends(t,n),t.prototype._initGrid=function(t,i,r,u){var f=this;n.prototype._initGrid.call(this,t,i,r,u);this._rootNodes.mapInto(t,(function(n,i){var u,o=i.id,e;return u||(e=t.createChildLifetime(),u=i.isGroup?r._createRowGroup(e,i):r._createRow(e,i)),o!==undefined&&f._rowMap.set(o,u),u}),this._rootRowsOrGroups)},t.prototype._updateRows=function(){var c=this._msPortalFxInternal,y=[],l=[],a=[],t=[],p=[],v=!0,w=!1,o=0,tt=this._rootRowsOrGroups.peek(),h,g,nt;if(tt.length)for(var n=void 0,s=void 0,i=void 0,u=[{level:1,expanded:!0,index:0,rows:this._rootRowsOrGroups.peek()}];u.length;){var f=u[u.length-1],e=f.level,b=f.index,k=f.rows,d=f.expanded;b<k.length?(n=k[b],s=r.internal(n),i=s._node,l.push(i),f.index++,d&&p.push(n),e===1&&(s.isGroup?t.push(n):a.push(n)),s.isGroup||(y.push(n),e===2&&t.length&&a.push(n)),h=n.children&&n.children.peek(),g=d&&n.expanded&&n.expanded.peek(),h&&h.length&&u.push({level:e+1,expanded:g,index:0,rows:h}),v&&i.getChildren&&(v=!1),(i.children||i.getChildren)&&(w=!0,e>o&&(o=e))):u.pop()}nt=o>1||o===1&&!t.length;this._hierarchyPlugin.enableHierarchy(w,nt);this._groupingPlugin.enableGrouping(!!t.length);this._nodes(l);this.noData(!l.length);c._allRows(y);c._allRowsLoaded(v);c.visibleRows(p);this.rows(a);this.rowGroups(t)},t.prototype._createFormatter=function(n,t){return f.create(n,t)},t.prototype.refresh=function(n){n=n||{};n=MsPortalFx.extend2(n,{reset:!0});var t=this._msPortalFxInternal,i=t.sortedOrders?t.sortedOrders():[];return t._token(null),this._refreshInternal(n,i,t._token)},t.prototype._refreshInternal=function(n,t){var u=this,e=n.reset,h=n.params,c=n.showMessage,i=this._msPortalFxInternal;this._lastParams=h;this._refreshLifetime&&!this._refreshLifetime.isDisposed()?this._refreshLifetime.dispose():(this._previousRowMap=this._rowMap,this._rowMap=new Map,e?(i._token(null),i.trigger.onReset()):(i.saveSelection&&i.saveSelection(null,!0),i._saveExpandedStates&&i._saveExpandedStates(this._rootRowsOrGroups.peek())),i.showLoadingUI(c!==!1));var f=this._refreshLifetime=this.lifetimeManager&&this.lifetimeManager.createChildLifetime(),o=c&&i.showLoadingUI()?Q.defer():null,l=MsPortalFx.Base.Promises.cancelOnDispose(f,(function(){return o?o.promise.then((function(){return Q(u._dataSource({reset:e,sortOrder:t,params:h,token:i._token()}))})):Q(u._dataSource({reset:e,sortOrder:t,params:h,token:i._token()}))})).then((function(n){var e,t=[],o;n&&n.nodes&&r.isArray(n.nodes)&&(o=n.nodes,o.forEach((function(n){if(MsPortalFx.isNullOrUndefined(n)||MsPortalFx.isNullOrUndefined(n.item)&&MsPortalFx.isNullOrUndefined(n.group))throw new MsPortalFx.Errors.Error("dataSource returned node without item or group");t.push(i._createInternalNode(n))})));f&&f===u._refreshLifetime&&(MsPortalFx.isNullOrUndefined(i._token())?u._rootNodes(t):(e=u._rootNodes).push.apply(e,t),i._token(n.token),i._updateRows())})).catch((function(n){f&&f===u._refreshLifetime&&(u._rootNodes([]),i._updateRows());throw n;})).finally((function(){f&&f.dispose();f&&f===u._refreshLifetime&&(i.showLoadingUI(!0),!e&&u._msPortalFxInternal.restoreSelection&&u._msPortalFxInternal.restoreSelection());u._previousRowMap&&(u._previousRowMap.forEach((function(n){var t=r.internal(n);t._lifetime.dispose()})),u._previousRowMap=null)})),s=n||{};return this.displayLoadingMessage(l,{message:s.message,completedMessage:s.completedMessage,completedDataMessage:s.completedDataMessage,completedNoDataMessage:s.completedNoDataMessage}).finally((function(){o&&o.resolve()})),l},t})(i.ViewModel);t.ViewModel=b}))