define("MsPortalImpl/Base/Base.Selectable2.SupplyBladeReference",["require","exports","Fx/DependencyInjection","MsPortalImpl/Base/Base.Pipeline","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.Selectable2.Common"],(function(n,t,i,r,u,f){"use strict";function o(n,t){var i=FxImpl.Po.getMetadataId(n);return t&&t.extension||i&&i.split("-")[0]}Object.defineProperty(t,"__esModule",{value:!0});t.SupplyBladeReferenceHandler=void 0;var s=MsPortalFx.Base,c=s.Diagnostics,e=MsPortalFx.Errors,h=(function(){function t(n){this._resources=n}return t.prototype.fetchRequest=function(t,i){return __awaiter(this,void 0,void 0,(function(){var r,c,f,s,h,l;return __generator(this,(function(a){switch(a.label){case 0:r=this._resources.selectable;a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._resources.extensionVm.fetchRequest(i.operationId)];case 2:if(c=a.sent(),i.bladeRequest=c,f=c.bladeReference,MsPortalFx.isNullOrUndefined(f))throw new e.Error("No blade reference is supplied.");return r.referenceOverride&&((r.referenceOverride.bladeName!==f.bladeName||r.referenceOverride.extensionName!==f.extensionName)&&u.logToExtension(n,o(this._resources.extensionVm),2,"The blade reference '"+r.referenceOverride.extensionName+"/"+r.referenceOverride.bladeName+"' provided to the menu blade does not match the blade reference '"+f.extensionName+"/"+f.bladeName+"' returned from supplyBladeReference."),i.bladeRequest.bladeReference=r.referenceOverride,r.referenceOverride=null),i.bladeRequest.bladeReference.parameters=ko.toJS(i.bladeRequest.bladeReference.parameters),[3,4];case 3:return s=a.sent(),h=e.Error.isBaseOf(s)?s:undefined,r.isDisposed()||h&&h.errorLevel===0||(l="supplyBladeReference failed.\r\n "+MsPortalFx.getLogFriendlyMessage(s),u.logToExtension(n,o(this._resources.extensionVm,h),2,l)),t.indicateTaskComplete(),[3,4];case 4:return[2]}}))}))},__decorate([__metadata("fx:diagnostics",[n,"SupplyBladeReferenceHandler.prototype"]),r.Step(1),__metadata("design:type",Function),__metadata("design:paramtypes",[r.Task,f.OpenBladeTaskArgs]),__metadata("design:returntype",Promise)],t.prototype,"fetchRequest",null),__decorate([__metadata("fx:diagnostics",[n,"SupplyBladeReferenceHandler"]),i.Class("pipeline"),__metadata("design:paramtypes",[f.OpenBladeResources])],t)})();t.SupplyBladeReferenceHandler=h}))